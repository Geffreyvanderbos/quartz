function j2(n){for(var o=[],t=1,e,i,a,s;t<arguments.length;t++)o[t-1]=arguments[t];return e=Array.from(typeof n=="string"?[n]:n),e[e.length-1]=e[e.length-1].replace(/\r?\n([\t ]*)$/,""),i=e.reduce(function(e,n){var t=n.match(/\n([\t ]+|(?!\s).)/g);return t?e.concat(t.map(function(n){var e,t;return(t=(e=n.match(/[\t ]/g))===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0})):e},[]),i.length&&(a=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g"),e=e.map(function(e){return e.replace(a,`
`)})),e[0]=e[0].replace(/^\r?\n/,""),s=e[0],o.forEach(function(t,i){var n=s.match(/(?:^|\n)( *)$/),a=n?n[1]:"",o=t;typeof t=="string"&&t.includes(`
`)&&(o=String(t).split(`
`).map(function(e,t){return t===0?e:""+a+e}).join(`
`)),s+=o+e[i+1]}),s}bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aU(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}rh={},h5={get exports(){return rh},set exports(e){rh=e}},function(e){(function(n,t){e.exports=t()})(bc,function(){var b=1e3,g=6e4,y=36e5,p="millisecond",a="second",r="minute",c="hour",o="day",h="week",n="month",j="quarter",s="year",l="date",_="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},v=function(e,n,s){var t=String(e);return!t||t.length>=n?e:""+Array(n+1-t.length).join(s)+e},E={s:v,z:function(n){var e=-n.utcOffset(),t=Math.abs(e),s=Math.floor(t/60),o=t%60;return(e<=0?"+":"-")+v(s,2,"0")+":"+v(o,2,"0")},m:function r(e,t){if(e.date()<t.date())return-r(t,e);var o=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(o,n),a=t-s<0,i=e.clone().add(o+(a?-1:1),n);return+(-(o+(t-s)/(a?s-i:i-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:n,y:s,w:h,d:o,D:l,h:c,m:r,s:a,ms:p,Q:j}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},d="en",i={},m,w;i[d]=O;var f=function(e){return e instanceof m},u=function c(t,o,a){if(!t)return d;if(typeof t=="string"){{var e,n=t.toLowerCase(),s,r;if(i[n]&&(e=n),o&&(i[n]=o,e=n),s=t.split("-"),!e&&s.length>1)return c(s[0])}}else r=t.name,i[r]=t,e=r;return!a&&e&&(d=e),e||!a&&d},t=function(e,n){if(f(e))return e.clone();var t=typeof n=="object"?n:{};return t.date=e,t.args=arguments,new m(t)},e=E;return e.l=u,e.i=f,e.w=function(n,e){return t(n,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})},m=function(){function m(e){this.$L=u(e.locale,null,!0),this.parse(e)}var d=m.prototype;return d.parse=function(t){this.$d=function(s){var n=s.date,a=s.utc,t,o,i;if(n===null)return new Date(NaN);if(e.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n))if(t=n.match(C),t)return o=t[2]-1||0,i=(t[7]||"0").substring(0,3),a?new Date(Date.UTC(t[1],o,t[3]||1,t[4]||0,t[5]||0,t[6]||0,i)):new Date(t[1],o,t[3]||1,t[4]||0,t[5]||0,t[6]||0,i);return new Date(n)}(t),this.$x=t.x||{},this.init()},d.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},d.$utils=function(){return e},d.isValid=function(){return this.$d.toString()!==_},d.isSame=function(s,e){var n=t(s);return this.startOf(e)<=n&&n<=this.endOf(e)},d.isAfter=function(e,n){return t(e)<this.startOf(n)},d.isBefore=function(e,n){return this.endOf(n)<t(e)},d.$g=function(t,n,s){return e.u(t)?this[n]:this.set(s,t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(_,j){var t=this,i=!!e.u(j)||j,y=e.p(_),d=function(n,s){var a=e.w(t.$u?Date.UTC(t.$y,s,n):new Date(t.$y,s,n),t);return i?a:a.endOf(o)},u=function(n,s){return e.w(t.toDate()[n].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(s)),t)},p=this.$W,f=this.$M,b=this.$D,m="set"+(this.$u?"UTC":""),v,g;switch(y){case s:return i?d(1,0):d(31,11);case n:return i?d(1,f):d(0,f+1);case h:return v=this.$locale().weekStart||0,g=(p<v?p+7:p)-v,d(i?b-g:b+(6-g),f);case o:case l:return u(m+"Hours",0);case c:return u(m+"Minutes",1);case r:return u(m+"Seconds",2);case a:return u(m+"Milliseconds",3);default:return this.clone()}},d.endOf=function(e){return this.startOf(e,!1)},d.$set=function(g,f){var t,u=e.p(g),i="set"+(this.$u?"UTC":""),h=(t={},t[o]=i+"Date",t[l]=i+"Date",t[n]=i+"Month",t[s]=i+"FullYear",t[c]=i+"Hours",t[r]=i+"Minutes",t[a]=i+"Seconds",t[p]=i+"Milliseconds",t)[u],m=u===o?this.$D+(f-this.$W):f,d;return u===n||u===s?(d=this.clone().set(l,1),d.$d[h](m),d.init(),this.$d=d.set(l,Math.min(this.$D,d.daysInMonth())).$d):h&&this.$d[h](m),this.init(),this},d.set=function(e,t){return this.clone().$set(e,t)},d.get=function(t){return this[e.p(t)]()},d.add=function(i,f){u=this,i=Number(i);var l,u,d=e.p(f),m=function(s){var n=t(u);return e.w(n.date(n.date()+Math.round(s*i)),u)},p,v;return d===n?this.set(n,this.$M+i):d===s?this.set(s,this.$y+i):d===o?m(1):d===h?m(7):(p=(l={},l[r]=g,l[c]=y,l[a]=b,l)[d]||1,v=this.$d.getTime()+i*p,e.w(v,this))},d.subtract=function(e,t){return this.add(-1*e,t)},d.format=function(h){if(m=this,t=this.$locale(),!this.isValid())return t.invalidDate||_;var m,t,r=h||"YYYY-MM-DDTHH:mm:ssZ",u=e.z(this),n=this.$H,s=this.$m,o=this.$M,a=t.weekdays,d=t.months,i=function(e,t,n,s){return e&&(e[t]||e(m,r))||n[t].slice(0,s)},c=function(t){return e.s(n%12||12,t,"0")},l=t.meridiem||function(t,s,n){var e=t<12?"AM":"PM";return n?e.toLowerCase():e},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:e.s(o+1,2,"0"),MMM:i(t.monthsShort,o,d,3),MMMM:i(d,o),D:this.$D,DD:e.s(this.$D,2,"0"),d:String(this.$W),dd:i(t.weekdaysMin,this.$W,a,2),ddd:i(t.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(n),HH:e.s(n,2,"0"),h:c(1),hh:c(2),a:l(n,s,!0),A:l(n,s,!1),m:String(s),mm:e.s(s,2,"0"),s:String(this.$s),ss:e.s(this.$s,2,"0"),SSS:e.s(this.$ms,3,"0"),Z:u};return r.replace(x,function(e,t){return t||f[e]||u.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(p,v,_){var i,f=e.p(v),u=t(p),m=(u.utcOffset()-this.utcOffset())*g,l=this-u,d=e.m(this,u);return d=(i={},i[s]=d/12,i[n]=d,i[j]=d/3,i[h]=(l-m)/6048e5,i[o]=(l-m)/864e5,i[c]=l/y,i[r]=l/g,i[a]=l/b,i)[f]||l,_?d:e.a(d)},d.daysInMonth=function(){return this.endOf(n).$D},d.$locale=function(){return i[this.$L]},d.locale=function(e,s){if(!e)return this.$L;var t=this.clone(),n=u(e,s,!0);return n&&(t.$L=n),t},d.clone=function(){return e.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},m}(),w=m.prototype,t.prototype=w,[["$ms",p],["$s",a],["$m",r],["$H",c],["$W",o],["$M",n],["$y",s],["$D",l]].forEach(function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),t.extend=function(e,n){return e.$i||(e(n,m,t),e.$i=!0),t},t.locale=u,t.isDayjs=f,t.unix=function(e){return t(1e3*e)},t.en=i[d],t.Ls=i,t.p={},t})}(h5);const kr=rh,Dn={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},B={trace:(...e)=>{},debug:(...e)=>{},info:(...e)=>{},warn:(...e)=>{},error:(...e)=>{},fatal:(...e)=>{}},C1=function(t="fatal"){let e=Dn.fatal;typeof t=="string"?(t=t.toLowerCase(),t in Dn&&(e=Dn[t])):typeof t=="number"&&(e=t),B.trace=()=>{},B.debug=()=>{},B.info=()=>{},B.warn=()=>{},B.error=()=>{},B.fatal=()=>{},e<=Dn.fatal&&(B.fatal=console.error?console.error.bind(console,Fr("FATAL"),"color: orange"):console.log.bind(console,"[35m",Fr("FATAL"))),e<=Dn.error&&(B.error=console.error?console.error.bind(console,Fr("ERROR"),"color: orange"):console.log.bind(console,"[31m",Fr("ERROR"))),e<=Dn.warn&&(B.warn=console.warn?console.warn.bind(console,Fr("WARN"),"color: orange"):console.log.bind(console,"[33m",Fr("WARN"))),e<=Dn.info&&(B.info=console.info?console.info.bind(console,Fr("INFO"),"color: lightblue"):console.log.bind(console,"[34m",Fr("INFO"))),e<=Dn.debug&&(B.debug=console.debug?console.debug.bind(console,Fr("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",Fr("DEBUG"))),e<=Dn.trace&&(B.trace=console.debug?console.debug.bind(console,Fr("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",Fr("TRACE")))},Fr=e=>`%c${kr().format("ss.SSS")} : ${e} : `;S1={},Object.defineProperty(S1,"__esModule",{value:!0});var Jn=S1.sanitizeUrl=void 0,f5=/^([^\w]*)(javascript|data|vbscript)/im,d5=/&#(\w+)(^\w|;)?/g,p5=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,g5=/^([^:]+):/gm,y5=[".","/"];function m5(e){return y5.indexOf(e[0])>-1}function b5(e){return e.replace(d5,function(t,e){return String.fromCharCode(e)})}function _5(n){var e=b5(n||"").replace(p5,"").trim(),t,s;return e?m5(e)?e:(t=e.match(g5),!t)?e:(s=t[0],f5.test(s)?"about:blank":e):"about:blank"}Jn=S1.sanitizeUrl=_5;function Go(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function x5(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function A1(e){let t,n,s;e.length!==2?(t=Go,n=(t,n)=>Go(e(t),n),s=(t,n)=>e(t)-n):(t=e===Go||e===x5?e:v5,n=e,s=e);function o(i,o,e=0,s=i.length){if(e<s){if(t(o,o)!==0)return s;do{const t=e+s>>>1;n(i[t],o)<0?e=t+1:s=t}while(e<s)}return e}function i(i,o,e=0,s=i.length){if(e<s){if(t(o,o)!==0)return s;do{const t=e+s>>>1;n(i[t],o)<=0?e=t+1:s=t}while(e<s)}return e}function a(t,n,i=0,a=t.length){const e=o(t,n,i,a-1);return e>i&&s(t[e-1],n)>-s(t[e],n)?e-1:e}return{left:o,center:a,right:i}}function v5(){return 0}function k5(e){return e===null?NaN:+e}const w5=A1(Go),T5=w5.right;A1(k5).center;const E5=T5;class uf extends Map{constructor(e,t=A5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(hf(this,e))}has(e){return super.has(hf(this,e))}set(e,t){return super.set(C5(this,e),t)}delete(e){return super.delete(S5(this,e))}}function hf({_intern:e,_key:s},t){const n=s(t);return e.has(n)?e.get(n):t}function C5({_intern:e,_key:s},t){const n=s(t);return e.has(n)?e.get(n):(e.set(n,t),t)}function S5({_intern:e,_key:s},t){const n=s(t);return e.has(n)&&(t=e.get(n),e.delete(n)),t}function A5(e){return e!==null&&typeof e=="object"?e.valueOf():e}var nh=Math.sqrt(50),ih=Math.sqrt(10),sh=Math.sqrt(2);function L5(t,n,a){var r,s=-1,o,i,e;if(n=+n,t=+t,a=+a,t===n&&a>0)return[t];if((r=n<t)&&(o=t,t=n,n=o),(e=X2(t,n,a))===0||!isFinite(e))return[];if(e>0){let a=Math.round(t/e),r=Math.round(n/e);for(a*e<t&&++a,r*e>n&&--r,i=new Array(o=r-a+1);++s<o;)i[s]=(a+s)*e}else{e=-e;let a=Math.round(t*e),r=Math.round(n*e);for(a/e<t&&++a,r/e>n&&--r,i=new Array(o=r-a+1);++s<o;)i[s]=(a+s)/e}return r&&i.reverse(),i}function X2(s,o,i){var n=(o-s)/Math.max(0,i),t=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,t);return t>=0?(e>=nh?10:e>=ih?5:e>=sh?2:1)*Math.pow(10,t):-Math.pow(10,-t)/(e>=nh?10:e>=ih?5:e>=sh?2:1)}function ah(n,s,i){var o=Math.abs(s-n)/Math.max(0,i),e=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),t=o/e;return t>=nh?e*=10:t>=ih?e*=5:t>=sh&&(e*=2),s<n?-e:e}function B5(t,n){let e;if(n===void 0)for(const n of t)n!=null&&(e<n||e===void 0&&n>=n)&&(e=n);else{let s=-1;for(let o of t)(o=n(o,++s,t))!=null&&(e<o||e===void 0&&o>=o)&&(e=o)}return e}function D5(t,n){let e;if(n===void 0)for(const n of t)n!=null&&(e>n||e===void 0&&n>=n)&&(e=n);else{let s=-1;for(let o of t)(o=n(o,++s,t))!=null&&(e>o||e===void 0&&o>=o)&&(e=o)}return e}function I5(e){return e}var qo=1,du=2,oh=3,Ao=4,ff=1e-6;function M5(e){return"translate("+e+",0)"}function N5(e){return"translate(0,"+e+")"}function R5(e){return t=>+e(t)}function F5(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function O5(){return!this.__axis}function K2(s,t){var r=[],l=null,u=null,a=6,o=6,d=3,n=typeof window<"u"&&window.devicePixelRatio>1?0:.5,i=s===qo||s===Ao?-1:1,c=s===Ao||s===du?"x":"y",h=s===qo||s===oh?M5:N5;function e(e){var E=l??(t.ticks?t.ticks.apply(t,r):t.domain()),C=u??(t.tickFormat?t.tickFormat.apply(t,r):I5),x=Math.max(a,0)+d,O=t.range(),j=+O[0]+n,b=+O[O.length-1]+n,y=(t.bandwidth?F5:R5)(t.copy(),n),g=e.selection?e.selection():e,f=g.selectAll(".domain").data([null]),m=g.selectAll(".tick").data(E,t).order(),w=m.exit(),_=m.enter().append("g").attr("class","tick"),p=m.select("line"),v=m.select("text");f=f.merge(f.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),m=m.merge(_),p=p.merge(_.append("line").attr("stroke","currentColor").attr(c+"2",i*a)),v=v.merge(_.append("text").attr("fill","currentColor").attr(c,i*x).attr("dy",s===qo?"0em":s===oh?"0.71em":"0.32em")),e!==g&&(f=f.transition(e),m=m.transition(e),p=p.transition(e),v=v.transition(e),w=w.transition(e).attr("opacity",ff).attr("transform",function(e){return isFinite(e=y(e))?h(e+n):this.getAttribute("transform")}),_.attr("opacity",ff).attr("transform",function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:y(t))+n)})),w.remove(),f.attr("d",s===Ao||s===du?o?"M"+i*o+","+j+"H"+n+"V"+b+"H"+i*o:"M"+n+","+j+"V"+b:o?"M"+j+","+i*o+"V"+n+"H"+b+"V"+i*o:"M"+j+","+n+"H"+b),m.attr("opacity",1).attr("transform",function(e){return h(y(e)+n)}),p.attr(c+"2",i*a),v.attr(c,i*x).text(C),g.filter(O5).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",s===du?"start":s===Ao?"end":"middle"),g.each(function(){this.__axis=y})}return e.scale=function(n){return arguments.length?(t=n,e):t},e.ticks=function(){return r=Array.from(arguments),e},e.tickArguments=function(t){return arguments.length?(r=t==null?[]:Array.from(t),e):r.slice()},e.tickValues=function(t){return arguments.length?(l=t==null?null:Array.from(t),e):l&&l.slice()},e.tickFormat=function(t){return arguments.length?(u=t,e):u},e.tickSize=function(t){return arguments.length?(a=o=+t,e):a},e.tickSizeInner=function(t){return arguments.length?(a=+t,e):a},e.tickSizeOuter=function(t){return arguments.length?(o=+t,e):o},e.tickPadding=function(t){return arguments.length?(d=+t,e):d},e.offset=function(t){return arguments.length?(n=+t,e):n},e}function P5(e){return K2(qo,e)}function V5(e){return K2(oh,e)}Y5={value:()=>{}};function Z2(){for(var t=0,s=arguments.length,n={},e;t<s;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new $o(n)}function $o(e){this._=e}function z5(e,t){return e.trim().split(/^|\s+/).map(function(e){var s="",n=e.indexOf(".");if(n>=0&&(s=e.slice(n+1),e=e.slice(0,n)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:s}})}$o.prototype=Z2.prototype={constructor:$o,on:function(n,s){var t=this._,i=z5(n+"",t),e,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((e=(n=i[o]).type)&&(e=U5(t[e],n.name)))return e;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++o<a;)if(e=(n=i[o]).type)t[e]=df(t[e],n.name,s);else if(s==null)for(e in t)t[e]=df(t[e],n.name,null);return this},copy:function(){var e={},t=this._,n;for(n in t)e[n]=t[n].slice();return new $o(e)},call:function(n,i){if((t=arguments.length-2)>0)for(var o=new Array(t),e=0,t,s;e<t;++e)o[e]=arguments[e+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],e=0,t=s.length;e<t;++e)s[e].value.apply(i,o)},apply:function(e,s,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],t=0,i=n.length;t<i;++t)n[t].value.apply(s,o)}};function U5(t,s){for(var e=0,o=t.length,n;e<o;++e)if((n=t[e]).name===s)return n.value}function df(e,n,s){for(var t=0,o=e.length;t<o;++t)if(e[t].name===n){e[t]=Y5,e=e.slice(0,t).concat(e.slice(t+1));break}return s!=null&&e.push({name:n,value:s}),e}lh="http://www.w3.org/1999/xhtml";const pf={svg:"http://www.w3.org/2000/svg",xhtml:lh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _c(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),pf.hasOwnProperty(t)?{space:pf[t],local:e}:e}function W5(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===lh&&t.documentElement.namespaceURI===lh?t.createElement(e):t.createElementNS(n,e)}}function H5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Q2(t){var e=_c(t);return(e.local?H5:W5)(e)}function G5(){}function L1(e){return e==null?G5:function(){return this.querySelector(e)}}function q5(n){typeof n!="function"&&(n=L1(n));for(var a=this._groups,c=a.length,l=new Array(c),s=0;s<c;++s)for(var i=a[s],r=i.length,d=l[s]=new Array(r),e,o,t=0;t<r;++t)(e=i[t])&&(o=n.call(e,e.__data__,t,i))&&("__data__"in e&&(o.__data__=e.__data__),d[t]=o);return new gr(l,this._parents)}function J2(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $5(){return[]}function tp(e){return e==null?$5:function(){return this.querySelectorAll(e)}}function j5(e){return function(){return J2(e.apply(this,arguments))}}function X5(e){typeof e=="function"?e=j5(e):e=tp(e);for(var i=this._groups,l=i.length,r=[],a=[],s=0;s<l;++s)for(var o=i[s],c=o.length,t,n=0;n<c;++n)(t=o[n])&&(r.push(e.call(t,t.__data__,n,o)),a.push(t));return new gr(r,a)}function ep(e){return function(){return this.matches(e)}}function rp(e){return function(t){return t.matches(e)}}K5=Array.prototype.find;function Z5(e){return function(){return K5.call(this.children,e)}}function Q5(){return this.firstElementChild}function J5(e){return this.select(e==null?Q5:Z5(typeof e=="function"?e:rp(e)))}tb=Array.prototype.filter;function eb(){return Array.from(this.children)}function rb(e){return function(){return tb.call(this.children,e)}}function nb(e){return this.selectAll(e==null?eb:rb(typeof e=="function"?e:rp(e)))}function ib(e){typeof e!="function"&&(e=ep(e));for(var i=this._groups,a=i.length,r=new Array(a),s=0;s<a;++s)for(var o=i[s],c=o.length,l=r[s]=[],t,n=0;n<c;++n)(t=o[n])&&e.call(t,t.__data__,n,o)&&l.push(t);return new gr(r,this._parents)}function np(e){return new Array(e.length)}function sb(){return new gr(this._enter||this._groups.map(np),this._parents)}function gl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}gl.prototype={constructor:gl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ab(e){return function(){return e}}function ob(r,s,o,i,a,n){for(var e=0,t,c=s.length,l=n.length;e<l;++e)(t=s[e])?(t.__data__=n[e],i[e]=t):o[e]=new gl(r,n[e]);for(;e<c;++e)(t=s[e])&&(a[e]=t)}function lb(c,i,m,u,l,o,r){var e,t,s=new Map,a=i.length,h=o.length,d=new Array(a),n;for(e=0;e<a;++e)(t=i[e])&&(d[e]=n=r.call(t,t.__data__,e,i)+"",s.has(n)?l[e]=t:s.set(n,t));for(e=0;e<h;++e)n=r.call(c,o[e],e,o)+"",(t=s.get(n))?(u[e]=t,t.__data__=o[e],s.delete(n)):m[e]=new gl(c,o[e]);for(e=0;e<a;++e)(t=i[e])&&s.get(d[e])===t&&(l[e]=t)}function cb(e){return e.__data__}function ub(a,v){if(!arguments.length)return Array.from(this,cb);var _=v?lb:ob,c=this._parents,h=this._groups;typeof a!="function"&&(a=ab(a));for(var i=h.length,t=new Array(i),u=new Array(i),d=new Array(i),e=0;e<i;++e){var r=c[e],l=h[e],y=l.length,m=hb(a.call(r,r&&r.__data__,e,c)),s=m.length,p=u[e]=new Array(s),g=t[e]=new Array(s),j=d[e]=new Array(y),n,o,f,b;_(r,l,p,g,j,m,v);for(n=0,o=0;n<s;++n)if(f=p[n]){for(n>=o&&(o=n+1);!(b=g[o])&&++o<s;);f._next=b||null}}return t=new gr(t,c),t._enter=u,t._exit=d,t}function hb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fb(){return new gr(this._exit||this._groups.map(np),this._parents)}function db(n,s,o){var e=this.enter(),t=this,i=this.exit();return typeof n=="function"?(e=n(e),e&&(e=e.selection())):e=e.append(n+""),s!=null&&(t=s(t),t&&(t=t.selection())),o==null?i.remove():o(i),e&&t?e.merge(t).order():t}function pb(i){for(var f=i.selection?i.selection():i,s=this._groups,r=f._groups,n=s.length,h=r.length,d=Math.min(n,h),o=new Array(n),e=0;e<d;++e)for(var c=s[e],u=r[e],a=c.length,m=o[e]=new Array(a),l,t=0;t<a;++t)(l=c[t]||u[t])&&(m[t]=l);for(;e<n;++e)o[e]=s[e];return new gr(o,this._parents)}function gb(){for(var i=this._groups,o=-1,a=i.length;++o<a;)for(var n=i[o],s=n.length-1,e=n[s],t;--s>=0;)(t=n[s])&&(e&&t.compareDocumentPosition(e)^4&&e.parentNode.insertBefore(t,e),e=t);return this}function yb(n){n||(n=mb);function d(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}for(var o=this._groups,i=o.length,l=new Array(i),t=0;t<i;++t){for(var a=o[t],s=a.length,r=l[t]=new Array(s),c,e=0;e<s;++e)(c=a[e])&&(r[e]=c);r.sort(d)}return new gr(l,this._parents).order()}function mb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bb(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _b(){return Array.from(this)}function xb(){for(var n=this._groups,e=0,i=n.length,o;e<i;++e)for(var s=n[e],t=0,a=s.length;t<a;++t)if(o=s[t],o)return o;return null}function vb(){let e=0;for(const t of this)++e;return e}function kb(){return!this.node()}function wb(i){for(var o=this._groups,n=0,a=o.length;n<a;++n)for(var s=o[n],e=0,r=s.length,t;e<r;++e)(t=s[e])&&i.call(t,t.__data__,e,s);return this}function Tb(e){return function(){this.removeAttribute(e)}}function Eb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cb(e,t){return function(){this.setAttribute(e,t)}}function Sb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ab(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Lb(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Bb(s,t){var e=_c(s),n;return arguments.length<2?(n=this.node(),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)):this.each((t==null?e.local?Eb:Tb:typeof t=="function"?e.local?Lb:Ab:e.local?Sb:Cb)(e,t))}function ip(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Db(e){return function(){this.style.removeProperty(e)}}function Ib(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Mb(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function Nb(t,e,n){return arguments.length>1?this.each((e==null?Db:typeof e=="function"?Mb:Ib)(t,e,n??"")):Ts(this.node(),t)}function Ts(e,t){return e.style.getPropertyValue(t)||ip(e).getComputedStyle(e,null).getPropertyValue(t)}function Rb(e){return function(){delete this[e]}}function Fb(e,t){return function(){this[e]=t}}function Ob(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Pb(t,e){return arguments.length>1?this.each((e==null?Rb:typeof e=="function"?Ob:Fb)(t,e)):this.node()[t]}function sp(e){return e.trim().split(/^|\s+/)}function B1(e){return e.classList||new ap(e)}function ap(e){this._node=e,this._names=sp(e.getAttribute("class")||"")}ap.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function op(n,e){for(var s=B1(n),t=-1,o=e.length;++t<o;)s.add(e[t])}function lp(n,e){for(var s=B1(n),t=-1,o=e.length;++t<o;)s.remove(e[t])}function Vb(e){return function(){op(this,e)}}function Yb(e){return function(){lp(this,e)}}function zb(e,t){return function(){(t.apply(this,arguments)?op:lp)(this,e)}}function Ub(s,e){if(t=sp(s+""),arguments.length<2){for(var t,o=B1(this.node()),n=-1,i=t.length;++n<i;)if(!o.contains(t[n]))return!1;return!0}return this.each((typeof e=="function"?zb:e?Vb:Yb)(t,e))}function Wb(){this.textContent=""}function Hb(e){return function(){this.textContent=e}}function Gb(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function qb(e){return arguments.length?this.each(e==null?Wb:(typeof e=="function"?Gb:Hb)(e)):this.node().textContent}function $b(){this.innerHTML=""}function jb(e){return function(){this.innerHTML=e}}function Xb(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Kb(e){return arguments.length?this.each(e==null?$b:(typeof e=="function"?Xb:jb)(e)):this.node().innerHTML}function Zb(){this.nextSibling&&this.parentNode.appendChild(this)}function Qb(){return this.each(Zb)}function Jb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function t_(){return this.each(Jb)}function e_(e){var t=typeof e=="function"?e:Q2(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function r_(){return null}function n_(t,e){var n=typeof t=="function"?t:Q2(t),s=e==null?r_:typeof e=="function"?e:L1(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function i_(){var e=this.parentNode;e&&e.removeChild(this)}function s_(){return this.each(i_)}function a_(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function o_(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function l_(e){return this.select(e?o_:a_)}function c_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function u_(e){return function(t){e.call(this,t,this.__data__)}}function h_(e){return e.trim().split(/^|\s+/).map(function(e){var n="",t=e.indexOf(".");return t>=0&&(n=e.slice(t+1),e=e.slice(0,t)),{type:e,name:n}})}function f_(e){return function(){if(n=this.__on,n){for(var n,s=0,o=-1,i=n.length,t;s<i;++s)t=n[s],(!e.type||t.type===e.type)&&t.name===e.name?this.removeEventListener(t.type,t.listener,t.options):n[++o]=t;++o?n.length=o:delete this.__on}}}function d_(e,t,n){return function(){var o=this.__on,s,i=u_(t),a,r;if(o)for(a=0,r=o.length;a<r;++a)if((s=o[a]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(s):this.__on=[s]}}function p_(c,r,l){var o=h_(c+""),e,a=o.length,i,t,s,d,n;if(arguments.length<2){if(t=this.node().__on,t)for(s=0,d=t.length;s<d;++s)for(e=0,n=t[s];e<a;++e)if((i=o[e]).type===n.type&&i.name===n.name)return n.value;return}for(t=r?d_:f_,e=0;e<a;++e)this.each(t(o[e],r,l));return this}function cp(s,n,t){var o=ip(s),e=o.CustomEvent;typeof e=="function"?e=new e(n,t):(e=o.document.createEvent("Event"),t?(e.initEvent(n,t.bubbles,t.cancelable),e.detail=t.detail):e.initEvent(n,!1,!1)),s.dispatchEvent(e)}function g_(e,t){return function(){return cp(this,e,t)}}function y_(e,t){return function(){return cp(this,e,t.apply(this,arguments))}}function m_(t,e){return this.each((typeof e=="function"?y_:g_)(t,e))}function*b_(){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var s=n[e],t=0,a=s.length,o;t<a;++t)(o=s[t])&&(yield o)}D1=[null];function gr(e,t){this._groups=e,this._parents=t}function co(){return new gr([[document.documentElement]],D1)}function __(){return this}gr.prototype=co.prototype={constructor:gr,select:q5,selectAll:X5,selectChild:J5,selectChildren:nb,filter:ib,data:ub,enter:sb,exit:fb,join:db,merge:pb,selection:__,order:gb,sort:yb,call:bb,nodes:_b,node:xb,size:vb,empty:kb,each:wb,attr:Bb,style:Nb,property:Pb,classed:Ub,text:qb,html:Kb,raise:Qb,lower:t_,append:e_,insert:n_,remove:s_,clone:l_,datum:c_,on:p_,dispatch:m_,[Symbol.iterator]:b_};function _t(e){return typeof e=="string"?new gr([[document.querySelector(e)]],[document.documentElement]):new gr([[e]],D1)}function I1(e){return typeof e=="string"?new gr([document.querySelectorAll(e)],[document.documentElement]):new gr([J2(e)],D1)}function uo(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function xc(s,e){var t=Object.create(s.prototype),n;for(n in e)t[n]=e[n];return t}function Xi(){}var Ra=.7,yl=1/Ra,ms="\\s*([+-]?\\d+)\\s*",Fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x_=/^#([0-9a-f]{3,8})$/,v_=new RegExp(`^rgb\\(${ms},${ms},${ms}\\)$`),k_=new RegExp(`^rgb\\(${bn},${bn},${bn}\\)$`),w_=new RegExp(`^rgba\\(${ms},${ms},${ms},${Fa}\\)$`),T_=new RegExp(`^rgba\\(${bn},${bn},${bn},${Fa}\\)$`),E_=new RegExp(`^hsl\\(${Fa},${bn},${bn}\\)$`),C_=new RegExp(`^hsla\\(${Fa},${bn},${bn},${Fa}\\)$`),gf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uo(Xi,Ri,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yf,formatHex:yf,formatHex8:S_,formatHsl:A_,formatRgb:mf,toString:mf});function yf(){return this.rgb().formatHex()}function S_(){return this.rgb().formatHex8()}function A_(){return hp(this).formatHsl()}function mf(){return this.rgb().formatRgb()}function Ri(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=x_.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?bf(e):n===3?new or(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Lo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Lo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=v_.exec(t))?new or(e[1],e[2],e[3],1):(e=k_.exec(t))?new or(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=w_.exec(t))?Lo(e[1],e[2],e[3],e[4]):(e=T_.exec(t))?Lo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=E_.exec(t))?vf(e[1],e[2]/100,e[3]/100,1):(e=C_.exec(t))?vf(e[1],e[2]/100,e[3]/100,e[4]):gf.hasOwnProperty(t)?bf(gf[t]):t==="transparent"?new or(NaN,NaN,NaN,0):null}function bf(e){return new or(e>>16&255,e>>8&255,e&255,1)}function Lo(e,t,n,s){return s<=0&&(e=t=n=NaN),new or(e,t,n,s)}function up(e){return e instanceof Xi||(e=Ri(e)),e?(e=e.rgb(),new or(e.r,e.g,e.b,e.opacity)):new or}function ch(e,t,n,s){return arguments.length===1?up(e):new or(e,t,n,s??1)}function or(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}uo(or,ch,xc(Xi,{brighter(e){return e=e==null?yl:Math.pow(yl,e),new or(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ra:Math.pow(Ra,e),new or(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new or(Ii(this.r),Ii(this.g),Ii(this.b),ml(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_f,formatHex:_f,formatHex8:L_,formatRgb:xf,toString:xf}));function _f(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}`}function L_(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}${Di((isNaN(this.opacity)?1:this.opacity)*255)}`}function xf(){const e=ml(this.opacity);return`${e===1?"rgb(":"rgba("}${Ii(this.r)}, ${Ii(this.g)}, ${Ii(this.b)}${e===1?")":`, ${e})`}`}function ml(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ii(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Di(e){return e=Ii(e),(e<16?"0":"")+e.toString(16)}function vf(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jr(e,t,n,s)}function hp(e){if(e instanceof jr)return new jr(e.h,e.s,e.l,e.opacity);if(e instanceof Xi||(e=Ri(e)),!e)return new jr;if(e instanceof jr)return e;e=e.rgb();var a=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(a,n,i),s=Math.max(a,n,i),o=NaN,t=s-r,c=(s+r)/2;return t?(a===s?o=(n-i)/t+(n<i)*6:n===s?o=(i-a)/t+2:o=(a-n)/t+4,t/=c<.5?s+r:2-s-r,o*=60):t=c>0&&c<1?0:o,new jr(o,t,c,e.opacity)}function B_(e,t,n,s){return arguments.length===1?hp(e):new jr(e,t,n,s??1)}function jr(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}uo(jr,B_,xc(Xi,{brighter(e){return e=e==null?yl:Math.pow(yl,e),new jr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ra:Math.pow(Ra,e),new jr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,o=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*o,s=2*t-n;return new or(pu(e>=240?e-240:e+120,s,n),pu(e,s,n),pu(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new jr(kf(this.h),Bo(this.s),Bo(this.l),ml(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ml(this.opacity);return`${e===1?"hsl(":"hsla("}${kf(this.h)}, ${Bo(this.s)*100}%, ${Bo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kf(e){return e=(e||0)%360,e<0?e+360:e}function Bo(e){return Math.max(0,Math.min(1,e||0))}function pu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const D_=Math.PI/180,I_=180/Math.PI,bl=18,fp=.96422,dp=1,pp=.82521,gp=4/29,bs=6/29,yp=3*bs*bs,M_=bs*bs*bs;function mp(e){if(e instanceof _n)return new _n(e.l,e.a,e.b,e.opacity);if(e instanceof zn)return bp(e);e instanceof or||(e=up(e));var n=bu(e.r),t=bu(e.g),s=bu(e.b),o=gu((.2225045*n+.7168786*t+.0606169*s)/dp),i,a;return n===t&&t===s?i=a=o:(i=gu((.4360747*n+.3850649*t+.1430804*s)/fp),a=gu((.0139322*n+.0971045*t+.7141733*s)/pp)),new _n(116*o-16,500*(i-o),200*(o-a),e.opacity)}function N_(e,t,n,s){return arguments.length===1?mp(e):new _n(e,t,n,s??1)}function _n(e,t,n,s){this.l=+e,this.a=+t,this.b=+n,this.opacity=+s}uo(_n,N_,xc(Xi,{brighter(e){return new _n(this.l+bl*(e??1),this.a,this.b,this.opacity)},darker(e){return new _n(this.l-bl*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=fp*yu(t),e=dp*yu(e),n=pp*yu(n),new or(mu(3.1338561*t-1.6168667*e-.4906146*n),mu(-.9787684*t+1.9161415*e+.033454*n),mu(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function gu(e){return e>M_?Math.pow(e,1/3):e/yp+gp}function yu(e){return e>bs?e*e*e:yp*(e-gp)}function mu(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function bu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function R_(e){if(e instanceof zn)return new zn(e.h,e.c,e.l,e.opacity);if(e instanceof _n||(e=mp(e)),e.a===0&&e.b===0)return new zn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*I_;return new zn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function uh(e,t,n,s){return arguments.length===1?R_(e):new zn(e,t,n,s??1)}function zn(e,t,n,s){this.h=+e,this.c=+t,this.l=+n,this.opacity=+s}function bp(e){if(isNaN(e.h))return new _n(e.l,0,0,e.opacity);var t=e.h*D_;return new _n(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}uo(zn,uh,xc(Xi,{brighter(e){return new zn(this.h,this.c,this.l+bl*(e??1),this.opacity)},darker(e){return new zn(this.h,this.c,this.l-bl*(e??1),this.opacity)},rgb(){return bp(this).rgb()}}));const vc=e=>()=>e;function _p(e,t){return function(n){return e+n*t}}function F_(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(s){return Math.pow(t+s*n,e)}}function O_(t,n){var e=n-t;return e?_p(t,e>180||e<-180?e-360*Math.round(e/360):e):vc(isNaN(t)?n:t)}function P_(e){return(e=+e)==1?wa:function(t,n){return n-t?F_(t,n,e):vc(isNaN(t)?n:t)}}function wa(e,t){var n=t-e;return n?_p(e,n):vc(isNaN(e)?t:e)}const _l=function n(s){var e=P_(s);function t(t,n){var s=e((t=ch(t)).r,(n=ch(n)).r),o=e(t.g,n.g),i=e(t.b,n.b),a=wa(t.opacity,n.opacity);return function(e){return t.r=s(e),t.g=o(e),t.b=i(e),t.opacity=a(e),t+""}}return t.gamma=n,t}(1);function V_(n,t){t||(t=[]);var o=n?Math.min(t.length,n.length):0,s=t.slice(),e;return function(i){for(e=0;e<o;++e)s[e]=n[e]*(1-i)+t[e]*i;return s}}function Y_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function z_(i,t){var n=t?t.length:0,s=i?Math.min(n,i.length):0,a=new Array(s),o=new Array(n),e;for(e=0;e<s;++e)a[e]=M1(i[e],t[e]);for(;e<n;++e)o[e]=t[e];return function(t){for(e=0;e<s;++e)o[e]=a[e](t);return o}}function U_(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function $r(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function W_(n,t){var s={},o={},e;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(e in t)e in n?s[e]=M1(n[e],t[e]):o[e]=t[e];return function(t){for(e in s)o[e]=s[e](t);return o}}hh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_u=new RegExp(hh.source,"g");function H_(e){return function(){return e}}function G_(e){return function(t){return e(t)+""}}function xp(c,n){var i=hh.lastIndex=_u.lastIndex=0,r,o,s,t=-1,e=[],a=[];for(c=c+"",n=n+"";(r=hh.exec(c))&&(o=_u.exec(n));)(s=o.index)>i&&(s=n.slice(i,s),e[t]?e[t]+=s:e[++t]=s),(r=r[0])===(o=o[0])?e[t]?e[t]+=o:e[++t]=o:(e[++t]=null,a.push({i:t,x:$r(r,o)})),i=_u.lastIndex;return i<n.length&&(s=n.slice(i),e[t]?e[t]+=s:e[++t]=s),e.length<2?a[0]?G_(a[0].x):H_(n):(n=a.length,function(o){for(var t=0,s;t<n;++t)e[(s=a[t]).i]=s.x(o);return e.join("")})}function M1(s,e){var t=typeof e,n;return e==null||t==="boolean"?vc(e):(t==="number"?$r:t==="string"?(n=Ri(e))?(e=n,_l):xp:e instanceof Ri?_l:e instanceof Date?U_:Y_(e)?V_:Array.isArray(e)?z_:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?W_:$r)(s,e)}function q_(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}wf=180/Math.PI,fh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vp(e,t,i,s,r,c){var o,a,n;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(n=e*i+t*s)&&(i-=e*n,s-=t*n),(a=Math.sqrt(i*i+s*s))&&(i/=a,s/=a,n/=a),e*s<t*i&&(e=-e,t=-t,n=-n,o=-o),{translateX:r,translateY:c,rotate:Math.atan2(t,e)*wf,skewX:Math.atan(n)*wf,scaleX:o,scaleY:a}}function $_(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?fh:vp(e.a,e.b,e.c,e.d,e.e,e.f)}function j_(e){return e==null||(Do||(Do=document.createElementNS("http://www.w3.org/2000/svg","g")),Do.setAttribute("transform",e),!(e=Do.transform.baseVal.consolidate()))?fh:(e=e.matrix,vp(e.a,e.b,e.c,e.d,e.e,e.f))}function kp(n,s,o,t){function e(e){return e.length?e.pop()+" ":""}function i(n,i,e,t,a,c){if(n!==e||i!==t){var r=a.push("translate(",null,s,null,o);c.push({i:r-4,x:$r(n,e)},{i:r-2,x:$r(i,t)})}else(e||t)&&a.push("translate("+e+s+t+o)}function a(s,n,o,i){s!==n?(s-n>180?n+=360:n-s>180&&(s+=360),i.push({i:o.push(e(o)+"rotate(",null,t)-2,x:$r(s,n)})):n&&o.push(e(o)+"rotate("+n+t)}function r(o,n,s,i){o!==n?i.push({i:s.push(e(s)+"skewX(",null,t)-2,x:$r(o,n)}):n&&s.push(e(s)+"skewX("+n+t)}function c(o,i,t,n,s,r){if(o!==t||i!==n){var a=s.push(e(s)+"scale(",null,",",null,")");r.push({i:a-4,x:$r(o,t)},{i:a-2,x:$r(i,n)})}else(t!==1||n!==1)&&s.push(e(s)+"scale("+t+","+n+")")}return function(e,t){var s=[],o=[];return e=n(e),t=n(t),i(e.translateX,e.translateY,t.translateX,t.translateY,s,o),a(e.rotate,t.rotate,s,o),r(e.skewX,t.skewX,s,o),c(e.scaleX,e.scaleY,t.scaleX,t.scaleY,s,o),e=t=null,function(n){for(var e=-1,i=o.length,t;++e<i;)s[(t=o[e]).i]=t.x(n);return s.join("")}}}X_=kp($_,"px, ","px)","deg)"),K_=kp(j_,", ",")",")");function Z_(e){return function(t,n){var s=e((t=uh(t)).h,(n=uh(n)).h),o=wa(t.c,n.c),i=wa(t.l,n.l),a=wa(t.opacity,n.opacity);return function(e){return t.h=s(e),t.c=o(e),t.l=i(e),t.opacity=a(e),t+""}}}const Q_=Z_(O_);var Es=0,ga=0,ia=0,wp=1e3,xl,ya,vl=0,Fi=0,kc=0,Oa=typeof performance=="object"&&performance.now?performance:Date,Tp=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function N1(){return Fi||(Tp(J_),Fi=Oa.now()+kc)}function J_(){Fi=0}function kl(){this._call=this._time=this._next=null}kl.prototype=Ep.prototype={constructor:kl,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?N1():+e)+(n==null?0:+n),!this._next&&ya!==this&&(ya?ya._next=this:xl=this,ya=this),this._call=t,this._time=e,dh()},stop:function(){this._call&&(this._call=null,this._time=1/0,dh())}};function Ep(t,n,s){var e=new kl;return e.restart(t,n,s),e}function tx(){N1(),++Es;for(var e=xl,t;e;)(t=Fi-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Es}function Tf(){Fi=(vl=Oa.now())+kc,Es=ga=0;try{tx()}finally{Es=0,rx(),Fi=0}}function ex(){var e=Oa.now(),t=e-vl;t>wp&&(kc-=t,vl=e)}function rx(){for(var t,e=xl,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:xl=n);ya=t,dh(s)}function dh(e){if(!Es){ga&&(ga=clearTimeout(ga));var t=e-Fi;t>24?(e<1/0&&(ga=setTimeout(Tf,e-Oa.now()-kc)),ia&&(ia=clearInterval(ia))):(ia||(vl=Oa.now(),ia=setInterval(ex,wp)),Es=1,Tp(Tf))}}function Ef(n,e,s){var t=new kl;return e=e==null?0:+e,t.restart(s=>{t.stop(),n(s+e)},e,s),t}var nx=Z2("start","end","cancel","interrupt"),ix=[],Cp=0,Cf=1,ph=2,jo=3,Sf=4,gh=5,Xo=6;function wc(t,o,n,i,a,e){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};sx(t,n,{name:o,index:i,group:a,on:nx,tween:ix,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:Cp})}function R1(t,n){var e=on(t,n);if(e.state>Cp)throw new Error("too late; already scheduled");return e}function Tn(t,n){var e=on(t,n);if(e.state>jo)throw new Error("too late; already running");return e}function on(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function sx(t,o,e){var n=t.__transition,s;n[o]=e,e.timer=Ep(c,0,e.time);function c(t){e.state=Cf,e.timer.restart(i,e.delay,e.time),e.delay<=t&&i(t-e.delay)}function i(h){var l,d,u,c;if(e.state!==Cf)return a();for(l in n)if(c=n[l],c.name===e.name){if(c.state===jo)return Ef(i);c.state===Sf?(c.state=Xo,c.timer.stop(),c.on.call("interrupt",t,t.__data__,c.index,c.group),delete n[l]):+l<o&&(c.state=Xo,c.timer.stop(),c.on.call("cancel",t,t.__data__,c.index,c.group),delete n[l])}if(Ef(function(){e.state===jo&&(e.state=Sf,e.timer.restart(r,e.delay,e.time),r(h))}),e.state=ph,e.on.call("start",t,t.__data__,e.index,e.group),e.state===ph){for(e.state=jo,s=new Array(u=e.tween.length),l=0,d=-1;l<u;++l)(c=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(s[++d]=c);s.length=d+1}}function r(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(a),e.state=gh,1),o=-1,r=s.length;++o<r;)s[o].call(t,i);e.state===gh&&(e.on.call("end",t,t.__data__,e.index,e.group),a())}function a(){e.state=Xo,e.timer.stop(),delete n[o];for(var s in n)return;delete t.__transition}}function ax(t,n){var s=t.__transition,e,i,a=!0,o;if(s){n=n==null?null:n+"";for(o in s){if((e=s[o]).name!==n){a=!1;continue}i=e.state>ph&&e.state<gh,e.state=Xo,e.timer.stop(),e.on.call(i?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete s[o]}a&&delete t.__transition}}function ox(e){return this.each(function(){ax(this,e)})}function lx(n,s){var t,e;return function(){var i=Tn(this,n),a=i.tween,o,r;if(a!==t){e=t=a;for(o=0,r=e.length;o<r;++o)if(e[o].name===s){e=e.slice(),e.splice(o,1);break}}i.tween=e}}function cx(o,t,n){var s,e;if(typeof n!="function")throw new Error;return function(){if(a=Tn(this,o),r=a.tween,r!==s){e=(s=r).slice();for(var a,r,c={name:t,value:n},i=0,l=e.length;i<l;++i)if(e[i].name===t){e[i]=c;break}i===l&&e.push(c)}a.tween=e}}function ux(e,n){if(s=this._id,e+="",arguments.length<2){for(var s,o=on(this.node(),s).tween,t=0,a=o.length,i;t<a;++t)if((i=o[t]).name===e)return i.value;return null}return this.each((n==null?lx:cx)(s,e,n))}function F1(e,t,s){var n=e._id;return e.each(function(){var e=Tn(this,n);(e.value||(e.value={}))[t]=s.apply(this,arguments)}),function(e){return on(e,n).value[t]}}function Sp(n,e){var t;return(typeof e=="number"?$r:e instanceof Ri?_l:(t=Ri(e))?(e=t,_l):xp)(n,e)}function hx(e){return function(){this.removeAttribute(e)}}function fx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dx(s,o,e){var t,i=e+"",n;return function(){var a=this.getAttribute(s);return a===i?null:a===t?n:n=o(t=a,e)}}function px(e,o,t){var n,i=t+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===n?s:s=o(n=a,t)}}function gx(e,o,i){var t,n,s;return function(){var a,c=i(this),r;return c==null?void this.removeAttribute(e):(a=this.getAttribute(e),r=c+"",a===r?null:a===t&&r===n?s:(n=r,s=o(t=a,c)))}}function yx(e,o,i){var t,n,s;return function(){var a,c=i(this),r;return c==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),r=c+"",a===r?null:a===t&&r===n?s:(n=r,s=o(t=a,c)))}}function mx(n,t){var e=_c(n),s=e==="transform"?K_:Sp;return this.attrTween(n,typeof t=="function"?(e.local?yx:gx)(e,s,F1(this,"attr."+n,t)):t==null?(e.local?fx:hx)(e):(e.local?px:dx)(e,s,t))}function bx(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _x(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xx(o,e){var t,n;function s(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&_x(o,s)),t}return s._value=e,s}function vx(o,e){var t,n;function s(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&bx(o,s)),t}return s._value=e,s}function kx(n,t){var e="attr."+n,s;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return s=_c(n),this.tween(e,(s.local?xx:vx)(s,t))}function wx(e,t){return function(){R1(this,e).delay=+t.apply(this,arguments)}}function Tx(t,e){return e=+e,function(){R1(this,t).delay=e}}function Ex(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wx:Tx)(t,e)):on(this.node(),t).delay}function Cx(e,t){return function(){Tn(this,e).duration=+t.apply(this,arguments)}}function Sx(t,e){return e=+e,function(){Tn(this,t).duration=e}}function Ax(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cx:Sx)(t,e)):on(this.node(),t).duration}function Lx(t,e){if(typeof e!="function")throw new Error;return function(){Tn(this,t).ease=e}}function Bx(t){var e=this._id;return arguments.length?this.each(Lx(e,t)):on(this.node(),e).ease}function Dx(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Tn(this,e).ease=n}}function Ix(e){if(typeof e!="function")throw new Error;return this.each(Dx(this._id,e))}function Mx(e){typeof e!="function"&&(e=ep(e));for(var i=this._groups,a=i.length,r=new Array(a),s=0;s<a;++s)for(var o=i[s],c=o.length,l=r[s]=[],t,n=0;n<c;++n)(t=o[n])&&e.call(t,t.__data__,n,o)&&l.push(t);return new Kn(r,this._parents,this._name,this._id)}function Nx(l){if(l._id!==this._id)throw new Error;for(var o=this._groups,i=l._groups,n=o.length,h=i.length,d=Math.min(n,h),s=new Array(n),e=0;e<d;++e)for(var r=o[e],u=i[e],a=r.length,m=s[e]=new Array(a),c,t=0;t<a;++t)(c=r[t]||u[t])&&(m[t]=c);for(;e<n;++e)s[e]=o[e];return new Kn(s,this._parents,this._name,this._id)}function Rx(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Fx(s,e,o){var t,n,i=Rx(e)?R1:Tn;return function(){var a=i(this,s),r=a.on;r!==t&&(n=(t=r).copy()).on(e,o),a.on=n}}function Ox(e,n){var t=this._id;return arguments.length<2?on(this.node(),t).on.on(e):this.each(Fx(t,e,n))}function Px(e){return function(){var t=this.parentNode,n;for(n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Vx(){return this.on("end.remove",Px(this._id))}function Yx(s){u=this._name,r=this._id,typeof s!="function"&&(s=L1(s));for(var u,r,d=this._groups,c=d.length,h=new Array(c),n=0;n<c;++n)for(var a=d[n],l=a.length,o=h[n]=new Array(l),t,i,e=0;e<l;++e)(t=a[e])&&(i=s.call(t,t.__data__,e,a))&&("__data__"in t&&(i.__data__=t.__data__),o[e]=i,wc(o[e],u,r,e,o,on(t,r)));return new Kn(h,this._parents,u,r)}function zx(t){l=this._name,i=this._id,typeof t!="function"&&(t=tp(t));for(var l,i,u=this._groups,m=u.length,d=[],c=[],a=0;a<m;++a)for(var r=u[a],p=r.length,e,o=0;o<p;++o)if(e=r[o]){for(var s=t.call(e,e.__data__,o,r),h,f=on(e,i),n=0,g=s.length;n<g;++n)(h=s[n])&&wc(h,l,i,n,s,f);d.push(s),c.push(e)}return new Kn(d,c,l,i)}Ux=co.prototype.constructor;function Wx(){return new Ux(this._groups,this._parents)}function Hx(e,o){var t,n,s;return function(){var i=Ts(this,e),a=(this.style.removeProperty(e),Ts(this,e));return i===a?null:i===t&&a===n?s:s=o(t=i,n=a)}}function Ap(e){return function(){this.style.removeProperty(e)}}function Gx(s,o,e){var t,i=e+"",n;return function(){var a=Ts(this,s);return a===i?null:a===t?n:n=o(t=a,e)}}function qx(e,o,i){var t,n,s;return function(){var c=Ts(this,e),a=i(this),r=a+"";return a==null&&(r=a=(this.style.removeProperty(e),Ts(this,e))),c===r?null:c===t&&r===n?s:(n=r,s=o(t=c,a))}}function $x(a,e){var t,n,s,o="style."+e,r="end."+o,i;return function(){var c=Tn(this,a),l=c.on,d=c.value[o]==null?i||(i=Ap(e)):void 0;(l!==t||s!==d)&&(n=(t=l).copy()).on(r,s=d),c.on=n}}function jx(e,t,s){var n=(e+="")=="transform"?X_:Sp;return t==null?this.styleTween(e,Hx(e,n)).on("end.style."+e,Ap(e)):typeof t=="function"?this.styleTween(e,qx(e,n,F1(this,"style."+e,t))).each($x(this._id,e)):this.styleTween(e,Gx(e,n,t),s).on("end.style."+e,null)}function Xx(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function Kx(o,e,i){var t,n;function s(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&Xx(o,s,i)),t}return s._value=e,s}function Zx(n,t,s){var e="style."+(n+="");if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Kx(n,t,s??""))}function Qx(e){return function(){this.textContent=e}}function Jx(e){return function(){var t=e(this);this.textContent=t??""}}function t6(e){return this.tween("text",typeof e=="function"?Jx(F1(this,"text",e)):Qx(e==null?"":e+""))}function e6(e){return function(t){this.textContent=e.call(this,t)}}function r6(e){var t,n;function s(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&e6(s)),t}return s._value=e,s}function n6(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,r6(t))}function i6(){for(var a=this._name,c=this._id,r=Lp(),i=this._groups,d=i.length,o=0,e;o<d;++o)for(var n=i[o],l=n.length,s,t=0;t<l;++t)(s=n[t])&&(e=on(s,c),wc(s,a,r,t,n,{time:e.time+e.delay+e.duration,delay:0,duration:e.duration,ease:e.ease}));return new Kn(i,this._parents,a,r)}function s6(){var n,e,t=this,o=t._id,s=t.size();return new Promise(function(i,r){var a={value:r},c={value:function(){--s===0&&i()}};t.each(function(){var t=Tn(this,o),s=t.on;s!==n&&(e=(n=s).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),t.on=e}),s===0&&i()})}a6=0;function Kn(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function Lp(){return++a6}In=co.prototype,Kn.prototype={constructor:Kn,select:Yx,selectAll:zx,selectChild:In.selectChild,selectChildren:In.selectChildren,filter:Mx,merge:Nx,selection:Wx,transition:i6,call:In.call,nodes:In.nodes,node:In.node,size:In.size,empty:In.empty,each:In.each,on:Ox,attr:mx,attrTween:kx,style:jx,styleTween:Zx,text:t6,textTween:n6,remove:Vx,tween:ux,delay:Ex,duration:Ax,ease:Bx,easeVarying:Ix,end:s6,[Symbol.iterator]:In[Symbol.iterator]};function o6(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}l6={time:null,delay:0,duration:250,ease:o6};function c6(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function u6(e){e instanceof Kn?(t=e._id,e=e._name):(t=Lp(),(r=l6).time=N1(),e=e==null?null:e+"");for(var t,r,a=this._groups,c=a.length,o=0;o<c;++o)for(var i=a[o],l=i.length,s,n=0;n<l;++n)(s=i[n])&&wc(s,e,t,n,i,r||c6(s,t));return new Kn(a,this._parents,e,t)}co.prototype.interrupt=ox,co.prototype.transition=u6;const yh=Math.PI,mh=2*yh,Si=1e-6,h6=mh-Si;function bh(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function O1(){return new bh}bh.prototype=O1.prototype={constructor:bh,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,s){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(e,t,n,s,o,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +s+","+(this._x1=+o)+","+(this._y1=+i)},arcTo:function(n,t,c,r,e){n=+n,t=+t,c=+c,r=+r,e=+e;var m=this._x1,p=this._y1,i=c-n,a=r-t,s=m-n,o=p-t,u=s*s+o*o;if(e<0)throw new Error("negative radius: "+e);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=t);else if(u>Si)if(!(Math.abs(o*i-a*s)>Si)||!e)this._+="L"+(this._x1=n)+","+(this._y1=t);else{var h=c-m,l=r-p,f=i*i+a*a,y=h*h+l*l,g=Math.sqrt(f),v=Math.sqrt(u),b=e*Math.tan((yh-Math.acos((f+u-y)/(2*g*v)))/2),d=b/v,j=b/g;Math.abs(d-1)>Si&&(this._+="L"+(n+d*s)+","+(t+d*o)),this._+="A"+e+","+e+",0,0,"+ +(o*h>s*l)+","+(this._x1=n+j*i)+","+(this._y1=t+j*a)}},arc:function(n,s,e,o,i,c){n=+n,s=+s,e=+e,c=!!c;var d=e*Math.cos(o),u=e*Math.sin(o),a=n+d,r=s+u,l=1^c,t=c?o-i:i-o;if(e<0)throw new Error("negative radius: "+e);this._x1===null?this._+="M"+a+","+r:(Math.abs(this._x1-a)>Si||Math.abs(this._y1-r)>Si)&&(this._+="L"+a+","+r),e&&(t<0&&(t=t%mh+mh),t>h6?this._+="A"+e+","+e+",0,1,"+l+","+(n-d)+","+(s-u)+"A"+e+","+e+",0,1,"+l+","+(this._x1=a)+","+(this._y1=r):t>Si&&(this._+="A"+e+","+e+",0,"+ +(t>=yh)+","+l+","+(this._x1=n+e*Math.cos(i))+","+(this._y1=s+e*Math.sin(i))))},rect:function(t,n,e,s){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +s+"h"+-e+"Z"},toString:function(){return this._}};function f6(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function d6(e,t){return fetch(e,t).then(f6)}function p6(e){return(t,n)=>d6(t,n).then(t=>(new DOMParser).parseFromString(t,e))}g6=p6("image/svg+xml");function y6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wl(e,s){if((n=(e=s?e.toExponential(s-1):e.toExponential()).indexOf("e"))<0)return null;var n,t=e.slice(0,n);return[t.length>1?t[0]+t.slice(2):t,+e.slice(n+1)]}function Cs(e){return e=wl(Math.abs(e)),e?e[1]:NaN}function m6(e,t){return function(c,o){for(var i=c.length,a=[],r=0,n=e[0],s=0;i>0&&n>0&&(s+n+1>o&&(n=Math.max(1,o-s)),a.push(c.substring(i-=n,i+n)),!((s+=n+1)>o));)n=e[r=(r+1)%e.length];return a.reverse().join(t)}}function b6(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}_6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tl(t){if(!(e=_6.exec(t)))throw new Error("invalid format: "+t);var e;return new P1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Tl.prototype=P1.prototype;function P1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}P1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function x6(n){t:for(var o=n.length,e=1,t=-1,s;e<o;++e)switch(n[e]){case".":t=s=e;break;case"0":t===0&&(t=e),s=e;break;default:if(!+n[e])break t;t>0&&(t=0);break}return t>0?n.slice(0,t)+n.slice(s+1):n}function v6(n,i){if(s=wl(n,i),!s)return n+"";var s,t=s[0],a=s[1],e=a-(Bp=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=t.length;return e===o?t:e>o?t+new Array(e-o+1).join("0"):e>0?t.slice(0,e)+"."+t.slice(e):"0."+new Array(1-e).join("0")+wl(n,Math.max(0,i+e-1))[0]}function Af(s,o){if(n=wl(s,o),!n)return s+"";var n,e=n[0],t=n[1];return t<0?"0."+new Array(-t).join("0")+e:e.length>t+1?e.slice(0,t+1)+"."+e.slice(t+1):e+new Array(t-e.length+2).join("0")}const Lf={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:y6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Af(e*100,t),r:Af,s:v6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Bf(e){return e}Df=Array.prototype.map,If=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function k6(e){var t=e.grouping===void 0||e.thousands===void 0?Bf:m6(Df.call(e.grouping,Number),e.thousands+""),s=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Bf:b6(Df.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",r=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function n(e){e=Tl(e);var v=e.fill,g=e.align,d=e.sign,m=e.symbol,h=e.zero,f=e.width,p=e.comma,u=e.precision,b=e.trim,n=e.type;n==="n"?(p=!0,n="g"):Lf[n]||(u===void 0&&(u=12),b=!0,n="g"),(h||v==="0"&&g==="=")&&(h=!0,v="0",g="=");var _=m==="$"?s:m==="#"&&/[boxX]/.test(n)?"0"+n.toLowerCase():"",w=m==="$"?l:/[%p]/.test(n)?a:"",j=Lf[n],O=/[defgprs%]/.test(n);u=u===void 0?6:/[gprs]/.test(n)?Math.max(1,Math.min(21,u)):Math.max(0,Math.min(20,u));function y(e){var l=_,s=w,m,E,y,x,C,a;if(n==="c")s=j(e)+s,e="";else if(e=+e,x=e<0||1/e<0,e=isNaN(e)?c:j(Math.abs(e),u),b&&(e=x6(e)),x&&+e==0&&d!=="+"&&(x=!1),l=(x?d==="("?d:r:d==="-"||d==="("?"":d)+l,s=(n==="s"?If[8+Bp/3]:"")+s+(x&&d==="("?")":""),O)for(m=-1,E=e.length;++m<E;)if(y=e.charCodeAt(m),48>y||y>57){s=(y===46?o+e.slice(m+1):e.slice(m))+s,e=e.slice(0,m);break}switch(p&&!h&&(e=t(e,1/0)),C=l.length+e.length+s.length,a=C<f?new Array(f-C+1).join(v):"",p&&h&&(e=t(a+e,a.length?f-s.length:1/0),a=""),g){case"<":e=l+e+s+a;break;case"=":e=l+a+e+s;break;case"^":e=a.slice(0,C=a.length>>1)+l+e+s+a.slice(C);break;default:e=a+l+e+s;break}return i(e)}return y.toString=function(){return e+""},y}function d(e,s){var o=n((e=Tl(e),e.type="f",e)),t=Math.max(-8,Math.min(8,Math.floor(Cs(s)/3)))*3,i=Math.pow(10,-t),a=If[8+t/3];return function(e){return o(i*e)+a}}return{format:n,formatPrefix:d}}w6({thousands:",",grouping:[3],currency:["$",""]});function w6(e){return Io=k6(e),Dp=Io.format,Ip=Io.formatPrefix,Io}function T6(e){return Math.max(0,-Cs(Math.abs(e)))}function E6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cs(t)/3)))*3-Cs(Math.abs(e)))}function C6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Cs(t)-Cs(e))+1}function V1(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Mf=Symbol("implicit");function Mp(){var t=new uf,n=[],s=[],o=Mf;function e(e){let i=t.get(e);if(i===void 0){if(o!==Mf)return o;t.set(e,i=n.push(e)-1)}return s[i%s.length]}return e.domain=function(s){if(!arguments.length)return n.slice();n=[],t=new uf;for(const e of s)t.has(e)||t.set(e,n.push(e)-1);return e},e.range=function(t){return arguments.length?(s=Array.from(t),e):s.slice()},e.unknown=function(t){return arguments.length?(o=t,e):o},e.copy=function(){return Mp(n,s).unknown(o)},V1.apply(e,arguments),e}function S6(e){return function(){return e}}function A6(e){return+e}Nf=[0,1];function us(e){return e}function _h(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:S6(isNaN(t)?NaN:.5)}function L6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}function B6(s,o,i){var e=s[0],n=s[1],t=o[0],a=o[1];return n<e?(e=_h(n,e),t=i(a,t)):(e=_h(e,n),t=i(t,a)),function(n){return t(e(n))}}function D6(e,n,a){var s=Math.min(e.length,n.length)-1,o=new Array(s),i=new Array(s),t=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++t<s;)o[t]=_h(e[t],e[t+1]),i[t]=a(n[t],n[t+1]);return function(t){var n=E5(e,t,1,s)-1;return i[n](o[n](t))}}function Np(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function I6(){var t=Nf,n=Nf,i=M1,a,u,d,o=us,r,c,l;function s(){var s=Math.min(t.length,n.length);return o!==us&&(o=L6(t[0],t[s-1])),r=s>2?D6:B6,c=l=null,e}function e(e){return e==null||isNaN(e=+e)?d:(c||(c=r(t.map(a),n,i)))(a(o(e)))}return e.invert=function(e){return o(u((l||(l=r(n,t.map(a),$r)))(e)))},e.domain=function(e){return arguments.length?(t=Array.from(e,A6),s()):t.slice()},e.range=function(e){return arguments.length?(n=Array.from(e),s()):n.slice()},e.rangeRound=function(e){return n=Array.from(e),i=q_,s()},e.clamp=function(e){return arguments.length?(o=!!e||us,s()):o!==us},e.interpolate=function(e){return arguments.length?(i=e,s()):i},e.unknown=function(t){return arguments.length?(d=t,e):d},function(e,t){return a=e,u=t,s()}}function Rp(){return I6()(us,us)}function M6(n,s,a,e){var o=ah(n,s,a),t,i;switch(e=Tl(e??",f"),e.type){case"s":return i=Math.max(Math.abs(n),Math.abs(s)),e.precision==null&&!isNaN(t=E6(o,i))&&(e.precision=t),Ip(e,i);case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(t=C6(o,Math.max(Math.abs(n),Math.abs(s))))&&(e.precision=t-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(t=T6(o))&&(e.precision=t-(e.type==="%")*2);break}}return Dp(e)}function N6(e){var t=e.domain;return e.ticks=function(n){var e=t();return L5(e[0],e[e.length-1],n??10)},e.tickFormat=function(n,s){var e=t();return M6(e[0],e[e.length-1],n??10,s)},e.nice=function(c){c==null&&(c=10);var i=t(),a=0,r=i.length-1,s=i[a],o=i[r],l,n,d=10;for(o<s&&(n=s,s=o,o=n,n=a,a=r,r=n);d-- >0;){if(n=X2(s,o,c),n===l)return i[a]=s,i[r]=o,t(i);if(n>0)s=Math.floor(s/n)*n,o=Math.ceil(o/n)*n;else if(n<0)s=Math.ceil(s*n)/n,o=Math.floor(o*n)/n;else break;l=n}return e},e}function Fp(){var e=Rp();return e.copy=function(){return Np(e,Fp())},V1.apply(e,arguments),N6(e)}function R6(e,a){e=e.slice();var t=0,n=e.length-1,s=e[t],o=e[n],i;return o<s&&(i=t,t=n,n=i,i=s,s=o,o=i),e[t]=a.floor(s),e[n]=a.ceil(o),e}xu=new Date,vu=new Date;function Ze(t,n,s,o){function e(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}return e.floor=function(e){return t(e=new Date(+e)),e},e.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},e.round=function(t){var n=e(t),s=e.ceil(t);return t-n<s-t?n:s},e.offset=function(e,t){return n(e=new Date(+e),t==null?1:Math.floor(t)),e},e.range=function(s,a,o){var i=[],r;if(s=e.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return i;do i.push(r=new Date(+s)),n(s,o),t(s);while(r<s&&s<a)return i},e.filter=function(e){return Ze(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,s){if(t>=t)if(s<0)for(;++s<=0;)for(;n(t,-1),!e(t););else for(;--s>=0;)for(;n(t,1),!e(t););})},s&&(e.count=function(e,n){return xu.setTime(+e),vu.setTime(+n),t(xu),t(vu),Math.floor(s(xu,vu))},e.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?e.filter(o?function(e){return o(e)%t===0}:function(n){return e.count(0,n)%t===0}):e}),e}El=Ze(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e}),El.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ze(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):El};const F6=El;El.range;const Un=1e3,Yr=Un*60,Wn=Yr*60,Oi=Wn*24,Y1=Oi*7,Rf=Oi*30,ku=Oi*365;Op=Ze(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*Un)},function(e,t){return(t-e)/Un},function(e){return e.getUTCSeconds()});const ma=Op;Op.range,Pp=Ze(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Un)},function(e,t){e.setTime(+e+t*Yr)},function(e,t){return(t-e)/Yr},function(e){return e.getMinutes()});const Cl=Pp;Pp.range,Vp=Ze(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Un-e.getMinutes()*Yr)},function(e,t){e.setTime(+e+t*Wn)},function(e,t){return(t-e)/Wn},function(e){return e.getHours()});const Sl=Vp;Vp.range,Yp=Ze(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yr)/Oi,e=>e.getDate()-1);const Ss=Yp;Yp.range;function Ki(e){return Ze(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yr)/Y1})}var As=Ki(0),Al=Ki(1),O6=Ki(2),P6=Ki(3),Ls=Ki(4),V6=Ki(5),Y6=Ki(6);As.range,Al.range,O6.range,P6.range,Ls.range,V6.range,Y6.range,zp=Ze(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});const Ll=zp;zp.range,z1=Ze(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),z1.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ze(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};const Pi=z1;z1.range,Up=Ze(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Yr)},function(e,t){return(t-e)/Yr},function(e){return e.getUTCMinutes()});const z6=Up;Up.range,Wp=Ze(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*Wn)},function(e,t){return(t-e)/Wn},function(e){return e.getUTCHours()});const U6=Wp;Wp.range,Hp=Ze(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Oi},function(e){return e.getUTCDate()-1});const U1=Hp;Hp.range;function Zi(e){return Ze(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/Y1})}var W1=Zi(0),Bl=Zi(1),W6=Zi(2),H6=Zi(3),Bs=Zi(4),G6=Zi(5),q6=Zi(6);W1.range,Bl.range,W6.range,H6.range,Bs.range,G6.range,q6.range,Gp=Ze(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});const $6=Gp;Gp.range,H1=Ze(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),H1.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ze(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};const Ds=H1;H1.range;function qp(a,s,c,i,t,n){const e=[[ma,1,Un],[ma,5,5*Un],[ma,15,15*Un],[ma,30,30*Un],[n,1,Yr],[n,5,5*Yr],[n,15,15*Yr],[n,30,30*Yr],[t,1,Wn],[t,3,3*Wn],[t,6,6*Wn],[t,12,12*Wn],[i,1,Oi],[i,2,2*Oi],[c,1,Y1],[s,1,Rf],[s,3,3*Rf],[a,1,ku]];function r(e,t,n){const s=t<e;s&&([e,t]=[t,e]);const i=n&&typeof n.range=="function"?n:o(e,t,n),a=i?i.range(e,+t+1):[];return s?a.reverse():a}function o(n,s,o){const i=Math.abs(s-n)/o,t=A1(([,,e])=>e).right(e,i);if(t===e.length)return a.every(ah(n/ku,s/ku,o));if(t===0)return F6.every(Math.max(ah(n,s,o),1));const[r,c]=e[i/e[t-1][2]<e[t][2]/i?t-1:t];return r.every(c)}return[r,o]}qp(Ds,$6,W1,U1,U6,z6);const[j6,X6]=qp(Pi,Ll,As,Ss,Sl,Cl);function wu(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Tu(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sa(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function K6(e){var u=e.dateTime,h=e.date,d=e.time,o=e.periods,i=e.days,a=e.shortDays,r=e.months,c=e.shortMonths,x=aa(o),O=oa(o),w=aa(i),y=oa(i),j=aa(a),v=oa(a),p=aa(r),g=oa(r),f=aa(c),b=oa(c),s={a:z,A:D,b:N,B:L,c:null,d:zf,e:zf,f:_v,g:Lv,G:Dv,H:yv,I:mv,j:bv,L:$p,m:xv,M:vv,p:R,q:P,Q:Hf,s:Gf,S:kv,u:wv,U:Tv,V:Ev,w:Cv,W:Sv,x:null,X:null,y:Av,Y:Bv,Z:Iv,"%":Wf},n={a:H,A:I,b:B,B:V,c:null,d:Uf,e:Uf,f:Fv,g:qv,G:jv,H:Mv,I:Nv,j:Rv,L:Xp,m:Ov,M:Pv,p:$,q:W,Q:Hf,s:Gf,S:Vv,u:Yv,U:zv,V:Uv,w:Wv,W:Hv,x:null,X:null,y:Gv,Y:$v,Z:Xv,"%":Wf},_={a:E,A:k,b:A,B:S,c:M,d:Vf,e:Vf,f:fv,g:Pf,G:Of,H:Yf,I:Yf,j:lv,L:hv,m:ov,M:cv,p:C,q:av,Q:pv,s:gv,S:uv,u:ev,U:rv,V:nv,w:tv,W:iv,x:F,X:T,y:Pf,Y:Of,Z:sv,"%":dv};s.x=t(h,s),s.X=t(d,s),s.c=t(u,s),n.x=t(h,n),n.X=t(d,n),n.c=t(u,n);function t(e,t){return function(o){var i=[],n=-1,a=0,l=e.length,s,r,c;for(o instanceof Date||(o=new Date(+o));++n<l;)e.charCodeAt(n)===37&&(i.push(e.slice(a,n)),(r=Ff[s=e.charAt(++n)])!=null?s=e.charAt(++n):r=s==="e"?" ":"0",(c=t[s])&&(s=c(o,r)),i.push(s),a=n+1);return i.push(e.slice(a,n)),i.join("")}}function m(e,t){return function(i){var n=sa(1900,void 0,1),a=l(n,e,i+="",0),s,o;if(a!=i.length)return null;if("Q"in n)return new Date(n.Q);if("s"in n)return new Date(n.s*1e3+("L"in n?n.L:0));if(t&&!("Z"in n)&&(n.Z=0),"p"in n&&(n.H=n.H%12+n.p*12),n.m===void 0&&(n.m="q"in n?n.q:0),"V"in n){if(n.V<1||n.V>53)return null;"w"in n||(n.w=1),"Z"in n?(s=Tu(sa(n.y,0,1)),o=s.getUTCDay(),s=o>4||o===0?Bl.ceil(s):Bl(s),s=U1.offset(s,(n.V-1)*7),n.y=s.getUTCFullYear(),n.m=s.getUTCMonth(),n.d=s.getUTCDate()+(n.w+6)%7):(s=wu(sa(n.y,0,1)),o=s.getDay(),s=o>4||o===0?Al.ceil(s):Al(s),s=Ss.offset(s,(n.V-1)*7),n.y=s.getFullYear(),n.m=s.getMonth(),n.d=s.getDate()+(n.w+6)%7)}else("W"in n||"U"in n)&&("w"in n||(n.w="u"in n?n.u%7:"W"in n?1:0),o="Z"in n?Tu(sa(n.y,0,1)).getUTCDay():wu(sa(n.y,0,1)).getDay(),n.m=0,n.d="W"in n?(n.w+6)%7+n.W*7-(o+5)%7:n.w+n.U*7-(o+6)%7);return"Z"in n?(n.H+=n.Z/100|0,n.M+=n.Z%100,Tu(n)):wu(n)}}function l(a,s,o,t){for(var n=0,r=s.length,c=o.length,e,i;n<r;){if(t>=c)return-1;if(e=s.charCodeAt(n++),e===37){if(e=s.charAt(n++),i=_[e in Ff?s.charAt(n++):e],!i||(t=i(a,o,t))<0)return-1}else if(e!=o.charCodeAt(t++))return-1}return t}function C(n,s,t){var e=x.exec(s.slice(t));return e?(n.p=O.get(e[0].toLowerCase()),t+e[0].length):-1}function E(n,s,t){var e=j.exec(s.slice(t));return e?(n.w=v.get(e[0].toLowerCase()),t+e[0].length):-1}function k(n,s,t){var e=w.exec(s.slice(t));return e?(n.w=y.get(e[0].toLowerCase()),t+e[0].length):-1}function A(n,s,t){var e=f.exec(s.slice(t));return e?(n.m=b.get(e[0].toLowerCase()),t+e[0].length):-1}function S(n,s,t){var e=p.exec(s.slice(t));return e?(n.m=g.get(e[0].toLowerCase()),t+e[0].length):-1}function M(e,t,n){return l(e,u,t,n)}function F(e,t,n){return l(e,h,t,n)}function T(e,t,n){return l(e,d,t,n)}function z(e){return a[e.getDay()]}function D(e){return i[e.getDay()]}function N(e){return c[e.getMonth()]}function L(e){return r[e.getMonth()]}function R(e){return o[+(e.getHours()>=12)]}function P(e){return 1+~~(e.getMonth()/3)}function H(e){return a[e.getUTCDay()]}function I(e){return i[e.getUTCDay()]}function B(e){return c[e.getUTCMonth()]}function V(e){return r[e.getUTCMonth()]}function $(e){return o[+(e.getUTCHours()>=12)]}function W(e){return 1+~~(e.getUTCMonth()/3)}return{format:function(e){var n=t(e+="",s);return n.toString=function(){return e},n},parse:function(e){var t=m(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var s=t(e+="",n);return s.toString=function(){return e},s},utcParse:function(e){var t=m(e+="",!0);return t.toString=function(){return e},t}}}var Ff={"-":"",_:" ",0:"0"},Qe=/^\s*\d+/,Z6=/^%/,Q6=/[\\^$*+?|[\]().{}]/g;function he(e,i,n){var s=e<0?"-":"",t=(s?-e:e)+"",o=t.length;return s+(o<n?new Array(n-o+1).join(i)+t:t)}function J6(e){return e.replace(Q6,"\\$&")}function aa(e){return new RegExp("^(?:"+e.map(J6).join("|")+")","i")}function oa(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function tv(n,s,e){var t=Qe.exec(s.slice(e,e+1));return t?(n.w=+t[0],e+t[0].length):-1}function ev(n,s,e){var t=Qe.exec(s.slice(e,e+1));return t?(n.u=+t[0],e+t[0].length):-1}function rv(n,s,e){var t=Qe.exec(s.slice(e,e+2));return t?(n.U=+t[0],e+t[0].length):-1}function nv(n,s,e){var t=Qe.exec(s.slice(e,e+2));return t?(n.V=+t[0],e+t[0].length):-1}function iv(n,s,e){var t=Qe.exec(s.slice(e,e+2));return t?(n.W=+t[0],e+t[0].length):-1}function Of(n,s,e){var t=Qe.exec(s.slice(e,e+4));return t?(n.y=+t[0],e+t[0].length):-1}function Pf(n,s,t){var e=Qe.exec(s.slice(t,t+2));return e?(n.y=+e[0]+(+e[0]>68?1900:2e3),t+e[0].length):-1}function sv(n,s,t){var e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(t,t+6));return e?(n.Z=e[1]?0:-(e[2]+(e[3]||"00")),t+e[0].length):-1}function av(n,s,e){var t=Qe.exec(s.slice(e,e+1));return t?(n.q=t[0]*3-3,e+t[0].length):-1}function ov(n,s,e){var t=Qe.exec(s.slice(e,e+2));return t?(n.m=t[0]-1,e+t[0].length):-1}function Vf(n,s,e){var t=Qe.exec(s.slice(e,e+2));return t?(n.d=+t[0],e+t[0].length):-1}function lv(n,s,e){var t=Qe.exec(s.slice(e,e+3));return t?(n.m=0,n.d=+t[0],e+t[0].length):-1}function Yf(n,s,e){var t=Qe.exec(s.slice(e,e+2));return t?(n.H=+t[0],e+t[0].length):-1}function cv(n,s,e){var t=Qe.exec(s.slice(e,e+2));return t?(n.M=+t[0],e+t[0].length):-1}function uv(n,s,e){var t=Qe.exec(s.slice(e,e+2));return t?(n.S=+t[0],e+t[0].length):-1}function hv(n,s,e){var t=Qe.exec(s.slice(e,e+3));return t?(n.L=+t[0],e+t[0].length):-1}function fv(n,s,e){var t=Qe.exec(s.slice(e,e+6));return t?(n.L=Math.floor(t[0]/1e3),e+t[0].length):-1}function dv(s,n,e){var t=Z6.exec(n.slice(e,e+1));return t?e+t[0].length:-1}function pv(n,s,t){var e=Qe.exec(s.slice(t));return e?(n.Q=+e[0],t+e[0].length):-1}function gv(n,s,t){var e=Qe.exec(s.slice(t));return e?(n.s=+e[0],t+e[0].length):-1}function zf(e,t){return he(e.getDate(),t,2)}function yv(e,t){return he(e.getHours(),t,2)}function mv(e,t){return he(e.getHours()%12||12,t,2)}function bv(e,t){return he(1+Ss.count(Pi(e),e),t,3)}function $p(e,t){return he(e.getMilliseconds(),t,3)}function _v(e,t){return $p(e,t)+"000"}function xv(e,t){return he(e.getMonth()+1,t,2)}function vv(e,t){return he(e.getMinutes(),t,2)}function kv(e,t){return he(e.getSeconds(),t,2)}function wv(t){var e=t.getDay();return e===0?7:e}function Tv(e,t){return he(As.count(Pi(e)-1,e),t,2)}function jp(e){var t=e.getDay();return t>=4||t===0?Ls(e):Ls.ceil(e)}function Ev(e,t){return e=jp(e),he(Ls.count(Pi(e),e)+(Pi(e).getDay()===4),t,2)}function Cv(e){return e.getDay()}function Sv(e,t){return he(Al.count(Pi(e)-1,e),t,2)}function Av(e,t){return he(e.getFullYear()%100,t,2)}function Lv(e,t){return e=jp(e),he(e.getFullYear()%100,t,2)}function Bv(e,t){return he(e.getFullYear()%1e4,t,4)}function Dv(e,n){var t=e.getDay();return e=t>=4||t===0?Ls(e):Ls.ceil(e),he(e.getFullYear()%1e4,n,4)}function Iv(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+he(e/60|0,"0",2)+he(e%60,"0",2)}function Uf(e,t){return he(e.getUTCDate(),t,2)}function Mv(e,t){return he(e.getUTCHours(),t,2)}function Nv(e,t){return he(e.getUTCHours()%12||12,t,2)}function Rv(e,t){return he(1+U1.count(Ds(e),e),t,3)}function Xp(e,t){return he(e.getUTCMilliseconds(),t,3)}function Fv(e,t){return Xp(e,t)+"000"}function Ov(e,t){return he(e.getUTCMonth()+1,t,2)}function Pv(e,t){return he(e.getUTCMinutes(),t,2)}function Vv(e,t){return he(e.getUTCSeconds(),t,2)}function Yv(t){var e=t.getUTCDay();return e===0?7:e}function zv(e,t){return he(W1.count(Ds(e)-1,e),t,2)}function Kp(e){var t=e.getUTCDay();return t>=4||t===0?Bs(e):Bs.ceil(e)}function Uv(e,t){return e=Kp(e),he(Bs.count(Ds(e),e)+(Ds(e).getUTCDay()===4),t,2)}function Wv(e){return e.getUTCDay()}function Hv(e,t){return he(Bl.count(Ds(e)-1,e),t,2)}function Gv(e,t){return he(e.getUTCFullYear()%100,t,2)}function qv(e,t){return e=Kp(e),he(e.getUTCFullYear()%100,t,2)}function $v(e,t){return he(e.getUTCFullYear()%1e4,t,4)}function jv(e,n){var t=e.getUTCDay();return e=t>=4||t===0?Bs(e):Bs.ceil(e),he(e.getUTCFullYear()%1e4,n,4)}function Xv(){return"+0000"}function Wf(){return"%"}function Hf(e){return+e}function Gf(e){return Math.floor(+e/1e3)}Kv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kv(e){return as=K6(e),Dl=as.format,as.parse,as.utcFormat,as.utcParse,as}function Zv(e){return new Date(e)}function Qv(e){return e instanceof Date?+e:+new Date(+e)}function Zp(u,s,o,l,d,i,a,r,c,t){var e=Rp(),h=e.invert,n=e.domain,m=t(".%L"),f=t(":%S"),p=t("%I:%M"),g=t("%I %p"),v=t("%a %d"),b=t("%b %d"),j=t("%B"),y=t("%Y");function _(e){return(c(e)<e?m:r(e)<e?f:a(e)<e?p:i(e)<e?g:l(e)<e?d(e)<e?v:b:o(e)<e?j:y)(e)}return e.invert=function(e){return new Date(h(e))},e.domain=function(e){return arguments.length?n(Array.from(e,Qv)):n().map(Zv)},e.ticks=function(t){var e=n();return u(e[0],e[e.length-1],t??10)},e.tickFormat=function(n,e){return e==null?_:t(e)},e.nice=function(t){var o=n();return(!t||typeof t.range!="function")&&(t=s(o[0],o[o.length-1],t??10)),t?n(R6(o,t)):e},e.copy=function(){return Np(e,Zp(u,s,o,l,d,i,a,r,c,t))},e}function Jv(){return V1.apply(Zp(j6,X6,Pi,Ll,As,Ss,Sl,Cl,ma,Dl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Le(e){return function(){return e}}const qf=Math.abs,nr=Math.atan2,wi=Math.cos,tk=Math.max,Eu=Math.min,fn=Math.sin,hs=Math.sqrt,ir=1e-12,Pa=Math.PI,Il=Pa/2,Ko=2*Pa;function ek(e){return e>1?0:e<-1?Pa:Math.acos(e)}function $f(e){return e>=1?Il:e<=-1?-Il:Math.asin(e)}function rk(e){return e.innerRadius}function nk(e){return e.outerRadius}function ik(e){return e.startAngle}function sk(e){return e.endAngle}function ak(e){return e&&e.padAngle}function ok(n,t,l,u,o,i,h,d){var a=l-n,s=u-t,r=h-o,c=d-i,e=c*a-r*s;if(!(e*e<ir))return e=(r*(t-i)-c*(n-o))/e,[n+e*a,t+e*s]}function Mo(b,C,x,O,g,d,F){var l=b-x,c=C-O,_=(F?d:-d)/hs(l*l+c*c),v=_*c,u=-_*l,h=b+v,m=C+u,f=x+v,p=O+u,y=(h+f)/2,j=(m+p)/2,n=f-h,e=p-m,s=n*n+e*e,r=g-d,t=h*p-f*m,i=(e<0?-1:1)*hs(tk(0,r*r*s-t*t)),a=(t*e-n*i)/s,o=(-t*n-e*i)/s,E=(t*e+n*i)/s,k=(-t*n+e*i)/s,A=a-y,S=o-j,w=E-y,M=k-j;return A*A+S*S>w*w+M*M&&(a=E,o=k),{cx:a,cy:o,x01:-v,y01:-u,x11:a*(g/r-1),y11:o*(g/r-1)}}function xh(){var n=rk,a=nk,c=Le(0),s=null,o=ik,i=sk,r=ak,e=null;function t(){var T,$,d=+n.apply(this,arguments),u=+a.apply(this,arguments),m=o.apply(this,arguments)-Il,f=i.apply(this,arguments)-Il,A=qf(f-m),h=f>m;if(e||(e=T=O1()),u<d&&($=u,u=d,d=$),!(u>ir))e.moveTo(0,0);else if(A>Ko-ir)e.moveTo(u*wi(m),u*fn(m)),e.arc(0,0,u,m,f,!h),d>ir&&(e.moveTo(d*wi(f),d*fn(f)),e.arc(0,0,d,f,m,h));else{var _=m,x=f,O=m,w=f,L=A,N=A,D=r.apply(this,arguments)/2,z=D>ir&&(s?+s.apply(this,arguments):hs(d*d+u*u)),b=Eu(qf(u-d)/2,+c.apply(this,arguments)),v=b,g=b,t,l,S,M;z>ir&&(S=$f(z/d*fn(D)),M=$f(z/u*fn(D)),(L-=S*2)>ir?(S*=h?1:-1,O+=S,w-=S):(L=0,O=w=(m+f)/2),(N-=M*2)>ir?(M*=h?1:-1,_+=M,x-=M):(N=0,_=x=(m+f)/2));var y=u*wi(_),j=u*fn(_),E=d*wi(w),C=d*fn(w);if(b>ir){var k=u*wi(x),F=u*fn(x),R=d*wi(O),P=d*fn(O),p;if(A<Pa&&(p=ok(y,j,R,P,k,F,E,C))){var I=y-p[0],B=j-p[1],V=k-p[0],H=F-p[1],W=1/fn(ek((I*V+B*H)/(hs(I*I+B*B)*hs(V*V+H*H)))/2),U=hs(p[0]*p[0]+p[1]*p[1]);v=Eu(b,(d-U)/(W-1)),g=Eu(b,(u-U)/(W+1))}}N>ir?g>ir?(t=Mo(R,P,y,j,u,g,h),l=Mo(k,F,E,C,u,g,h),e.moveTo(t.cx+t.x01,t.cy+t.y01),g<b?e.arc(t.cx,t.cy,g,nr(t.y01,t.x01),nr(l.y01,l.x01),!h):(e.arc(t.cx,t.cy,g,nr(t.y01,t.x01),nr(t.y11,t.x11),!h),e.arc(0,0,u,nr(t.cy+t.y11,t.cx+t.x11),nr(l.cy+l.y11,l.cx+l.x11),!h),e.arc(l.cx,l.cy,g,nr(l.y11,l.x11),nr(l.y01,l.x01),!h))):(e.moveTo(y,j),e.arc(0,0,u,_,x,!h)):e.moveTo(y,j),!(d>ir)||!(L>ir)?e.lineTo(E,C):v>ir?(t=Mo(E,C,k,F,d,-v,h),l=Mo(y,j,R,P,d,-v,h),e.lineTo(t.cx+t.x01,t.cy+t.y01),v<b?e.arc(t.cx,t.cy,v,nr(t.y01,t.x01),nr(l.y01,l.x01),!h):(e.arc(t.cx,t.cy,v,nr(t.y01,t.x01),nr(t.y11,t.x11),!h),e.arc(0,0,d,nr(t.cy+t.y11,t.cx+t.x11),nr(l.cy+l.y11,l.cx+l.x11),h),e.arc(l.cx,l.cy,v,nr(l.y11,l.x11),nr(l.y01,l.x01),!h))):e.arc(0,0,d,w,O,h)}if(e.closePath(),T)return e=null,T+""||null}return t.centroid=function(){var e=(+n.apply(this,arguments)+ +a.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +i.apply(this,arguments))/2-Pa/2;return[wi(t)*e,fn(t)*e]},t.innerRadius=function(e){return arguments.length?(n=typeof e=="function"?e:Le(+e),t):n},t.outerRadius=function(e){return arguments.length?(a=typeof e=="function"?e:Le(+e),t):a},t.cornerRadius=function(e){return arguments.length?(c=typeof e=="function"?e:Le(+e),t):c},t.padRadius=function(e){return arguments.length?(s=e==null?null:typeof e=="function"?e:Le(+e),t):s},t.startAngle=function(e){return arguments.length?(o=typeof e=="function"?e:Le(+e),t):o},t.endAngle=function(e){return arguments.length?(i=typeof e=="function"?e:Le(+e),t):i},t.padAngle=function(e){return arguments.length?(r=typeof e=="function"?e:Le(+e),t):r},t.context=function(n){return arguments.length?(e=n??null,t):e},t}function Qp(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Jp(e){this._context=e}Jp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ar(e){return new Jp(e)}function lk(e){return e[0]}function ck(e){return e[1]}function js(s,t){var a=Le(!0),o=null,i=Ar,n=null;s=typeof s=="function"?s:s===void 0?lk:Le(s),t=typeof t=="function"?t:t===void 0?ck:Le(t);function e(r){var e,u=(r=Qp(r)).length,l,c=!1,d;for(o==null&&(n=i(d=O1())),e=0;e<=u;++e)!(e<u&&a(l=r[e],e,r))===c&&((c=!c)?n.lineStart():n.lineEnd()),c&&n.point(+s(l,e,r),+t(l,e,r));if(d)return n=null,d+""||null}return e.x=function(t){return arguments.length?(s=typeof t=="function"?t:Le(+t),e):s},e.y=function(n){return arguments.length?(t=typeof n=="function"?n:Le(+n),e):t},e.defined=function(t){return arguments.length?(a=typeof t=="function"?t:Le(!!t),e):a},e.curve=function(t){return arguments.length?(i=t,o!=null&&(n=i(o)),e):i},e.context=function(t){return arguments.length?(t==null?o=n=null:n=i(o=t),e):o},e}function uk(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function hk(e){return e}function fk(){var a=hk,t=uk,n=null,s=Le(0),o=Le(Ko),i=Le(0);function e(r){var e,c=(r=Qp(r)).length,m,v,p=0,u=new Array(c),l=new Array(c),h=+s.apply(this,arguments),g=Math.min(Ko,Math.max(-Ko,o.apply(this,arguments)-h)),f,b=Math.min(Math.abs(g)/c,i.apply(this,arguments)),j=b*(g<0?-1:1),d;for(e=0;e<c;++e)(d=l[u[e]=e]=+a(r[e],e,r))>0&&(p+=d);for(t!=null?u.sort(function(e,n){return t(l[e],l[n])}):n!=null&&u.sort(function(e,t){return n(r[e],r[t])}),e=0,v=p?(g-c*j)/p:0;e<c;++e,h=f)m=u[e],d=l[m],f=h+(d>0?d*v:0)+j,l[m]={data:r[m],index:e,value:d,startAngle:h,endAngle:f,padAngle:b};return l}return e.value=function(t){return arguments.length?(a=typeof t=="function"?t:Le(+t),e):a},e.sortValues=function(s){return arguments.length?(t=s,n=null,e):t},e.sort=function(s){return arguments.length?(n=s,t=null,e):n},e.startAngle=function(t){return arguments.length?(s=typeof t=="function"?t:Le(+t),e):s},e.endAngle=function(t){return arguments.length?(o=typeof t=="function"?t:Le(+t),e):o},e.padAngle=function(t){return arguments.length?(i=typeof t=="function"?t:Le(+t),e):i},e}class tg{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function dk(e){return new tg(e,!0)}function pk(e){return new tg(e,!1)}function pi(){}function Ml(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Tc(e){this._context=e}Tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ml(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ml(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Is(e){return new Tc(e)}function eg(e){this._context=e}eg.prototype={areaStart:pi,areaEnd:pi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ml(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gk(e){return new eg(e)}function rg(e){this._context=e}rg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:Ml(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yk(e){return new rg(e)}function ng(e,t){this._basis=new Tc(e),this._beta=t}ng.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,s=this._y,e=t.length-1;if(e>0)for(var i=t[0],a=s[0],r=t[e]-i,c=s[e]-a,n=-1,o;++n<=e;)o=n/e,this._basis.point(this._beta*t[n]+(1-this._beta)*(i+o*r),this._beta*s[n]+(1-this._beta)*(a+o*c));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const mk=function n(e){function t(t){return e===1?new Tc(t):new ng(t,e)}return t.beta=function(e){return n(+e)},t}(.85);function Nl(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function G1(e,t){this._context=e,this._k=(1-t)/6}G1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Nl(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Nl(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bk=function t(n){function e(e){return new G1(e,n)}return e.tension=function(e){return t(+e)},e}(0);function q1(e,t){this._context=e,this._k=(1-t)/6}q1.prototype={areaStart:pi,areaEnd:pi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Nl(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _k=function t(n){function e(e){return new q1(e,n)}return e.tension=function(e){return t(+e)},e}(0);function $1(e,t){this._context=e,this._k=(1-t)/6}$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Nl(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xk=function t(n){function e(e){return new $1(e,n)}return e.tension=function(e){return t(+e)},e}(0);function j1(e,l,d){var t=e._x1,n=e._y1,s=e._x2,o=e._y2,i,a,r,c;e._l01_a>ir&&(i=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,a=3*e._l01_a*(e._l01_a+e._l12_a),t=(t*i-e._x0*e._l12_2a+e._x2*e._l01_2a)/a,n=(n*i-e._y0*e._l12_2a+e._y2*e._l01_2a)/a),e._l23_a>ir&&(r=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a),s=(s*r+e._x1*e._l23_2a-l*e._l12_2a)/c,o=(o*r+e._y1*e._l23_2a-d*e._l12_2a)/c),e._context.bezierCurveTo(t,n,s,o,e._x2,e._y2)}function ig(e,t){this._context=e,this._alpha=t}ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:j1(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vk=function n(e){function t(t){return e?new ig(t,e):new G1(t,0)}return t.alpha=function(e){return n(+e)},t}(.5);function sg(e,t){this._context=e,this._alpha=t}sg.prototype={areaStart:pi,areaEnd:pi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:j1(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kk=function n(e){function t(t){return e?new sg(t,e):new q1(t,0)}return t.alpha=function(e){return n(+e)},t}(.5);function ag(e,t){this._context=e,this._alpha=t}ag.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:j1(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wk=function n(e){function t(t){return e?new ag(t,e):new $1(t,0)}return t.alpha=function(e){return n(+e)},t}(.5);function og(e){this._context=e}og.prototype={areaStart:pi,areaEnd:pi,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Tk(e){return new og(e)}function jf(e){return e<0?-1:1}function Xf(e,i,a){var t=e._x1-e._x0,n=i-e._x1,s=(e._y1-e._y0)/(t||n<0&&-0),o=(a-e._y1)/(n||t<0&&-0),r=(s*n+o*t)/(t+n);return(jf(s)+jf(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(r))||0}function Kf(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Cu(e,r,i){var s=e._x0,a=e._y0,n=e._x1,o=e._y1,t=(n-s)/3;e._context.bezierCurveTo(s+t,a+t*r,n-t,o-t*i,n,o)}function Rl(e){this._context=e}Rl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Cu(this,this._t0,Kf(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Cu(this,Kf(this,n=Xf(this,e,t)),n);break;default:Cu(this,this._t0,n=Xf(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function lg(e){this._context=new cg(e)}(lg.prototype=Object.create(Rl.prototype)).point=function(e,t){Rl.prototype.point.call(this,t,e)};function cg(e){this._context=e}cg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,o,i){this._context.bezierCurveTo(t,e,s,n,i,o)}};function Ek(e){return new Rl(e)}function Ck(e){return new lg(e)}function ug(e){this._context=e}ug.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,s=e.length;if(s)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),s===2)this._context.lineTo(e[1],t[1]);else for(var i=Zf(e),a=Zf(t),n=0,o=1;o<s;++n,++o)this._context.bezierCurveTo(i[0][n],a[0][n],i[1][n],a[1][n],e[o],t[o]);(this._line||this._line!==0&&s===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Zf(o){var e,t=o.length-1,a,n=new Array(t),s=new Array(t),i=new Array(t);for(n[0]=0,s[0]=2,i[0]=o[0]+2*o[1],e=1;e<t-1;++e)n[e]=1,s[e]=4,i[e]=4*o[e]+2*o[e+1];for(n[t-1]=2,s[t-1]=7,i[t-1]=8*o[t-1]+o[t],e=1;e<t;++e)a=n[e]/s[e-1],s[e]-=a,i[e]-=a*i[e-1];for(n[t-1]=i[t-1]/s[t-1],e=t-2;e>=0;--e)n[e]=(i[e]-n[e+1])/s[e];for(s[t-1]=(o[t]+n[t-1])/2,e=0;e<t-1;++e)s[e]=2*o[e+1]-n[e+1];return[n,s]}function Sk(e){return new ug(e)}function Ec(e,t){this._context=e,this._t=t}Ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Ak(e){return new Ec(e,.5)}function Lk(e){return new Ec(e,0)}function Bk(e){return new Ec(e,1)}function ba(e,t,n){this.k=e,this.x=t,this.y=n}ba.prototype={constructor:ba,scale:function(e){return e===1?this:new ba(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ba(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},ba.prototype;function ai(e){return ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ai(e)}function vh(e,t){return vh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vh(e,t)}function Dk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zo(){return Dk()?Zo=Reflect.construct:Zo=function(s,o,t){e=[null],e.push.apply(e,o);var e,i=Function.bind.apply(s,e),n=new i;return t&&vh(n,t.prototype),n},Zo.apply(null,arguments)}function qr(e){return Ik(e)||Mk(e)||Nk(e)||Rk()}function Ik(e){if(Array.isArray(e))return kh(e)}function Mk(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nk(e,n){if(e){if(typeof e=="string")return kh(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kh(e,n)}}function kh(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function Rk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fk=Object.hasOwnProperty,Qf=Object.setPrototypeOf,Ok=Object.isFrozen,Pk=Object.getPrototypeOf,Vk=Object.getOwnPropertyDescriptor,yr=Object.freeze,rn=Object.seal,Yk=Object.create,hg=typeof Reflect<"u"&&Reflect,Fl=hg.apply,wh=hg.construct;Fl||(Fl=function(e,t,n){return e.apply(t,n)}),yr||(yr=function(e){return e}),rn||(rn=function(e){return e}),wh||(wh=function(e,t){return Zo(e,qr(t))});var zk=zr(Array.prototype.forEach),Jf=zr(Array.prototype.pop),la=zr(Array.prototype.push),Qo=zr(String.prototype.toLowerCase),Su=zr(String.prototype.toString),Uk=zr(String.prototype.match),Gr=zr(String.prototype.replace),Wk=zr(String.prototype.indexOf),Hk=zr(String.prototype.trim),ur=zr(RegExp.prototype.test),Au=Gk(TypeError);function zr(e){return function(o){for(var n=arguments.length,s=new Array(n>1?n-1:0),t=1;t<n;t++)s[t-1]=arguments[t];return Fl(e,o,s)}}function Gk(e){return function(){for(var n=arguments.length,s=new Array(n),t=0;t<n;t++)s[t]=arguments[t];return wh(e,s)}}function le(n,t,s){s=s||Qo,Qf&&Qf(n,null);for(var o=t.length,e,i;o--;)e=t[o],typeof e=="string"&&(i=s(e),i!==e&&(Ok(t)||(t[o]=i),e=i)),n[e]=!0;return n}function Ti(t){var n=Yk(null),e;for(e in t)Fl(Fk,t,[e])===!0&&(n[e]=t[e]);return n}function No(t,n){for(;t!==null;){var e=Vk(t,n);if(e){if(e.get)return zr(e.get);if(typeof e.value=="function")return zr(e.value)}t=Pk(t)}function s(e){return console.warn("fallback value for",e),null}return s}var td=yr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Lu=yr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Bu=yr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qk=yr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Du=yr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$k=yr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ed=yr(["#text"]),rd=yr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Iu=yr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nd=yr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ro=yr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),jk=rn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Xk=rn(/<%[\w\W]*|[\w\W]*%>/gm),Kk=rn(/\${[\w\W]*}/gm),Zk=rn(/^data-[-\w.\u00B7-\uFFFF]/),Qk=rn(/^aria-[-\w]+$/),Jk=rn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.-]+(?:[^a-z+.\-:]|$))/i),t8=rn(/^(?:\w+script|data):/i),e8=rn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),r8=rn(/^html$/i),n8=function(){return typeof window>"u"?null:window},i8=function(e,t){if(ai(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,s="data-tt-policy-suffix",o;t.currentScript&&t.currentScript.hasAttribute(s)&&(n=t.currentScript.getAttribute(s)),o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function fg(){if(t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n8(),e=function(e){return fg(e)},e.version="2.4.3",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var N=t.document,d=t.document,eh=t.DocumentFragment,eL=t.HTMLTemplateElement,V=t.Node,e0=t.Element,U=t.NodeFilter,ee=t.NamedNodeMap,eN=ee===void 0?t.NamedNodeMap||t.MozNamedAttrMap:ee,eD=t.HTMLFormElement,e7=t.DOMParser,k=t.trustedTypes,E=e0.prototype,ez=No(E,"cloneNode"),eT=No(E,"nextSibling"),eF=No(E,"childNodes"),F=No(E,"parentNode");typeof eL=="function"&&(Z=d.createElement("template"),Z.content&&Z.content.ownerDocument&&(d=Z.content.ownerDocument));var a=i8(k,N),G=a?a.createHTML(""):"",x=d,Y=x.implementation,eS=x.createNodeIterator,eA=x.createDocumentFragment,ek=x.getElementsByTagName,eE=N.importNode,e6={};try{e6=Ti(d).documentMode?d.documentMode:{}}catch{}r={},e.isSupported=typeof F=="function"&&Y&&typeof Y.createHTMLDocument<"u"&&e6!==9;var t,e,Z,r,D=jk,L=Xk,T=Kk,ex=Zk,eO=Qk,e_=t8,e5=e8,R=Jk,s=null,ef=le({},[].concat(qr(td),qr(Lu),qr(Bu),qr(Du),qr(ed))),i=null,em=le({},[].concat(qr(rd),qr(Iu),qr(nd),qr(Ro))),n=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),w=null,W=null,er=!0,K=!0,eo=!1,p=!1,u=!1,X=!1,Q=!1,j=!1,C=!1,O=!1,et=!0,en=!1,ey="user-content-",q=!0,y=!1,m={},g=null,ec=le({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),el=null,eu=le({},["audio","video","img","source","image","track"]),$=null,e4=le({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),M="http://www.w3.org/1998/Math/MathML",A="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xhtml",b=l,B=!1,H=null,ej=le({},[M,A,l],Su),h,eb=["application/xhtml+xml","text/html"],ev="text/html",o,v=null,e9=d.createElement("form"),eg=function(e){return e instanceof RegExp||e instanceof Function},P=function(e){v&&v===e||((!e||ai(e)!=="object")&&(e={}),e=Ti(e),h=eb.indexOf(e.PARSER_MEDIA_TYPE)===-1?h=ev:h=e.PARSER_MEDIA_TYPE,o=h==="application/xhtml+xml"?Su:Qo,s="ALLOWED_TAGS"in e?le({},e.ALLOWED_TAGS,o):ef,i="ALLOWED_ATTR"in e?le({},e.ALLOWED_ATTR,o):em,H="ALLOWED_NAMESPACES"in e?le({},e.ALLOWED_NAMESPACES,Su):ej,$="ADD_URI_SAFE_ATTR"in e?le(Ti(e4),e.ADD_URI_SAFE_ATTR,o):e4,el="ADD_DATA_URI_TAGS"in e?le(Ti(eu),e.ADD_DATA_URI_TAGS,o):eu,g="FORBID_CONTENTS"in e?le({},e.FORBID_CONTENTS,o):ec,w="FORBID_TAGS"in e?le({},e.FORBID_TAGS,o):{},W="FORBID_ATTR"in e?le({},e.FORBID_ATTR,o):{},m="USE_PROFILES"in e&&e.USE_PROFILES,er=e.ALLOW_ARIA_ATTR!==!1,K=e.ALLOW_DATA_ATTR!==!1,eo=e.ALLOW_UNKNOWN_PROTOCOLS||!1,p=e.SAFE_FOR_TEMPLATES||!1,u=e.WHOLE_DOCUMENT||!1,j=e.RETURN_DOM||!1,C=e.RETURN_DOM_FRAGMENT||!1,O=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,et=e.SANITIZE_DOM!==!1,en=e.SANITIZE_NAMED_PROPS||!1,q=e.KEEP_CONTENT!==!1,y=e.IN_PLACE||!1,R=e.ALLOWED_URI_REGEXP||R,b=e.NAMESPACE||l,e.CUSTOM_ELEMENT_HANDLING&&eg(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(n.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&eg(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(n.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(n.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),p&&(K=!1),C&&(j=!0),m&&(s=le({},qr(ed)),i=[],m.html===!0&&(le(s,td),le(i,rd)),m.svg===!0&&(le(s,Lu),le(i,Iu),le(i,Ro)),m.svgFilters===!0&&(le(s,Bu),le(i,Iu),le(i,Ro)),m.mathMl===!0&&(le(s,Du),le(i,nd),le(i,Ro))),e.ADD_TAGS&&(s===ef&&(s=Ti(s)),le(s,e.ADD_TAGS,o)),e.ADD_ATTR&&(i===em&&(i=Ti(i)),le(i,e.ADD_ATTR,o)),e.ADD_URI_SAFE_ATTR&&le($,e.ADD_URI_SAFE_ATTR,o),e.FORBID_CONTENTS&&(g===ec&&(g=Ti(g)),le(g,e.FORBID_CONTENTS,o)),q&&(s["#text"]=!0),u&&le(s,["html","head","body"]),s.table&&(le(s,["tbody"]),delete w.tbody),yr&&yr(e),v=e)},es=le({},["mi","mo","mn","ms","mtext"]),ep=le({},["foreignobject","desc","title","annotation-xml"]),ew=le({},["title","style","font","a","script"]),S=le({},Lu),z;le(S,Bu),le(S,qk),z=le({},Du),le(z,$k);var eC=function(n){e=F(n),(!e||!e.tagName)&&(e={namespaceURI:b,tagName:"template"});var e,t=Qo(n.tagName),s=Qo(e.tagName);return!!H[n.namespaceURI]&&(n.namespaceURI===A?e.namespaceURI===l?t==="svg":e.namespaceURI===M?t==="svg"&&(s==="annotation-xml"||es[s]):Boolean(S[t]):n.namespaceURI===M?e.namespaceURI===l?t==="math":e.namespaceURI===A?t==="math"&&ep[s]:Boolean(z[t]):n.namespaceURI===l?!(e.namespaceURI===A&&!ep[s]||e.namespaceURI===M&&!es[s])&&!z[t]&&(ew[t]||!S[t]):!!(h==="application/xhtml+xml"&&H[n.namespaceURI]))},f=function(t){la(e.removed,{element:t});try{t.parentNode.removeChild(t)}catch{try{t.outerHTML=G}catch{t.remove()}}},I=function(n,t){try{la(e.removed,{attribute:t.getAttributeNode(n),from:t})}catch{la(e.removed,{attribute:null,from:t})}if(t.removeAttribute(n),n==="is"&&!i[n])if(j||C)try{f(t)}catch{}else try{t.setAttribute(n,"")}catch{}},e2=function(t){if(Q)t="<remove></remove>"+t;else{var e,n,o=Uk(t,/^[\r\n\t ]+/),i,s;n=o&&o[0]}if(h==="application/xhtml+xml"&&b===l&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>"),i=a?a.createHTML(t):t,b===l)try{e=(new e7).parseFromString(i,h)}catch{}if(!e||!e.documentElement){e=Y.createDocument(b,"template",null);try{e.documentElement.innerHTML=B?G:i}catch{}}return s=e.body||e.documentElement,t&&n&&s.insertBefore(d.createTextNode(n),s.childNodes[0]||null),b===l?ek.call(e,u?"html":"body")[0]:u?e.documentElement:s},e1=function(e){return eS.call(e.ownerDocument||e,e,U.SHOW_ELEMENT|U.SHOW_COMMENT|U.SHOW_TEXT,null,!1)},eM=function(e){return e instanceof eD&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof eN)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},_=function(e){return ai(V)==="object"?e instanceof V:e&&ai(e)==="object"&&typeof e.nodeType=="number"&&typeof e.nodeName=="string"},c=function(t,n,s){r[t]&&zk(r[t],function(t){t.call(e,n,s,v)})},J=function(t){if(c("beforeSanitizeElements",t,null),eM(t)||ur(/[\u0080-\uFFFF]/,t.nodeName))return f(t),!0;if(i=o(t.nodeName),c("uponSanitizeElement",t,{tagName:i,allowedTags:s}),t.hasChildNodes()&&!_(t.firstElementChild)&&(!_(t.content)||!_(t.content.firstElementChild))&&ur(/<[/\w]/g,t.innerHTML)&&ur(/<[/\w]/g,t.textContent)||i==="select"&&ur(/<template/i,t.innerHTML))return f(t),!0;if(!s[i]||w[i]){if(!w[i]&&ea(i)&&(n.tagNameCheck instanceof RegExp&&ur(n.tagNameCheck,i)||n.tagNameCheck instanceof Function&&n.tagNameCheck(i)))return!1;if(q&&!g[i]){var a,i,d=F(t)||t.parentNode,r=eF(t)||t.childNodes,u,l;if(r&&d)for(u=r.length,l=u-1;l>=0;--l)d.insertBefore(ez(r[l],!0),eT(t))}return f(t),!0}return t instanceof e0&&!eC(t)||(i==="noscript"||i==="noembed")&&ur(/<\/no(script|embed)/i,t.innerHTML)?(f(t),!0):(p&&t.nodeType===3&&(a=t.textContent,a=Gr(a,D," "),a=Gr(a,L," "),a=Gr(a,T," "),t.textContent!==a&&(la(e.removed,{element:t.cloneNode()}),t.textContent=a)),c("afterSanitizeElements",t,null),!1)},ei=function(s,e,t){if(et&&(e==="id"||e==="name")&&(t in d||t in e9))return!1;if(!(K&&!W[e]&&ur(ex,e)))if(!(er&&ur(eO,e)))if(!i[e]||W[e]){if(!(ea(s)&&(n.tagNameCheck instanceof RegExp&&ur(n.tagNameCheck,s)||n.tagNameCheck instanceof Function&&n.tagNameCheck(s))&&(n.attributeNameCheck instanceof RegExp&&ur(n.attributeNameCheck,e)||n.attributeNameCheck instanceof Function&&n.attributeNameCheck(e))||e==="is"&&n.allowCustomizedBuiltInElements&&(n.tagNameCheck instanceof RegExp&&ur(n.tagNameCheck,t)||n.tagNameCheck instanceof Function&&n.tagNameCheck(t))))return!1}else if(!$[e])if(!ur(R,Gr(t,e5,"")))if(!((e==="src"||e==="xlink:href"||e==="href")&&s!=="script"&&Wk(t,"data:")===0&&el[s]))if(!(eo&&!ur(e_,Gr(t,e5,""))))if(t)return!1;return!0},ea=function(e){return e.indexOf("-")>0},e3=function(n){if(c("beforeSanitizeAttributes",n,null),h=n.attributes,h){s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:i};for(u=h.length;u--;){d=h[u];var d,t,l,u,h,s,f=d,r=f.name,m=f.namespaceURI,g;if(t=r==="value"?d.value:Hk(d.value),l=o(r),s.attrName=l,s.attrValue=t,s.keepAttr=!0,s.forceKeepAttr=void 0,c("uponSanitizeAttribute",n,s),t=s.attrValue,!s.forceKeepAttr&&(I(r,n),!!s.keepAttr)){if(ur(/\/>/i,t)){I(r,n);continue}if(p&&(t=Gr(t,D," "),t=Gr(t,L," "),t=Gr(t,T," ")),g=o(n.nodeName),ei(g,l,t)){if(en&&(l==="id"||l==="name")&&(I(r,n),t=ey+t),a&&ai(k)==="object"&&typeof k.getAttributeType=="function"&&!m)switch(k.getAttributeType(g,l)){case"TrustedHTML":t=a.createHTML(t);break;case"TrustedScriptURL":t=a.createScriptURL(t);break}try{m?n.setAttributeNS(m,r,t):n.setAttribute(r,t),Jf(e.removed)}catch{}}}}c("afterSanitizeAttributes",n,null)}},eR=function n(t){var e,s=e1(t);for(c("beforeSanitizeShadowDOM",t,null);e=s.nextNode();)c("uponSanitizeShadowNode",e,null),!J(e)&&(e.content instanceof eh&&n(e.content),e3(e));c("afterSanitizeShadowDOM",t,null)};return e.sanitize=function(n){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,h,l,m,d,g,b,c;if(B=!n,B&&(n="<!-->"),typeof n!="string"&&!_(n)){if(typeof n.toString!="function")throw Au("toString is not a function");if(n=n.toString(),typeof n!="string")throw Au("dirty is not a string, aborting")}if(!e.isSupported){if(ai(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof n=="string")return t.toStaticHTML(n);if(_(n))return t.toStaticHTML(n.outerHTML)}return n}if(X||P(v),e.removed=[],typeof n=="string"&&(y=!1),y){if(n.nodeName)if(g=o(n.nodeName),!s[g]||w[g])throw Au("root node is forbidden and cannot be sanitized in-place")}else if(n instanceof V)r=e2("<!---->"),h=r.ownerDocument.importNode(n,!0),h.nodeType===1&&h.nodeName==="BODY"||h.nodeName==="HTML"?r=h:r.appendChild(h);else{if(!j&&!p&&!u&&n.indexOf("<")===-1)return a&&O?a.createHTML(n):n;if(r=e2(n),!r)return j?null:O?G:""}r&&Q&&f(r.firstChild);for(b=e1(y?n:r);l=b.nextNode();)l.nodeType===3&&l===m||J(l)||(l.content instanceof eh&&eR(l.content),e3(l),m=l);if(m=null,y)return n;if(j){if(C)for(d=eA.call(r.ownerDocument);r.firstChild;)d.appendChild(r.firstChild);else d=r;return i.shadowroot&&(d=eE.call(N,d,!0)),d}return c=u?r.outerHTML:r.innerHTML,u&&s["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&ur(r8,r.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+r.ownerDocument.doctype.name+`>
`+c),p&&(c=Gr(c,D," "),c=Gr(c,L," "),c=Gr(c,T," ")),a&&O?a.createHTML(c):c},e.setConfig=function(e){P(e),X=!0},e.clearConfig=function(){v=null,X=!1},e.isValidAttribute=function(e,t,n){v||P({});var s=o(e),i=o(t);return ei(s,i,n)},e.addHook=function(e,t){typeof t=="function"&&(r[e]=r[e]||[],la(r[e],t))},e.removeHook=function(e){if(r[e])return Jf(r[e])},e.removeHooks=function(e){r[e]&&(r[e]=[])},e.removeAllHooks=function(){r={}},e}Va=fg();const s8=e=>e?pg(e).replace(/\\n/g,"#br#").split("#br#"):[""],dg=e=>Va.sanitize(e),id=(e,t)=>{var n;if(((n=t.flowchart)==null?void 0:n.htmlLabels)!==!1){const n=t.securityLevel;n==="antiscript"||n==="strict"?e=dg(e):n!=="loose"&&(e=pg(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=c8(e))}return e},Ur=(e,t)=>e&&(t.dompurifyConfig?e=Va.sanitize(id(e,t),t.dompurifyConfig).toString():e=Va.sanitize(id(e,t),{FORBID_TAGS:["style"]}).toString(),e),a8=(e,t)=>typeof e=="string"?Ur(e,t):e.flat().map(e=>Ur(e,t)),Cc=/<br\s*\/?>/gi,o8=e=>Cc.test(e),l8=e=>e.split(Cc),c8=e=>e.replace(/#br#/g,"<br/>"),pg=e=>e.replace(Cc,"#br#"),u8=t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},Ke=e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),ci=function(t){let e=t;if(t.split("~").length-1>=2){let t=e;do e=t,t=e.replace(/~([^\s,:;]+)~/,"<$1>");while(t!=e)return ci(t)}return e},Xt={getRows:s8,sanitizeText:Ur,sanitizeTextOrArray:a8,hasBreaks:o8,splitBreaks:l8,lineBreakRegex:Cc,removeScript:dg,getUrl:u8,evaluate:Ke},Jo={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(t,n,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(n-t)*6*e:e<1/2?n:e<2/3?t+(n-t)*(2/3-e)*6:t),hsl2rgb:({h:n,s:t,l:e},i)=>{if(!t)return e*2.55;n/=360,t/=100,e/=100;const s=e<.5?e*(1+t):e+t-e*t,o=2*e-s;switch(i){case"r":return Jo.hue2rgb(o,s,n+1/3)*255;case"g":return Jo.hue2rgb(o,s,n)*255;case"b":return Jo.hue2rgb(o,s,n-1/3)*255}},rgb2hsl:({r:n,g:e,b:t},a)=>{n/=255,e/=255,t/=255;const s=Math.max(n,e,t),o=Math.min(n,e,t),r=(s+o)/2;if(a==="l")return r*100;if(s===o)return 0;const i=s-o,c=r>.5?i/(2-s-o):i/(s+o);if(a==="s")return c*100;switch(s){case n:return((e-t)/i+(e<t?6:0))*60;case e:return((t-n)/i+2)*60;case t:return((n-e)/i+4)*60;default:return-1}}},h8=Jo,f8={clamp:(n,e,t)=>e>t?Math.min(e,Math.max(t,n)):Math.min(t,Math.max(e,n)),round:e=>Math.round(e*1e10)/1e10},d8=f8,p8={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},g8=p8,y8={channel:h8,lang:d8,unit:g8},ee=y8,ii={};for(let e=0;e<=255;e++)ii[e]=ee.unit.dec2hex(e);const sr={ALL:0,RGB:1,HSL:2};class m8{constructor(){this.type=sr.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=sr.ALL}is(e){return this.type===e}}const b8=m8;class _8{constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new b8}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=sr.ALL,this}_ensureHSL(){const e=this.data,{h:t,s:n,l:s}=e;t===void 0&&(e.h=ee.channel.rgb2hsl(e,"h")),n===void 0&&(e.s=ee.channel.rgb2hsl(e,"s")),s===void 0&&(e.l=ee.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:t,g:n,b:s}=e;t===void 0&&(e.r=ee.channel.hsl2rgb(e,"r")),n===void 0&&(e.g=ee.channel.hsl2rgb(e,"g")),s===void 0&&(e.b=ee.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,t=e.r;return!this.type.is(sr.HSL)&&t!==void 0?t:(this._ensureHSL(),ee.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,t=e.g;return!this.type.is(sr.HSL)&&t!==void 0?t:(this._ensureHSL(),ee.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,t=e.b;return!this.type.is(sr.HSL)&&t!==void 0?t:(this._ensureHSL(),ee.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,t=e.h;return!this.type.is(sr.RGB)&&t!==void 0?t:(this._ensureRGB(),ee.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,t=e.s;return!this.type.is(sr.RGB)&&t!==void 0?t:(this._ensureRGB(),ee.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,t=e.l;return!this.type.is(sr.RGB)&&t!==void 0?t:(this._ensureRGB(),ee.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(sr.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(sr.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(sr.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(sr.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(sr.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(sr.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const x8=_8,v8=new x8({r:0,g:0,b:0,a:0},"transparent"),Sc=v8,gg={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:s=>{if(s.charCodeAt(0)!==35)return;const c=s.match(gg.re);if(!c)return;const l=c[1],t=parseInt(l,16),d=l.length,r=d%4===0,i=d>4,e=i?1:17,o=i?8:4,a=r?0:-1,n=i?255:15;return Sc.set({r:(t>>o*(a+3)&n)*e,g:(t>>o*(a+2)&n)*e,b:(t>>o*(a+1)&n)*e,a:r?(t&n)*e/255:1},s)},stringify:o=>{const{r:e,g:t,b:n,a:s}=o;return s<1?`#${ii[Math.round(e)]}${ii[Math.round(t)]}${ii[Math.round(n)]}${ii[Math.round(s*255)]}`:`#${ii[Math.round(e)]}${ii[Math.round(t)]}${ii[Math.round(n)]}`}},Ta=gg,tl={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(tl.hueRe);if(t){const[,e,n]=t;switch(n){case"grad":return ee.channel.clamp.h(parseFloat(e)*.9);case"rad":return ee.channel.clamp.h(parseFloat(e)*180/Math.PI);case"turn":return ee.channel.clamp.h(parseFloat(e)*360)}}return ee.channel.clamp.h(parseFloat(e))},parse:e=>{const n=e.charCodeAt(0);if(n!==104&&n!==72)return;const s=e.match(tl.re);if(!s)return;const[,o,i,a,t,r]=s;return Sc.set({h:tl._hue2deg(o),s:ee.channel.clamp.s(parseFloat(i)),l:ee.channel.clamp.l(parseFloat(a)),a:t?ee.channel.clamp.a(r?parseFloat(t)/100:parseFloat(t)):1},e)},stringify:o=>{const{h:e,s:t,l:n,a:s}=o;return s<1?`hsla(${ee.lang.round(e)}, ${ee.lang.round(t)}%, ${ee.lang.round(n)}%, ${s})`:`hsl(${ee.lang.round(e)}, ${ee.lang.round(t)}%, ${ee.lang.round(n)}%)`}},Fo=tl,el={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=el.colors[e];if(t)return Ta.parse(t)},stringify:e=>{const t=Ta.stringify(e);for(const e in el.colors)if(el.colors[e]===t)return e}},sd=el,yg={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const n=e.charCodeAt(0);if(n!==114&&n!==82)return;const s=e.match(yg.re);if(!s)return;const[,a,r,o,c,i,l,t,d]=s;return Sc.set({r:ee.channel.clamp.r(r?parseFloat(a)*2.55:parseFloat(a)),g:ee.channel.clamp.g(c?parseFloat(o)*2.55:parseFloat(o)),b:ee.channel.clamp.b(l?parseFloat(i)*2.55:parseFloat(i)),a:t?ee.channel.clamp.a(d?parseFloat(t)/100:parseFloat(t)):1},e)},stringify:o=>{const{r:e,g:t,b:n,a:s}=o;return s<1?`rgba(${ee.lang.round(e)}, ${ee.lang.round(t)}, ${ee.lang.round(n)}, ${ee.lang.round(s)})`:`rgb(${ee.lang.round(e)}, ${ee.lang.round(t)}, ${ee.lang.round(n)})`}},Oo=yg,k8={format:{keyword:sd,hex:Ta,rgb:Oo,rgba:Oo,hsl:Fo,hsla:Fo},parse:e=>{if(typeof e!="string")return e;const t=Ta.parse(e)||Oo.parse(e)||Fo.parse(e)||sd.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(sr.HSL)||e.data.r===void 0?Fo.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Oo.stringify(e):Ta.stringify(e)},Zn=k8,w8=(n,e)=>{const t=Zn.parse(n);for(const n in e)t[n]=ee.channel.clamp[n](e[n]);return Zn.stringify(t)},mg=w8,T8=(e,t,n=0,s=1)=>{if(typeof e!="number")return mg(e,{a:t});const o=Sc.set({r:ee.channel.clamp.r(e),g:ee.channel.clamp.g(t),b:ee.channel.clamp.b(n),a:ee.channel.clamp.a(s)});return Zn.stringify(o)},Ea=T8,E8=(o,e,i)=>{const t=Zn.parse(o),n=t[e],s=ee.channel.clamp[e](n+i);return n!==s&&(t[e]=s),Zn.stringify(t)},bg=E8,C8=(e,t)=>bg(e,"l",t),zt=C8,S8=(e,t)=>bg(e,"l",-t),Zt=S8,A8=(t,e)=>{const s=Zn.parse(t),n={};for(const t in e)e[t]&&(n[t]=s[t]+e[t]);return mg(t,n)},ot=A8,L8=(r,p,f=50)=>{const{r:m,g:h,b:u,a}=Zn.parse(r),{r:d,g:c,b:l,a:i}=Zn.parse(p),o=f/100,t=o*2-1,s=a-i,e=((t*s===-1?t:(t+s)/(1+t*s))+1)/2,n=1-e,g=m*e+d*n,v=h*e+c*n,b=u*e+l*n,j=a*o+i*(1-o);return Ea(g,v,b,j)},B8=L8,D8=(t,n=100)=>{const e=Zn.parse(t);return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,B8(e,t,n)},At=D8,fr=(e,t)=>t?ot(e,{s:-40,l:10}):ot(e,{s:-40,l:-10}),Ac="#ffffff",Lc="#f2f2f2";let I8=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||ot(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||ot(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||fr(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||fr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||fr(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||fr(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||At(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||At(this.tertiaryColor),this.lineColor=this.lineColor||At(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Zt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Zt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||At(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||zt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ot(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ot(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ot(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ot(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ot(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ot(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||ot(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ot(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ot(this.primaryColor,{h:330}),this.darkMode)for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Zt(this["cScale"+e],75);else for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Zt(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||At(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||zt(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||Zt(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ot(this.mainBkg,{h:180,s:-15,l:e*(5+t*3)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ot(this.mainBkg,{h:180,s:-15,l:e*(8+t*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||ot(this.primaryColor,{h:64}),this.fillType3=this.fillType3||ot(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||ot(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||ot(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||ot(this.primaryColor,{h:128}),this.fillType7=this.fillType7||ot(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ot(this.primaryColor,{l:-10}),this.pie5=this.pie5||ot(this.secondaryColor,{l:-10}),this.pie6=this.pie6||ot(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||ot(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ot(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ot(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ot(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||ot(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||ot(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Zt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ot(this.primaryColor,{h:-30}),this.git4=this.git4||ot(this.primaryColor,{h:-60}),this.git5=this.git5||ot(this.primaryColor,{h:-90}),this.git6=this.git6||ot(this.primaryColor,{h:60}),this.git7=this.git7||ot(this.primaryColor,{h:120}),this.darkMode?(this.git0=zt(this.git0,25),this.git1=zt(this.git1,25),this.git2=zt(this.git2,25),this.git3=zt(this.git3,25),this.git4=zt(this.git4,25),this.git5=zt(this.git5,25),this.git6=zt(this.git6,25),this.git7=zt(this.git7,25)):(this.git0=Zt(this.git0,25),this.git1=Zt(this.git1,25),this.git2=Zt(this.git2,25),this.git3=Zt(this.git3,25),this.git4=Zt(this.git4,25),this.git5=Zt(this.git5,25),this.git6=Zt(this.git6,25),this.git7=Zt(this.git7,25)),this.gitInv0=this.gitInv0||At(this.git0),this.gitInv1=this.gitInv1||At(this.git1),this.gitInv2=this.gitInv2||At(this.git2),this.gitInv3=this.gitInv3||At(this.git3),this.gitInv4=this.gitInv4||At(this.git4),this.gitInv5=this.gitInv5||At(this.git5),this.gitInv6=this.gitInv6||At(this.git6),this.gitInv7=this.gitInv7||At(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ac,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Lc}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}};const M8=t=>{const e=new I8;return e.calculate(t),e};let N8=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=zt(this.primaryColor,16),this.tertiaryColor=ot(this.primaryColor,{h:-160}),this.primaryBorderColor=At(this.background),this.secondaryBorderColor=fr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=fr(this.tertiaryColor,this.darkMode),this.primaryTextColor=At(this.primaryColor),this.secondaryTextColor=At(this.secondaryColor),this.tertiaryTextColor=At(this.tertiaryColor),this.lineColor=At(this.background),this.textColor=At(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=zt(At("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=Ea(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Zt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=Ea(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Ea(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=zt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=zt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=zt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ot(this.primaryColor,{h:64}),this.fillType3=ot(this.secondaryColor,{h:64}),this.fillType4=ot(this.primaryColor,{h:-64}),this.fillType5=ot(this.secondaryColor,{h:-64}),this.fillType6=ot(this.primaryColor,{h:128}),this.fillType7=ot(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ot(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ot(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ot(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ot(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ot(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ot(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ot(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ot(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ot(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||At(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||zt(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||ot(this.mainBkg,{h:30,s:-30,l:-(-10+e*4)}),this["surfacePeer"+e]=this["surfacePeer"+e]||ot(this.mainBkg,{h:30,s:-30,l:-(-7+e*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Zt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=zt(this.secondaryColor,20),this.git1=zt(this.pie2||this.secondaryColor,20),this.git2=zt(this.pie3||this.tertiaryColor,20),this.git3=zt(this.pie4||ot(this.primaryColor,{h:-30}),20),this.git4=zt(this.pie5||ot(this.primaryColor,{h:-60}),20),this.git5=zt(this.pie6||ot(this.primaryColor,{h:-90}),10),this.git6=zt(this.pie7||ot(this.primaryColor,{h:60}),10),this.git7=zt(this.pie8||ot(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||At(this.git0),this.gitInv1=this.gitInv1||At(this.git1),this.gitInv2=this.gitInv2||At(this.git2),this.gitInv3=this.gitInv3||At(this.git3),this.gitInv4=this.gitInv4||At(this.git4),this.gitInv5=this.gitInv5||At(this.git5),this.gitInv6=this.gitInv6||At(this.git6),this.gitInv7=this.gitInv7||At(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||zt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||zt(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}};const R8=t=>{const e=new N8;return e.calculate(t),e};let F8=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=ot(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=ot(this.primaryColor,{h:-160}),this.primaryBorderColor=fr(this.primaryColor,this.darkMode),this.secondaryBorderColor=fr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=fr(this.tertiaryColor,this.darkMode),this.primaryTextColor=At(this.primaryColor),this.secondaryTextColor=At(this.secondaryColor),this.tertiaryTextColor=At(this.tertiaryColor),this.lineColor=At(this.background),this.textColor=At(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Ea(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ot(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ot(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ot(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ot(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ot(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ot(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ot(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ot(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ot(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||Zt(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||Zt(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Zt(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Zt(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ot(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||ot(this.mainBkg,{h:30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||ot(this.mainBkg,{h:30,l:-(7+e*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||At(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||At(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=zt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ot(this.primaryColor,{h:64}),this.fillType3=ot(this.secondaryColor,{h:64}),this.fillType4=ot(this.primaryColor,{h:-64}),this.fillType5=ot(this.secondaryColor,{h:-64}),this.fillType6=ot(this.primaryColor,{h:128}),this.fillType7=ot(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||ot(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||ot(this.primaryColor,{l:-10}),this.pie5=this.pie5||ot(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ot(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||ot(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||ot(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||ot(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||ot(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||ot(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||ot(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ot(this.primaryColor,{h:-30}),this.git4=this.git4||ot(this.primaryColor,{h:-60}),this.git5=this.git5||ot(this.primaryColor,{h:-90}),this.git6=this.git6||ot(this.primaryColor,{h:60}),this.git7=this.git7||ot(this.primaryColor,{h:120}),this.darkMode?(this.git0=zt(this.git0,25),this.git1=zt(this.git1,25),this.git2=zt(this.git2,25),this.git3=zt(this.git3,25),this.git4=zt(this.git4,25),this.git5=zt(this.git5,25),this.git6=zt(this.git6,25),this.git7=zt(this.git7,25)):(this.git0=Zt(this.git0,25),this.git1=Zt(this.git1,25),this.git2=Zt(this.git2,25),this.git3=Zt(this.git3,25),this.git4=Zt(this.git4,25),this.git5=Zt(this.git5,25),this.git6=Zt(this.git6,25),this.git7=Zt(this.git7,25)),this.gitInv0=this.gitInv0||Zt(At(this.git0),25),this.gitInv1=this.gitInv1||At(this.git1),this.gitInv2=this.gitInv2||At(this.git2),this.gitInv3=this.gitInv3||At(this.git3),this.gitInv4=this.gitInv4||At(this.git4),this.gitInv5=this.gitInv5||At(this.git5),this.gitInv6=this.gitInv6||At(this.git6),this.gitInv7=this.gitInv7||At(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||At(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||At(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ac,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Lc}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}};const O8=t=>{const e=new F8;return e.calculate(t),e};let P8=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=zt("#cde498",10),this.primaryBorderColor=fr(this.primaryColor,this.darkMode),this.secondaryBorderColor=fr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=fr(this.tertiaryColor,this.darkMode),this.primaryTextColor=At(this.primaryColor),this.secondaryTextColor=At(this.secondaryColor),this.tertiaryTextColor=At(this.primaryColor),this.lineColor=At(this.background),this.textColor=At(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ot(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ot(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ot(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ot(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ot(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ot(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ot(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ot(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ot(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||Zt(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||Zt(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Zt(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Zt(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ot(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||ot(this.mainBkg,{h:30,s:-30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||ot(this.mainBkg,{h:30,s:-30,l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=Zt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ot(this.primaryColor,{h:64}),this.fillType3=ot(this.secondaryColor,{h:64}),this.fillType4=ot(this.primaryColor,{h:-64}),this.fillType5=ot(this.secondaryColor,{h:-64}),this.fillType6=ot(this.primaryColor,{h:128}),this.fillType7=ot(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ot(this.primaryColor,{l:-30}),this.pie5=this.pie5||ot(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ot(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||ot(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ot(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ot(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ot(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||ot(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||ot(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ot(this.primaryColor,{h:-30}),this.git4=this.git4||ot(this.primaryColor,{h:-60}),this.git5=this.git5||ot(this.primaryColor,{h:-90}),this.git6=this.git6||ot(this.primaryColor,{h:60}),this.git7=this.git7||ot(this.primaryColor,{h:120}),this.darkMode?(this.git0=zt(this.git0,25),this.git1=zt(this.git1,25),this.git2=zt(this.git2,25),this.git3=zt(this.git3,25),this.git4=zt(this.git4,25),this.git5=zt(this.git5,25),this.git6=zt(this.git6,25),this.git7=zt(this.git7,25)):(this.git0=Zt(this.git0,25),this.git1=Zt(this.git1,25),this.git2=Zt(this.git2,25),this.git3=Zt(this.git3,25),this.git4=Zt(this.git4,25),this.git5=Zt(this.git5,25),this.git6=Zt(this.git6,25),this.git7=Zt(this.git7,25)),this.gitInv0=this.gitInv0||At(this.git0),this.gitInv1=this.gitInv1||At(this.git1),this.gitInv2=this.gitInv2||At(this.git2),this.gitInv3=this.gitInv3||At(this.git3),this.gitInv4=this.gitInv4||At(this.git4),this.gitInv5=this.gitInv5||At(this.git5),this.gitInv6=this.gitInv6||At(this.git6),this.gitInv7=this.gitInv7||At(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ac,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Lc}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}};const V8=t=>{const e=new P8;return e.calculate(t),e};class Y8{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=zt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=ot(this.primaryColor,{h:-160}),this.primaryBorderColor=fr(this.primaryColor,this.darkMode),this.secondaryBorderColor=fr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=fr(this.tertiaryColor,this.darkMode),this.primaryTextColor=At(this.primaryColor),this.secondaryTextColor=At(this.secondaryColor),this.tertiaryTextColor=At(this.tertiaryColor),this.lineColor=At(this.background),this.textColor=At(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=zt(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||At(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||zt(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||Zt(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||ot(this.mainBkg,{l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||ot(this.mainBkg,{l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=zt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=zt(this.contrast,30),this.sectionBkgColor2=zt(this.contrast,30),this.taskBorderColor=Zt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=zt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Zt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ot(this.primaryColor,{h:64}),this.fillType3=ot(this.secondaryColor,{h:64}),this.fillType4=ot(this.primaryColor,{h:-64}),this.fillType5=ot(this.secondaryColor,{h:-64}),this.fillType6=ot(this.primaryColor,{h:128}),this.fillType7=ot(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Zt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||ot(this.primaryColor,{h:-30}),this.git4=this.pie5||ot(this.primaryColor,{h:-60}),this.git5=this.pie6||ot(this.primaryColor,{h:-90}),this.git6=this.pie7||ot(this.primaryColor,{h:60}),this.git7=this.pie8||ot(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||At(this.git0),this.gitInv1=this.gitInv1||At(this.git1),this.gitInv2=this.gitInv2||At(this.git2),this.gitInv3=this.gitInv3||At(this.git3),this.gitInv4=this.gitInv4||At(this.git4),this.gitInv5=this.gitInv5||At(this.git5),this.gitInv6=this.gitInv6||At(this.git6),this.gitInv7=this.gitInv7||At(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ac,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Lc}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}}const z8=t=>{const e=new Y8;return e.calculate(t),e},jn={base:{getThemeVariables:M8},dark:{getThemeVariables:R8},default:{getThemeVariables:O8},forest:{getThemeVariables:V8},neutral:{getThemeVariables:z8}},ui={theme:"default",themeVariables:jn.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},timeline:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};ui.class&&(ui.class.arrowMarkerAbsolute=ui.arrowMarkerAbsolute),ui.gitGraph&&(ui.gitGraph.arrowMarkerAbsolute=ui.arrowMarkerAbsolute);const _g=(e,t="")=>Object.keys(e).reduce((s,n)=>Array.isArray(e[n])?s:typeof e[n]=="object"&&e[n]!==null?[...s,t+n,..._g(e[n],"")]:[...s,t+n],[]),U8=_g(ui,""),W8=ui;function xg(e){return typeof e>"u"||e===null}function H8(e){return typeof e=="object"&&e!==null}function G8(e){return Array.isArray(e)?e:xg(e)?[]:[e]}function q8(o,t){var e,i,n,s;if(t)for(s=Object.keys(t),e=0,i=s.length;e<i;e+=1)n=s[e],o[n]=t[n];return o}function $8(n,s){var t="",e;for(e=0;e<s;e+=1)t+=n;return t}function j8(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var X8=xg,K8=H8,Z8=G8,Q8=$8,J8=j8,t7=q8,hr={isNothing:X8,isObject:K8,toArray:Z8,repeat:Q8,isNegativeZero:J8,extend:t7};function vg(e,s){var t="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(t+='in "'+e.mark.name+'" '),t+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!s&&e.mark.snippet&&(t+=`

`+e.mark.snippet),n+" "+t):n}function Ya(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=vg(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Ya.prototype=Object.create(Error.prototype),Ya.prototype.constructor=Ya,Ya.prototype.toString=function(e){return this.name+": "+vg(this,e)},Vn=Ya;function Mu(r,t,i,e,a){var n="",o="",s=Math.floor(a/2)-1;return e-t>s&&(n=" ... ",t=e-s+n.length),i-e>s&&(o=" ...",i=e+s-o.length),{str:n+r.slice(t,i).replace(/\t/g,"→")+o,pos:e-t+n.length}}function Nu(e,t){return hr.repeat(" ",t-e.length)+e}function e7(s,e){if(e=Object.create(e||null),!s.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var u=/\r?\n|\r|\0/g,o=[0],a=[],c,t=-1;c=u.exec(s.buffer);)a.push(c.index),o.push(c.index+c[0].length),s.position<=c.index&&t<0&&(t=o.length-2);t<0&&(t=o.length-1);var r="",n,i,l=Math.min(s.line+e.linesAfter,a.length).toString().length,d=e.maxLength-(e.indent+l+3);for(n=1;n<=e.linesBefore&&!(t-n<0);n++)i=Mu(s.buffer,o[t-n],a[t-n],s.position-(o[t]-o[t-n]),d),r=hr.repeat(" ",e.indent)+Nu((s.line-n+1).toString(),l)+" | "+i.str+`
`+r;for(i=Mu(s.buffer,o[t],a[t],s.position,d),r+=hr.repeat(" ",e.indent)+Nu((s.line+1).toString(),l)+" | "+i.str+`
`,r+=hr.repeat("-",e.indent+l+3+i.pos)+`^
`,n=1;n<=e.linesAfter&&!(t+n>=a.length);n++)i=Mu(s.buffer,o[t+n],a[t+n],s.position-(o[t]-o[t+n]),d),r+=hr.repeat(" ",e.indent)+Nu((s.line+n+1).toString(),l)+" | "+i.str+`
`;return r.replace(/\n$/,"")}var r7=e7,n7=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],i7=["scalar","sequence","mapping"];function s7(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}function a7(t,e){if(e=e||{},Object.keys(e).forEach(function(e){if(n7.indexOf(e)===-1)throw new Vn('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(e){return e},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=s7(e.styleAliases||null),i7.indexOf(this.kind)===-1)throw new Vn('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}lr=a7;function ad(t,n){var e=[];return t[n].forEach(function(t){var n=e.length;e.forEach(function(e,s){e.tag===t.tag&&e.kind===t.kind&&e.multi===t.multi&&(n=s)}),e[n]=t}),e}function o7(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function s(t){t.multi?(e.multi[t.kind].push(t),e.multi.fallback.push(t)):e[t.kind][t.tag]=e.fallback[t.tag]=t}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(s);return e}function Th(e){return this.extend(e)}Th.prototype.extend=function(e){var s=[],n=[],t;if(e instanceof lr)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(s=s.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Vn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");return s.forEach(function(e){if(!(e instanceof lr))throw new Vn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&e.loadKind!=="scalar")throw new Vn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new Vn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(e){if(!(e instanceof lr))throw new Vn("Specified list of YAML types (or a single Type object) contains a non-Type object.")}),t=Object.create(Th.prototype),t.implicit=(this.implicit||[]).concat(s),t.explicit=(this.explicit||[]).concat(n),t.compiledImplicit=ad(t,"implicit"),t.compiledExplicit=ad(t,"explicit"),t.compiledTypeMap=o7(t.compiledImplicit,t.compiledExplicit),t};var l7=Th,c7=new lr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),u7=new lr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),h7=new lr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),kg=new l7({explicit:[c7,u7,h7]});function f7(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function d7(){return null}function p7(e){return e===null}g7=new lr("tag:yaml.org,2002:null",{kind:"scalar",resolve:f7,construct:d7,predicate:p7,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function y7(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function m7(e){return e==="true"||e==="True"||e==="TRUE"}function b7(e){return Object.prototype.toString.call(e)==="[object Boolean]"}_7=new lr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:y7,construct:m7,predicate:b7,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function x7(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function v7(e){return 48<=e&&e<=55}function k7(e){return 48<=e&&e<=57}function w7(n){if(n===null)return!1;var o=n.length,t=0,s=!1,e;if(!o)return!1;if(e=n[t],(e==="-"||e==="+")&&(e=n[++t]),e==="0"){if(t+1===o)return!0;if(e=n[++t],e==="b"){for(t++;t<o;t++)if(e=n[t],e!=="_"){if(e!=="0"&&e!=="1")return!1;s=!0}return s&&e!=="_"}if(e==="x"){for(t++;t<o;t++)if(e=n[t],e!=="_"){if(!x7(n.charCodeAt(t)))return!1;s=!0}return s&&e!=="_"}if(e==="o"){for(t++;t<o;t++)if(e=n[t],e!=="_"){if(!v7(n.charCodeAt(t)))return!1;s=!0}return s&&e!=="_"}}if(e==="_")return!1;for(;t<o;t++)if(e=n[t],e!=="_"){if(!k7(n.charCodeAt(t)))return!1;s=!0}return!(!s||e==="_")}function T7(s){var e=s,n=1,t;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),t=e[0],(t==="-"||t==="+")&&(t==="-"&&(n=-1),e=e.slice(1),t=e[0]),e==="0")return 0;if(t==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function E7(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!hr.isNegativeZero(e)}C7=new lr("tag:yaml.org,2002:int",{kind:"scalar",resolve:w7,construct:T7,predicate:E7,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),S7=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function A7(e){return!(e===null||!S7.test(e)||e[e.length-1]==="_")}function L7(n){var e,t;return e=n.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}B7=/^[-+]?[0-9]+e/;function D7(e,n){var t;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(hr.isNegativeZero(e))return"-0.0";return t=e.toString(10),B7.test(t)?t.replace("e",".e"):t}function I7(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||hr.isNegativeZero(e))}var M7=new lr("tag:yaml.org,2002:float",{kind:"scalar",resolve:A7,construct:L7,predicate:I7,represent:D7,defaultStyle:"lowercase"}),N7=kg.extend({implicit:[g7,_7,C7,M7]}),R7=N7,wg=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Tg=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function F7(e){return e!==null&&(wg.exec(e)!==null||Tg.exec(e)!==null)}function O7(h){var e,o,i,a,l,r,c,t=0,n=null,d,u,s;if(e=wg.exec(h),e===null&&(e=Tg.exec(h)),e===null)throw new Error("Date resolve error");if(o=+e[1],i=+e[2]-1,a=+e[3],!e[4])return new Date(Date.UTC(o,i,a));if(l=+e[4],r=+e[5],c=+e[6],e[7]){for(t=e[7].slice(0,3);t.length<3;)t+="0";t=+t}return e[9]&&(d=+e[10],u=+(e[11]||0),n=(d*60+u)*6e4,e[9]==="-"&&(n=-n)),s=new Date(Date.UTC(o,i,a,l,r,c,t)),n&&s.setTime(s.getTime()-n),s}function P7(e){return e.toISOString()}V7=new lr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:F7,construct:O7,instanceOf:Date,represent:P7});function Y7(e){return e==="<<"||e===null}z7=new lr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Y7}),X1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function U7(t){if(t===null)return!1;var n,e,s=0,o=t.length,i=X1;for(e=0;e<o;e++)if(n=i.indexOf(t.charAt(e)),!(n>64)){if(n<0)return!1;s+=6}return s%8===0}function W7(r){var n,s,o=r.replace(/[\r\n=]/g,""),i=o.length,a=X1,e=0,t=[];for(n=0;n<i;n++)n%4===0&&n&&(t.push(e>>16&255),t.push(e>>8&255),t.push(e&255)),e=e<<6|a.indexOf(o.charAt(n));return s=i%4*6,s===0?(t.push(e>>16&255),t.push(e>>8&255),t.push(e&255)):s===18?(t.push(e>>10&255),t.push(e>>2&255)):s===12&&t.push(e>>4&255),new Uint8Array(t)}function H7(a){var e="",n=0,s,o,i=a.length,t=X1;for(s=0;s<i;s++)s%3===0&&s&&(e+=t[n>>18&63],e+=t[n>>12&63],e+=t[n>>6&63],e+=t[n&63]),n=(n<<8)+a[s];return o=i%3,o===0?(e+=t[n>>18&63],e+=t[n>>12&63],e+=t[n>>6&63],e+=t[n&63]):o===2?(e+=t[n>>10&63],e+=t[n>>4&63],e+=t[n<<2&63],e+=t[64]):o===1&&(e+=t[n>>2&63],e+=t[n<<4&63],e+=t[64],e+=t[64]),e}function G7(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var q7=new lr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:U7,construct:W7,predicate:G7,represent:H7}),$7=Object.prototype.hasOwnProperty,j7=Object.prototype.toString;function X7(a){if(a===null)return!0;var o=[],t,i,n,s,e,r=a;for(t=0,i=r.length;t<i;t+=1){if(n=r[t],e=!1,j7.call(n)!=="[object Object]")return!1;for(s in n)if($7.call(n,s))if(e)return!1;else e=!0;if(!e)return!1;if(o.indexOf(s)===-1)o.push(s);else return!1}return!0}function K7(e){return e!==null?e:[]}Z7=new lr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:X7,construct:K7}),Q7=Object.prototype.toString;function J7(a){if(a===null)return!0;var e,o,t,n,i,s=a;for(i=new Array(s.length),e=0,o=s.length;e<o;e+=1){if(t=s[e],Q7.call(t)!=="[object Object]"||(n=Object.keys(t),n.length!==1))return!1;i[e]=[n[0],t[n[0]]]}return!0}function tw(a){if(a===null)return[];var e,i,n,s,o,t=a;for(o=new Array(t.length),e=0,i=t.length;e<i;e+=1)n=t[e],s=Object.keys(n),o[e]=[s[0],n[s[0]]];return o}ew=new lr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:J7,construct:tw}),rw=Object.prototype.hasOwnProperty;function nw(n){if(n===null)return!0;var e,t=n;for(e in t)if(rw.call(t,e)&&t[e]!==null)return!1;return!0}function iw(e){return e!==null?e:{}}var sw=new lr("tag:yaml.org,2002:set",{kind:"mapping",resolve:nw,construct:iw}),aw=R7.extend({implicit:[V7,z7],explicit:[q7,Z7,ew,sw]}),gi=Object.prototype.hasOwnProperty,Ol=1,Eg=2,Cg=3,Pl=4,Ru=1,ow=2,od=3,lw=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,cw=/[\x85\u2028\u2029]/,uw=/[,[\]{}]/,Sg=/^(?:!|!!|![a-z-]+!)$/i,Ag=/^(?:!|[^,[\]{}])(?:%[0-9a-f]{2}|[0-9a-z-#;/?:@&=+$,_.!~*'()[\]])*$/i;function ld(e){return Object.prototype.toString.call(e)}function xn(e){return e===10||e===13}function Mi(e){return e===9||e===32}function wr(e){return e===9||e===32||e===10||e===13}function fs(e){return e===44||e===91||e===93||e===123||e===125}function hw(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function fw(e){return e===120?2:e===117?4:e===85?8:0}function dw(e){return 48<=e&&e<=57?e-48:-1}function cd(e){return e===48?"\0":e===97?"":e===98?"":e===116||e===9?"	":e===110?`
`:e===118?"":e===102?"":e===114?"\r":e===101?"":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function pw(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}Lg=new Array(256),Bg=new Array(256);for(os=0;os<256;os++)Lg[os]=cd(os)?1:0,Bg[os]=cd(os);function gw(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||aw,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Dg(e,n){var t={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return t.snippet=r7(t),new Vn(n,t)}function Vt(e,t){throw Dg(e,t)}function Vl(e,t){e.onWarning&&e.onWarning.call(null,Dg(e,t))}ud={YAML:function(e,i,s){var t,o,n;e.version!==null&&Vt(e,"duplication of %YAML directive"),s.length!==1&&Vt(e,"YAML directive accepts exactly one argument"),t=/^([0-9]+)\.([0-9]+)$/.exec(s[0]),t===null&&Vt(e,"ill-formed argument of the YAML directive"),o=parseInt(t[1],10),n=parseInt(t[2],10),o!==1&&Vt(e,"unacceptable YAML version of the document"),e.version=s[0],e.checkLineBreaks=n<2,n!==1&&n!==2&&Vl(e,"unsupported YAML version of the document")},TAG:function(e,o,s){var n,t;s.length!==2&&Vt(e,"TAG directive accepts exactly two arguments"),n=s[0],t=s[1],Sg.test(n)||Vt(e,"ill-formed tag handle (first argument) of the TAG directive"),gi.call(e.tagMap,n)&&Vt(e,'there is a previously declared suffix for "'+n+'" tag handle'),Ag.test(t)||Vt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{t=decodeURIComponent(t)}catch{Vt(e,"tag prefix is malformed: "+t)}e.tagMap[n]=t}};function hi(t,a,o,r){var n,i,s,e;if(a<o){if(e=t.input.slice(a,o),r)for(n=0,i=e.length;n<i;n+=1)s=e.charCodeAt(n),s===9||32<=s&&s<=1114111||Vt(t,"expected valid JSON character");else lw.test(e)&&Vt(t,"the stream contains non-printable characters");t.result+=e}}function hd(r,o,n,a){var s,e,t,i;for(hr.isObject(n)||Vt(r,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(n),t=0,i=s.length;t<i;t+=1)e=s[t],gi.call(o,e)||(o[e]=n[e],a[e]=!0)}function ds(t,s,i,d,e,o,r,c,l){var n,a;if(Array.isArray(e))for(e=Array.prototype.slice.call(e),n=0,a=e.length;n<a;n+=1)Array.isArray(e[n])&&Vt(t,"nested arrays are not supported inside keys"),typeof e=="object"&&ld(e[n])==="[object Object]"&&(e[n]="[object Object]");if(typeof e=="object"&&ld(e)==="[object Object]"&&(e="[object Object]"),e=String(e),s===null&&(s={}),d==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(n=0,a=o.length;n<a;n+=1)hd(t,s,o[n],i);else hd(t,s,o,i);else!t.json&&!gi.call(i,e)&&gi.call(s,e)&&(t.line=r||t.line,t.lineStart=c||t.lineStart,t.position=l||t.position,Vt(t,"duplicated mapping key")),e==="__proto__"?Object.defineProperty(s,e,{configurable:!0,enumerable:!0,writable:!0,value:o}):s[e]=o,delete i[e];return s}function K1(e){var t=e.input.charCodeAt(e.position);t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Vt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Fe(e,o,s){for(var n=0,t=e.input.charCodeAt(e.position);t!==0;){for(;Mi(t);)t===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),t=e.input.charCodeAt(++e.position);if(o&&t===35)do t=e.input.charCodeAt(++e.position);while(t!==10&&t!==13&&t!==0)if(xn(t))for(K1(e),t=e.input.charCodeAt(e.position),n++,e.lineIndent=0;t===32;)e.lineIndent++,t=e.input.charCodeAt(++e.position);else break}return s!==-1&&n!==0&&e.lineIndent<s&&Vl(e,"deficient indentation"),n}function Bc(t){var n=t.position,e;return e=t.input.charCodeAt(n),!!((e===45||e===46)&&e===t.input.charCodeAt(n+1)&&e===t.input.charCodeAt(n+2)&&(n+=3,e=t.input.charCodeAt(n),e===0||wr(e)))}function Z1(t,e){e===1?t.result+=" ":e>1&&(t.result+=hr.repeat(`
`,e-1))}function yw(e,m,a){var c,n,o,s,i,r,l,d,u=e.kind,h=e.result,t;if(t=e.input.charCodeAt(e.position),wr(t)||fs(t)||t===35||t===38||t===42||t===33||t===124||t===62||t===39||t===34||t===37||t===64||t===96||(t===63||t===45)&&(n=e.input.charCodeAt(e.position+1),wr(n)||a&&fs(n)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,i=!1;t!==0;){if(t===58){if(n=e.input.charCodeAt(e.position+1),wr(n)||a&&fs(n))break}else if(t===35){if(c=e.input.charCodeAt(e.position-1),wr(c))break}else{if(e.position===e.lineStart&&Bc(e)||a&&fs(t))break;if(xn(t))if(r=e.line,l=e.lineStart,d=e.lineIndent,Fe(e,!1,-1),e.lineIndent>=m){i=!0,t=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=r,e.lineStart=l,e.lineIndent=d;break}}i&&(hi(e,o,s,!1),Z1(e,e.line-r),o=s=e.position,i=!1),Mi(t)||(s=e.position+1),t=e.input.charCodeAt(++e.position)}return hi(e,o,s,!1),!!e.result||(e.kind=u,e.result=h,!1)}function mw(e,o){var t,n,s;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(hi(e,n,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)n=e.position,e.position++,s=e.position;else return!0;else xn(t)?(hi(e,n,s,!0),Z1(e,Fe(e,!1,o)),n=s=e.position):e.position===e.lineStart&&Bc(e)?Vt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);Vt(e,"unexpected end of the stream within a single quoted scalar")}function bw(e,r){var n,s,a,o,i,t;if(t=e.input.charCodeAt(e.position),t!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;(t=e.input.charCodeAt(e.position))!==0;){if(t===34)return hi(e,n,e.position,!0),e.position++,!0;if(t===92){if(hi(e,n,e.position,!0),t=e.input.charCodeAt(++e.position),xn(t))Fe(e,!1,r);else if(t<256&&Lg[t])e.result+=Bg[t],e.position++;else if((i=fw(t))>0){for(a=i,o=0;a>0;a--)t=e.input.charCodeAt(++e.position),(i=hw(t))>=0?o=(o<<4)+i:Vt(e,"expected hexadecimal character");e.result+=pw(o),e.position++}else Vt(e,"unknown escape sequence");n=s=e.position}else xn(t)?(hi(e,n,s,!0),Z1(e,Fe(e,!1,r)),n=s=e.position):e.position===e.lineStart&&Bc(e)?Vt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,s=e.position)}Vt(e,"unexpected end of the stream within a double quoted scalar")}function _w(e,n){var d=!0,l,f,m,b=e.tag,s,v=e.anchor,g,u,i,h,a,p=Object.create(null),o,c,r,t;if(t=e.input.charCodeAt(e.position),t===91)u=93,a=!1,s=[];else if(t===123)u=125,a=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),t=e.input.charCodeAt(++e.position);t!==0;){if(Fe(e,!0,n),t=e.input.charCodeAt(e.position),t===u)return e.position++,e.tag=b,e.anchor=v,e.kind=a?"mapping":"sequence",e.result=s,!0;d?t===44&&Vt(e,"expected the node content, but found ','"):Vt(e,"missed comma between flow collection entries"),c=o=r=null,i=h=!1,t===63&&(g=e.input.charCodeAt(e.position+1),wr(g)&&(i=h=!0,e.position++,Fe(e,!0,n))),l=e.line,f=e.lineStart,m=e.position,Ms(e,n,Ol,!1,!0),c=e.tag,o=e.result,Fe(e,!0,n),t=e.input.charCodeAt(e.position),(h||e.line===l)&&t===58&&(i=!0,t=e.input.charCodeAt(++e.position),Fe(e,!0,n),Ms(e,n,Ol,!1,!0),r=e.result),a?ds(e,s,p,c,o,r,l,f,m):i?s.push(ds(e,null,p,c,o,r,l,f,m)):s.push(o),Fe(e,!0,n),t=e.input.charCodeAt(e.position),t===44?(d=!0,t=e.input.charCodeAt(++e.position)):d=!1}Vt(e,"unexpected end of the stream within a flow collection")}function xw(e,d){var u,r,a=Ru,s=!1,i=!1,o=d,n=0,c=!1,l,t;if(t=e.input.charCodeAt(e.position),t===124)r=!1;else if(t===62)r=!0;else return!1;for(e.kind="scalar",e.result="";t!==0;)if(t=e.input.charCodeAt(++e.position),t===43||t===45)Ru===a?a=t===43?od:ow:Vt(e,"repeat of a chomping mode identifier");else if((l=dw(t))>=0)l===0?Vt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):i?Vt(e,"repeat of an indentation width identifier"):(o=d+l-1,i=!0);else break;if(Mi(t)){do t=e.input.charCodeAt(++e.position);while(Mi(t))if(t===35)do t=e.input.charCodeAt(++e.position);while(!xn(t)&&t!==0)}for(;t!==0;){for(K1(e),e.lineIndent=0,t=e.input.charCodeAt(e.position);(!i||e.lineIndent<o)&&t===32;)e.lineIndent++,t=e.input.charCodeAt(++e.position);if(!i&&e.lineIndent>o&&(o=e.lineIndent),xn(t)){n++;continue}if(e.lineIndent<o){a===od?e.result+=hr.repeat(`
`,s?1+n:n):a===Ru&&s&&(e.result+=`
`);break}for(r?Mi(t)?(c=!0,e.result+=hr.repeat(`
`,s?1+n:n)):c?(c=!1,e.result+=hr.repeat(`
`,n+1)):n===0?s&&(e.result+=" "):e.result+=hr.repeat(`
`,n):e.result+=hr.repeat(`
`,s?1+n:n),s=!0,i=!0,n=0,u=e.position;!xn(t)&&t!==0;)t=e.input.charCodeAt(++e.position);hi(e,u,e.position,!1)}return!0}function fd(e,n){var a,r=e.tag,c=e.anchor,s=[],o,i=!1,t;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),t=e.input.charCodeAt(e.position);t!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Vt(e,"tab characters must not be used in indentation")),!(t!==45||(o=e.input.charCodeAt(e.position+1),!wr(o))));){if(i=!0,e.position++,Fe(e,!0,-1)&&e.lineIndent<=n){s.push(null),t=e.input.charCodeAt(e.position);continue}if(a=e.line,Ms(e,n,Cg,!1,!0),s.push(e.result),Fe(e,!0,-1),t=e.input.charCodeAt(e.position),(e.line===a||e.lineIndent>n)&&t!==0)Vt(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return!!i&&(e.tag=r,e.anchor=c,e.kind="sequence",e.result=s,!0)}function vw(e,u,b){var v,f,h,r,c,l,p=e.tag,g=e.anchor,a={},m=Object.create(null),o=null,s=null,d=null,n=!1,i=!1,t;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),t=e.input.charCodeAt(e.position);t!==0;){if(!n&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Vt(e,"tab characters must not be used in indentation")),v=e.input.charCodeAt(e.position+1),h=e.line,(t===63||t===58)&&wr(v))t===63?(n&&(ds(e,a,m,o,s,null,r,c,l),o=s=d=null),i=!0,n=!0,f=!0):n?(n=!1,f=!0):Vt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,t=v;else{if(r=e.line,c=e.lineStart,l=e.position,!Ms(e,b,Eg,!1,!0))break;if(e.line===h){for(t=e.input.charCodeAt(e.position);Mi(t);)t=e.input.charCodeAt(++e.position);if(t===58)t=e.input.charCodeAt(++e.position),wr(t)||Vt(e,"a whitespace character is expected after the key-value separator within a block mapping"),n&&(ds(e,a,m,o,s,null,r,c,l),o=s=d=null),i=!0,n=!1,f=!1,o=e.tag,s=e.result;else if(i)Vt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=p,e.anchor=g,!0}else if(i)Vt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=p,e.anchor=g,!0}if((e.line===h||e.lineIndent>u)&&(n&&(r=e.line,c=e.lineStart,l=e.position),Ms(e,u,Pl,!0,f)&&(n?s=e.result:d=e.result),n||(ds(e,a,m,o,s,d,r,c,l),o=s=d=null),Fe(e,!0,-1),t=e.input.charCodeAt(e.position)),(e.line===h||e.lineIndent>u)&&t!==0)Vt(e,"bad indentation of a mapping entry");else if(e.lineIndent<u)break}return n&&ds(e,a,m,o,s,null,r,c,l),i&&(e.tag=p,e.anchor=g,e.kind="mapping",e.result=a),i}function kw(e){var o,i=!1,a=!1,s,n,t;if(t=e.input.charCodeAt(e.position),t!==33)return!1;if(e.tag!==null&&Vt(e,"duplication of a tag property"),t=e.input.charCodeAt(++e.position),t===60?(i=!0,t=e.input.charCodeAt(++e.position)):t===33?(a=!0,s="!!",t=e.input.charCodeAt(++e.position)):s="!",o=e.position,i){do t=e.input.charCodeAt(++e.position);while(t!==0&&t!==62)e.position<e.length?(n=e.input.slice(o,e.position),t=e.input.charCodeAt(++e.position)):Vt(e,"unexpected end of the stream within a verbatim tag")}else{for(;t!==0&&!wr(t);)t===33&&(a?Vt(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(o-1,e.position+1),Sg.test(s)||Vt(e,"named tag handle cannot contain such characters"),a=!0,o=e.position+1)),t=e.input.charCodeAt(++e.position);n=e.input.slice(o,e.position),uw.test(n)&&Vt(e,"tag suffix cannot contain flow indicator characters")}n&&!Ag.test(n)&&Vt(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{Vt(e,"tag name is malformed: "+n)}return i?e.tag=n:gi.call(e.tagMap,s)?e.tag=e.tagMap[s]+n:s==="!"?e.tag="!"+n:s==="!!"?e.tag="tag:yaml.org,2002:"+n:Vt(e,'undeclared tag handle "'+s+'"'),!0}function ww(e){var n,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&Vt(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),n=e.position;t!==0&&!wr(t)&&!fs(t);)t=e.input.charCodeAt(++e.position);return e.position===n&&Vt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function Tw(e){var s,n,t;if(t=e.input.charCodeAt(e.position),t!==42)return!1;for(t=e.input.charCodeAt(++e.position),s=e.position;t!==0&&!wr(t)&&!fs(t);)t=e.input.charCodeAt(++e.position);return e.position===s&&Vt(e,"name of an alias node must contain at least one character"),n=e.input.slice(s,e.position),gi.call(e.anchorMap,n)||Vt(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Fe(e,!0,-1),!0}function Ms(e,i,r,p,g){var f,m,a,s=1,h=!1,c=!1,n,d,l,t,o,u;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,f=m=a=Pl===r||Cg===r,p&&Fe(e,!0,-1)&&(h=!0,e.lineIndent>i?s=1:e.lineIndent===i?s=0:e.lineIndent<i&&(s=-1)),s===1)for(;kw(e)||ww(e);)Fe(e,!0,-1)?(h=!0,a=f,e.lineIndent>i?s=1:e.lineIndent===i?s=0:e.lineIndent<i&&(s=-1)):a=!1;if(a&&(a=h||g),(s===1||Pl===r)&&(Ol===r||Eg===r?o=i:o=i+1,u=e.position-e.lineStart,s===1?a&&(fd(e,u)||vw(e,u,o))||_w(e,o)?c=!0:(m&&xw(e,o)||mw(e,o)||bw(e,o)?c=!0:Tw(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&Vt(e,"alias node should not have any properties")):yw(e,o,Ol===r)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):s===0&&(c=a&&fd(e,u))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Vt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),n=0,d=e.implicitTypes.length;n<d;n+=1)if(t=e.implicitTypes[n],t.resolve(e.result)){e.result=t.construct(e.result),e.tag=t.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(gi.call(e.typeMap[e.kind||"fallback"],e.tag))t=e.typeMap[e.kind||"fallback"][e.tag];else for(t=null,l=e.typeMap.multi[e.kind||"fallback"],n=0,d=l.length;n<d;n+=1)if(e.tag.slice(0,l[n].tag.length)===l[n].tag){t=l[n];break}t||Vt(e,"unknown tag !<"+e.tag+">"),e.result!==null&&t.kind!==e.kind&&Vt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+t.kind+'", not "'+e.kind+'"'),t.resolve(e.result,e.tag)?(e.result=t.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Vt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function Ew(e){var a=e.position,s,n,o,i=!1,t;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(t=e.input.charCodeAt(e.position))!==0&&(Fe(e,!0,-1),t=e.input.charCodeAt(e.position),!(e.lineIndent>0||t!==37));){for(i=!0,t=e.input.charCodeAt(++e.position),s=e.position;t!==0&&!wr(t);)t=e.input.charCodeAt(++e.position);for(n=e.input.slice(s,e.position),o=[],n.length<1&&Vt(e,"directive name must not be less than one character in length");t!==0;){for(;Mi(t);)t=e.input.charCodeAt(++e.position);if(t===35){do t=e.input.charCodeAt(++e.position);while(t!==0&&!xn(t))break}if(xn(t))break;for(s=e.position;t!==0&&!wr(t);)t=e.input.charCodeAt(++e.position);o.push(e.input.slice(s,e.position))}t!==0&&K1(e),gi.call(ud,n)?ud[n](e,n,o):Vl(e,'unknown document directive "'+n+'"')}if(Fe(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Fe(e,!0,-1)):i&&Vt(e,"directives end mark is expected"),Ms(e,e.lineIndent-1,Pl,!1,!0),Fe(e,!0,-1),e.checkLineBreaks&&cw.test(e.input.slice(a,e.position))&&Vl(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Bc(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Fe(e,!0,-1));return}if(e.position<e.length-1)Vt(e,"end of the stream or a document separator is expected");else return}function Ig(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new gw(e,n),s=e.indexOf("\0");for(s!==-1&&(t.position=s,Vt(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)Ew(t);return t.documents}function Cw(o,e,t){if(e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null),n=Ig(o,t),typeof e!="function")return n;for(var n,s=0,i=n.length;s<i;s+=1)e(n[s])}function Sw(t,n){var e=Ig(t,n);if(e.length!==0){if(e.length===1)return e[0];throw new Vn("expected a single document in the stream, but found more")}}var Aw=Cw,Lw=Sw,Bw={loadAll:Aw,load:Lw},Dw=kg,Iw=Bw.load;const Mg=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function Mw(e,n){var s;const t=e.match(Mg);if(t){const o=Iw(t[1],{schema:Dw});return o!=null&&o.title&&((s=n.setDiagramTitle)==null||s.call(n,o.title)),e.slice(t[0].length)}return e}const Nw=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Rw=/\s*%%.*\n/gm,Yl={},Q1=function(e,t){e=e.replace(Mg,"").replace(Nw,"").replace(Rw,`
`);for(const[n,{detector:s}]of Object.entries(Yl))if(s(e,t))return n;throw new Error(`No diagram type detected for text: ${e}`)},Ng=(...e)=>{for(const{id:t,detector:n,loader:s}of e)Rg(t,n,s)},Rg=(e,n,t)=>{Yl[e]?B.error(`Detector with key ${e} already exists`):Yl[e]={detector:n,loader:t},B.debug(`Detector with key ${e} added${t?" with loader":""}`)},Fw=e=>Yl[e].loader,Eh=function(e,t,n){const{depth:s,clobber:o}=Object.assign({depth:2,clobber:!1},n);return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(t=>Eh(e,t,n)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(t=>{e.includes(t)||e.push(t)}),e):e===void 0||s<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(n=>{typeof t[n]=="object"&&(e[n]===void 0||typeof e[n]=="object")?(e[n]===void 0&&(e[n]=Array.isArray(t[n])?[]:{}),e[n]=Eh(e[n],t[n],{depth:s-1,clobber:o})):(o||typeof e[n]!="object"&&typeof t[n]!="object")&&(e[n]=t[n])}),e)},Xe=Eh;Ow=typeof global=="object"&&global&&global.Object===Object&&global;const Fg=Ow;Pw=typeof self=="object"&&self&&self.Object===Object&&self,Vw=Fg||Pw||Function("return this")();const ln=Vw;Yw=ln.Symbol;const Wr=Yw;var Og=Object.prototype,zw=Og.hasOwnProperty,Uw=Og.toString,ca=Wr?Wr.toStringTag:void 0;function Ww(e){var t=zw.call(e,ca),n=e[ca],s,o;try{e[ca]=void 0,s=!0}catch{}return o=Uw.call(e),s&&(t?e[ca]=n:delete e[ca]),o}Hw=Object.prototype,Gw=Hw.toString;function qw(e){return Gw.call(e)}var $w="[object Null]",jw="[object Undefined]",dd=Wr?Wr.toStringTag:void 0;function Qi(e){return e==null?e===void 0?jw:$w:dd&&dd in Object(e)?Ww(e):qw(e)}function Lr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Xw="[object AsyncFunction]",Kw="[object Function]",Zw="[object GeneratorFunction]",Qw="[object Proxy]";function Ns(t){if(!Lr(t))return!1;var e=Qi(t);return e==Kw||e==Zw||e==Xw||e==Qw}Jw=ln["__core-js_shared__"];const Fu=Jw;pd=function(){var e=/[^.]+$/.exec(Fu&&Fu.keys&&Fu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function tT(e){return!!pd&&pd in e}eT=Function.prototype,rT=eT.toString;function Ji(e){if(e!=null){try{return rT.call(e)}catch{}try{return e+""}catch{}}return""}var nT=/[\\^$.*+?()[\]{}|]/g,iT=/^\[object .+?Constructor\]$/,sT=Function.prototype,aT=Object.prototype,oT=sT.toString,lT=aT.hasOwnProperty,cT=RegExp("^"+oT.call(lT).replace(nT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function uT(e){if(!Lr(e)||tT(e))return!1;var t=Ns(e)?cT:iT;return t.test(Ji(e))}function hT(e,t){return e==null?void 0:e[t]}function ts(t,n){var e=hT(t,n);return uT(e)?e:void 0}fT=ts(Object,"create");const za=fT;function dT(){this.__data__=za?za(null):{},this.size=0}function pT(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gT="__lodash_hash_undefined__",yT=Object.prototype,mT=yT.hasOwnProperty;function bT(e){var t=this.__data__,n;return za?(n=t[e],n===gT?void 0:n):mT.call(t,e)?t[e]:void 0}_T=Object.prototype,xT=_T.hasOwnProperty;function vT(e){var t=this.__data__;return za?t[e]!==void 0:xT.call(t,e)}kT="__lodash_hash_undefined__";function wT(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=za&&t===void 0?kT:t,this}function Vi(e){var t=-1,s=e==null?0:e.length,n;for(this.clear();++t<s;)n=e[t],this.set(n[0],n[1])}Vi.prototype.clear=dT,Vi.prototype.delete=pT,Vi.prototype.get=bT,Vi.prototype.has=vT,Vi.prototype.set=wT;function TT(){this.__data__=[],this.size=0}function Xs(e,t){return e===t||e!==e&&t!==t}function Dc(t,n){for(var e=t.length;e--;)if(Xs(t[e][0],n))return e;return-1}ET=Array.prototype,CT=ET.splice;function ST(n){var e=this.__data__,t=Dc(e,n),s;return!(t<0)&&(s=e.length-1,t==s?e.pop():CT.call(e,t,1),--this.size,!0)}function AT(n){var e=this.__data__,t=Dc(e,n);return t<0?void 0:e[t][1]}function LT(e){return Dc(this.__data__,e)>-1}function BT(t,n){var e=this.__data__,s=Dc(e,t);return s<0?(++this.size,e.push([t,n])):e[s][1]=n,this}function ti(e){var t=-1,s=e==null?0:e.length,n;for(this.clear();++t<s;)n=e[t],this.set(n[0],n[1])}ti.prototype.clear=TT,ti.prototype.delete=ST,ti.prototype.get=AT,ti.prototype.has=LT,ti.prototype.set=BT,DT=ts(ln,"Map");const Ua=DT;function IT(){this.size=0,this.__data__={hash:new Vi,map:new(Ua||ti),string:new Vi}}function MT(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ic(n,e){var t=n.__data__;return MT(e)?t[typeof e=="string"?"string":"hash"]:t.map}function NT(e){var t=Ic(this,e).delete(e);return this.size-=t?1:0,t}function RT(e){return Ic(this,e).get(e)}function FT(e){return Ic(this,e).has(e)}function OT(t,n){var e=Ic(this,t),s=e.size;return e.set(t,n),this.size+=e.size==s?0:1,this}function ei(e){var t=-1,s=e==null?0:e.length,n;for(this.clear();++t<s;)n=e[t],this.set(n[0],n[1])}ei.prototype.clear=IT,ei.prototype.delete=NT,ei.prototype.get=RT,ei.prototype.has=FT,ei.prototype.set=OT,PT="Expected a function";function Ks(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(PT);var t=function(){var o=arguments,i=e?e.apply(this,o):o[0],s=t.cache,a;return s.has(i)?s.get(i):(a=n.apply(this,o),t.cache=s.set(i,a)||s,a)};return t.cache=new(Ks.Cache||ei),t}Ks.Cache=ei;const VT={curveBasis:Is,curveBasisClosed:gk,curveBasisOpen:yk,curveBumpX:dk,curveBumpY:pk,curveBundle:mk,curveCardinalClosed:_k,curveCardinalOpen:xk,curveCardinal:bk,curveCatmullRomClosed:kk,curveCatmullRomOpen:wk,curveCatmullRom:vk,curveLinear:Ar,curveLinearClosed:Tk,curveMonotoneX:Ek,curveMonotoneY:Ck,curveNatural:Sk,curveStep:Ak,curveStepAfter:Bk,curveStepBefore:Lk},Ou=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,YT=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,zT=function(n,s){const t=Pg(n,/(?:init\b)|(?:initialize\b)/);let e={};if(Array.isArray(t)){const n=t.map(e=>e.args);Yi(n),e=Xe(e,[...n])}else e=t.args;if(e){let t=Q1(n,s);["config"].forEach(n=>{e[n]!==void 0&&(t==="flowchart-v2"&&(t="flowchart"),e[t]=e[n],delete e[n])})}return e},Pg=function(t,e=null){try{const o=new RegExp(`[%]{2}(?![{]${YT.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(o,"").replace(/'/gm,'"'),B.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let n;const s=[];for(;(n=Ou.exec(t))!==null;)if(n.index===Ou.lastIndex&&Ou.lastIndex++,n&&!e||e&&n[1]&&n[1].match(e)||e&&n[2]&&n[2].match(e)){const e=n[1]?n[1]:n[2],t=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;s.push({type:e,args:t})}return s.length===0&&s.push({type:t,args:null}),s.length===1?s[0]:s}catch(n){return B.error(`ERROR: ${n.message} - Unable to parse directive
      ${e!==null?" type:"+e:""} based on the text:${t}`),{type:null,args:null}}},UT=function(e,t){for(const[n,s]of t.entries())if(s.match(e))return n;return-1};function Qr(e,t){if(!e)return t;const n=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return VT[n]||t}function WT(t,n){const e=t.trim();if(e)return n.securityLevel!=="loose"?Jn(e):e}const HT=(s,...o)=>{const t=s.split("."),n=t.length-1,i=t[n];let e=window;for(let s=0;s<n;s++)if(e=e[t[s]],!e)return;e[i](...o)};function zl(e,t){return e&&t?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0}function GT(s){let e,o=0;s.forEach(t=>{o+=zl(t,e),e=t});let n=o/2,t;return e=void 0,s.forEach(s=>{if(e&&!t){const o=zl(s,e);if(o<n)n-=o;else{const i=n/o;i<=0&&(t=e),i>=1&&(t={x:s.x,y:s.y}),i>0&&i<1&&(t={x:(1-i)*e.x+i*s.x,y:(1-i)*e.y+i*s.y})}}e=s}),t}function qT(e){return e.length===1?e[0]:GT(e)}const $T=(r,e,c)=>{let n;B.info(`our points ${JSON.stringify(e)}`),e[0]!==c&&(e=e.reverse());let o=25,t;n=void 0,e.forEach(e=>{if(n&&!t){const s=zl(e,n);if(s<o)o-=s;else{const i=o/s;i<=0&&(t=n),i>=1&&(t={x:e.x,y:e.y}),i>0&&i<1&&(t={x:(1-i)*n.x+i*e.x,y:(1-i)*n.y+i*e.y})}}n=e});const i=r?10:5,a=Math.atan2(e[0].y-t.y,e[0].x-t.x),s={x:0,y:0};return s.x=Math.sin(a)*i+(e[0].x+t.x)/2,s.y=-Math.cos(a)*i+(e[0].y+t.y)/2,s};function jT(c,a,l){let e=JSON.parse(JSON.stringify(l)),i;B.info("our points",e),a!=="start_left"&&a!=="start_right"&&(e=e.reverse()),e.forEach(e=>{i=e});let r=25+c,t;i=void 0,e.forEach(e=>{if(i&&!t){const n=zl(e,i);if(n<r)r-=n;else{const s=r/n;s<=0&&(t=i),s>=1&&(t={x:e.x,y:e.y}),s>0&&s<1&&(t={x:(1-s)*i.x+s*e.x,y:(1-s)*i.y+s*e.y})}}i=e});const s=10+c*.5,o=Math.atan2(e[0].y-t.y,e[0].x-t.x),n={x:0,y:0};return n.x=Math.sin(o)*s+(e[0].x+t.x)/2,n.y=-Math.cos(o)*s+(e[0].y+t.y)/2,a==="start_left"&&(n.x=Math.sin(o+Math.PI)*s+(e[0].x+t.x)/2,n.y=-Math.cos(o+Math.PI)*s+(e[0].y+t.y)/2),a==="end_right"&&(n.x=Math.sin(o-Math.PI)*s+(e[0].x+t.x)/2-5,n.y=-Math.cos(o-Math.PI)*s+(e[0].y+t.y)/2-5),a==="end_left"&&(n.x=Math.sin(o)*s+(e[0].x+t.x)/2-5,n.y=-Math.cos(o)*s+(e[0].y+t.y)/2-5),n}function yi(n){let e="",t="";for(const s of n)s!==void 0&&(s.startsWith("color:")||s.startsWith("text-align:")?t=t+s+";":e=e+s+";");return{style:e,labelStyle:t}}let gd=0;const Vg=()=>(gd++,"id-"+Math.random().toString(36).substr(2,12)+"-"+gd);function XT(n){let e="";const t="0123456789abcdef",s=t.length;for(let o=0;o<n;o++)e+=t.charAt(Math.floor(Math.random()*s));return e}const Yg=e=>XT(e.length),KT=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},ZT=function(s,e){const o=e.text.replace(Xt.lineBreakRegex," "),[,i]=ho(e.fontSize),t=s.append("text");t.attr("x",e.x),t.attr("y",e.y),t.style("text-anchor",e.anchor),t.style("font-family",e.fontFamily),t.style("font-size",i),t.style("font-weight",e.fontWeight),t.attr("fill",e.fill),e.class!==void 0&&t.attr("class",e.class);const n=t.append("tspan");return n.attr("x",e.x+e.textMargin*2),n.attr("fill",e.fill),n.text(o),t},zg=Ks((n,o,t)=>{if(!n||(t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},t),Xt.lineBreakRegex.test(n)))return n;const i=n.split(" "),s=[];let e="";return i.forEach((n,r)=>{const a=vn(`${n} `,t),c=vn(e,t);if(a>o){const{hyphenatedStrings:i,remainingWord:a}=QT(n,o,"-",t);s.push(e,...i),e=a}else c+a>=o?(s.push(e),e=n):e=[e,n].filter(Boolean).join(" ");r+1===i.length&&s.push(e)}),s.filter(e=>e!=="").join(t.joinWith)},(t,n,e)=>`${t}${n}${e.fontSize}${e.fontWeight}${e.fontFamily}${e.joinWith}`),QT=Ks((a,o,i="-",t)=>{t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},t);const n=[...a],s=[];let e="";return n.forEach((r,c)=>{const a=`${e}${r}`;if(vn(a,t)>=o){const t=c+1,o=n.length===t,r=`${a}${i}`;s.push(o?a:r),e=""}else e=a}),{hyphenatedStrings:s,remainingWord:e}},(t,n,s="-",e)=>`${t}${n}${s}${e.fontSize}${e.fontWeight}${e.fontFamily}`);function Ch(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},e),J1(t,e).height}function vn(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e),J1(t,e).width}const J1=Ks((n,t)=>{t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},t);const{fontSize:c,fontFamily:l,fontWeight:d}=t;if(!n)return{width:0,height:0};const[,i]=ho(c),a=["sans-serif",l],r=n.split(Xt.lineBreakRegex),e=[],s=_t("body");if(!s.remove)return{width:0,height:0,lineHeight:0};const o=s.append("svg");for(const s of a){let n=0;const t={width:0,height:0,lineHeight:0};for(const l of r){const e=KT();e.text=l;const a=ZT(o,e).style("font-size",i).style("font-weight",d).style("font-family",s),c=(a._groups||a)[0][0].getBBox();t.width=Math.round(Math.max(t.width,c.width)),n=Math.round(c.height),t.height+=n,t.lineHeight=Math.round(Math.max(t.lineHeight,n))}e.push(t)}o.remove();const u=isNaN(e[1].height)||isNaN(e[1].width)||isNaN(e[1].lineHeight)||e[0].height>e[1].height&&e[0].width>e[1].width&&e[0].lineHeight>e[1].lineHeight?0:1;return e[u]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),JT=class{constructor(t,e){this.deterministic=t,this.seed=e,this.count=e?e.length:0}next(){return this.deterministic?this.count++:Date.now()}};let Po;const tE=function(e){return Po=Po||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Po.innerHTML=e,unescape(Po.textContent)},Yi=e=>{if(B.debug("directiveSanitizer called with",e),typeof e=="object"&&(e.length?e.forEach(e=>Yi(e)):Object.keys(e).forEach(t=>{B.debug("Checking key",t),t.startsWith("__")&&(B.debug("sanitize deleting __ option",t),delete e[t]),t.includes("proto")&&(B.debug("sanitize deleting proto option",t),delete e[t]),t.includes("constr")&&(B.debug("sanitize deleting constr option",t),delete e[t]),t.includes("themeCSS")&&(B.debug("sanitizing themeCss option"),e[t]=rl(e[t])),t.includes("fontFamily")&&(B.debug("sanitizing fontFamily option"),e[t]=rl(e[t])),t.includes("altFontFamily")&&(B.debug("sanitizing altFontFamily option"),e[t]=rl(e[t])),U8.includes(t)?typeof e[t]=="object"&&(B.debug("sanitize deleting object",t),Yi(e[t])):(B.debug("sanitize deleting option",t),delete e[t])})),e.themeVariables){const t=Object.keys(e.themeVariables);for(const s of t){const n=e.themeVariables[s];n&&n.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[s]="")}}B.debug("After sanitization",e)},rl=n=>{let e=0,t=0;for(const s of n){if(e<t)return"{ /* ERROR: Unbalanced CSS */ }";s==="{"?e++:s==="}"&&t++}return e!==t?"{ /* ERROR: Unbalanced CSS */ }":n};function t0(e){return"str"in e}function eE(e){return e instanceof Error?e.message:String(e)}const rE=(e,s,o,t)=>{if(!t)return;const n=e.node().getBBox();e.append("text").text(t).attr("x",n.x+n.width/2).attr("y",-o).attr("class",s)},ho=e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e,10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},jt={assignWithDepth:Xe,wrapLabel:zg,calculateTextHeight:Ch,calculateTextWidth:vn,calculateTextDimensions:J1,detectInit:zT,detectDirective:Pg,isSubstringInArray:UT,interpolateToCurve:Qr,calcLabelPosition:qT,calcCardinalityPosition:$T,calcTerminalLabelPosition:jT,formatUrl:WT,getStylesFromArray:yi,generateId:Vg,random:Yg,runFunc:HT,entityDecode:tE,initIdGenerator:JT,directiveSanitizer:Yi,sanitizeCss:rl,insertTitle:rE,parseFontSize:ho};var Ug="comm",Wg="rule",Hg="decl",nE="@import",iE="@keyframes",sE=Math.abs,e0=String.fromCharCode;function Gg(e){return e.trim()}function Sh(e,t,n){return e.replace(t,n)}function aE(e,t){return e.indexOf(t)}function Mc(e,t){return e.charCodeAt(t)|0}function Wa(e,t,n){return e.slice(t,n)}function si(e){return e.length}function qg(e){return e.length}function Vo(e,t){return t.push(e),e}var Nc=1,Rs=1,$g=0,Hr=0,Ne=0,Zs="";function r0(e,t,n,s,o,i,a){return{value:e,root:t,parent:n,type:s,props:o,children:i,line:Nc,column:Rs,length:a,return:""}}function oE(){return Ne}function lE(){return Ne=Hr>0?Mc(Zs,--Hr):0,Rs--,Ne===10&&(Rs=1,Nc--),Ne}function Jr(){return Ne=Hr<$g?Mc(Zs,Hr++):0,Rs++,Ne===10&&(Rs=1,Nc++),Ne}function Ni(){return Mc(Zs,Hr)}function nl(){return Hr}function Rc(e,t){return Wa(Zs,e,t)}function Ah(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cE(e){return Nc=Rs=1,$g=si(Zs=e),Hr=0,[]}function uE(e){return Zs="",e}function Pu(e){return Gg(Rc(Hr-1,Lh(e===91?e+2:e===40?e+1:e)))}function hE(e){for(;(Ne=Ni())&&Ne<33;)Jr();return Ah(e)>2||Ah(Ne)>3?"":" "}function fE(t,e){for(;--e&&Jr()&&!(Ne<48||Ne>102||Ne>57&&Ne<65||Ne>70&&Ne<97););return Rc(t,nl()+(e<6&&Ni()==32&&Jr()==32))}function Lh(e){for(;Jr();)switch(Ne){case e:return Hr;case 34:case 39:e!==34&&e!==39&&Lh(Ne);break;case 40:e===41&&Lh(e);break;case 92:Jr();break}return Hr}function dE(e,t){for(;Jr()&&e+Ne!==47+10;)if(e+Ne===42+42&&Ni()===47)break;return"/*"+Rc(t,Hr-1)+"*"+e0(e===47?e:Jr())}function pE(e){for(;!Ah(Ni());)Jr();return Rc(e,Hr)}function gE(e){return uE(il("",null,null,null,[""],e=cE(e),0,[0],e))}function il(O,b,p,l,d,f,w,i,_){for(var v=0,r=0,n=w,j=0,m=0,u=0,o=1,y=1,c=1,t=0,h="",g=d,a=f,s=l,e=h;y;)switch(u=t,t=Jr()){case 40:if(u!=108&&Mc(e,n-1)==58){aE(e+=Sh(Pu(t),"&","&"),"&")!=-1&&(c=-1);break}case 34:case 39:case 91:e+=Pu(t);break;case 9:case 10:case 13:case 32:e+=hE(u);break;case 92:e+=fE(nl()-1,7);continue;case 47:switch(Ni()){case 42:case 47:Vo(yE(dE(Jr(),nl()),b,p),_);break;default:e+="/"}break;case 123*o:i[v++]=si(e)*c;case 125*o:case 59:case 0:switch(t){case 0:case 125:y=0;case 59+r:m>0&&si(e)-n&&Vo(m>32?md(e+";",l,p,n-1):md(Sh(e," ","")+";",l,p,n-2),_);break;case 59:e+=";";default:if(Vo(s=yd(e,b,p,v,r,d,i,h,g=[],a=[],n),f),t===123)if(r===0)il(e,b,s,s,g,f,n,i,a);else switch(j){case 100:case 109:case 115:il(O,s,s,l&&Vo(yd(O,s,s,0,0,d,i,h,d,g=[],n),a),d,a,n,i,l?g:a);break;default:il(e,s,s,s,[""],a,0,i,a)}}v=r=m=0,o=c=1,h=e="",n=w;break;case 58:n=1+si(e),m=u;default:if(o<1)if(t==123)--o;else if(t==125&&o++==0&&lE()==125)continue;switch(e+=e0(t),t*o){case 38:c=r>0?1:(e+="",-1);break;case 44:i[v++]=(si(e)-1)*c,c=1;break;case 64:Ni()===45&&(e+=Pu(Jr())),j=Ni(),r=n=si(h=e+=pE(nl())),t++;break;case 45:u===45&&si(e)==2&&(o=0)}}return f}function yd(t,b,v,p,n,f,h,u,c,d,j){for(var r=n-1,o=n===0?f:[""],m=qg(o),s=0,a=0,g=0;s<p;++s)for(var e=0,i=Wa(t,r+1,r=sE(a=h[s])),l=t;e<m;++e)(l=Gg(a>0?o[e]+" "+i:Sh(i,/&\f/g,o[e])))&&(c[g++]=l);return r0(t,b,v,n===0?Wg:u,c,d,j)}function yE(e,t,n){return r0(e,t,n,Ug,e0(oE()),Wa(e,2,-2),0)}function md(e,n,s,t){return r0(e,n,s,Hg,Wa(e,0,t),Wa(e,t+1,-1),t)}function Bh(t,n){for(var s="",o=qg(t),e=0;e<o;e++)s+=n(t[e],e,t,n)||"";return s}function mE(e,s,t,n){switch(e.type){case nE:case Hg:return e.return=e.return||e.value;case Ug:return"";case iE:return e.return=e.value+"{"+Bh(e.children,n)+"}";case Wg:e.value=e.props.join(",")}return si(t=Bh(e.children,n))?e.return=e.value+"{"+t+"}":""}const Ul="9.4.3",Fs=Object.freeze(W8);let br=Xe({},Fs),jg,Os=[],Ca=Xe({},Fs);const Fc=(n,s)=>{let e=Xe({},n),t={};for(const e of s)Zg(e),t=Xe(t,e);if(e=Xe(e,t),t.theme&&t.theme in jn){const n=Xe({},jg),s=Xe(n.themeVariables||{},t.themeVariables);e.theme&&e.theme in jn&&(e.themeVariables=jn[e.theme].getThemeVariables(s))}return Ca=e,Jg(Ca),Ca},bE=e=>(br=Xe({},Fs),br=Xe(br,e),e.theme&&jn[e.theme]&&(br.themeVariables=jn[e.theme].getThemeVariables(e.themeVariables)),Fc(br,Os),br),_E=e=>{jg=Xe({},e)},xE=e=>(br=Xe(br,e),Fc(br,Os),br),Xg=()=>Xe({},br),Kg=e=>(Jg(e),Xe(Ca,e),q()),q=()=>Xe({},Ca),Zg=e=>{["secure",...br.secure??[]].forEach(t=>{e[t]!==void 0&&(B.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.indexOf("__")===0&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&Zg(e[t])})},n0=e=>{e.fontFamily&&(e.themeVariables?e.themeVariables.fontFamily||(e.themeVariables={fontFamily:e.fontFamily}):e.themeVariables={fontFamily:e.fontFamily}),Os.push(e),Fc(br,Os)},Ha=(e=br)=>{Os=[],Fc(e,Os)};Qg=(e=>(e.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",e))(Qg||{});const bd={},vE=e=>{bd[e]||(B.warn(Qg[e]),bd[e]=!0)},Jg=e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&vE("LAZY_LOAD_DEPRECATED")},kE=function(e,t){for(let n of t)e.attr(n[0],n[1])},wE=function(n,t,s){let e=new Map;return s?(e.set("width","100%"),e.set("style",`max-width: ${t}px;`)):(e.set("height",n),e.set("width",t)),e},cn=function(e,t,n,s){const o=wE(t,n,s);kE(e,o)},Oc=function(c,o,t,r){const e=o.node().getBBox(),a=e.width,i=e.height;B.info(`SVG bounds: ${a}x${i}`,e);let n=0,s=0;B.info(`Graph bounds: ${n}x${s}`,c),n=a+t*2,s=i+t*2,B.info(`Calculated bounds: ${n}x${s}`),cn(o,s,n,r);const l=`${e.x-t} ${e.y-t} ${e.width+2*t} ${e.height+2*t}`;o.attr("viewBox",l)},TE=e=>`g.classGroup text {
  fill: ${e.nodeBorder};
  fill: ${e.classText};
  stroke: none;
  font-family: ${e.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${e.classText};
}
.edgeLabel .label rect {
  fill: ${e.mainBkg};
}
.label text {
  fill: ${e.classText};
}
.edgeLabel .label span {
  background: ${e.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${e.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.classGroup line {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${e.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${e.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,Sa=TE,EE=e=>`
  .entityBox {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${e.attributeBackgroundColorOdd};
    stroke: ${e.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${e.attributeBackgroundColorEven};
    stroke: ${e.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${e.tertiaryColor};
    opacity: 0.7;
    background-color: ${e.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${e.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }    
`,ty=EE,CE=()=>"",Dh=CE,SE=e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span {
    color: ${e.titleColor};
  }

  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,Wl=SE,AE=e=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${e.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${e.sectionBkgColor};
  }

  .section2 {
    fill: ${e.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${e.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${e.titleColor};
  }

  .sectionTitle1 {
    fill: ${e.titleColor};
  }

  .sectionTitle2 {
    fill: ${e.titleColor};
  }

  .sectionTitle3 {
    fill: ${e.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${e.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${e.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${e.fontFamily};
      fill: ${e.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${e.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${e.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${e.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${e.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${e.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${e.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${e.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${e.taskBkgColor};
    stroke: ${e.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${e.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${e.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${e.activeTaskBkgColor};
    stroke: ${e.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${e.doneTaskBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,ey=AE,LE=()=>"",ry=LE,BE=e=>`
  .pieCircle{
    stroke: ${e.pieStrokeColor};
    stroke-width : ${e.pieStrokeWidth};
    opacity : ${e.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${e.pieTitleTextSize};
    fill: ${e.pieTitleTextColor};
    font-family: ${e.fontFamily};
  }
  .slice {
    font-family: ${e.fontFamily};
    fill: ${e.pieSectionTextColor};
    font-size:${e.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${e.pieLegendTextColor};
    font-family: ${e.fontFamily};
    font-size: ${e.pieLegendTextSize};
  }
`,ny=BE,DE=e=>`

  marker {
    fill: ${e.relationColor};
    stroke: ${e.relationColor};
  }

  marker.cross {
    stroke: ${e.lineColor};
  }

  svg {
    font-family: ${e.fontFamily};
    font-size: ${e.fontSize};
  }

  .reqBox {
    fill: ${e.requirementBackground};
    fill-opacity: 100%;
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${e.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${e.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${e.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${e.relationLabelColor};
  }

`,iy=DE,IE=e=>`.actor {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }

  text.actor > tspan {
    fill: ${e.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${e.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${e.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${e.signalColor};
  }

  #arrowhead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .sequenceNumber {
    fill: ${e.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${e.signalColor};
  }

  #crosshead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .messageText {
    fill: ${e.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${e.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${e.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${e.noteBorderColor};
    fill: ${e.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${e.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation1 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation2 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${e.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
    stroke-width: 2px;
  }
`,sy=IE,ME=e=>`
defs #statediagram-barbEnd {
    fill: ${e.transitionColor};
    stroke: ${e.transitionColor};
  }
g.stateGroup text {
  fill: ${e.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${e.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${e.stateLabelColor};
}

g.stateGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.stateGroup line {
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${e.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${e.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${e.noteBorderColor};
  fill: ${e.noteBkgColor};

  text {
    fill: ${e.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${e.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${e.transitionLabelColor||e.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${e.transitionLabelColor||e.tertiaryTextColor};
}

.stateLabel text {
  fill: ${e.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node .fork-join {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node circle.state-end {
  fill: ${e.innerEndBackground};
  stroke: ${e.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${e.compositeBackground||e.background};
  // stroke: ${e.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${e.stateBkg||e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${e.lineColor};
}

.statediagram-cluster rect {
  fill: ${e.compositeTitleBackground};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${e.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${e.stateBorder||e.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${e.compositeBackground||e.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${e.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${e.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${e.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${e.lineColor};
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,Hl=ME,NE=e=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${e.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${e.textColor}
  }

  .legend {
    fill: ${e.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${e.textColor}
  }

  .face {
    ${e.faceColor?`fill: ${e.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${e.fillType0?`fill: ${e.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${e.fillType0?`fill: ${e.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${e.fillType0?`fill: ${e.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${e.fillType0?`fill: ${e.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${e.fillType0?`fill: ${e.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${e.fillType0?`fill: ${e.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${e.fillType0?`fill: ${e.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${e.fillType0?`fill: ${e.fillType7}`:""};
  }

  .actor-0 {
    ${e.actor0?`fill: ${e.actor0}`:""};
  }
  .actor-1 {
    ${e.actor1?`fill: ${e.actor1}`:""};
  }
  .actor-2 {
    ${e.actor2?`fill: ${e.actor2}`:""};
  }
  .actor-3 {
    ${e.actor3?`fill: ${e.actor3}`:""};
  }
  .actor-4 {
    ${e.actor4?`fill: ${e.actor4}`:""};
  }
  .actor-5 {
    ${e.actor5?`fill: ${e.actor5}`:""};
  }
`,ay=NE,RE=e=>`.person {
    stroke: ${e.personBorder};
    fill: ${e.personBkg};
  }
`,oy=RE,sl={flowchart:Wl,"flowchart-v2":Wl,sequence:sy,gantt:ey,classDiagram:Sa,"classDiagram-v2":Sa,class:Sa,stateDiagram:Hl,state:Hl,info:ry,pie:ny,er:ty,error:Dh,journey:ay,requirement:iy,c4:oy},FE=(t,s,e)=>{let n="";return t in sl&&sl[t]?n=sl[t](e):B.warn(`No theme found for ${t}`),` & {
    font-family: ${e.fontFamily};
    font-size: ${e.fontSize};
    fill: ${e.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${e.errorBkgColor};
  }
  & .error-text {
    fill: ${e.errorTextColor};
    stroke: ${e.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${e.lineColor};
    stroke: ${e.lineColor};
  }
  & .marker.cross {
    stroke: ${e.lineColor};
  }

  & svg {
    font-family: ${e.fontFamily};
    font-size: ${e.fontSize};
  }

  ${n}

  ${s}
`},OE=(e,t)=>{sl[e]=t},PE=FE;let i0="",Pc="",s0="";const a0=e=>Ur(e,q()),Br=function(){i0="",s0="",Pc=""},Tr=function(e){i0=a0(e).replace(/^\s+/g,"")},Dr=function(){return i0||Pc},Ir=function(e){s0=a0(e).replace(/\n\s+/g,`
`)},Mr=function(){return s0},un=function(e){Pc=a0(e)},hn=function(){return Pc},VE={setAccTitle:Tr,getAccTitle:Dr,setDiagramTitle:un,getDiagramTitle:hn,getAccDescription:Mr,setAccDescription:Ir,clear:Br},YE=Object.freeze(Object.defineProperty({__proto__:null,clear:Br,default:VE,getAccDescription:Mr,getAccTitle:Dr,getDiagramTitle:hn,setAccDescription:Ir,setAccTitle:Tr,setDiagramTitle:un},Symbol.toStringTag,{value:"Module"}));let Ei={};const ly=function(s,e,t,n){B.debug("parseDirective is being called",e,t,n);try{if(e!==void 0)switch(e=e.trim(),t){case"open_directive":Ei={};break;case"type_directive":if(!Ei)throw new Error("currentDirective is undefined");Ei.type=e.toLowerCase();break;case"arg_directive":if(!Ei)throw new Error("currentDirective is undefined");Ei.args=JSON.parse(e);break;case"close_directive":zE(s,Ei,n),Ei=void 0;break}}catch(n){B.error(`Error while rendering sequenceDiagram directive: ${e} jison context: ${t}`),B.error(n.message)}},zE=function(t,e,n){switch(B.info(`Directive type=${e.type} with args:`,e.args),e.type){case"init":case"initialize":{["config"].forEach(t=>{e.args[t]!==void 0&&(n==="flowchart-v2"&&(n="flowchart"),e.args[n]=e.args[t],delete e.args[t])}),B.info("sanitize in handleDirective",e.args),Yi(e.args),B.info("sanitize in handleDirective (done)",e.args),n0(e.args);break}case"wrap":case"nowrap":t&&t.setWrap&&t.setWrap(e.type==="wrap");break;case"themeCss":B.warn("themeCss encountered");break;default:B.warn(`Unhandled directive: source: '%%{${e.type}: ${JSON.stringify(e.args?e.args:{})}}%%`,e);break}},UE=B,WE=C1,fo=q,HE=e=>Ur(e,fo()),cy=Oc,GE=()=>YE,qE=(e,t,n,s)=>ly(e,t,n,s),Gl={},ze=(e,t,n)=>{if(Gl[e])throw new Error(`Diagram ${e} already registered.`);Gl[e]=t,n&&Rg(e,n),OE(e,t.styles),t.injectUtils&&t.injectUtils(UE,WE,fo,HE,cy,GE(),qE)},uy=e=>{if(e in Gl)return Gl[e];throw new Error(`Diagram ${e} not found.`)};Ih=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},g=[1,4],a=[1,7],r=[1,5],l=[1,9],i=[1,6],m=[2,6],h=[1,16],u=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],c=[8,14,20,22,24,25,27,29,32,37,40],_=[8,13,14,20,22,24,25,27,29,32,37,40],y=[1,26],b=[6,8,14,50,55],t=[8,14,55],f=[1,53],p=[1,52],w=[8,14,30,33,35,38,55],o=[1,67],n=[1,68],s=[1,69],v=[8,14,33,35,42,55],d={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(o,r,i,n,s,e){var t=e.length-1;switch(s){case 3:return e[t];case 4:return e[t-1];case 5:return n.setDirection(e[t-3]),e[t-1];case 7:n.setOptions(e[t-1]),this.$=e[t];break;case 8:e[t-1]+=e[t],this.$=e[t-1];break;case 10:this.$=[];break;case 11:e[t-1].push(e[t]),this.$=e[t-1];break;case 12:this.$=e[t-1];break;case 17:this.$=e[t].trim(),n.setAccTitle(this.$);break;case 18:case 19:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 20:n.addSection(e[t].substr(8)),this.$=e[t].substr(8);break;case 22:n.checkout(e[t]);break;case 23:n.branch(e[t]);break;case 24:n.branch(e[t-2],e[t]);break;case 25:n.cherryPick(e[t],"",void 0);break;case 26:n.cherryPick(e[t-2],"",e[t]);break;case 27:case 29:n.cherryPick(e[t-2],"","");break;case 28:n.cherryPick(e[t],"",e[t-2]);break;case 30:n.merge(e[t],"","","");break;case 31:n.merge(e[t-2],e[t],"","");break;case 32:n.merge(e[t-2],"",e[t],"");break;case 33:n.merge(e[t-2],"","",e[t]);break;case 34:n.merge(e[t-4],e[t],"",e[t-2]);break;case 35:n.merge(e[t-4],"",e[t],e[t-2]);break;case 36:n.merge(e[t-4],"",e[t-2],e[t]);break;case 37:n.merge(e[t-4],e[t-2],e[t],"");break;case 38:n.merge(e[t-4],e[t-2],"",e[t]);break;case 39:n.merge(e[t-4],e[t],e[t-2],"");break;case 40:n.merge(e[t-6],e[t-4],e[t-2],e[t]);break;case 41:n.merge(e[t-6],e[t],e[t-4],e[t-2]);break;case 42:n.merge(e[t-6],e[t-4],e[t],e[t-2]);break;case 43:n.merge(e[t-6],e[t-2],e[t-4],e[t]);break;case 44:n.merge(e[t-6],e[t],e[t-2],e[t-4]);break;case 45:n.merge(e[t-6],e[t-2],e[t],e[t-4]);break;case 46:n.commit(e[t]);break;case 47:n.commit("","",n.commitType.NORMAL,e[t]);break;case 48:n.commit("","",e[t],"");break;case 49:n.commit("","",e[t],e[t-2]);break;case 50:n.commit("","",e[t-2],e[t]);break;case 51:n.commit("",e[t],n.commitType.NORMAL,"");break;case 52:n.commit("",e[t-2],n.commitType.NORMAL,e[t]);break;case 53:n.commit("",e[t],n.commitType.NORMAL,e[t-2]);break;case 54:n.commit("",e[t-2],e[t],"");break;case 55:n.commit("",e[t],e[t-2],"");break;case 56:n.commit("",e[t-4],e[t-2],e[t]);break;case 57:n.commit("",e[t-4],e[t],e[t-2]);break;case 58:n.commit("",e[t-2],e[t-4],e[t]);break;case 59:n.commit("",e[t],e[t-4],e[t-2]);break;case 60:n.commit("",e[t],e[t-2],e[t-4]);break;case 61:n.commit("",e[t-2],e[t],e[t-4]);break;case 62:n.commit(e[t],"",n.commitType.NORMAL,"");break;case 63:n.commit(e[t],"",n.commitType.NORMAL,e[t-2]);break;case 64:n.commit(e[t-2],"",n.commitType.NORMAL,e[t]);break;case 65:n.commit(e[t-2],"",e[t],"");break;case 66:n.commit(e[t],"",e[t-2],"");break;case 67:n.commit(e[t],e[t-2],n.commitType.NORMAL,"");break;case 68:n.commit(e[t-2],e[t],n.commitType.NORMAL,"");break;case 69:n.commit(e[t-4],"",e[t-2],e[t]);break;case 70:n.commit(e[t-4],"",e[t],e[t-2]);break;case 71:n.commit(e[t-2],"",e[t-4],e[t]);break;case 72:n.commit(e[t],"",e[t-4],e[t-2]);break;case 73:n.commit(e[t],"",e[t-2],e[t-4]);break;case 74:n.commit(e[t-2],"",e[t],e[t-4]);break;case 75:n.commit(e[t-4],e[t],e[t-2],"");break;case 76:n.commit(e[t-4],e[t-2],e[t],"");break;case 77:n.commit(e[t-2],e[t],e[t-4],"");break;case 78:n.commit(e[t],e[t-2],e[t-4],"");break;case 79:n.commit(e[t],e[t-4],e[t-2],"");break;case 80:n.commit(e[t-2],e[t-4],e[t],"");break;case 81:n.commit(e[t-4],e[t],n.commitType.NORMAL,e[t-2]);break;case 82:n.commit(e[t-4],e[t-2],n.commitType.NORMAL,e[t]);break;case 83:n.commit(e[t-2],e[t],n.commitType.NORMAL,e[t-4]);break;case 84:n.commit(e[t],e[t-2],n.commitType.NORMAL,e[t-4]);break;case 85:n.commit(e[t],e[t-4],n.commitType.NORMAL,e[t-2]);break;case 86:n.commit(e[t-2],e[t-4],n.commitType.NORMAL,e[t]);break;case 87:n.commit(e[t-6],e[t-4],e[t-2],e[t]);break;case 88:n.commit(e[t-6],e[t-4],e[t],e[t-2]);break;case 89:n.commit(e[t-6],e[t-2],e[t-4],e[t]);break;case 90:n.commit(e[t-6],e[t],e[t-4],e[t-2]);break;case 91:n.commit(e[t-6],e[t-2],e[t],e[t-4]);break;case 92:n.commit(e[t-6],e[t],e[t-2],e[t-4]);break;case 93:n.commit(e[t-4],e[t-6],e[t-2],e[t]);break;case 94:n.commit(e[t-4],e[t-6],e[t],e[t-2]);break;case 95:n.commit(e[t-2],e[t-6],e[t-4],e[t]);break;case 96:n.commit(e[t],e[t-6],e[t-4],e[t-2]);break;case 97:n.commit(e[t-2],e[t-6],e[t],e[t-4]);break;case 98:n.commit(e[t],e[t-6],e[t-2],e[t-4]);break;case 99:n.commit(e[t],e[t-4],e[t-2],e[t-6]);break;case 100:n.commit(e[t-2],e[t-4],e[t],e[t-6]);break;case 101:n.commit(e[t],e[t-2],e[t-4],e[t-6]);break;case 102:n.commit(e[t-2],e[t],e[t-4],e[t-6]);break;case 103:n.commit(e[t-4],e[t-2],e[t],e[t-6]);break;case 104:n.commit(e[t-4],e[t],e[t-2],e[t-6]);break;case 105:n.commit(e[t-2],e[t-4],e[t-6],e[t]);break;case 106:n.commit(e[t],e[t-4],e[t-6],e[t-2]);break;case 107:n.commit(e[t-2],e[t],e[t-6],e[t-4]);break;case 108:n.commit(e[t],e[t-2],e[t-6],e[t-4]);break;case 109:n.commit(e[t-4],e[t-2],e[t-6],e[t]);break;case 110:n.commit(e[t-4],e[t],e[t-6],e[t-2]);break;case 111:this.$="";break;case 112:this.$=e[t];break;case 113:this.$=n.commitType.NORMAL;break;case 114:this.$=n.commitType.REVERSE;break;case 115:this.$=n.commitType.HIGHLIGHT;break;case 118:n.parseDirective("%%{","open_directive");break;case 119:n.parseDirective(e[t],"type_directive");break;case 120:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 121:n.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:g,8:a,14:r,46:8,50:l,55:i},{1:[3]},{3:10,4:2,5:3,6:g,8:a,14:r,46:8,50:l,55:i},{3:11,4:2,5:3,6:g,8:a,14:r,46:8,50:l,55:i},{7:12,8:m,9:[1,13],10:[1,14],11:15,14:h},e(u,[2,124]),e(u,[2,125]),e(u,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:m,11:15,14:h},{9:[1,21]},e(c,[2,10],{12:22,13:[1,23]}),e(_,[2,9]),{9:[1,25],48:24,53:y},e([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:m,11:15,14:h},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},e(_,[2,8]),e(b,[2,116]),{49:45,52:[1,46]},e(b,[2,121]),{1:[2,4]},{8:[1,47]},e(c,[2,11]),{4:48,8:a,14:r,55:i},e(c,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),{21:[1,49]},{23:[1,50]},e(t,[2,19]),e(t,[2,20]),e(t,[2,21]),{28:51,34:f,54:p},e(t,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:f,54:p},{33:[1,61],35:[1,62]},{28:63,34:f,54:p},{48:64,53:y},{53:[2,120]},{1:[2,5]},e(c,[2,12]),e(t,[2,17]),e(t,[2,18]),e(t,[2,22]),e(w,[2,122]),e(w,[2,123]),e(t,[2,46]),{34:[1,65]},{39:66,43:o,44:n,45:s},{34:[1,70]},{34:[1,71]},e(t,[2,112]),e(t,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},e(t,[2,23],{30:[1,78]}),e(b,[2,117]),e(t,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),e(t,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),e(v,[2,113]),e(v,[2,114]),e(v,[2,115]),e(t,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),e(t,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:o,44:n,45:s},{34:[1,93]},e(t,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:o,44:n,45:s},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:o,44:n,45:s},{34:[1,106]},{34:[1,107]},{39:108,43:o,44:n,45:s},{34:[1,109]},e(t,[2,31],{35:[1,111],38:[1,110]}),e(t,[2,32],{33:[1,113],35:[1,112]}),e(t,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},e(t,[2,24]),e(t,[2,49],{33:[1,120],42:[1,121]}),e(t,[2,53],{38:[1,122],42:[1,123]}),e(t,[2,63],{33:[1,125],38:[1,124]}),e(t,[2,50],{33:[1,126],42:[1,127]}),e(t,[2,55],{35:[1,128],42:[1,129]}),e(t,[2,66],{33:[1,131],35:[1,130]}),e(t,[2,52],{38:[1,132],42:[1,133]}),e(t,[2,54],{35:[1,134],42:[1,135]}),e(t,[2,67],{35:[1,137],38:[1,136]}),e(t,[2,64],{33:[1,139],38:[1,138]}),e(t,[2,65],{33:[1,141],35:[1,140]}),e(t,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:o,44:n,45:s},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:o,44:n,45:s},e(t,[2,26]),e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:o,44:n,45:s},{34:[1,153]},{39:154,43:o,44:n,45:s},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:o,44:n,45:s},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:o,44:n,45:s},{34:[1,167]},{39:168,43:o,44:n,45:s},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:o,44:n,45:s},{34:[1,173]},e(t,[2,37],{35:[1,174]}),e(t,[2,38],{38:[1,175]}),e(t,[2,36],{33:[1,176]}),e(t,[2,39],{35:[1,177]}),e(t,[2,34],{38:[1,178]}),e(t,[2,35],{33:[1,179]}),e(t,[2,60],{42:[1,180]}),e(t,[2,73],{33:[1,181]}),e(t,[2,61],{42:[1,182]}),e(t,[2,84],{38:[1,183]}),e(t,[2,74],{33:[1,184]}),e(t,[2,83],{38:[1,185]}),e(t,[2,59],{42:[1,186]}),e(t,[2,72],{33:[1,187]}),e(t,[2,58],{42:[1,188]}),e(t,[2,78],{35:[1,189]}),e(t,[2,71],{33:[1,190]}),e(t,[2,77],{35:[1,191]}),e(t,[2,57],{42:[1,192]}),e(t,[2,85],{38:[1,193]}),e(t,[2,56],{42:[1,194]}),e(t,[2,79],{35:[1,195]}),e(t,[2,80],{35:[1,196]}),e(t,[2,86],{38:[1,197]}),e(t,[2,70],{33:[1,198]}),e(t,[2,81],{38:[1,199]}),e(t,[2,69],{33:[1,200]}),e(t,[2,75],{35:[1,201]}),e(t,[2,76],{35:[1,202]}),e(t,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:o,44:n,45:s},{34:[1,206]},{34:[1,207]},{39:208,43:o,44:n,45:s},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:o,44:n,45:s},{34:[1,214]},{39:215,43:o,44:n,45:s},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:o,44:n,45:s},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:o,44:n,45:s},{34:[1,228]},{39:229,43:o,44:n,45:s},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:o,44:n,45:s},e(t,[2,40]),e(t,[2,42]),e(t,[2,41]),e(t,[2,43]),e(t,[2,45]),e(t,[2,44]),e(t,[2,101]),e(t,[2,102]),e(t,[2,99]),e(t,[2,100]),e(t,[2,104]),e(t,[2,103]),e(t,[2,108]),e(t,[2,107]),e(t,[2,106]),e(t,[2,105]),e(t,[2,110]),e(t,[2,109]),e(t,[2,98]),e(t,[2,97]),e(t,[2,96]),e(t,[2,95]),e(t,[2,93]),e(t,[2,94]),e(t,[2,92]),e(t,[2,91]),e(t,[2,90]),e(t,[2,89]),e(t,[2,87]),e(t,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},O=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,e){switch(e){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return e}();d.lexer=O;function j(){this.yy={}}return j.prototype=d,d.Parser=j,new j}(),Ih.parser=Ih;const $E=Ih,jE=e=>e.match(/^\s*gitGraph/)!==null;let ql=q().gitGraph.mainBranchName,XE=q().gitGraph.mainBranchOrder,He={},dr=null,Ga={};Ga[ql]={name:ql,order:XE};let Re={};Re[ql]=dr;let je=ql,hy="LR",zi=0;function o0(){return Yg({length:7})}const KE=function(e,t,n){xe.parseDirective(this,e,t,n)};function ZE(t,n){const e=Object.create(null);return t.reduce((t,s)=>{const o=n(s);return e[o]||(e[o]=!0,t.push(s)),t},[])}const QE=function(e){hy=e};let fy={};const JE=function(e){B.debug("options str",e),e=e&&e.trim(),e=e||"{}";try{fy=JSON.parse(e)}catch(e){B.error("error while parsing gitGraph options",e.message)}},tC=function(){return fy},eC=function(t,n,o,s){B.debug("Entering commit:",t,n,o,s),n=Xt.sanitizeText(n,q()),t=Xt.sanitizeText(t,q()),s=Xt.sanitizeText(s,q());const e={id:n||zi+"-"+o0(),message:t,seq:zi++,type:o||qa.NORMAL,tag:s||"",parents:dr==null?[]:[dr.id],branch:je};dr=e,He[e.id]=e,Re[je]=e.id,B.debug("in pushCommit "+e.id)},rC=function(e,t){if(e=Xt.sanitizeText(e,q()),Re[e]===void 0)Re[e]=dr!=null?dr.id:null,Ga[e]={name:e,order:t?parseInt(t,10):null},dy(e),B.debug("in createBranch");else{let t=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+e+'")');throw t.hash={text:"branch "+e,token:"branch "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+e+'"']},t}},nC=function(e,t,n,s){e=Xt.sanitizeText(e,q()),t=Xt.sanitizeText(t,q());const i=He[Re[je]],a=He[Re[e]];if(je===e){let t=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw t.hash={text:"merge "+e,token:"merge "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},t}if(i===void 0||!i){let t=new Error('Incorrect usage of "merge". Current branch ('+je+")has no commits");throw t.hash={text:"merge "+e,token:"merge "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},t}if(Re[e]===void 0){let t=new Error('Incorrect usage of "merge". Branch to be merged ('+e+") does not exist");throw t.hash={text:"merge "+e,token:"merge "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+e]},t}if(a===void 0||!a){let t=new Error('Incorrect usage of "merge". Branch to be merged ('+e+") has no commits");throw t.hash={text:"merge "+e,token:"merge "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},t}if(i===a){let t=new Error('Incorrect usage of "merge". Both branches have same head');throw t.hash={text:"merge "+e,token:"merge "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},t}if(t&&He[t]!==void 0){let o=new Error('Incorrect usage of "merge". Commit with id:'+t+" already exists, use different custom Id");throw o.hash={text:"merge "+e+t+n+s,token:"merge "+e+t+n+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+e+" "+t+"_UNIQUE "+n+" "+s]},o}const o={id:t||zi+"-"+o0(),message:"merged branch "+e+" into "+je,seq:zi++,parents:[dr==null?null:dr.id,Re[e]],branch:je,type:qa.MERGE,customType:n,customId:!!t,tag:s||""};dr=o,He[o.id]=o,Re[je]=o.id,B.debug(Re),B.debug("in mergeBranch")},iC=function(e,t,s){if(B.debug("Entering cherryPick:",e,t,s),e=Xt.sanitizeText(e,q()),t=Xt.sanitizeText(t,q()),s=Xt.sanitizeText(s,q()),!e||He[e]===void 0){let n=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw n.hash={text:"cherryPick "+e+" "+t,token:"cherryPick "+e+" "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}let n=He[e],o=n.branch;if(n.type===qa.MERGE){let n=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw n.hash={text:"cherryPick "+e+" "+t,token:"cherryPick "+e+" "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}if(!t||He[t]===void 0){if(o===je){let n=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw n.hash={text:"cherryPick "+e+" "+t,token:"cherryPick "+e+" "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}const a=He[Re[je]];if(a===void 0||!a){let n=new Error('Incorrect usage of "cherry-pick". Current branch ('+je+")has no commits");throw n.hash={text:"cherryPick "+e+" "+t,token:"cherryPick "+e+" "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}const i={id:zi+"-"+o0(),message:"cherry-picked "+n+" into "+je,seq:zi++,parents:[dr==null?null:dr.id,n.id],branch:je,type:qa.CHERRY_PICK,tag:s??"cherry-pick:"+n.id};dr=i,He[i.id]=i,Re[je]=i.id,B.debug(Re),B.debug("in cherryPick")}},dy=function(e){if(e=Xt.sanitizeText(e,q()),Re[e]===void 0){let t=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+e+'")');throw t.hash={text:"checkout "+e,token:"checkout "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+e+'"']},t}je=e;const t=Re[je];dr=He[t]};function _d(e,s,t){const n=e.indexOf(s);n===-1?e.push(t):e.splice(n,1,t)}function py(t){const e=t.reduce((e,t)=>e.seq>t.seq?e:t,t[0]);let n="";t.forEach(function(t){t===e?n+="	*":n+="	|"});const s=[n,e.id,e.seq];for(let t in Re)Re[t]===e.id&&s.push(t);if(B.debug(s.join(" ")),e.parents&&e.parents.length==2){const n=He[e.parents[0]];_d(t,e,n),t.push(He[e.parents[1]])}else{if(e.parents.length==0)return;{const n=He[e.parents];_d(t,e,n)}}t=ZE(t,e=>e.id),py(t)}const sC=function(){B.debug(He);const e=gy()[0];py([e])},aC=function(){He={},dr=null;let e=q().gitGraph.mainBranchName,t=q().gitGraph.mainBranchOrder;Re={},Re[e]=null,Ga={},Ga[e]={name:e,order:t},je=e,zi=0,Br()},oC=function(){return Object.values(Ga).map((e,t)=>e.order!==null?e:{...e,order:parseFloat(`0.${t}`,10)}).sort((e,t)=>e.order-t.order).map(({name:e})=>({name:e}))},lC=function(){return Re},cC=function(){return He},gy=function(){const e=Object.keys(He).map(function(e){return He[e]});return e.forEach(function(e){B.debug(e.id)}),e.sort((e,t)=>e.seq-t.seq),e},uC=function(){return je},hC=function(){return hy},fC=function(){return dr},qa={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},dC={parseDirective:KE,getConfig:()=>q().gitGraph,setDirection:QE,setOptions:JE,getOptions:tC,commit:eC,branch:rC,merge:nC,cherryPick:iC,checkout:dy,prettyPrint:sC,clear:aC,getBranchesAsObjArray:oC,getBranches:lC,getCommits:cC,getCommitsArray:gy,getCurrentBranch:uC,getDirection:hC,getHead:fC,setAccTitle:Tr,getAccTitle:Dr,getAccDescription:Mr,setAccDescription:Ir,setDiagramTitle:un,getDiagramTitle:hn,commitType:qa};let _a={};const Er={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},Li=8;let _r={},$l={},jl=[],Xl=0;const pC=()=>{_r={},$l={},_a={},Xl=0,jl=[]},gC=e=>{const n=document.createElementNS("http://www.w3.org/2000/svg","text");let t=[];typeof e=="string"?t=e.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(e)?t=e:t=[];for(const s of t){const e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","0"),e.setAttribute("class","row"),e.textContent=s.trim(),n.appendChild(e)}return n},xd=(a,n,o)=>{const i=fo().gitGraph,t=a.append("g").attr("class","commit-bullets"),s=a.append("g").attr("class","commit-labels");let e=0;Object.keys(n).sort((e,t)=>n[e].seq-n[t].seq).forEach(l=>{const a=n[l],r=_r[a.branch].pos,c=e+10;if(o){let e,n=a.customType!==void 0&&a.customType!==""?a.customType:a.type;switch(n){case Er.NORMAL:e="commit-normal";break;case Er.REVERSE:e="commit-reverse";break;case Er.HIGHLIGHT:e="commit-highlight";break;case Er.MERGE:e="commit-merge";break;case Er.CHERRY_PICK:e="commit-cherry-pick";break;default:e="commit-normal"}if(n===Er.HIGHLIGHT){const n=t.append("rect");n.attr("x",c-10),n.attr("y",r-10),n.attr("height",20),n.attr("width",20),n.attr("class",`commit ${a.id} commit-highlight${_r[a.branch].index%Li} ${e}-outer`),t.append("rect").attr("x",c-6).attr("y",r-6).attr("height",12).attr("width",12).attr("class",`commit ${a.id} commit${_r[a.branch].index%Li} ${e}-inner`)}else if(n===Er.CHERRY_PICK)t.append("circle").attr("cx",c).attr("cy",r).attr("r",10).attr("class",`commit ${a.id} ${e}`),t.append("circle").attr("cx",c-3).attr("cy",r+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${a.id} ${e}`),t.append("circle").attr("cx",c+3).attr("cy",r+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${a.id} ${e}`),t.append("line").attr("x1",c+3).attr("y1",r+1).attr("x2",c).attr("y2",r-5).attr("stroke","#fff").attr("class",`commit ${a.id} ${e}`),t.append("line").attr("x1",c-3).attr("y1",r+1).attr("x2",c).attr("y2",r-5).attr("stroke","#fff").attr("class",`commit ${a.id} ${e}`);else{const s=t.append("circle");if(s.attr("cx",c),s.attr("cy",r),s.attr("r",a.type===Er.MERGE?9:10),s.attr("class",`commit ${a.id} commit${_r[a.branch].index%Li}`),n===Er.MERGE){const n=t.append("circle");n.attr("cx",c),n.attr("cy",r),n.attr("r",6),n.attr("class",`commit ${e} ${a.id} commit${_r[a.branch].index%Li}`)}n===Er.REVERSE&&t.append("path").attr("d",`M ${c-5},${r-5}L${c+5},${r+5}M${c-5},${r+5}L${c+5},${r-5}`).attr("class",`commit ${e} ${a.id} commit${_r[a.branch].index%Li}`)}}if($l[a.id]={x:e+10,y:r},o){if(a.type!==Er.CHERRY_PICK&&(a.customId&&a.type===Er.MERGE||a.type!==Er.MERGE)&&i.showCommitLabel){const n=s.append("g"),c=n.insert("rect").attr("class","commit-label-bkg"),o=n.append("text").attr("x",e).attr("y",r+25).attr("class","commit-label").text(a.id);let t=o.node().getBBox();if(c.attr("x",e+10-t.width/2-2).attr("y",r+13.5).attr("width",t.width+2*2).attr("height",t.height+2*2),o.attr("x",e+10-t.width/2),i.rotateCommitLabel){let s=-7.5-(t.width+10)/25*9.5,o=10+t.width/25*8.5;n.attr("transform","translate("+s+", "+o+") rotate("+-45+", "+e+", "+r+")")}}if(a.tag){const c=s.insert("polygon"),l=s.append("circle"),i=s.append("text").attr("y",r-16).attr("class","tag-label").text(a.tag);let t=i.node().getBBox();i.attr("x",e+10-t.width/2);const o=t.height/2,n=r-19.2;c.attr("class","tag-label-bkg").attr("points",`
          ${e-t.width/2-4/2},${n+2}
          ${e-t.width/2-4/2},${n-2}
          ${e+10-t.width/2-4},${n-o-2}
          ${e+10+t.width/2+4},${n-o-2}
          ${e+10+t.width/2+4},${n+o+2}
          ${e+10-t.width/2-4},${n+o+2}`),l.attr("cx",e-t.width/2+4/2).attr("cy",n).attr("r",1.5).attr("class","tag-hole")}}e+=50,e>Xl&&(Xl=e)})},yC=(n,t,e)=>Object.keys(e).filter(s=>e[s].branch===t.branch&&e[s].seq>n.seq&&e[s].seq<t.seq).length>0,Mh=(e,n,s=0)=>{const t=e+Math.abs(e-n)/2;if(s>5)return t;if(jl.every(e=>Math.abs(e-t)>=10))return jl.push(t),t;const o=Math.abs(e-n);return Mh(e,n-o/5,s+1)},mC=(h,c,a,u)=>{const e=$l[c.id],t=$l[a.id],d=yC(c,a,u);let o="",l="",s=0,n=0,r=_r[a.branch].index,i;if(d){o="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",s=10,n=10,r=_r[a.branch].index;const c=e.y<t.y?Mh(e.y,t.y):Mh(t.y,e.y);e.y<t.y?i=`M ${e.x} ${e.y} L ${e.x} ${c-s} ${o} ${e.x+n} ${c} L ${t.x-s} ${c} ${l} ${t.x} ${c+n} L ${t.x} ${t.y}`:i=`M ${e.x} ${e.y} L ${e.x} ${c+s} ${l} ${e.x+n} ${c} L ${t.x-s} ${c} ${o} ${t.x} ${c-n} L ${t.x} ${t.y}`}else e.y<t.y&&(o="A 20 20, 0, 0, 0,",s=20,n=20,r=_r[a.branch].index,i=`M ${e.x} ${e.y} L ${e.x} ${t.y-s} ${o} ${e.x+n} ${t.y} L ${t.x} ${t.y}`),e.y>t.y&&(o="A 20 20, 0, 0, 0,",s=20,n=20,r=_r[c.branch].index,i=`M ${e.x} ${e.y} L ${t.x-s} ${e.y} ${o} ${t.x} ${e.y-n} L ${t.x} ${t.y}`),e.y===t.y&&(r=_r[c.branch].index,i=`M ${e.x} ${e.y} L ${e.x} ${t.y-s} ${o} ${e.x+n} ${t.y} L ${t.x} ${t.y}`);h.append("path").attr("d",i).attr("class","arrow arrow"+r%Li)},bC=(t,e)=>{const n=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach(s=>{const t=e[s];t.parents&&t.parents.length>0&&t.parents.forEach(s=>{mC(n,e[s],t,e)})})},_C=(n,s)=>{const t=fo().gitGraph,e=n.append("g");s.forEach((a,u)=>{const i=u%Li,o=_r[a.name].pos,s=e.append("line");s.attr("x1",0),s.attr("y1",o),s.attr("x2",Xl),s.attr("y2",o),s.attr("class","branch branch"+i),jl.push(o);let d=a.name;const c=gC(d),r=e.insert("rect"),l=e.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+i);l.node().appendChild(c);let n=c.getBBox();r.attr("class","branchLabelBkg label"+i).attr("rx",4).attr("ry",4).attr("x",-n.width-4-(t.rotateCommitLabel===!0?30:0)).attr("y",-n.height/2+8).attr("width",n.width+18).attr("height",n.height+4),l.attr("transform","translate("+(-n.width-14-(t.rotateCommitLabel===!0?30:0))+", "+(o-n.height/2-1)+")"),r.attr("transform","translate("+-19+", "+(o-n.height/2)+")")})},xC=function(r,o,c,n){pC();const i=fo(),t=i.gitGraph;B.debug("in gitgraph renderer",r+`
`,"id:",o,c),_a=n.db.getCommits();const s=n.db.getBranchesAsObjArray();let a=0;s.forEach((e,n)=>{_r[e.name]={pos:a,index:n},a+=50+(t.rotateCommitLabel?40:0)});const e=_t(`[id="${o}"]`);xd(e,_a,!1),t.showBranches&&_C(e,s),bC(e,_a),xd(e,_a,!0),jt.insertTitle(e,"gitTitleText",t.titleTopMargin,n.db.getDiagramTitle()),cy(void 0,e,t.diagramPadding,t.useMaxWidth??i.useMaxWidth)},vC={draw:xC},kC=e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
  }
`,wC=kC;Kl=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},el=[1,6],ec=[1,7],er=[1,8],ea=[1,9],ei=[1,16],e2=[1,11],eo=[1,12],e3=[1,13],e0=[1,14],e1=[1,15],e4=[1,27],G=[1,33],Y=[1,34],q=[1,35],K=[1,36],U=[1,37],b=[1,72],j=[1,73],y=[1,74],_=[1,75],w=[1,76],O=[1,77],x=[1,78],C=[1,38],E=[1,39],k=[1,40],A=[1,41],S=[1,42],M=[1,43],F=[1,44],T=[1,45],z=[1,46],D=[1,47],N=[1,48],L=[1,49],R=[1,50],P=[1,51],H=[1,52],I=[1,53],B=[1,54],V=[1,55],$=[1,56],a=[1,57],v=[1,59],g=[1,60],p=[1,61],f=[1,62],m=[1,63],h=[1,64],u=[1,65],d=[1,66],r=[1,67],l=[1,68],W=[1,69],Q=[24,52],es=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Z=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],o=[1,94],s=[1,95],n=[1,96],t=[1,97],i=[15,24,52],ed=[7,8,9,10,18,22,25,26,27,28],eu=[15,24,43,52],J=[15,24,43,52,86,87,89,90],X=[15,43],en=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],ee={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(o,r,i,n,s,e){var t=e.length-1;switch(s){case 4:n.setDirection("TB");break;case 5:n.setDirection("BT");break;case 6:n.setDirection("RL");break;case 7:n.setDirection("LR");break;case 11:n.parseDirective("%%{","open_directive");break;case 12:break;case 13:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 14:n.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:n.setC4Type(e[t-3]);break;case 26:n.setTitle(e[t].substring(6)),this.$=e[t].substring(6);break;case 27:n.setAccDescription(e[t].substring(15)),this.$=e[t].substring(15);break;case 28:this.$=e[t].trim(),n.setTitle(this.$);break;case 29:case 30:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 35:case 36:e[t].splice(2,0,"ENTERPRISE"),n.addPersonOrSystemBoundary(...e[t]),this.$=e[t];break;case 37:n.addPersonOrSystemBoundary(...e[t]),this.$=e[t];break;case 38:e[t].splice(2,0,"CONTAINER"),n.addContainerBoundary(...e[t]),this.$=e[t];break;case 39:n.addDeploymentNode("node",...e[t]),this.$=e[t];break;case 40:n.addDeploymentNode("nodeL",...e[t]),this.$=e[t];break;case 41:n.addDeploymentNode("nodeR",...e[t]),this.$=e[t];break;case 42:n.popBoundaryParseStack();break;case 46:n.addPersonOrSystem("person",...e[t]),this.$=e[t];break;case 47:n.addPersonOrSystem("external_person",...e[t]),this.$=e[t];break;case 48:n.addPersonOrSystem("system",...e[t]),this.$=e[t];break;case 49:n.addPersonOrSystem("system_db",...e[t]),this.$=e[t];break;case 50:n.addPersonOrSystem("system_queue",...e[t]),this.$=e[t];break;case 51:n.addPersonOrSystem("external_system",...e[t]),this.$=e[t];break;case 52:n.addPersonOrSystem("external_system_db",...e[t]),this.$=e[t];break;case 53:n.addPersonOrSystem("external_system_queue",...e[t]),this.$=e[t];break;case 54:n.addContainer("container",...e[t]),this.$=e[t];break;case 55:n.addContainer("container_db",...e[t]),this.$=e[t];break;case 56:n.addContainer("container_queue",...e[t]),this.$=e[t];break;case 57:n.addContainer("external_container",...e[t]),this.$=e[t];break;case 58:n.addContainer("external_container_db",...e[t]),this.$=e[t];break;case 59:n.addContainer("external_container_queue",...e[t]),this.$=e[t];break;case 60:n.addComponent("component",...e[t]),this.$=e[t];break;case 61:n.addComponent("component_db",...e[t]),this.$=e[t];break;case 62:n.addComponent("component_queue",...e[t]),this.$=e[t];break;case 63:n.addComponent("external_component",...e[t]),this.$=e[t];break;case 64:n.addComponent("external_component_db",...e[t]),this.$=e[t];break;case 65:n.addComponent("external_component_queue",...e[t]),this.$=e[t];break;case 67:n.addRel("rel",...e[t]),this.$=e[t];break;case 68:n.addRel("birel",...e[t]),this.$=e[t];break;case 69:n.addRel("rel_u",...e[t]),this.$=e[t];break;case 70:n.addRel("rel_d",...e[t]),this.$=e[t];break;case 71:n.addRel("rel_l",...e[t]),this.$=e[t];break;case 72:n.addRel("rel_r",...e[t]),this.$=e[t];break;case 73:n.addRel("rel_b",...e[t]),this.$=e[t];break;case 74:e[t].splice(0,1),n.addRel("rel",...e[t]),this.$=e[t];break;case 75:n.updateElStyle("update_el_style",...e[t]),this.$=e[t];break;case 76:n.updateRelStyle("update_rel_style",...e[t]),this.$=e[t];break;case 77:n.updateLayoutConfig("update_layout_config",...e[t]),this.$=e[t];break;case 78:this.$=[e[t]];break;case 79:e[t].unshift(e[t-1]),this.$=e[t];break;case 80:case 82:this.$=e[t].trim();break;case 81:let s={};s[e[t-1].trim()]=e[t].trim(),this.$=s;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:el,8:ec,9:er,10:ea,11:5,12:10,18:ei,22:e2,25:eo,26:e3,27:e0,28:e1},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:el,8:ec,9:er,10:ea,11:5,12:10,18:ei,22:e2,25:eo,26:e3,27:e0,28:e1},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:e4},e([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:G,33:Y,34:q,36:K,38:U,39:58,40:70,42:71,44:b,46:j,47:y,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:T,62:z,63:D,64:N,65:L,66:R,67:P,68:H,69:I,70:B,71:V,72:$,73:a,74:v,75:g,76:p,77:f,78:m,79:h,80:u,81:d,82:r,83:l,84:W},{23:79,29:29,30:30,31:31,32:G,33:Y,34:q,36:K,38:U,39:58,40:70,42:71,44:b,46:j,47:y,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:T,62:z,63:D,64:N,65:L,66:R,67:P,68:H,69:I,70:B,71:V,72:$,73:a,74:v,75:g,76:p,77:f,78:m,79:h,80:u,81:d,82:r,83:l,84:W},{23:80,29:29,30:30,31:31,32:G,33:Y,34:q,36:K,38:U,39:58,40:70,42:71,44:b,46:j,47:y,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:T,62:z,63:D,64:N,65:L,66:R,67:P,68:H,69:I,70:B,71:V,72:$,73:a,74:v,75:g,76:p,77:f,78:m,79:h,80:u,81:d,82:r,83:l,84:W},{23:81,29:29,30:30,31:31,32:G,33:Y,34:q,36:K,38:U,39:58,40:70,42:71,44:b,46:j,47:y,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:T,62:z,63:D,64:N,65:L,66:R,67:P,68:H,69:I,70:B,71:V,72:$,73:a,74:v,75:g,76:p,77:f,78:m,79:h,80:u,81:d,82:r,83:l,84:W},{23:82,29:29,30:30,31:31,32:G,33:Y,34:q,36:K,38:U,39:58,40:70,42:71,44:b,46:j,47:y,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:T,62:z,63:D,64:N,65:L,66:R,67:P,68:H,69:I,70:B,71:V,72:$,73:a,74:v,75:g,76:p,77:f,78:m,79:h,80:u,81:d,82:r,83:l,84:W},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},e(Q,[2,20],{53:32,39:58,40:70,42:71,30:87,44:b,46:j,47:y,48:_,49:w,50:O,51:x,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:T,62:z,63:D,64:N,65:L,66:R,67:P,68:H,69:I,70:B,71:V,72:$,73:a,74:v,75:g,76:p,77:f,78:m,79:h,80:u,81:d,82:r,83:l,84:W}),e(Q,[2,21]),e(es,[2,23],{15:[1,88]}),e(Q,[2,43],{15:[1,89]}),e(Z,[2,26]),e(Z,[2,27]),{35:[1,90]},{37:[1,91]},e(Z,[2,30]),{45:92,85:93,86:o,87:s,89:n,90:t},{45:98,85:93,86:o,87:s,89:n,90:t},{45:99,85:93,86:o,87:s,89:n,90:t},{45:100,85:93,86:o,87:s,89:n,90:t},{45:101,85:93,86:o,87:s,89:n,90:t},{45:102,85:93,86:o,87:s,89:n,90:t},{45:103,85:93,86:o,87:s,89:n,90:t},{45:104,85:93,86:o,87:s,89:n,90:t},{45:105,85:93,86:o,87:s,89:n,90:t},{45:106,85:93,86:o,87:s,89:n,90:t},{45:107,85:93,86:o,87:s,89:n,90:t},{45:108,85:93,86:o,87:s,89:n,90:t},{45:109,85:93,86:o,87:s,89:n,90:t},{45:110,85:93,86:o,87:s,89:n,90:t},{45:111,85:93,86:o,87:s,89:n,90:t},{45:112,85:93,86:o,87:s,89:n,90:t},{45:113,85:93,86:o,87:s,89:n,90:t},{45:114,85:93,86:o,87:s,89:n,90:t},{45:115,85:93,86:o,87:s,89:n,90:t},{45:116,85:93,86:o,87:s,89:n,90:t},e(i,[2,66]),{45:117,85:93,86:o,87:s,89:n,90:t},{45:118,85:93,86:o,87:s,89:n,90:t},{45:119,85:93,86:o,87:s,89:n,90:t},{45:120,85:93,86:o,87:s,89:n,90:t},{45:121,85:93,86:o,87:s,89:n,90:t},{45:122,85:93,86:o,87:s,89:n,90:t},{45:123,85:93,86:o,87:s,89:n,90:t},{45:124,85:93,86:o,87:s,89:n,90:t},{45:125,85:93,86:o,87:s,89:n,90:t},{45:126,85:93,86:o,87:s,89:n,90:t},{45:127,85:93,86:o,87:s,89:n,90:t},{30:128,39:58,40:70,42:71,44:b,46:j,47:y,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:T,62:z,63:D,64:N,65:L,66:R,67:P,68:H,69:I,70:B,71:V,72:$,73:a,74:v,75:g,76:p,77:f,78:m,79:h,80:u,81:d,82:r,83:l,84:W},{15:[1,130],43:[1,129]},{45:131,85:93,86:o,87:s,89:n,90:t},{45:132,85:93,86:o,87:s,89:n,90:t},{45:133,85:93,86:o,87:s,89:n,90:t},{45:134,85:93,86:o,87:s,89:n,90:t},{45:135,85:93,86:o,87:s,89:n,90:t},{45:136,85:93,86:o,87:s,89:n,90:t},{45:137,85:93,86:o,87:s,89:n,90:t},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},e(ed,[2,9]),{14:142,21:e4},{21:[2,13]},{1:[2,15]},e(Q,[2,22]),e(es,[2,24],{31:31,29:143,32:G,33:Y,34:q,36:K,38:U}),e(Q,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:G,33:Y,34:q,36:K,38:U,44:b,46:j,47:y,48:_,49:w,50:O,51:x,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:T,62:z,63:D,64:N,65:L,66:R,67:P,68:H,69:I,70:B,71:V,72:$,73:a,74:v,75:g,76:p,77:f,78:m,79:h,80:u,81:d,82:r,83:l,84:W}),e(Z,[2,28]),e(Z,[2,29]),e(i,[2,46]),e(eu,[2,78],{85:93,45:145,86:o,87:s,89:n,90:t}),e(J,[2,80]),{88:[1,146]},e(J,[2,82]),e(J,[2,83]),e(i,[2,47]),e(i,[2,48]),e(i,[2,49]),e(i,[2,50]),e(i,[2,51]),e(i,[2,52]),e(i,[2,53]),e(i,[2,54]),e(i,[2,55]),e(i,[2,56]),e(i,[2,57]),e(i,[2,58]),e(i,[2,59]),e(i,[2,60]),e(i,[2,61]),e(i,[2,62]),e(i,[2,63]),e(i,[2,64]),e(i,[2,65]),e(i,[2,67]),e(i,[2,68]),e(i,[2,69]),e(i,[2,70]),e(i,[2,71]),e(i,[2,72]),e(i,[2,73]),e(i,[2,74]),e(i,[2,75]),e(i,[2,76]),e(i,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},e(X,[2,35]),e(X,[2,36]),e(X,[2,37]),e(X,[2,38]),e(X,[2,39]),e(X,[2,40]),e(X,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},e(es,[2,25]),e(Q,[2,45]),e(eu,[2,79]),e(J,[2,81]),e(i,[2,31]),e(i,[2,42]),e(en,[2,32]),e(en,[2,33],{15:[1,152]}),e(ed,[2,10]),e(en,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},eh=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,e){switch(e){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[}])/,/^(?:[^}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return e}();ee.lexer=eh;function et(){this.yy={}}return et.prototype=ee,ee.Parser=et,new et}(),Kl.parser=Kl;const TC=Kl,EC=e=>e.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null;let nn=[],fi=[""],pr="global",tn="",kn=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],$a=[],l0="",c0=!1,Zl=4,Ql=2;const CC=function(){return yy},SC=function(e){yy=Ur(e,q())},AC=function(e,t,n){xe.parseDirective(this,e,t,n)},LC=function(l,t,n,c,s,o,i,a,r){if(l==null||t===void 0||t===null||n===void 0||n===null||c===void 0||c===null)return;let e={};const d=$a.find(e=>e.from===t&&e.to===n);if(d?e=d:$a.push(e),e.type=l,e.from=t,e.to=n,e.label={text:c},s==null)e.techn={text:""};else if(typeof s=="object"){let[t,n]=Object.entries(s)[0];e[t]={text:n}}else e.techn={text:s};if(o==null)e.descr={text:""};else if(typeof o=="object"){let[t,n]=Object.entries(o)[0];e[t]={text:n}}else e.descr={text:o};if(typeof i=="object"){let[t,n]=Object.entries(i)[0];e[t]=n}else e.sprite=i;if(typeof a=="object"){let[t,n]=Object.entries(a)[0];e[t]=n}else e.tags=a;if(typeof r=="object"){let[t,n]=Object.entries(r)[0];e[t]=n}else e.link=r;e.wrap=mi()},BC=function(c,n,o,t,i,a,s){if(n===null||o===null)return;let e={};const r=nn.find(e=>e.alias===n);if(r&&n===r.alias?e=r:(e.alias=n,nn.push(e)),o==null?e.label={text:""}:e.label={text:o},t==null)e.descr={text:""};else if(typeof t=="object"){let[n,s]=Object.entries(t)[0];e[n]={text:s}}else e.descr={text:t};if(typeof i=="object"){let[t,n]=Object.entries(i)[0];e[t]=n}else e.sprite=i;if(typeof a=="object"){let[t,n]=Object.entries(a)[0];e[t]=n}else e.tags=a;if(typeof s=="object"){let[t,n]=Object.entries(s)[0];e[t]=n}else e.link=s;e.typeC4Shape={text:c},e.parentBoundary=pr,e.wrap=mi()},DC=function(l,t,r,n,s,i,o,a){if(t===null||r===null)return;let e={};const c=nn.find(e=>e.alias===t);if(c&&t===c.alias?e=c:(e.alias=t,nn.push(e)),r==null?e.label={text:""}:e.label={text:r},n==null)e.techn={text:""};else if(typeof n=="object"){let[t,s]=Object.entries(n)[0];e[t]={text:s}}else e.techn={text:n};if(s==null)e.descr={text:""};else if(typeof s=="object"){let[t,n]=Object.entries(s)[0];e[t]={text:n}}else e.descr={text:s};if(typeof i=="object"){let[t,n]=Object.entries(i)[0];e[t]=n}else e.sprite=i;if(typeof o=="object"){let[t,n]=Object.entries(o)[0];e[t]=n}else e.tags=o;if(typeof a=="object"){let[t,n]=Object.entries(a)[0];e[t]=n}else e.link=a;e.wrap=mi(),e.typeC4Shape={text:l},e.parentBoundary=pr},IC=function(l,t,r,n,s,i,o,a){if(t===null||r===null)return;let e={};const c=nn.find(e=>e.alias===t);if(c&&t===c.alias?e=c:(e.alias=t,nn.push(e)),r==null?e.label={text:""}:e.label={text:r},n==null)e.techn={text:""};else if(typeof n=="object"){let[t,s]=Object.entries(n)[0];e[t]={text:s}}else e.techn={text:n};if(s==null)e.descr={text:""};else if(typeof s=="object"){let[t,n]=Object.entries(s)[0];e[t]={text:n}}else e.descr={text:s};if(typeof i=="object"){let[t,n]=Object.entries(i)[0];e[t]=n}else e.sprite=i;if(typeof o=="object"){let[t,n]=Object.entries(o)[0];e[t]=n}else e.tags=o;if(typeof a=="object"){let[t,n]=Object.entries(a)[0];e[t]=n}else e.link=a;e.wrap=mi(),e.typeC4Shape={text:l},e.parentBoundary=pr},MC=function(t,s,n,o,i){if(t===null||s===null)return;let e={};const a=kn.find(e=>e.alias===t);if(a&&t===a.alias?e=a:(e.alias=t,kn.push(e)),s==null?e.label={text:""}:e.label={text:s},n==null)e.type={text:"system"};else if(typeof n=="object"){let[t,s]=Object.entries(n)[0];e[t]={text:s}}else e.type={text:n};if(typeof o=="object"){let[t,n]=Object.entries(o)[0];e[t]=n}else e.tags=o;if(typeof i=="object"){let[t,n]=Object.entries(i)[0];e[t]=n}else e.link=i;e.parentBoundary=pr,e.wrap=mi(),tn=pr,pr=t,fi.push(tn)},NC=function(t,s,n,o,i){if(t===null||s===null)return;let e={};const a=kn.find(e=>e.alias===t);if(a&&t===a.alias?e=a:(e.alias=t,kn.push(e)),s==null?e.label={text:""}:e.label={text:s},n==null)e.type={text:"container"};else if(typeof n=="object"){let[t,s]=Object.entries(n)[0];e[t]={text:s}}else e.type={text:n};if(typeof o=="object"){let[t,n]=Object.entries(o)[0];e[t]=n}else e.tags=o;if(typeof i=="object"){let[t,n]=Object.entries(i)[0];e[t]=n}else e.link=i;e.parentBoundary=pr,e.wrap=mi(),tn=pr,pr=t,fi.push(tn)},RC=function(c,t,a,n,s,l,o,i){if(t===null||a===null)return;let e={};const r=kn.find(e=>e.alias===t);if(r&&t===r.alias?e=r:(e.alias=t,kn.push(e)),a==null?e.label={text:""}:e.label={text:a},n==null)e.type={text:"node"};else if(typeof n=="object"){let[t,s]=Object.entries(n)[0];e[t]={text:s}}else e.type={text:n};if(s==null)e.descr={text:""};else if(typeof s=="object"){let[t,n]=Object.entries(s)[0];e[t]={text:n}}else e.descr={text:s};if(typeof o=="object"){let[t,n]=Object.entries(o)[0];e[t]=n}else e.tags=o;if(typeof i=="object"){let[t,n]=Object.entries(i)[0];e[t]=n}else e.link=i;e.nodeType=c,e.parentBoundary=pr,e.wrap=mi(),tn=pr,pr=t,fi.push(tn)},FC=function(){pr=tn,fi.pop(),tn=fi.pop(),fi.push(tn)},OC=function(u,d,s,o,i,l,t,n,a,r,c){let e=nn.find(e=>e.alias===d);if(!(e===void 0&&(e=kn.find(e=>e.alias===d),e===void 0))){if(s!=null)if(typeof s=="object"){let[t,n]=Object.entries(s)[0];e[t]=n}else e.bgColor=s;if(o!=null)if(typeof o=="object"){let[t,n]=Object.entries(o)[0];e[t]=n}else e.fontColor=o;if(i!=null)if(typeof i=="object"){let[t,n]=Object.entries(i)[0];e[t]=n}else e.borderColor=i;if(l!=null)if(typeof l=="object"){let[t,n]=Object.entries(l)[0];e[t]=n}else e.shadowing=l;if(t!=null)if(typeof t=="object"){let[n,s]=Object.entries(t)[0];e[n]=s}else e.shape=t;if(n!=null)if(typeof n=="object"){let[t,s]=Object.entries(n)[0];e[t]=s}else e.sprite=n;if(a!=null)if(typeof a=="object"){let[t,n]=Object.entries(a)[0];e[t]=n}else e.techn=a;if(r!=null)if(typeof r=="object"){let[t,n]=Object.entries(r)[0];e[t]=n}else e.legendText=r;if(c!=null)if(typeof c=="object"){let[t,n]=Object.entries(c)[0];e[t]=n}else e.legendSprite=c}},PC=function(r,a,i,n,s,o,t){const e=$a.find(e=>e.from===a&&e.to===i);if(e!==void 0){if(n!=null)if(typeof n=="object"){let[t,s]=Object.entries(n)[0];e[t]=s}else e.textColor=n;if(s!=null)if(typeof s=="object"){let[t,n]=Object.entries(s)[0];e[t]=n}else e.lineColor=s;if(o!=null)if(typeof o=="object"){let[t,n]=Object.entries(o)[0];e[t]=parseInt(n)}else e.offsetX=parseInt(o);if(t!=null)if(typeof t=="object"){let[n,s]=Object.entries(t)[0];e[n]=parseInt(s)}else e.offsetY=parseInt(t)}},VC=function(o,n,s){let e=Zl,t=Ql;if(typeof n=="object"){const t=Object.values(n)[0];e=parseInt(t)}else e=parseInt(n);if(typeof s=="object"){const e=Object.values(s)[0];t=parseInt(e)}else t=parseInt(s);e>=1&&(Zl=e),t>=1&&(Ql=t)},YC=function(){return Zl},zC=function(){return Ql},UC=function(){return pr},WC=function(){return tn},my=function(e){return e==null?nn:nn.filter(t=>t.parentBoundary===e)},HC=function(e){return nn.find(t=>t.alias===e)},GC=function(e){return Object.keys(my(e))},qC=function(e){return e==null?kn:kn.filter(t=>t.parentBoundary===e)},$C=function(){return $a},jC=function(){return l0},XC=function(e){c0=e},mi=function(){return c0},KC=function(){nn=[],kn=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],tn="",pr="global",fi=[""],$a=[],fi=[""],l0="",c0=!1,Zl=4,Ql=2},ZC={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},QC={FILLED:0,OPEN:1},JC={LEFTOF:0,RIGHTOF:1,OVER:2},t9=function(e){l0=Ur(e,q())},by={addPersonOrSystem:BC,addPersonOrSystemBoundary:MC,addContainer:DC,addContainerBoundary:NC,addComponent:IC,addDeploymentNode:RC,popBoundaryParseStack:FC,addRel:LC,updateElStyle:OC,updateRelStyle:PC,updateLayoutConfig:VC,autoWrap:mi,setWrap:XC,getC4ShapeArray:my,getC4Shape:HC,getC4ShapeKeys:GC,getBoundarys:qC,getCurrentBoundaryParse:UC,getParentBoundaryParse:WC,getRels:$C,getTitle:jC,getC4Type:CC,getC4ShapeInRow:YC,getC4BoundaryInRow:zC,setAccTitle:Tr,getAccTitle:Dr,getAccDescription:Mr,setAccDescription:Ir,parseDirective:AC,getConfig:()=>q().c4,clear:KC,LINETYPE:ZC,ARROWTYPE:QC,PLACEMENT:JC,setTitle:t9,setC4Type:SC},u0=function(n,e){const t=n.append("rect");if(t.attr("x",e.x),t.attr("y",e.y),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",e.width),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),e.attrs!=="undefined"&&e.attrs!==null)for(let n in e.attrs)t.attr(n,e.attrs[n]);return e.class!=="undefined"&&t.attr("class",e.class),t},_y=function(a,n,s,o,i,t){const e=a.append("image");e.attr("width",n),e.attr("height",s),e.attr("x",o),e.attr("y",i);let r=t.startsWith("data:image/png;base64")?t:Jn(t);e.attr("xlink:href",r)},e9=(s,o,e)=>{const t=s.append("g");let n=0;for(let s of o){let r=s.textColor?s.textColor:"#444444",c=s.lineColor?s.lineColor:"#444444",l=s.offsetX?parseInt(s.offsetX):0,d=s.offsetY?parseInt(s.offsetY):0,i="";if(n===0){let e=t.append("line");e.attr("x1",s.startPoint.x),e.attr("y1",s.startPoint.y),e.attr("x2",s.endPoint.x),e.attr("y2",s.endPoint.y),e.attr("stroke-width","1"),e.attr("stroke",c),e.style("fill","none"),s.type!=="rel_b"&&e.attr("marker-end","url("+i+"#arrowhead)"),(s.type==="birel"||s.type==="rel_b")&&e.attr("marker-start","url("+i+"#arrowend)"),n=-1}else{let e=t.append("path");e.attr("fill","none").attr("stroke-width","1").attr("stroke",c).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",s.startPoint.x).replaceAll("starty",s.startPoint.y).replaceAll("controlx",s.startPoint.x+(s.endPoint.x-s.startPoint.x)/2-(s.endPoint.x-s.startPoint.x)/4).replaceAll("controly",s.startPoint.y+(s.endPoint.y-s.startPoint.y)/2).replaceAll("stopx",s.endPoint.x).replaceAll("stopy",s.endPoint.y)),s.type!=="rel_b"&&e.attr("marker-end","url("+i+"#arrowhead)"),(s.type==="birel"||s.type==="rel_b")&&e.attr("marker-start","url("+i+"#arrowend)")}let a=e.messageFont();Hn(e)(s.label.text,t,Math.min(s.startPoint.x,s.endPoint.x)+Math.abs(s.endPoint.x-s.startPoint.x)/2+l,Math.min(s.startPoint.y,s.endPoint.y)+Math.abs(s.endPoint.y-s.startPoint.y)/2+d,s.label.width,s.label.height,{fill:r},a),s.techn&&s.techn.text!==""&&(a=e.messageFont(),Hn(e)("["+s.techn.text+"]",t,Math.min(s.startPoint.x,s.endPoint.x)+Math.abs(s.endPoint.x-s.startPoint.x)/2+l,Math.min(s.startPoint.y,s.endPoint.y)+Math.abs(s.endPoint.y-s.startPoint.y)/2+e.messageFontSize+5+d,Math.max(s.label.width,s.techn.width),s.techn.height,{fill:r,"font-style":"italic"},a))}},r9=function(c,e,n){const s=c.append("g");let a=e.bgColor?e.bgColor:"none",r=e.borderColor?e.borderColor:"#444444",o=e.fontColor?e.fontColor:"black",i={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(i={"stroke-width":1});let l={x:e.x,y:e.y,fill:a,stroke:r,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:i};u0(s,l);let t=n.boundaryFont();t.fontWeight="bold",t.fontSize=t.fontSize+2,t.fontColor=o,Hn(n)(e.label.text,s,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},t),e.type&&e.type.text!==""&&(t=n.boundaryFont(),t.fontColor=o,Hn(n)(e.type.text,s,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},t)),e.descr&&e.descr.text!==""&&(t=n.boundaryFont(),t.fontSize=t.fontSize-2,t.fontColor=o,Hn(n)(e.descr.text,s,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},t))},n9=function(u,e,o){var l;let r=e.bgColor?e.bgColor:o[e.typeC4Shape.text+"_bg_color"],a=e.borderColor?e.borderColor:o[e.typeC4Shape.text+"_border_color"],i=e.fontColor?e.fontColor:"#FFFFFF",c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const t=u.append("g");t.attr("class","person-man");const s=xy();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":s.x=e.x,s.y=e.y,s.fill=r,s.width=e.width,s.height=e.height,s.stroke=a,s.rx=2.5,s.ry=2.5,s.attrs={"stroke-width":.5},u0(t,s);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":t.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",a).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),t.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",a).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":t.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",a).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),t.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",a).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2));break}let d=f9(o,e.typeC4Shape.text);switch(t.append("text").attr("fill",i).attr("font-family",d.fontFamily).attr("font-size",d.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":_y(t,48,48,e.x+e.width/2-24,e.y+e.image.Y,c);break}let n=o[e.typeC4Shape.text+"Font"]();return n.fontWeight="bold",n.fontSize=n.fontSize+2,n.fontColor=i,Hn(o)(e.label.text,t,e.x,e.y+e.label.Y,e.width,e.height,{fill:i},n),n=o[e.typeC4Shape.text+"Font"](),n.fontColor=i,e.techn&&((l=e.techn)==null?void 0:l.text)!==""?Hn(o)(e.techn.text,t,e.x,e.y+e.techn.Y,e.width,e.height,{fill:i,"font-style":"italic"},n):e.type&&e.type.text!==""&&Hn(o)(e.type.text,t,e.x,e.y+e.type.Y,e.width,e.height,{fill:i,"font-style":"italic"},n),e.descr&&e.descr.text!==""&&(n=o.personFont(),n.fontColor=i,Hn(o)(e.descr.text,t,e.x,e.y+e.descr.Y,e.width,e.height,{fill:i},n)),e.height},i9=function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},s9=function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},a9=function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},o9=function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},l9=function(e){e.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},c9=function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},u9=function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},h9=function(t){const e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},xy=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},f9=(e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),Hn=function(){function n(t,n,s,o,i,a,r){const c=n.append("text").attr("x",s+i/2).attr("y",o+a/2+5).style("text-anchor","middle").text(t);e(c,r)}function t(s,o,l,i,a,h,r,c){const{fontSize:t,fontFamily:d,fontWeight:u}=c,n=s.split(Xt.lineBreakRegex);for(let s=0;s<n.length;s++){const h=s*t-t*(n.length-1)/2,c=o.append("text").attr("x",l+a/2).attr("y",i).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",t).style("font-weight",u).style("font-family",d);c.append("tspan").attr("dy",h).text(n[s]).attr("alignment-baseline","mathematical"),e(c,r)}}function s(n,d,s,o,i,a,r,u){const c=d.append("switch"),l=c.append("foreignObject").attr("x",s).attr("y",o).attr("width",i).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");l.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,c,s,o,i,a,r,u),e(l,r)}function e(t,e){for(const n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),pn={drawRect:u0,drawBoundary:r9,drawC4Shape:n9,drawRels:e9,drawImage:_y,insertArrowHead:o9,insertArrowEnd:l9,insertArrowFilledHead:c9,insertDynamicNumber:u9,insertArrowCrossHead:h9,insertDatabaseIcon:i9,insertComputerIcon:s9,insertClockIcon:a9,getNoteRect:xy,sanitizeUrl:Jn};let Jl=0,tc=0,vy=4,Nh=2;Kl.yy=by;let Ft={};class ky{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Rh(e.db.getConfig())}setData(e,t,n,s){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=t,this.nextData.starty=this.data.starty=n,this.nextData.stopy=this.data.stopy=s}updateVal(e,t,n,s){e[t]===void 0?e[t]=n:e[t]=s(n,e[t])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let t=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,s=t+e.width,n=this.nextData.starty+e.margin*2,o=n+e.height;(t>=this.data.widthLimit||s>=this.data.widthLimit||this.nextData.cnt>vy)&&(t=this.nextData.startx+e.margin+Ft.nextLinePaddingX,n=this.nextData.stopy+e.margin*2,this.nextData.stopx=s=t+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=o=n+e.height,this.nextData.cnt=1),e.x=t,e.y=n,this.updateVal(this.data,"startx",t,Math.min),this.updateVal(this.data,"starty",n,Math.min),this.updateVal(this.data,"stopx",s,Math.max),this.updateVal(this.data,"stopy",o,Math.max),this.updateVal(this.nextData,"startx",t,Math.min),this.updateVal(this.nextData,"starty",n,Math.min),this.updateVal(this.nextData,"stopx",s,Math.max),this.updateVal(this.nextData,"stopy",o,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Rh(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}}const Rh=function(e){Xe(Ft,e),e.fontFamily&&(Ft.personFontFamily=Ft.systemFontFamily=Ft.messageFontFamily=e.fontFamily),e.fontSize&&(Ft.personFontSize=Ft.systemFontSize=Ft.messageFontSize=e.fontSize),e.fontWeight&&(Ft.personFontWeight=Ft.systemFontWeight=Ft.messageFontWeight=e.fontWeight)},ua=(e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),al=e=>({fontFamily:e.boundaryFontFamily,fontSize:e.boundaryFontSize,fontWeight:e.boundaryFontWeight}),d9=e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight});function Kr(e,t,o,n,s){if(!t[e].width)if(o)t[e].text=zg(t[e].text,s,n),t[e].textLines=t[e].text.split(Xt.lineBreakRegex).length,t[e].width=s,t[e].height=Ch(t[e].text,n);else{let s=t[e].text.split(Xt.lineBreakRegex);t[e].textLines=s.length;let o=0;t[e].height=0,t[e].width=0;for(const i of s)t[e].width=Math.max(vn(i,n),t[e].width),o=Ch(i,n),t[e].height=t[e].height+o}}const wy=function(s,e,t){e.x=t.data.startx,e.y=t.data.starty,e.width=t.data.stopx-t.data.startx,e.height=t.data.stopy-t.data.starty,e.label.y=Ft.c4ShapeMargin-35;let o=e.wrap&&Ft.wrap,n=al(Ft);n.fontSize=n.fontSize+2,n.fontWeight="bold";let i=vn(e.label.text,n);Kr("label",e,o,n,i),pn.drawBoundary(s,e,Ft)},Ty=function(t,n,s,o){let e=0;for(const h of o){e=0;const i=s[h];let a=ua(Ft,i.typeC4Shape.text);switch(a.fontSize=a.fontSize-2,i.typeC4Shape.width=vn("<<"+i.typeC4Shape.text+">>",a),i.typeC4Shape.height=a.fontSize+2,i.typeC4Shape.Y=Ft.c4ShapePadding,e=i.typeC4Shape.Y+i.typeC4Shape.height-4,i.image={width:0,height:0,Y:0},i.typeC4Shape.text){case"person":case"external_person":i.image.width=48,i.image.height=48,i.image.Y=e,e=i.image.Y+i.image.height;break}i.sprite&&(i.image.width=48,i.image.height=48,i.image.Y=e,e=i.image.Y+i.image.height);let r=i.wrap&&Ft.wrap,c=Ft.width-Ft.c4ShapePadding*2,l=ua(Ft,i.typeC4Shape.text);if(l.fontSize=l.fontSize+2,l.fontWeight="bold",Kr("label",i,r,l,c),i.label.Y=e+8,e=i.label.Y+i.label.height,i.type&&i.type.text!==""){i.type.text="["+i.type.text+"]";let t=ua(Ft,i.typeC4Shape.text);Kr("type",i,r,t,c),i.type.Y=e+5,e=i.type.Y+i.type.height}else if(i.techn&&i.techn.text!==""){i.techn.text="["+i.techn.text+"]";let t=ua(Ft,i.techn.text);Kr("techn",i,r,t,c),i.techn.Y=e+5,e=i.techn.Y+i.techn.height}let u=e,d=i.label.width;if(i.descr&&i.descr.text!==""){let t=ua(Ft,i.typeC4Shape.text);Kr("descr",i,r,t,c),i.descr.Y=e+20,e=i.descr.Y+i.descr.height,d=Math.max(i.label.width,i.descr.width),u=e-i.descr.textLines*5}d=d+Ft.c4ShapePadding,i.width=Math.max(i.width||Ft.width,d,Ft.width),i.height=Math.max(i.height||Ft.height,u,Ft.height),i.margin=i.margin||Ft.c4ShapeMargin,t.insert(i),pn.drawC4Shape(n,i,Ft)}t.bumpLastMargin(Ft.c4ShapeMargin)};class Or{constructor(e,t){this.x=e,this.y=t}}let vd=function(e,h){let n=e.x,t=e.y,o=h.x,i=h.y,r=n+e.width/2,c=t+e.height/2,l=Math.abs(n-o),d=Math.abs(t-i),a=d/l,u=e.height/e.width,s=null;return t==i&&n<o?s=new Or(n+e.width,c):t==i&&n>o?s=new Or(n,c):n==o&&t<i?s=new Or(r,t+e.height):n==o&&t>i&&(s=new Or(r,t)),n>o&&t<i?u>=a?s=new Or(n,c+a*e.width/2):s=new Or(r-l/d*e.height/2,t+e.height):n<o&&t<i?u>=a?s=new Or(n+e.width,c+a*e.width/2):s=new Or(r+l/d*e.height/2,t+e.height):n<o&&t>i?u>=a?s=new Or(n+e.width,c-a*e.width/2):s=new Or(r+e.height/2*l/d,t):n>o&&t>i&&(u>=a?s=new Or(n,c-e.width/2*a):s=new Or(r-e.height/2*l/d,t)),s},p9=function(t,n){let e={x:0,y:0};e.x=n.x+n.width/2,e.y=n.y+n.height/2;let s=vd(t,e);e.x=t.x+t.width/2,e.y=t.y+t.height/2;let o=vd(n,e);return{startPoint:s,endPoint:o}};const g9=function(s,t,n,o){let e=0;for(let s of t){e=e+1;let r=s.wrap&&Ft.wrap,i=d9(Ft);o.db.getC4Type()==="C4Dynamic"&&(s.label.text=e+": "+s.label.text);let a=vn(s.label.text,i);Kr("label",s,r,i,a),s.techn&&s.techn.text!==""&&(a=vn(s.techn.text,i),Kr("techn",s,r,i,a)),s.descr&&s.descr.text!==""&&(a=vn(s.descr.text,i),Kr("descr",s,r,i,a));let l=n(s.from),d=n(s.to),c=p9(l,d);s.startPoint=c.startPoint,s.endPoint=c.endPoint}pn.drawRels(s,t,Ft)};function Ey(s,o,t,i,n){let e=new ky(n);e.data.widthLimit=t.data.widthLimit/Math.min(Nh,i.length);for(let[d,a]of i.entries()){let r=0;a.image={width:0,height:0,Y:0},a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=r,r=a.image.Y+a.image.height);let l=a.wrap&&Ft.wrap,c=al(Ft);if(c.fontSize=c.fontSize+2,c.fontWeight="bold",Kr("label",a,l,c,e.data.widthLimit),a.label.Y=r+8,r=a.label.Y+a.label.height,a.type&&a.type.text!==""){a.type.text="["+a.type.text+"]";let t=al(Ft);Kr("type",a,l,t,e.data.widthLimit),a.type.Y=r+5,r=a.type.Y+a.type.height}if(a.descr&&a.descr.text!==""){let t=al(Ft);t.fontSize=t.fontSize-2,Kr("descr",a,l,t,e.data.widthLimit),a.descr.Y=r+20,r=a.descr.Y+a.descr.height}if(d==0||d%Nh===0){let n=t.data.startx+Ft.diagramMarginX,s=t.data.stopy+Ft.diagramMarginY+r;e.setData(n,n,s,s)}else{let t=e.data.stopx!==e.data.startx?e.data.stopx+Ft.diagramMarginX:e.data.startx,n=e.data.starty;e.setData(t,t,n,n)}e.name=a.alias;let m=n.db.getC4ShapeArray(a.alias),u=n.db.getC4ShapeKeys(a.alias);u.length>0&&Ty(e,s,m,u),o=a.alias;let h=n.db.getBoundarys(o);h.length>0&&Ey(s,o,e,h,n),a.alias!=="global"&&wy(s,a,e),t.data.stopy=Math.max(e.data.stopy+Ft.c4ShapeMargin,t.data.stopy),t.data.stopx=Math.max(e.data.stopx+Ft.c4ShapeMargin,t.data.stopx),Jl=Math.max(Jl,t.data.stopx),tc=Math.max(tc,t.data.stopy)}}const y9=function(p,o,f,n){Ft=q().c4;const i=q().securityLevel;let d;i==="sandbox"&&(d=_t("#i"+o));const m=_t(i==="sandbox"?d.nodes()[0].contentDocument.body:"body");let c=n.db;n.db.setWrap(Ft.wrap),vy=c.getC4ShapeInRow(),Nh=c.getC4BoundaryInRow(),B.debug(`C:${JSON.stringify(Ft,null,2)}`);const e=i==="sandbox"?m.select(`[id="${o}"]`):_t(`[id="${o}"]`);pn.insertComputerIcon(e),pn.insertDatabaseIcon(e),pn.insertClockIcon(e);let s=new ky(n);s.setData(Ft.diagramMarginX,Ft.diagramMarginX,Ft.diagramMarginY,Ft.diagramMarginY),s.data.widthLimit=screen.availWidth,Jl=Ft.diagramMarginX,tc=Ft.diagramMarginY;const a=n.db.getTitle();let h=n.db.getBoundarys("");Ey(e,"",s,h,n),pn.insertArrowHead(e),pn.insertArrowEnd(e),pn.insertArrowCrossHead(e),pn.insertArrowFilledHead(e),g9(e,n.db.getRels(),n.db.getC4Shape,n),s.data.stopx=Jl,s.data.stopy=tc;const t=s.data;let l=t.stopy-t.starty+2*Ft.diagramMarginY;const u=t.stopx-t.startx+2*Ft.diagramMarginX;a&&e.append("text").text(a).attr("x",(t.stopx-t.startx)/2-4*Ft.diagramMarginX).attr("y",t.starty+Ft.diagramMarginY),cn(e,l,u,Ft.useMaxWidth);const r=a?60:0;e.attr("viewBox",t.startx-Ft.diagramMarginX+" -"+(Ft.diagramMarginY+r)+" "+u+" "+(l+r)),B.debug("models:",t)},kd={drawPersonOrSystemArray:Ty,drawBoundary:wy,setConf:Rh,draw:y9};Fh=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},V=[1,3],v=[1,7],g=[1,8],p=[1,9],y=[1,10],d=[1,13],B=[1,12],l=[1,16,25],I=[1,20],H=[1,32],T=[1,33],F=[1,34],M=[1,36],S=[1,39],k=[1,37],z=[1,38],D=[1,44],A=[1,45],R=[1,40],$=[1,41],U=[1,42],W=[1,43],s=[1,48],n=[1,49],o=[1,50],i=[1,51],t=[16,25],j=[1,65],f=[1,66],m=[1,67],h=[1,68],u=[1,69],_=[1,70],C=[1,71],N=[1,80],r=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],x=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],P=[5,8,9,10,11,16,19,23,25],c=[54,88,89,90,91],a=[54,65,66,88,89,90,91],L=[54,60,61,62,63,64,88,89,90,91],b=[16,25,32],O=[1,107],w={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(o,r,i,n,s,e){var t=e.length-1;switch(s){case 5:n.setDirection("TB");break;case 6:n.setDirection("BT");break;case 7:n.setDirection("RL");break;case 8:n.setDirection("LR");break;case 12:n.parseDirective("%%{","open_directive");break;case 13:n.parseDirective(e[t],"type_directive");break;case 14:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 15:n.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=e[t];break;case 22:this.$=e[t-1]+e[t];break;case 23:case 24:this.$=e[t-1]+"~"+e[t];break;case 25:n.addRelation(e[t]);break;case 26:e[t-1].title=n.cleanupLabel(e[t]),n.addRelation(e[t-1]);break;case 35:this.$=e[t].trim(),n.setAccTitle(this.$);break;case 36:case 37:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 38:n.addClass(e[t]);break;case 39:n.addClass(e[t-2]),n.setCssClass(e[t-2],e[t]);break;case 40:n.addClass(e[t-3]),n.addMembers(e[t-3],e[t-1]);break;case 41:n.addClass(e[t-5]),n.setCssClass(e[t-5],e[t-3]),n.addMembers(e[t-5],e[t-1]);break;case 42:n.addAnnotation(e[t],e[t-2]);break;case 43:this.$=[e[t]];break;case 44:e[t].push(e[t-1]),this.$=e[t];break;case 45:break;case 46:n.addMember(e[t-1],n.cleanupLabel(e[t]));break;case 47:break;case 48:break;case 49:this.$={id1:e[t-2],id2:e[t],relation:e[t-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:e[t-3],id2:e[t],relation:e[t-1],relationTitle1:e[t-2],relationTitle2:"none"};break;case 51:this.$={id1:e[t-3],id2:e[t],relation:e[t-2],relationTitle1:"none",relationTitle2:e[t-1]};break;case 52:this.$={id1:e[t-4],id2:e[t],relation:e[t-2],relationTitle1:e[t-3],relationTitle2:e[t-1]};break;case 53:n.addNote(e[t],e[t-1]);break;case 54:n.addNote(e[t]);break;case 55:this.$={type1:e[t-2],type2:e[t],lineType:e[t-1]};break;case 56:this.$={type1:"none",type2:e[t],lineType:e[t-1]};break;case 57:this.$={type1:e[t-1],type2:"none",lineType:e[t]};break;case 58:this.$={type1:"none",type2:"none",lineType:e[t]};break;case 59:this.$=n.relationType.AGGREGATION;break;case 60:this.$=n.relationType.EXTENSION;break;case 61:this.$=n.relationType.COMPOSITION;break;case 62:this.$=n.relationType.DEPENDENCY;break;case 63:this.$=n.relationType.LOLLIPOP;break;case 64:this.$=n.lineType.LINE;break;case 65:this.$=n.lineType.DOTTED_LINE;break;case 66:case 72:this.$=e[t-2],n.setClickEvent(e[t-1],e[t]);break;case 67:case 73:this.$=e[t-3],n.setClickEvent(e[t-2],e[t-1]),n.setTooltip(e[t-2],e[t]);break;case 68:case 76:this.$=e[t-2],n.setLink(e[t-1],e[t]);break;case 69:this.$=e[t-3],n.setLink(e[t-2],e[t-1],e[t]);break;case 70:case 78:this.$=e[t-3],n.setLink(e[t-2],e[t-1]),n.setTooltip(e[t-2],e[t]);break;case 71:case 79:this.$=e[t-4],n.setLink(e[t-3],e[t-2],e[t]),n.setTooltip(e[t-3],e[t-1]);break;case 74:this.$=e[t-3],n.setClickEvent(e[t-2],e[t-1],e[t]);break;case 75:this.$=e[t-4],n.setClickEvent(e[t-3],e[t-2],e[t-1]),n.setTooltip(e[t-3],e[t]);break;case 77:this.$=e[t-3],n.setLink(e[t-2],e[t-1],e[t]);break;case 80:n.setCssClass(e[t-1],e[t]);break}},table:[{3:1,4:2,5:V,6:4,7:5,8:v,9:g,10:p,11:y,12:6,13:11,19:d,23:B},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:V,6:4,7:5,8:v,9:g,10:p,11:y,12:6,13:11,19:d,23:B},{1:[2,9]},e(l,[2,5]),e(l,[2,6]),e(l,[2,7]),e(l,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:I},e([17,22],[2,13]),{6:31,7:30,8:v,9:g,10:p,11:y,13:11,19:d,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:H,41:T,43:F,44:M,49:S,51:k,52:z,55:D,57:A,67:R,68:$,70:U,74:W,88:s,89:n,90:o,91:i},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},e(t,[2,25],{32:[1,57]}),e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),e(t,[2,30]),e(t,[2,31]),e(t,[2,32]),e(t,[2,33]),e(t,[2,34]),{40:[1,58]},{42:[1,59]},e(t,[2,37]),e(t,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:j,61:f,62:m,63:h,64:u,65:_,66:C}),{27:72,28:46,29:47,88:s,89:n,90:o,91:i},e(t,[2,47]),e(t,[2,48]),{28:73,88:s,89:n,90:o},{27:74,28:46,29:47,88:s,89:n,90:o,91:i},{27:75,28:46,29:47,88:s,89:n,90:o,91:i},{27:76,28:46,29:47,88:s,89:n,90:o,91:i},{54:[1,77]},{27:78,28:46,29:47,88:s,89:n,90:o,91:i},{54:N,56:79},e(r,[2,20],{28:46,29:47,27:81,30:[1,82],88:s,89:n,90:o,91:i}),e(r,[2,21],{30:[1,83]}),e(x,[2,94]),e(x,[2,95]),e(x,[2,96]),e([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),e(P,[2,10]),{15:84,22:I},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:v,9:g,10:p,11:y,13:11,19:d,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:H,41:T,43:F,44:M,49:S,51:k,52:z,55:D,57:A,67:R,68:$,70:U,74:W,88:s,89:n,90:o,91:i},e(t,[2,26]),e(t,[2,35]),e(t,[2,36]),{27:86,28:46,29:47,54:[1,87],88:s,89:n,90:o,91:i},{53:88,58:63,59:64,60:j,61:f,62:m,63:h,64:u,65:_,66:C},e(t,[2,46]),{59:89,65:_,66:C},e(c,[2,58],{58:90,60:j,61:f,62:m,63:h,64:u}),e(a,[2,59]),e(a,[2,60]),e(a,[2,61]),e(a,[2,62]),e(a,[2,63]),e(L,[2,64]),e(L,[2,65]),e(t,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:s,89:n,90:o},{54:N,56:99},e(t,[2,54]),e(t,[2,98]),e(r,[2,22]),e(r,[2,23]),e(r,[2,24]),{16:[1,100]},{25:[2,19]},e(b,[2,49]),{27:101,28:46,29:47,88:s,89:n,90:o,91:i},{27:102,28:46,29:47,54:[1,103],88:s,89:n,90:o,91:i},e(c,[2,57],{58:104,60:j,61:f,62:m,63:h,64:u}),e(c,[2,56]),{28:105,88:s,89:n,90:o},{47:106,51:O},{27:108,28:46,29:47,88:s,89:n,90:o,91:i},e(t,[2,66],{54:[1,109]}),e(t,[2,68],{54:[1,111],69:[1,110]}),e(t,[2,72],{54:[1,112],72:[1,113]}),e(t,[2,76],{54:[1,115],69:[1,114]}),e(t,[2,80]),e(t,[2,53]),e(P,[2,11]),e(b,[2,51]),e(b,[2,50]),{27:116,28:46,29:47,88:s,89:n,90:o,91:i},e(c,[2,55]),e(t,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:O},e(t,[2,42]),e(t,[2,67]),e(t,[2,69]),e(t,[2,70],{69:[1,120]}),e(t,[2,73]),e(t,[2,74],{54:[1,121]}),e(t,[2,77]),e(t,[2,78],{69:[1,122]}),e(b,[2,52]),{47:123,51:O},e(t,[2,40]),{48:[2,44]},e(t,[2,71]),e(t,[2,75]),e(t,[2,79]),{48:[1,124]},e(t,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},K=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,e){switch(e){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 27:break;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 39:this.popState();break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 42:this.popState();break;case 43:return"STR";case 44:this.begin("bqstring");break;case 45:this.popState();break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 48:this.popState();break;case 49:return 73;case 50:this.begin("callback_name");break;case 51:this.popState();break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 54:this.popState();break;case 55:return 72;case 56:return 69;case 57:return 69;case 58:return 69;case 59:return 69;case 60:return 61;case 61:return 61;case 62:return 63;case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:return"EQUALS";case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[}])/,/^(?:[^}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};return e}();w.lexer=K;function E(){this.yy={}}return E.prototype=w,w.Parser=E,new E}(),Fh.parser=Fh;const wd=Fh,m9=(n,e)=>{var t;return((t=e==null?void 0:e.class)==null?void 0:t.defaultRenderer)!=="dagre-wrapper"&&n.match(/^\s*classDiagram/)!==null},b9=(e,t)=>{var n;return!!(e.match(/^\s*classDiagram/)!==null&&((n=t==null?void 0:t.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper")||e.match(/^\s*classDiagram-v2/)!==null},h0="classid-";let f0=[],Be={},ec=[],Td=0,ja=[];const Aa=e=>Xt.sanitizeText(e,q()),_9=function(e,t,n){xe.parseDirective(this,e,t,n)},Xa=function(e){let t="",n=e;if(e.indexOf("~")>0){let s=e.split("~");n=s[0],t=Xt.sanitizeText(s[1],q())}return{className:n,type:t}},Oh=function(t){let e=Xa(t);Be[e.className]===void 0&&(Be[e.className]={id:e.className,type:e.type,cssClasses:[],methods:[],members:[],annotations:[],domId:h0+e.className+"-"+Td},Td++)},Cy=function(e){const t=Object.keys(Be);for(const n of t)if(Be[n].id===e)return Be[n].domId},x9=function(){f0=[],Be={},ec=[],ja=[],ja.push(Ay),Br()},v9=function(e){return Be[e]},k9=function(){return Be},w9=function(){return f0},T9=function(){return ec},E9=function(e){B.debug("Adding relation: "+JSON.stringify(e)),Oh(e.id1),Oh(e.id2),e.id1=Xa(e.id1).className,e.id2=Xa(e.id2).className,e.relationTitle1=Xt.sanitizeText(e.relationTitle1.trim(),q()),e.relationTitle2=Xt.sanitizeText(e.relationTitle2.trim(),q()),f0.push(e)},C9=function(e,t){const n=Xa(e).className;Be[n].annotations.push(t)},Sy=function(n,t){const s=Xa(n).className,e=Be[s];if(typeof t=="string"){const n=t.trim();n.startsWith("<<")&&n.endsWith(">>")?e.annotations.push(Aa(n.substring(2,n.length-2))):n.indexOf(")")>0?e.methods.push(Aa(n)):n&&e.members.push(Aa(n))}},S9=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach(e=>Sy(t,e)))},A9=function(e,t){const n={id:`note${ec.length}`,class:t,text:e};ec.push(n)},L9=function(e){return e.substring(0,1)===":"?Xt.sanitizeText(e.substr(1).trim(),q()):Aa(e.trim())},d0=function(e,t){e.split(",").forEach(function(n){let e=n;n[0].match(/\d/)&&(e=h0+e),Be[e]!==void 0&&Be[e].cssClasses.push(t)})},B9=function(t,e){const n=q();t.split(",").forEach(function(t){e!==void 0&&(Be[t].tooltip=Xt.sanitizeText(e,n))})},D9=function(e){return Be[e].tooltip},I9=function(e,s,t){const n=q();e.split(",").forEach(function(o){let e=o;o[0].match(/\d/)&&(e=h0+e),Be[e]!==void 0&&(Be[e].link=jt.formatUrl(s,n),n.securityLevel==="sandbox"?Be[e].linkTarget="_top":typeof t=="string"?Be[e].linkTarget=Aa(t):Be[e].linkTarget="_blank")}),d0(e,"clickable")},M9=function(e,t,n){e.split(",").forEach(function(e){N9(e,t,n),Be[e].haveCallback=!0}),d0(e,"clickable")},N9=function(o,e,t){const i=q();let n=o,s=Cy(n);if(i.securityLevel==="loose"&&e!==void 0&&Be[n]!==void 0){let n=[];if(typeof t=="string"){n=t.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<n.length;t++){let e=n[t].trim();e.charAt(0)==='"'&&e.charAt(e.length-1)==='"'&&(e=e.substr(1,e.length-2)),n[t]=e}}n.length===0&&n.push(s),ja.push(function(){const t=document.querySelector(`[id="${s}"]`);t!==null&&t.addEventListener("click",function(){jt.runFunc(e,...n)},!1)})}},R9=function(e){ja.forEach(function(t){t(e)})},F9={LINE:0,DOTTED_LINE:1},O9={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},Ay=function(t){let e=_t(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=_t("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),_t(t).select("svg").selectAll("g.node").on("mouseover",function(){const n=_t(this);if(n.attr("title")===null)return;const t=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(n.attr("title")).style("left",window.scrollX+t.left+(t.right-t.left)/2+"px").style("top",window.scrollY+t.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),_t(this).classed("hover",!1)})};ja.push(Ay);let Ly="TB";const P9=()=>Ly,V9=e=>{Ly=e},ps={parseDirective:_9,setAccTitle:Tr,getAccTitle:Dr,getAccDescription:Mr,setAccDescription:Ir,getConfig:()=>q().class,addClass:Oh,bindFunctions:R9,clear:x9,getClass:v9,getClasses:k9,getNotes:T9,addAnnotation:C9,addNote:A9,getRelations:w9,addRelation:E9,getDirection:P9,setDirection:V9,addMember:Sy,addMembers:S9,cleanupLabel:L9,lineType:F9,relationType:O9,setClickEvent:M9,setCssClass:d0,setLink:I9,getTooltip:D9,setTooltip:B9,lookUpDomId:Cy,setDiagramTitle:un,getDiagramTitle:hn};function wn(e){return e!=null&&typeof e=="object"}Y9="[object Symbol]";function Ui(e){return typeof e=="symbol"||wn(e)&&Qi(e)==Y9}function _s(e,o){for(var t=-1,n=e==null?0:e.length,s=Array(n);++t<n;)s[t]=o(e[t],t,e);return s}z9=Array.isArray;const Pe=z9;var U9=1/0,Ed=Wr?Wr.prototype:void 0,Cd=Ed?Ed.toString:void 0;function By(e){if(typeof e=="string")return e;if(Pe(e))return _s(e,By)+"";if(Ui(e))return Cd?Cd.call(e):"";var t=e+"";return t=="0"&&1/e==-U9?"-0":t}W9=/\s/;function H9(t){for(var e=t.length;e--&&W9.test(t.charAt(e)););return e}G9=/^\s+/;function q9(e){return e&&e.slice(0,H9(e)+1).replace(G9,"")}var Sd=0/0,$9=/^[-+]0x[0-9a-f]+$/i,j9=/^0b[01]+$/i,X9=/^0o[0-7]+$/i,K9=parseInt;function Z9(e){if(typeof e=="number")return e;if(Ui(e))return Sd;if(Lr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e,n;e=Lr(t)?t+"":t}return typeof e!="string"?e===0?e:+e:(e=q9(e),n=j9.test(e),n||X9.test(e)?K9(e.slice(2),n?2:8):$9.test(e)?Sd:+e)}Ad=1/0,Q9=17976931348623157e292;function ol(e){if(!e)return e===0?e:0;if(e=Z9(e),e===Ad||e===-Ad){var t=e<0?-1:1;return t*Q9}return e===e?e:0}function J9(n){var e=ol(n),t=e%1;return e===e?t?e-t:e:0}function es(e){return e}tS=ts(ln,"WeakMap");const Ph=tS;Ld=Object.create,eS=function(){function e(){}return function(t){if(!Lr(t))return{};if(Ld)return Ld(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const rS=eS;function nS(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function iS(){}function Dy(n,e){var t=-1,s=n.length;for(e||(e=Array(s));++t<s;)e[t]=n[t];return e}var sS=800,aS=16,oS=Date.now;function lS(n){var e=0,t=0;return function(){var s=oS(),o=aS-(s-t);if(t=s,o>0){if(++e>=sS)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function gs(e){return function(){return e}}cS=function(){try{var e=ts(Object,"defineProperty");return e({},"",{}),e}catch{}}();const rc=cS;uS=rc?function(e,t){return rc(e,"toString",{configurable:!0,enumerable:!1,value:gs(t),writable:!0})}:es;const hS=uS;fS=lS(hS);const Iy=fS;function My(e,n){for(var t=-1,s=e==null?0:e.length;++t<s&&n(e[t],t,e)!==!1;);return e}function Ny(t,s,o,n){for(var i=t.length,e=o+(n?1:-1);n?e--:++e<i;)if(s(t[e],e,t))return e;return-1}function dS(e){return e!==e}function pS(t,n,s){for(var e=s-1,o=t.length;++e<o;)if(t[e]===n)return e;return-1}function gS(t,e,n){return e===e?pS(t,e,n):Ny(t,dS,n)}function yS(e,t){var n=e==null?0:e.length;return!!n&&gS(e,t,0)>-1}mS=9007199254740991,bS=/^(?:0|[1-9]\d*)$/;function Vc(e,t){var n=typeof e;return t=t??mS,!!t&&(n=="number"||n!="symbol"&&bS.test(e))&&e>-1&&e%1==0&&e<t}function Yc(t,e,n){e=="__proto__"&&rc?rc(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}_S=Object.prototype,xS=_S.hasOwnProperty;function zc(e,t,n){var s=e[t];(!(xS.call(e,t)&&Xs(s,n))||n===void 0&&!(t in e))&&Yc(e,t,n)}function po(s,a,e,o){r=!e,e||(e={});for(var r,i=-1,c=a.length,t,n;++i<c;)t=a[i],n=o?o(e[t],s[t],t,e,s):void 0,n===void 0&&(n=s[t]),r?Yc(e,t,n):zc(e,t,n);return e}Bd=Math.max;function Ry(t,e,n){return e=Bd(e===void 0?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=Bd(o.length-e,0),r=Array(a),i;++s<a;)r[s]=o[e+s];s=-1;for(i=Array(e+1);++s<e;)i[s]=o[s];return i[e]=n(r),nS(t,this,i)}}function Uc(e,t){return Iy(Ry(e,t,es),e+"")}vS=9007199254740991;function p0(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vS}function bi(e){return e!=null&&p0(e.length)&&!Ns(e)}function Ka(s,t,e){if(!Lr(e))return!1;var n=typeof t;return!!(n=="number"?bi(e)&&Vc(t,e.length):n=="string"&&t in e)&&Xs(e[t],s)}function kS(e){return Uc(function(o,n){var i=-1,t=n.length,s=t>1?n[t-1]:void 0,a=t>2?n[2]:void 0,r;for(s=e.length>3&&typeof s=="function"?(t--,s):void 0,a&&Ka(n[0],n[1],a)&&(s=t<3?void 0:s,t=1),o=Object(o);++i<t;)r=n[i],r&&e(o,r,i,s);return o})}wS=Object.prototype;function Wc(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||wS;return e===n}function TS(t,s){for(var e=-1,n=Array(t);++e<t;)n[e]=s(e);return n}ES="[object Arguments]";function Dd(e){return wn(e)&&Qi(e)==ES}var Fy=Object.prototype,CS=Fy.hasOwnProperty,SS=Fy.propertyIsEnumerable,AS=Dd(function(){return arguments}())?Dd:function(e){return wn(e)&&CS.call(e,"callee")&&!SS.call(e,"callee")};const Ps=AS;function LS(){return!1}var Oy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Id=Oy&&typeof module=="object"&&module&&!module.nodeType&&module,BS=Id&&Id.exports===Oy,Md=BS?ln.Buffer:void 0,DS=Md?Md.isBuffer:void 0,IS=DS||LS;const Vs=IS;var MS="[object Arguments]",NS="[object Array]",RS="[object Boolean]",FS="[object Date]",OS="[object Error]",PS="[object Function]",VS="[object Map]",YS="[object Number]",zS="[object Object]",US="[object RegExp]",WS="[object Set]",HS="[object String]",GS="[object WeakMap]",qS="[object ArrayBuffer]",$S="[object DataView]",jS="[object Float32Array]",XS="[object Float64Array]",KS="[object Int8Array]",ZS="[object Int16Array]",QS="[object Int32Array]",JS="[object Uint8Array]",tA="[object Uint8ClampedArray]",eA="[object Uint16Array]",rA="[object Uint32Array]",ye={};ye[jS]=ye[XS]=ye[KS]=ye[ZS]=ye[QS]=ye[JS]=ye[tA]=ye[eA]=ye[rA]=!0,ye[MS]=ye[NS]=ye[qS]=ye[RS]=ye[$S]=ye[FS]=ye[OS]=ye[PS]=ye[VS]=ye[YS]=ye[zS]=ye[US]=ye[WS]=ye[HS]=ye[GS]=!1;function nA(e){return wn(e)&&p0(e.length)&&!!ye[Qi(e)]}function Hc(e){return function(t){return e(t)}}var Py=typeof exports=="object"&&exports&&!exports.nodeType&&exports,La=Py&&typeof module=="object"&&module&&!module.nodeType&&module,iA=La&&La.exports===Py,Vu=iA&&Fg.process,sA=function(){try{var e=La&&La.require&&La.require("util").types;return e||Vu&&Vu.binding&&Vu.binding("util")}catch{}}();const Ys=sA;Nd=Ys&&Ys.isTypedArray,aA=Nd?Hc(Nd):nA;const Gc=aA;oA=Object.prototype,lA=oA.hasOwnProperty;function Vy(t,c){var n=Pe(t),i=!n&&Ps(t),o=!n&&!i&&Vs(t),a=!n&&!i&&!o&&Gc(t),r=n||i||o||a,s=r?TS(t.length,String):[],l=s.length,e;for(e in t)(c||lA.call(t,e))&&!(r&&(e=="length"||o&&(e=="offset"||e=="parent")||a&&(e=="buffer"||e=="byteLength"||e=="byteOffset")||Vc(e,l)))&&s.push(e);return s}function Yy(e,t){return function(n){return e(t(n))}}cA=Yy(Object.keys,Object);const uA=cA;hA=Object.prototype,fA=hA.hasOwnProperty;function zy(e){if(!Wc(e))return uA(e);var n=[],t;for(t in Object(e))fA.call(e,t)&&t!="constructor"&&n.push(t);return n}function Sr(e){return bi(e)?Vy(e):zy(e)}function dA(e){var t=[],n;if(e!=null)for(n in Object(e))t.push(n);return t}pA=Object.prototype,gA=pA.hasOwnProperty;function yA(e){if(!Lr(e))return dA(e);var s=Wc(e),n=[],t;for(t in e)t=="constructor"&&(s||!gA.call(e,t))||n.push(t);return n}function rs(e){return bi(e)?Vy(e,!0):yA(e)}mA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bA=/^\w*$/;function g0(e,n){if(Pe(e))return!1;var t=typeof e;return!!(t=="number"||t=="symbol"||t=="boolean"||e==null||Ui(e))||bA.test(e)||!mA.test(e)||n!=null&&e in Object(n)}_A=500;function xA(n){var e=Ks(n,function(e){return t.size===_A&&t.clear(),e}),t=e.cache;return e}var vA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kA=/\\(\\)?/g,wA=xA(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(vA,function(t,n,s,o){e.push(s?o.replace(kA,"$1"):n||t)}),e});const TA=wA;function Uy(e){return e==null?"":By(e)}function qc(e,t){return Pe(e)?e:g0(e,t)?[e]:TA(Uy(e))}EA=1/0;function go(e){if(typeof e=="string"||Ui(e))return e;var t=e+"";return t=="0"&&1/e==-EA?"-0":t}function $c(e,t){t=qc(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[go(t[n++])];return n&&n==s?e:void 0}function CA(e,n,s){var t=e==null?void 0:$c(e,n);return t===void 0?s:t}function y0(e,n){for(var t=-1,s=n.length,o=e.length;++t<s;)e[o+t]=n[t];return e}Rd=Wr?Wr.isConcatSpreadable:void 0;function SA(e){return Pe(e)||Ps(e)||!!(Rd&&e&&e[Rd])}function jc(o,s,n,i,e){var a=-1,r=o.length,t;for(n||(n=SA),e||(e=[]);++a<r;)t=o[a],s>0&&n(t)?s>1?jc(t,s-1,n,i,e):y0(e,t):i||(e[e.length]=t);return e}function Qs(e){var t=e==null?0:e.length;return t?jc(e,1):[]}function AA(e){return Iy(Ry(e,void 0,Qs),e+"")}LA=Yy(Object.getPrototypeOf,Object);const m0=LA;var BA="[object Object]",DA=Function.prototype,IA=Object.prototype,Wy=DA.toString,MA=IA.hasOwnProperty,NA=Wy.call(Object);function Hy(t){if(!wn(t)||Qi(t)!=BA)return!1;var n=m0(t),e;return n===null||(e=MA.call(n,"constructor")&&n.constructor,typeof e=="function"&&e instanceof e&&Wy.call(e)==NA)}function RA(e,o,t,i){var n=-1,s=e==null?0:e.length;for(i&&s&&(t=e[++n]);++n<s;)t=o(t,e[n],n,e);return t}function FA(){this.__data__=new ti,this.size=0}function OA(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function PA(e){return this.__data__.get(e)}function VA(e){return this.__data__.has(e)}YA=200;function zA(n,s){var e=this.__data__,t;if(e instanceof ti){if(t=e.__data__,!Ua||t.length<YA-1)return t.push([n,s]),this.size=++e.size,this;e=this.__data__=new ei(t)}return e.set(n,s),this.size=e.size,this}function en(e){var t=this.__data__=new ti(e);this.size=t.size}en.prototype.clear=FA,en.prototype.delete=OA,en.prototype.get=PA,en.prototype.has=VA,en.prototype.set=zA;function UA(e,t){return e&&po(t,Sr(t),e)}function WA(e,t){return e&&po(t,rs(t),e)}var Gy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Fd=Gy&&typeof module=="object"&&module&&!module.nodeType&&module,HA=Fd&&Fd.exports===Gy,Od=HA?ln.Buffer:void 0,Pd=Od?Od.allocUnsafe:void 0;function qy(e,s){if(s)return e.slice();var t=e.length,n=Pd?Pd(t):new e.constructor(t);return e.copy(n),n}function $y(e,o){for(var t=-1,i=e==null?0:e.length,a=0,n=[],s;++t<i;)s=e[t],o(s,t,e)&&(n[a++]=s);return n}function jy(){return[]}var GA=Object.prototype,qA=GA.propertyIsEnumerable,Vd=Object.getOwnPropertySymbols,$A=Vd?function(e){return e==null?[]:(e=Object(e),$y(Vd(e),function(t){return qA.call(e,t)}))}:jy;const b0=$A;function jA(e,t){return po(e,b0(e),t)}XA=Object.getOwnPropertySymbols,KA=XA?function(e){for(var t=[];e;)y0(t,b0(e)),e=m0(e);return t}:jy;const Xy=KA;function ZA(e,t){return po(e,Xy(e),t)}function Ky(e,n,s){var t=n(e);return Pe(e)?t:y0(t,s(e))}function Vh(e){return Ky(e,Sr,b0)}function QA(e){return Ky(e,rs,Xy)}JA=ts(ln,"DataView");const Yh=JA;tL=ts(ln,"Promise");const zh=tL;eL=ts(ln,"Set");const xs=eL;var Yd="[object Map]",rL="[object Object]",zd="[object Promise]",Ud="[object Set]",Wd="[object WeakMap]",Hd="[object DataView]",nL=Ji(Yh),iL=Ji(Ua),sL=Ji(zh),aL=Ji(xs),oL=Ji(Ph),Ai=Qi;(Yh&&Ai(new Yh(new ArrayBuffer(1)))!=Hd||Ua&&Ai(new Ua)!=Yd||zh&&Ai(zh.resolve())!=zd||xs&&Ai(new xs)!=Ud||Ph&&Ai(new Ph)!=Wd)&&(Ai=function(e){var t=Qi(e),n=t==rL?e.constructor:void 0,s=n?Ji(n):"";if(s)switch(s){case nL:return Hd;case iL:return Yd;case sL:return zd;case aL:return Ud;case oL:return Wd}return t});const zs=Ai;lL=Object.prototype,cL=lL.hasOwnProperty;function uL(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&cL.call(e,"index")&&(t.index=e.index,t.input=e.input),t}hL=ln.Uint8Array;const nc=hL;function _0(e){var t=new e.constructor(e.byteLength);return new nc(t).set(new nc(e)),t}function fL(e,t){var n=t?_0(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}dL=/\w*$/;function pL(e){var t=new e.constructor(e.source,dL.exec(e));return t.lastIndex=e.lastIndex,t}Gd=Wr?Wr.prototype:void 0,qd=Gd?Gd.valueOf:void 0;function gL(e){return qd?Object(qd.call(e)):{}}function Zy(e,t){var n=t?_0(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var yL="[object Boolean]",mL="[object Date]",bL="[object Map]",_L="[object Number]",xL="[object RegExp]",vL="[object Set]",kL="[object String]",wL="[object Symbol]",TL="[object ArrayBuffer]",EL="[object DataView]",CL="[object Float32Array]",SL="[object Float64Array]",AL="[object Int8Array]",LL="[object Int16Array]",BL="[object Int32Array]",DL="[object Uint8Array]",IL="[object Uint8ClampedArray]",ML="[object Uint16Array]",NL="[object Uint32Array]";function RL(e,s,n){var t=e.constructor;switch(s){case TL:return _0(e);case yL:case mL:return new t(+e);case EL:return fL(e,n);case CL:case SL:case AL:case LL:case BL:case DL:case IL:case ML:case NL:return Zy(e,n);case bL:return new t;case _L:case kL:return new t(e);case xL:return pL(e);case vL:return new t;case wL:return gL(e)}}function Qy(e){return typeof e.constructor=="function"&&!Wc(e)?rS(m0(e)):{}}FL="[object Map]";function OL(e){return wn(e)&&zs(e)==FL}$d=Ys&&Ys.isMap,PL=$d?Hc($d):OL;const VL=PL;YL="[object Set]";function zL(e){return wn(e)&&zs(e)==YL}jd=Ys&&Ys.isSet,UL=jd?Hc(jd):zL;const WL=UL;var bc,rh,h5,S1,Y5,lh,K5,tb,D1,hh,_u,wf,fh,Do,X_,K_,Ux,a6,In,l6,g6,_6,Bp,Df,If,Io,Dp,Ip,Nf,xu,vu,El,Op,Pp,Vp,Yp,zp,z1,Up,Wp,Hp,Gp,H1,as,Dl,Va,Vn,lr,g7,_7,C7,S7,B7,V7,z7,X1,Z7,Q7,ew,rw,Lg,Bg,os,ud,Ow,Pw,Vw,Yw,Hw,Gw,Jw,pd,eT,rT,fT,_T,xT,kT,ET,CT,DT,PT,Qg,Ih,Kl,yy,Fh,Y9,z9,W9,G9,Ad,Q9,tS,Ld,eS,cS,uS,fS,mS,bS,_S,xS,Bd,vS,wS,ES,Nd,aA,oA,lA,cA,hA,fA,pA,gA,mA,bA,_A,EA,Rd,LA,YA,XA,KA,JA,tL,eL,lL,cL,hL,dL,Gd,qd,FL,$d,PL,YL,jd,UL,HL=1,GL=2,qL=4,Jy="[object Arguments]",$L="[object Array]",jL="[object Boolean]",XL="[object Date]",KL="[object Error]",tm="[object Function]",ZL="[object GeneratorFunction]",QL="[object Map]",JL="[object Number]",em="[object Object]",tB="[object RegExp]",eB="[object Set]",rB="[object String]",nB="[object Symbol]",iB="[object WeakMap]",sB="[object ArrayBuffer]",aB="[object DataView]",oB="[object Float32Array]",lB="[object Float64Array]",cB="[object Int8Array]",uB="[object Int16Array]",hB="[object Int32Array]",fB="[object Uint8Array]",dB="[object Uint8ClampedArray]",pB="[object Uint16Array]",gB="[object Uint32Array]",pe={},yB,bB,_B,vB,EB,CB,XB,KB,eD,rD,lD,uD,hD,_D,vD,TD,ED,ID,YD,zD,UD,GD,$D,jD,XD,ZD,JD,eI,lI,VI,qh,$h,lF,Xh,Kh,Qh,Jh,t1,FF,OF,e1,r1,QF,n1,tO,i1,rO,l1,K3,Z3,c1,u1,f1,_1,T1;pe[Jy]=pe[$L]=pe[sB]=pe[aB]=pe[jL]=pe[XL]=pe[oB]=pe[lB]=pe[cB]=pe[uB]=pe[hB]=pe[QL]=pe[JL]=pe[em]=pe[tB]=pe[eB]=pe[rB]=pe[nB]=pe[fB]=pe[dB]=pe[pB]=pe[gB]=!0,pe[KL]=pe[tm]=pe[iB]=!1;function Ba(e,s,o,m,a,n){var t,r=s&HL,c=s&GL,p=s&qL,d,i,u,h,f,l;if(o&&(t=a?o(e,m,a,n):o(e)),t!==void 0)return t;if(!Lr(e))return e;if(d=Pe(e),d){if(t=uL(e),!r)return Dy(e,t)}else{if(i=zs(e),u=i==tm||i==ZL,Vs(e))return qy(e,r);if(i==em||i==Jy||u&&!a){if(t=c||u?{}:Qy(e),!r)return c?ZA(e,WA(t,e)):jA(e,UA(t,e))}else{if(!pe[i])return a?e:{};t=RL(e,i,r)}}return n||(n=new en),h=n.get(e),h||(n.set(e,t),WL(e)?e.forEach(function(i){t.add(Ba(i,s,o,i,e,n))}):VL(e)&&e.forEach(function(a,i){t.set(i,Ba(a,s,o,i,e,n))}),f=p?c?QA:Vh:c?rs:Sr,l=d?void 0:f(e),My(l||e,function(a,i){l&&(i=a,a=e[i]),zc(t,i,Ba(a,s,o,i,e,n))}),t)}yB=4;function mB(e){return Ba(e,yB)}bB=1,_B=4;function xB(e){return Ba(e,bB|_B)}vB="__lodash_hash_undefined__";function kB(e){return this.__data__.set(e,vB),this}function wB(e){return this.__data__.has(e)}function Za(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new ei;++t<n;)this.add(e[t])}Za.prototype.add=Za.prototype.push=kB,Za.prototype.has=wB;function TB(e,n){for(var t=-1,s=e==null?0:e.length;++t<s;)if(n(e[t],t,e))return!0;return!1}function rm(e,t){return e.has(t)}EB=1,CB=2;function nm(n,e,r,o,p,t){var f=r&EB,l=n.length,u=e.length,m,h,s,a,g;if(l!=u&&!(f&&u>l))return!1;if(m=t.get(n),h=t.get(e),m&&h)return m==e&&h==n;var i=-1,c=!0,d=r&CB?new Za:void 0;for(t.set(n,e),t.set(e,n);++i<l;){if(s=n[i],a=e[i],o&&(g=f?o(a,s,i,e,n,t):o(s,a,i,n,e,t)),g!==void 0){if(g)continue;c=!1;break}if(d){if(!TB(e,function(e,n){if(!rm(d,n)&&(s===e||p(s,e,r,o,t)))return d.push(n)})){c=!1;break}}else if(!(s===a||p(s,a,r,o,t))){c=!1;break}}return t.delete(n),t.delete(e),c}function SB(e){var n=-1,t=Array(e.size);return e.forEach(function(e,s){t[++n]=[s,e]}),t}function x0(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t}var AB=1,LB=2,BB="[object Boolean]",DB="[object Date]",IB="[object Error]",MB="[object Map]",NB="[object Number]",RB="[object RegExp]",FB="[object Set]",OB="[object String]",PB="[object Symbol]",VB="[object ArrayBuffer]",YB="[object DataView]",Xd=Wr?Wr.prototype:void 0,Yu=Xd?Xd.valueOf:void 0;function zB(e,t,r,o,c,i,n){switch(r){case YB:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case VB:return!(e.byteLength!=t.byteLength||!i(new nc(e),new nc(t)));case BB:case DB:case NB:return Xs(+e,+t);case IB:return e.name==t.name&&e.message==t.message;case RB:case OB:return e==t+"";case MB:var s=SB,l,a,d;case FB:return!(l=o&AB,s||(s=x0),e.size!=t.size&&!l)&&(a=n.get(e),a?a==t:(o|=LB,n.set(e,t),d=nm(s(e),s(t),o,c,i,n),n.delete(e),d));case PB:if(Yu)return Yu.call(e)==Yu.call(t)}return!1}var UB=1,WB=Object.prototype,HB=WB.hasOwnProperty;function GB(t,e,b,l,_,n){var a=b&UB,h=Vh(t),f=h.length,j=Vh(e),y=j.length,d,s,p,g,c,m,r,i,v,o,u;if(f!=y&&!a)return!1;for(d=f;d--;)if(s=h[d],!(a?s in e:HB.call(e,s)))return!1;if(p=n.get(t),g=n.get(e),p&&g)return p==e&&g==t;c=!0,n.set(t,e),n.set(e,t);for(m=a;++d<f;){if(s=h[d],r=t[s],i=e[s],l&&(v=a?l(i,r,s,e,t,n):l(r,i,s,t,e,n)),!(v===void 0?r===i||_(r,i,b,l,n):v)){c=!1;break}m||(m=s=="constructor")}return c&&!m&&(o=t.constructor,u=e.constructor,o!=u&&"constructor"in t&&"constructor"in e&&!(typeof o=="function"&&o instanceof o&&typeof u=="function"&&u instanceof u)&&(c=!1)),n.delete(t),n.delete(e),c}var qB=1,Kd="[object Arguments]",Zd="[object Array]",Yo="[object Object]",$B=Object.prototype,Qd=$B.hasOwnProperty;function jB(t,n,o,r,a,e){var c=Pe(t),f=Pe(n),s=c?Zd:zs(t),i=f?Zd:zs(n),u,h,p,g;s=s==Kd?Yo:s,i=i==Kd?Yo:i;var d=s==Yo,m=i==Yo,l=s==i;if(l&&Vs(t)){if(!Vs(n))return!1;c=!0,d=!1}if(l&&!d)return e||(e=new en),c||Gc(t)?nm(t,n,o,r,a,e):zB(t,n,s,o,r,a,e);if(!(o&qB))if(u=d&&Qd.call(t,"__wrapped__"),h=m&&Qd.call(n,"__wrapped__"),u||h)return p=u?t.value():t,g=h?n.value():n,e||(e=new en),a(p,g,o,r,e);return!!l&&(e||(e=new en),GB(t,n,o,r,a,e))}function v0(e,t,n,s,o){return e===t||(e==null||t==null||!wn(e)&&!wn(t)?e!==e&&t!==t:jB(e,t,n,s,v0,o))}XB=1,KB=2;function ZB(t,h,i,s){var n=i.length,c=n,r=!s,e,l,u;if(t==null)return!c;for(t=Object(t);n--;)if(e=i[n],r&&e[2]?e[1]!==t[e[0]]:!(e[0]in t))return!1;for(;++n<c;){e=i[n];var a=e[0],o=t[a],d=e[1];if(r&&e[2]){if(o===void 0&&!(a in t))return!1}else if(l=new en,s&&(u=s(o,d,a,t,h,l)),!(u===void 0?v0(d,o,XB|KB,s,l):u))return!1}return!0}function im(e){return e===e&&!Lr(e)}function QB(n){for(var e=Sr(n),t=e.length,s,o;t--;)s=e[t],o=n[s],e[t]=[s,o,im(o)];return e}function sm(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}}function JB(t){var e=QB(t);return e.length==1&&e[0][2]?sm(e[0][0],e[0][1]):function(n){return n===t||ZB(n,t,e)}}function tD(e,t){return e!=null&&t in Object(e)}function am(e,n,a){n=qc(n,e);for(var s=-1,t=n.length,o=!1,i;++s<t;){if(i=go(n[s]),!(o=e!=null&&a(e,i)))break;e=e[i]}return o||++s!=t?o:(t=e==null?0:e.length,!!t&&p0(t)&&Vc(i,t)&&(Pe(e)||Ps(e)))}function om(e,t){return e!=null&&am(e,t,tD)}eD=1,rD=2;function nD(e,t){return g0(e)&&im(t)?sm(go(e),t):function(s){var n=CA(s,e);return n===void 0&&n===t?om(s,e):v0(t,n,eD|rD)}}function iD(e){return function(t){return t==null?void 0:t[e]}}function sD(e){return function(t){return $c(t,e)}}function aD(e){return g0(e)?iD(go(e)):sD(e)}function _i(e){return typeof e=="function"?e:e==null?es:typeof e=="object"?Pe(e)?nD(e[0],e[1]):JB(e):aD(e)}function oD(e){return function(t,c,a){for(var r=-1,s=Object(t),o=a(t),i=o.length,n;i--;)if(n=o[e?i:++r],c(s[n],n,s)===!1)break;return t}}lD=oD();const k0=lD;function lm(e,t){return e&&k0(e,t,Sr)}function cD(t,e){return function(n,o){if(n==null)return n;if(!bi(n))return t(n,o);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&o(a[s],s,a)!==!1;);return n}}uD=cD(lm);const Xc=uD;hD=function(){return ln.Date.now()};const Jd=hD;var cm=Object.prototype,fD=cm.hasOwnProperty,dD=Uc(function(e,t){e=Object(e);var o=-1,s=t.length,i=s>2?t[2]:void 0;for(i&&Ka(t[0],t[1],i)&&(s=1);++o<s;)for(var a=t[o],r=rs(a),c=-1,d=r.length,n,l;++c<d;)n=r[c],l=e[n],(l===void 0||Xs(l,cm[n])&&!fD.call(e,n))&&(e[n]=a[n]);return e});const ls=dD;function Uh(t,n,e){(e!==void 0&&!Xs(t[n],e)||e===void 0&&!(n in t))&&Yc(t,n,e)}function um(e){return wn(e)&&bi(e)}function Wh(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function pD(e){return po(e,rs(e))}function gD(a,h,i,m,f,r,s){var n=Wh(a,i),e=Wh(h,i),u=s.get(e),t,o;if(u){Uh(a,i,u);return}if(t=r?r(n,e,i+"",a,h,s):void 0,o=t===void 0,o){var c=Pe(e),l=!c&&Vs(e),d=!c&&!l&&Gc(e);t=e,c||l||d?Pe(n)?t=n:um(n)?t=Dy(n):l?(o=!1,t=qy(e,!0)):d?(o=!1,t=Zy(e,!0)):t=[]:Hy(e)||Ps(e)?(t=n,Ps(n)?t=pD(n):(!Lr(n)||Ns(n))&&(t=Qy(e))):o=!1}o&&(s.set(e,t),f(t,e,m,r,s),s.delete(e)),Uh(a,i,t)}function hm(e,t,o,s,n){e!==t&&k0(t,function(a,i){if(n||(n=new en),Lr(a))gD(e,t,i,o,hm,s,n);else{var r=s?s(Wh(e,i),a,i+"",e,t,n):void 0;r===void 0&&(r=a),Uh(e,i,r)}},rs)}function yD(e,n,s){for(var t=-1,o=e==null?0:e.length;++t<o;)if(s(n,e[t]))return!0;return!1}function ic(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function fm(e){return typeof e=="function"?e:es}function dt(e,t){var n=Pe(e)?My:Xc;return n(e,fm(t))}function mD(t,n){var e=[];return Xc(t,function(t,s,o){n(t,s,o)&&e.push(t)}),e}function Gn(e,t){var n=Pe(e)?$y:mD;return n(e,_i(t))}function bD(e){return function(t,n,a){var s=Object(t),i,o;return bi(t)||(i=_i(n),t=Sr(t),n=function(e){return i(s[e],e,s)}),o=e(t,n,a),o>-1?s[i?t[o]:o]:void 0}}_D=Math.max;function xD(t,o,n){var s=t==null?0:t.length,e;return s?(e=n==null?0:J9(n),e<0&&(e=_D(s+e,0)),Ny(t,_i(o),e)):-1}vD=bD(xD);const w0=vD;function dm(e,n){var s=-1,t=bi(e)?Array(e.length):[];return Xc(e,function(e,o,i){t[++s]=n(e,o,i)}),t}function Oe(e,t){var n=Pe(e)?_s:dm;return n(e,_i(t))}function kD(e,t){return e==null?e:k0(e,fm(t),rs)}function wD(e,t){return e>t}TD=Object.prototype,ED=TD.hasOwnProperty;function CD(e,t){return e!=null&&ED.call(e,t)}function Qt(e,t){return e!=null&&am(e,t,CD)}function SD(e,t){return _s(t,function(t){return e[t]})}function Xn(e){return e==null?[]:SD(e,Sr(e))}var AD="[object Map]",LD="[object Set]",BD=Object.prototype,DD=BD.hasOwnProperty;function vs(e){if(e==null)return!0;if(bi(e)&&(Pe(e)||typeof e=="string"||typeof e.splice=="function"||Vs(e)||Gc(e)||Ps(e)))return!e.length;var t=zs(e),n;if(t==AD||t==LD)return!e.size;if(Wc(e))return!zy(e).length;for(n in e)if(DD.call(e,n))return!1;return!0}function De(e){return e===void 0}function pm(e,t){return e<t}function Kc(n,e){var t={};return e=_i(e),lm(n,function(s,n,o){Yc(t,n,e(s,n,o))}),t}function T0(o,r,i){for(var n=-1,a=o.length,s,e,t,c;++n<a;)s=o[n],e=r(s),e!=null&&(t===void 0?e===e&&!Ui(e):i(e,t))&&(t=e,c=s);return c}function Wi(e){return e&&e.length?T0(e,es,wD):void 0}ID=kS(function(e,t,n){hm(e,t,n)});const Hh=ID;function Qa(e){return e&&e.length?T0(e,es,pm):void 0}function E0(e,t){return e&&e.length?T0(e,_i(t),pm):void 0}function MD(t,s,d,c){if(!Lr(t))return t;s=qc(s,t);for(var i=-1,r=s.length,l=r-1,n=t,e,o,a;n!=null&&++i<r;){if(e=go(s[i]),o=d,e==="__proto__"||e==="constructor"||e==="prototype")return t;i!=l&&(a=n[e],o=c?c(a,e,n):void 0,o===void 0&&(o=Lr(a)?a:Vc(s[i+1])?[]:{})),zc(n,e,o),n=n[e]}return t}function ND(o,t,a){for(var n=-1,r=t.length,s={},e,i;++n<r;)e=t[n],i=$c(o,e),a(i,e)&&MD(s,qc(e,o),i);return s}function RD(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}function FD(e,t){if(e!==t){var c=e!==void 0,l=e===null,o=e===e,i=Ui(e),a=t!==void 0,r=t===null,n=t===t,s=Ui(t);if(!r&&!s&&!i&&e>t||i&&a&&n&&!r&&!s||l&&a&&n||!c&&n||!o)return 1;if(!l&&!i&&!s&&e<t||s&&c&&o&&!l&&!i||r&&c&&o||!a&&o||!n)return-1}return 0}function OD(n,s,i){for(var e=-1,o=n.criteria,a=s.criteria,r=o.length,c=i.length,t,l;++e<r;)if(t=FD(o[e],a[e]),t)return e>=c?t:(l=i[e],t*(l=="desc"?-1:1));return n.index-s.index}function PD(t,e,n){e.length?e=_s(e,function(e){return Pe(e)?function(t){return $c(t,e.length===1?e[0]:e)}:e}):e=[es];var s=-1,o;return e=_s(e,Hc(_i)),o=dm(t,function(t){var n=_s(e,function(e){return e(t)});return{criteria:n,index:++s,value:t}}),RD(o,function(e,t){return OD(e,t,n)})}function VD(e,t){return ND(e,t,function(n,t){return om(e,t)})}YD=AA(function(e,t){return e==null?{}:VD(e,t)});const Ja=YD;zD=Math.ceil,UD=Math.max;function WD(e,o,n,i){for(var a=-1,t=UD(zD((o-e)/(n||1)),0),s=Array(t);t--;)s[i?t:++a]=e,e+=n;return s}function HD(e){return function(s,t,n){return n&&typeof n!="number"&&Ka(s,t,n)&&(t=n=void 0),s=ol(s),t===void 0?(t=s,s=0):t=ol(t),n=n===void 0?s<t?1:-1:ol(n),WD(s,t,n,e)}}GD=HD();const Hi=GD;function qD(n,s,e,t,o){return o(n,function(n,o,i){e=t?(t=!1,n):s(e,n,o,i)}),e}function yo(e,t,n){var s=Pe(e)?RA:qD,o=arguments.length<3;return s(e,_i(t),n,o,Xc)}$D=Uc(function(t,e){if(t==null)return[];var n=e.length;return n>1&&Ka(t,e[0],e[1])?e=[]:n>2&&Ka(e[0],e[1],e[2])&&(e=[e[0]]),PD(t,jc(e,1),[])});const mo=$D;jD=1/0,XD=xs&&1/x0(new xs([,-0]))[1]==jD?function(e){return new xs(e)}:iS;const KD=XD;ZD=200;function QD(i,o,c){var u=-1,r=yS,d=i.length,a=!0,s=[],e=s,l,t,n,h;if(c)a=!1,r=yD;else if(d>=ZD){if(l=o?null:KD(i),l)return x0(l);a=!1,r=rm,e=new Za}else e=o?[]:s;t:for(;++u<d;)if(t=i[u],n=o?o(t):t,t=c||t!==0?t:0,a&&n===n){for(h=e.length;h--;)if(e[h]===n)continue t;o&&e.push(n),s.push(t)}else r(e,n,c)||(e!==s&&e.push(n),s.push(t));return s}JD=Uc(function(e){return QD(jc(e,1,um,!0))});const tI=JD;eI=0;function Zc(e){var t=++eI;return Uy(e)+t}function rI(t,n,o){for(var e=-1,i=t.length,a=n.length,s={},r;++e<i;)r=e<a?n[e]:void 0,o(s,t[e],r);return s}function nI(e,t){return rI(e||[],t||[],zc)}var iI="\0",Ci="\0",t2="";class Ve{constructor(e={}){this._isDirected=!Qt(e,"directed")||e.directed,this._isMultigraph=!!Qt(e,"multigraph")&&e.multigraph,this._isCompound=!!Qt(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=gs(void 0),this._defaultEdgeLabelFn=gs(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Ci]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return Ns(e)||(e=gs(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return Sr(this._nodes)}sources(){var e=this;return Gn(this.nodes(),function(t){return vs(e._in[t])})}sinks(){var e=this;return Gn(this.nodes(),function(t){return vs(e._out[t])})}setNodes(t,n){var s=arguments,e=this;return dt(t,function(t){s.length>1?e.setNode(t,n):e.setNode(t)}),this}setNode(e,t){return Qt(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=Ci,this._children[e]={},this._children[Ci][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Qt(this._nodes,e)}removeNode(e){var t=this,n;return Qt(this._nodes,e)&&(n=function(e){t.removeEdge(t._edgeObjs[e])},delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],dt(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),dt(Sr(this._in[e]),n),delete this._in[e],delete this._preds[e],dt(Sr(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount),this}setParent(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(De(e))e=Ci;else{e+="";for(var n=e;!De(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(t){if(this._isCompound){var e=this._parent[t];if(e!==Ci)return e}}children(e){if(De(e)&&(e=Ci),this._isCompound){{var t=this._children[e];if(t)return Sr(t)}}else{if(e===Ci)return this.nodes();if(this.hasNode(e))return[]}}predecessors(t){var e=this._preds[t];if(e)return Sr(e)}successors(t){var e=this._sucs[t];if(e)return Sr(e)}neighbors(e){var t=this.predecessors(e);if(t)return tI(t,this.successors(e))}isLeaf(t){var e;return this.isDirected()?e=this.successors(t):e=this.neighbors(t),e.length===0}filterNodes(o){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound}),n,t;e.setGraph(this.graph()),n=this,dt(this._nodes,function(n,t){o(t)&&e.setNode(t,n)}),dt(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}),t={};function s(i){var o=n.parent(i);return o===void 0||e.hasNode(o)?(t[i]=o,o):o in t?t[o]:s(o)}return this._isCompound&&dt(e.nodes(),function(t){e.setParent(t,s(t))}),e}setDefaultEdgeLabel(e){return Ns(e)||(e=gs(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return Xn(this._edgeObjs)}setPath(t,n){var e=this,s=arguments;return yo(t,function(o,t){return s.length>1?e.setEdge(o,t,n):e.setEdge(o,t),t}),this}setEdge(){var e,t,n,a,r=!1,s=arguments[0],o,i;if(typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,De(n)||(n=""+n),o=xa(this._isDirected,e,t,n),Qt(this._edgeLabels,o))return r&&(this._edgeLabels[o]=a),this;if(!De(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");return this.setNode(e),this.setNode(t),this._edgeLabels[o]=r?a:this._defaultEdgeLabelFn(e,t,n),i=sI(this._isDirected,e,t,n),e=i.v,t=i.w,Object.freeze(i),this._edgeObjs[o]=i,e2(this._preds[t],e),e2(this._sucs[e],t),this._in[t][o]=i,this._out[e][o]=i,this._edgeCount++,this}edge(e,t,n){var s=arguments.length===1?zu(this._isDirected,arguments[0]):xa(this._isDirected,e,t,n);return this._edgeLabels[s]}hasEdge(e,t,n){var s=arguments.length===1?zu(this._isDirected,arguments[0]):xa(this._isDirected,e,t,n);return Qt(this._edgeLabels,s)}removeEdge(e,t,o){var n=arguments.length===1?zu(this._isDirected,arguments[0]):xa(this._isDirected,e,t,o),s=this._edgeObjs[n];return s&&(e=s.v,t=s.w,delete this._edgeLabels[n],delete this._edgeObjs[n],r2(this._preds[t],e),r2(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this}inEdges(s,e){var t=this._in[s],n;if(t)return n=Xn(t),e?Gn(n,function(t){return t.v===e}):n}outEdges(s,e){var t=this._out[s],n;if(t)return n=Xn(t),e?Gn(n,function(t){return t.w===e}):n}nodeEdges(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}}Ve.prototype._nodeCount=0,Ve.prototype._edgeCount=0;function e2(e,t){e[t]?e[t]++:e[t]=1}function r2(e,t){--e[t]||delete e[t]}function xa(s,o,i,n){var e=""+o,t=""+i,a;return!s&&e>t&&(a=e,e=t,t=a),e+t2+t+t2+(De(n)?iI:n)}function sI(o,r,i,s){var e=""+r,t=""+i,a,n;return!o&&e>t&&(a=e,e=t,t=a),n={v:e,w:t},s&&(n.name=s),n}function zu(t,e){return xa(t,e.v,e.w,e.name)}class aI{constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var t=this._sentinel,e=t._prev;if(e!==t)return n2(e),e}enqueue(e){var t=this._sentinel;e._prev&&e._next&&n2(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){for(var t=[],n=this._sentinel,e=n._prev;e!==n;)t.push(JSON.stringify(e,oI)),e=e._prev;return"["+t.join(", ")+"]"}}function n2(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function oI(e,t){if(e!=="_next"&&e!=="_prev")return t}lI=gs(1);function cI(e,n){if(e.nodeCount()<=1)return[];var t=hI(e,n||lI),s=uI(t.graph,t.buckets,t.zeroIdx);return Qs(Oe(s,function(t){return e.outEdges(t.v,t.w)}))}function uI(n,e,s){for(var o=[],a=e[e.length-1],r=e[0],t,i;n.nodeCount();){for(;t=r.dequeue();)Uu(n,e,s,t);for(;t=a.dequeue();)Uu(n,e,s,t);if(n.nodeCount())for(i=e.length-2;i>0;--i)if(t=e[i].dequeue(),t){o=o.concat(Uu(n,e,s,t,!0));break}}return o}function Uu(e,n,s,t,o){var i=o?[]:void 0;return dt(e.inEdges(t.v),function(t){var r=e.edge(t),a=e.node(t.v);o&&i.push({v:t.v,w:t.w}),a.out-=r,Gh(n,s,a)}),dt(e.outEdges(t.v),function(t){var i=e.edge(t),a=t.w,o=e.node(a);o.in-=i,Gh(n,s,o)}),e.removeNode(t.v),i}function hI(s,a){var e=new Ve,t=0,n=0,o,i;return dt(s.nodes(),function(t){e.setNode(t,{v:t,in:0,out:0})}),dt(s.edges(),function(s){var i=e.edge(s.v,s.w)||0,o=a(s),r=i+o;e.setEdge(s.v,s.w,r),n=Math.max(n,e.node(s.v).out+=o),t=Math.max(t,e.node(s.w).in+=o)}),o=Hi(n+t+3).map(function(){return new aI}),i=t+1,dt(e.nodes(),function(t){Gh(o,i,e.node(t))}),{graph:e,buckets:o,zeroIdx:i}}function Gh(t,n,e){e.out?e.in?t[e.out-e.in+n].enqueue(e):t[t.length-1].enqueue(e):t[0].enqueue(e)}function fI(e){var t=e.graph().acyclicer==="greedy"?cI(e,n(e)):dI(e);dt(t,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,Zc("rev"))});function n(e){return function(t){return e.edge(t).weight}}}function dI(t){var n=[],e={},s={};function o(i){Qt(s,i)||(s[i]=!0,e[i]=!0,dt(t.outEdges(i),function(t){Qt(e,t.w)?n.push(t):o(t.w)}),delete e[i])}return dt(t.nodes(),o),n}function pI(e){dt(e.edges(),function(n){var t=e.edge(n),s;t.reversed&&(e.removeEdge(n),s=t.forwardName,delete t.reversed,delete t.forwardName,e.setEdge(n.w,n.v,t,s))})}function Js(t,s,n,o){var e;do e=Zc(o);while(t.hasNode(e))return n.dummy=s,t.setNode(e,n),e}function gI(e){var t=(new Ve).setGraph(e.graph());return dt(e.nodes(),function(n){t.setNode(n,e.node(n))}),dt(e.edges(),function(n){var s=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:s.weight+o.weight,minlen:Math.max(s.minlen,o.minlen)})}),t}function gm(e){var t=new Ve({multigraph:e.isMultigraph()}).setGraph(e.graph());return dt(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),dt(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function i2(o,r){var c=o.x,l=o.y,n=r.x-c,s=r.y-l,e=o.width/2,t=o.height/2,i,a;if(!n&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*e>Math.abs(n)*t?(s<0&&(t=-t),i=t*n/s,a=t):(n<0&&(e=-e),i=e,a=e*s/n),{x:c+i,y:l+a}}function Qc(e){var t=Oe(Hi(ym(e)+1),function(){return[]});return dt(e.nodes(),function(n){var s=e.node(n),o=s.rank;De(o)||(t[o][s.order]=n)}),t}function yI(e){var t=Qa(Oe(e.nodes(),function(t){return e.node(t).rank}));dt(e.nodes(),function(s){var n=e.node(s);Qt(n,"rank")&&(n.rank-=t)})}function mI(e){var s=Qa(Oe(e.nodes(),function(t){return e.node(t).rank})),t=[],n,o;dt(e.nodes(),function(o){var n=e.node(o).rank-s;t[n]||(t[n]=[]),t[n].push(o)}),n=0,o=e.graph().nodeRankFactor,dt(t,function(t,s){De(t)&&s%o!==0?--n:n&&dt(t,function(t){e.node(t).rank+=n})})}function s2(t,n,s,o){var e={width:0,height:0};return arguments.length>=4&&(e.rank=s,e.order=o),Js(t,"border",e,n)}function ym(e){return Wi(Oe(e.nodes(),function(n){var t=e.node(n).rank;if(!De(t))return t}))}function bI(t,n){var e={lhs:[],rhs:[]};return dt(t,function(t){n(t)?e.lhs.push(t):e.rhs.push(t)}),e}function _I(e,t){var n=Jd();try{return t()}finally{console.log(e+" time: "+(Jd()-n)+"ms")}}function xI(t,e){return e()}function vI(e){function t(s){var i=e.children(s),n=e.node(s),o,a;if(i.length&&dt(i,t),Qt(n,"minRank")){n.borderLeft=[],n.borderRight=[];for(o=n.minRank,a=n.maxRank+1;o<a;++o)a2(e,"borderLeft","_bl",s,n,o),a2(e,"borderRight","_br",s,n,o)}}dt(e.children(),t)}function a2(e,t,c,a,o,s){var r={width:0,height:0,rank:s,borderType:t},i=o[t][s-1],n=Js(e,"border",r,c);o[t][s]=n,e.setParent(n,a),i&&e.setEdge(i,n,{weight:1})}function kI(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&mm(e)}function wI(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&TI(e),(t==="lr"||t==="rl")&&(EI(e),mm(e))}function mm(e){dt(e.nodes(),function(t){o2(e.node(t))}),dt(e.edges(),function(t){o2(e.edge(t))})}function o2(e){var t=e.width;e.width=e.height,e.height=t}function TI(e){dt(e.nodes(),function(t){Wu(e.node(t))}),dt(e.edges(),function(n){var t=e.edge(n);dt(t.points,Wu),Qt(t,"y")&&Wu(t)})}function Wu(e){e.y=-e.y}function EI(e){dt(e.nodes(),function(t){Hu(e.node(t))}),dt(e.edges(),function(n){var t=e.edge(n);dt(t.points,Hu),Qt(t,"x")&&Hu(t)})}function Hu(e){var t=e.x;e.x=e.y,e.y=t}function CI(e){e.graph().dummyChains=[],dt(e.edges(),function(t){SI(e,t)})}function SI(e,o){var i=o.v,n=e.node(i).rank,l=o.w,d=e.node(l).rank,c=o.name,t=e.edge(o),u=t.labelRank,a,s,r;if(d!==n+1){e.removeEdge(o);for(r=0,++n;n<d;++r,++n)t.points=[],s={width:0,height:0,edgeLabel:t,edgeObj:o,rank:n},a=Js(e,"edge",s,"_d"),n===u&&(s.width=t.width,s.height=t.height,s.dummy="edge-label",s.labelpos=t.labelpos),e.setEdge(i,a,{weight:t.weight},c),r===0&&e.graph().dummyChains.push(a),i=a;e.setEdge(i,l,{weight:t.weight},c)}}function AI(e){dt(e.graph().dummyChains,function(s){var t=e.node(s),n=t.edgeLabel,o;for(e.setEdge(t.edgeObj,n);t.dummy;)o=e.successors(s)[0],e.removeNode(s),n.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height),s=o,t=e.node(s)})}function C0(e){var t={};function n(o){var i=e.node(o),s;return Qt(t,o)?i.rank:(t[o]=!0,s=Qa(Oe(e.outEdges(o),function(t){return n(t.w)-e.edge(t).minlen})),(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s)}dt(e.sources(),n)}function to(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}function bm(e){var t=new Ve({directed:!1}),o=e.nodes()[0],i=e.nodeCount(),n,s;t.setNode(o,{});for(;LI(t,e)<i;)n=BI(t,e),s=t.hasNode(n.v)?to(e,n):-to(e,n),DI(t,e,s);return t}function LI(e,t){function n(s){dt(t.nodeEdges(s),function(i){var a=i.v,o=s===a?i.w:a;!e.hasNode(o)&&!to(t,i)&&(e.setNode(o,{}),e.setEdge(s,o,{}),n(o))})}return dt(e.nodes(),n),e.nodeCount()}function BI(e,t){return E0(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return to(t,n)})}function DI(e,t,n){dt(e.nodes(),function(e){t.node(e).rank+=n})}function II(){}II.prototype=new Error;function _m(e,t,s){Pe(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),n=[],i={};return dt(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);xm(e,t,s==="post",i,o,n)}),n}function xm(i,e,t,n,o,s){Qt(n,e)||(n[e]=!0,t||s.push(e),dt(o(e),function(e){xm(i,e,t,n,o,s)}),t&&s.push(e))}function MI(e,t){return _m(e,t,"post")}function NI(e,t){return _m(e,t,"pre")}ns.initLowLimValues=A0,ns.initCutValues=S0,ns.calcCutValue=vm,ns.leaveEdge=wm,ns.enterEdge=Tm,ns.exchangeEdges=Em;function ns(e){e=gI(e),C0(e);var t=bm(e),n,s;A0(t),S0(t,e);for(;n=wm(t);)s=Tm(t,e,n),Em(t,e,n,s)}function S0(t,n){var e=MI(t,t.nodes());e=e.slice(0,e.length-1),dt(e,function(e){RI(t,n,e)})}function RI(e,n,t){var s=e.node(t),o=s.parent;e.edge(t,o).cutvalue=vm(e,n,t)}function vm(s,t,e){var r=s.node(e),o=r.parent,a=!0,i=t.edge(e,o),n=0;return i||(a=!1,i=t.edge(o,e)),n=i.weight,dt(t.nodeEdges(e),function(i){var c=i.v===e,r=c?i.w:i.v,l,d,u;r!==o&&(l=c===a,d=t.edge(i).weight,(n+=l?d:-d,OI(s,e,r))&&(u=s.edge(e,r).cutvalue,n+=l?-u:u))}),n}function A0(e,t){arguments.length<2&&(t=e.nodes()[0]),km(e,{},1,t)}function km(o,s,e,n,i){var a=e,t=o.node(n);return s[n]=!0,dt(o.neighbors(n),function(t){Qt(s,t)||(e=km(o,s,e,t,n))}),t.low=a,t.lim=e++,i?t.parent=i:delete t.parent,e}function wm(e){return w0(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Tm(e,n,t){s=t.v,o=t.w,n.hasEdge(s,o)||(s=t.w,o=t.v);var s,o,r=e.node(s),c=e.node(o),i=r,a=!1,l;return r.lim>c.lim&&(i=c,a=!0),l=Gn(n.edges(),function(t){return a===l2(e,e.node(t.v),i)&&a!==l2(e,e.node(t.w),i)}),E0(l,function(e){return to(n,e)})}function Em(e,t,n,s){var o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(s.v,s.w,{}),A0(e),S0(e,t),FI(e,t)}function FI(t,e){var s=w0(t.nodes(),function(t){return!e.node(t).parent}),n=NI(t,s);n=n.slice(1),dt(n,function(n){var o=t.node(n).parent,s=e.edge(n,o),i=!1;s||(s=e.edge(o,n),i=!0),e.node(n).rank=e.node(o).rank+(i?s.minlen:-s.minlen)})}function OI(e,t,n){return e.hasEdge(t,n)}function l2(n,e,t){return t.low<=e.lim&&e.lim<=t.lim}function PI(e){switch(e.graph().ranker){case"network-simplex":c2(e);break;case"tight-tree":YI(e);break;case"longest-path":VI(e);break;default:c2(e)}}VI=C0;function YI(e){C0(e),bm(e)}function c2(e){ns(e)}function zI(e){var n=Js(e,"root",{},"_root"),s=UI(e),o=Wi(Xn(s))-1,t=2*o+1,i;e.graph().nestingRoot=n,dt(e.edges(),function(n){e.edge(n).minlen*=t}),i=WI(e)+1,dt(e.children(),function(a){Cm(e,n,t,i,o,s,a)}),e.graph().nodeRankFactor=t}function Cm(e,n,l,o,i,a,t){if(c=e.children(t),!c.length){t!==n&&e.setEdge(n,t,{weight:0,minlen:l});return}var c,s=s2(e,"_bt"),r=s2(e,"_bb"),d=e.node(t);e.setParent(s,t),d.borderTop=s,e.setParent(r,t),d.borderBottom=r,dt(c,function(d){Cm(e,n,l,o,i,a,d);var c=e.node(d),u=c.borderTop?c.borderTop:d,h=c.borderBottom?c.borderBottom:d,m=c.borderTop?o:2*o,f=u!==h?1:i-a[t]+1;e.setEdge(s,u,{weight:m,minlen:f,nestingEdge:!0}),e.setEdge(h,r,{weight:m,minlen:f,nestingEdge:!0})}),e.parent(t)||e.setEdge(n,s,{weight:0,minlen:i+a[t]})}function UI(e){var t={};function n(o,i){var s=e.children(o);s&&s.length&&dt(s,function(e){n(e,i+1)}),t[o]=i}return dt(e.children(),function(e){n(e,1)}),t}function WI(e){return yo(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function HI(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,dt(e.edges(),function(t){var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}function GI(e,s,o){var t={},n;dt(o,function(r){for(var o=e.parent(r),i,a;o;){if(i=e.parent(o),i?(a=t[i],t[i]=o):(a=n,n=o),a&&a!==o){s.setEdge(a,o);return}o=i}})}function qI(e,n,o){var s=$I(e),t=new Ve({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(t){return e.node(t)});return dt(e.nodes(),function(i){var a=e.node(i),r=e.parent(i);(a.rank===n||a.minRank<=n&&n<=a.maxRank)&&(t.setNode(i),t.setParent(i,r||s),dt(e[o](i),function(n){var s=n.v===i?n.w:n.v,o=t.edge(s,i),a=De(o)?0:o.weight;t.setEdge(s,i,{weight:e.edge(n).weight+a})}),Qt(a,"minRank")&&t.setNode(i,{borderLeft:a.borderLeft[n],borderRight:a.borderRight[n]}))}),t}function $I(t){for(var e;t.hasNode(e=Zc("_root")););return e}function jI(s,t){for(var n=0,e=1;e<t.length;++e)n+=XI(s,t[e-1],t[e]);return n}function XI(s,c,n){for(var i=nI(n,Oe(n,function(t,e){return e})),a=Qs(Oe(c,function(e){return mo(Oe(s.outEdges(e),function(e){return{pos:i[e.w],weight:s.edge(e).weight}}),"pos")})),e=1,r,t,o;e<n.length;)e<<=1;return r=2*e-1,e-=1,t=Oe(new Array(r),function(){return 0}),o=0,dt(a.forEach(function(s){var n=s.pos+e,i;t[n]+=s.weight;for(i=0;n>0;)n%2&&(i+=t[n+1]),n=n-1>>1,t[n]+=s.weight;o+=s.weight*i})),o}function KI(e){var t={},n=Gn(e.nodes(),function(t){return!e.children(t).length}),i=Wi(Oe(n,function(t){return e.node(t).rank})),s=Oe(Hi(i+1),function(){return[]}),a;function o(n){if(!Qt(t,n)){t[n]=!0;var i=e.node(n);s[i.rank].push(n),dt(e.successors(n),o)}}return a=mo(n,function(t){return e.node(t).rank}),dt(a,o),s}function ZI(e,t){return Oe(t,function(t){var s=e.inEdges(t),n;return s.length?(n=yo(s,function(t,n){var s=e.edge(n),o=e.node(n.v);return{sum:t.sum+s.weight*o.order,weight:t.weight+s.weight}},{sum:0,weight:0}),{v:t,barycenter:n.sum/n.weight,weight:n.weight}):{v:t}})}function QI(t,n){var e={},s;return dt(t,function(t,s){var n=e[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:s};De(t.barycenter)||(n.barycenter=t.barycenter,n.weight=t.weight)}),dt(n.edges(),function(t){var n=e[t.v],s=e[t.w];!De(n)&&!De(s)&&(s.indegree++,n.out.push(e[t.w]))}),s=Gn(e,function(e){return!e.indegree}),JI(s)}function JI(t){var n=[],e;function s(e){return function(t){t.merged||(De(t.barycenter)||De(e.barycenter)||t.barycenter>=e.barycenter)&&tM(e,t)}}function o(e){return function(n){n.in.push(e),--n.indegree===0&&t.push(n)}}for(;t.length;)e=t.pop(),n.push(e),dt(e.in.reverse(),s(e)),dt(e.out,o(e));return Oe(Gn(n,function(e){return!e.merged}),function(e){return Ja(e,["vs","i","barycenter","weight"])})}function tM(e,t){var s=0,n=0;e.weight&&(s+=e.barycenter*e.weight,n+=e.weight),t.weight&&(s+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=s/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}function eM(c,l){var a=bI(c,function(e){return Qt(e,"barycenter")}),r=a.lhs,i=mo(a.rhs,function(e){return-e.i}),n=[],o=0,t=0,e=0,s;return r.sort(rM(!!l)),e=u2(n,i,e),dt(r,function(s){e+=s.vs.length,n.push(s.vs),o+=s.barycenter*s.weight,t+=s.weight,e=u2(n,i,e)}),s={vs:Qs(n)},t&&(s.barycenter=o/t,s.weight=t),s}function u2(s,e,t){for(var n;e.length&&(n=ic(e)).i<=t;)e.pop(),s.push(n.vs),t++;return t}function rM(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}function Sm(t,u,r,a){var o=t.children(u),s=t.node(u),n=s?s.borderLeft:void 0,i=s?s.borderRight:void 0,c={},l,d,e,h,m;return n&&(o=Gn(o,function(e){return e!==n&&e!==i})),l=ZI(t,o),dt(l,function(e){if(t.children(e.v).length){var n=Sm(t,e.v,r,a);c[e.v]=n,Qt(n,"barycenter")&&iM(e,n)}}),d=QI(l,r),nM(d,c),e=eM(d,a),n&&(e.vs=Qs([n,e.vs,i]),t.predecessors(n).length)&&(h=t.node(t.predecessors(n)[0]),m=t.node(t.predecessors(i)[0]),Qt(e,"barycenter")||(e.barycenter=0,e.weight=0),e.barycenter=(e.barycenter*e.weight+h.order+m.order)/(e.weight+2),e.weight+=2),e}function nM(t,e){dt(t,function(t){t.vs=Qs(t.vs.map(function(t){return e[t]?e[t].vs:t}))})}function iM(e,t){De(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}function sM(e){var r=ym(e),c=h2(e,Hi(1,r+1),"inEdges"),l=h2(e,Hi(r-1,-1,-1),"outEdges"),t=KI(e),o;f2(e,t);for(var i=Number.POSITIVE_INFINITY,a,n=0,s=0;s<4;++n,++s)aM(n%2?c:l,n%4>=2),t=Qc(e),o=jI(e,t),o<i&&(s=0,a=xB(t),i=o);f2(e,a)}function h2(e,t,n){return Oe(t,function(t){return qI(e,t,n)})}function aM(t,n){var e=new Ve;dt(t,function(t){var o=t.graph().root,s=Sm(t,o,e,n);dt(s.vs,function(e,n){t.node(e).order=n}),GI(t,e,s.vs)})}function f2(e,t){dt(t,function(t){dt(t,function(t,n){e.node(t).order=n})})}function oM(e){var t=cM(e);dt(e.graph().dummyChains,function(o){for(var a=e.node(o),r=a.edgeObj,l=lM(e,t,r.v,r.w),i=l.path,d=l.lca,n=0,s=i[n],c=!0;o!==r.w;){if(a=e.node(o),c){for(;(s=i[n])!==d&&e.node(s).maxRank<a.rank;)n++;s===d&&(c=!1)}if(!c){for(;n<i.length-1&&e.node(s=i[n+1]).minRank<=a.rank;)n++;s=i[n]}e.setParent(o,s),o=e.successors(o)[0]}})}function lM(i,t,s,n){var a=[],r=[],c=Math.min(t[s].low,t[n].low),l=Math.max(t[s].lim,t[n].lim),o,e=s;do e=i.parent(e),a.push(e);while(e&&(t[e].low>c||l>t[e].lim))for(o=e,e=n;(e=i.parent(e))!==o;)r.push(e);return{path:a.concat(r.reverse()),lca:o}}function cM(e){var t={},n=0;function s(o){var i=n;dt(e.children(o),s),t[o]={low:i,lim:n++}}return dt(e.children(),s),t}function uM(e,n){var t={};function s(i,n){var s=0,o=0,a=i.length,r=ic(n);return dt(n,function(c,l){var i=fM(e,c),d=i?e.node(i).order:a;(i||c===r)&&(dt(n.slice(o,l+1),function(n){dt(e.predecessors(n),function(o){var i=e.node(o),a=i.order;(a<s||d<a)&&!(i.dummy&&e.node(n).dummy)&&Am(t,o,n)})}),o=l+1,s=d)}),n}return yo(n,s),t}function hM(e,s){var t={};function n(s,o,i,a,r){var n;dt(Hi(o,i),function(o){n=s[o],e.node(n).dummy&&dt(e.predecessors(n),function(o){var s=e.node(o);s.dummy&&(s.order<a||s.order>r)&&Am(t,o,n)})})}function o(a,t){var i=-1,s,o=0;return dt(t,function(r,c){if(e.node(r).dummy==="border"){var l=e.predecessors(r);l.length&&(s=e.node(l[0]).order,n(t,o,c,i,s),o=c,i=s)}n(t,o,t.length,s,a.length)}),t}return yo(s,o),t}function fM(e,t){if(e.node(t).dummy)return w0(e.predecessors(t),function(t){return e.node(t).dummy})}function Am(s,e,t){if(e>t){var o=e,n;e=t,t=o}n=s[e],n||(s[e]=n={}),n[t]=!0}function dM(n,e,t){if(e>t){var s=e;e=t,t=s}return Qt(n[e],t)}function pM(a,s,o,i){var n={},e={},t={};return dt(s,function(s){dt(s,function(s,o){n[s]=s,e[s]=s,t[s]=o})}),dt(s,function(a){var s=-1;dt(a,function(a){if(r=i(a),r.length){r=mo(r,function(e){return t[e]});for(var r,d=(r.length-1)/2,l=Math.floor(d),u=Math.ceil(d),c;l<=u;++l)c=r[l],e[a]===a&&s<t[c]&&!dM(o,a,c)&&(e[c]=a,e[a]=n[a]=n[c],s=t[c])}})}),{root:n,align:e}}function gM(o,a,n,r,s){var t={},e=yM(o,a,n,s),c=s?"borderLeft":"borderRight";function i(o,i){for(var n=e.nodes(),t=n.pop(),s={};t;)s[t]?o(t):(s[t]=!0,n.push(t),n=n.concat(i(t))),t=n.pop()}function l(n){t[n]=e.inEdges(n).reduce(function(s,n){return Math.max(s,t[n.v]+e.edge(n))},0)}function d(n){var s=e.outEdges(n).reduce(function(s,n){return Math.min(s,t[n.w]-e.edge(n))},Number.POSITIVE_INFINITY),i=o.node(n);s!==Number.POSITIVE_INFINITY&&i.borderType!==c&&(t[n]=Math.max(t[n],s))}return i(l,e.predecessors.bind(e)),i(d,e.successors.bind(e)),dt(r,function(e){t[e]=t[n[e]]}),t}function yM(t,o,n,i){var e=new Ve,s=t.graph(),a=vM(s.nodesep,s.edgesep,i);return dt(o,function(o){var s;dt(o,function(o){if(i=n[o],e.setNode(i),s){var i,r=n[s],c=e.edge(r,i);e.setEdge(r,i,Math.max(a(t,o,s),c||0))}s=o})}),e}function mM(e,t){return E0(Xn(t),function(s){var t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return kD(s,function(s,i){var o=kM(e,i)/2;t=Math.max(s+o,t),n=Math.min(s-o,n)}),t-n})}function bM(e,t){var n=Xn(t),s=Qa(n),o=Wi(n);dt(["u","d"],function(n){dt(["l","r"],function(r){var c=n+r,i=e[c],a,l;i!==t&&(l=Xn(i),a=r==="l"?s-Qa(l):o-Wi(l),a&&(e[c]=Kc(i,function(e){return e+a})))})})}function _M(e,t){return Kc(e.ul,function(o,n){if(t)return e[t.toLowerCase()][n];var s=mo(Oe(e,n));return(s[1]+s[2])/2})}function xM(e){var n=Qc(e),o=Hh(uM(e,n),hM(e,n)),s={},t,i;return dt(["u","d"],function(i){t=i==="u"?n:Xn(n).reverse(),dt(["l","r"],function(n){n==="r"&&(t=Oe(t,function(e){return Xn(e).reverse()}));var c=(i==="u"?e.predecessors:e.successors).bind(e),r=pM(e,t,o,c),a=gM(e,t,r.root,r.align,n==="r");n==="r"&&(a=Kc(a,function(e){return-e})),s[i+n]=a})}),i=mM(e,s),bM(s,i),_M(s,e.graph().align)}function vM(e,t,n){return function(r,c,l){var i=r.node(c),a=r.node(l),o=0,s;if(o+=i.width/2,Qt(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":s=-i.width/2;break;case"r":s=i.width/2;break}if(s&&(o+=n?s:-s),s=0,o+=(i.dummy?t:e)/2,o+=(a.dummy?t:e)/2,o+=a.width/2,Qt(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":s=a.width/2;break;case"r":s=-a.width/2;break}return s&&(o+=n?s:-s),s=0,o}}function kM(e,t){return e.node(t).width}function wM(e){e=gm(e),TM(e),dt(xM(e),function(t,n){e.node(n).x=t})}function TM(e){var n=Qc(e),s=e.graph().ranksep,t=0;dt(n,function(n){var o=Wi(Oe(n,function(t){return e.node(t).height}));dt(n,function(n){e.node(n).y=t+o/2}),t+=o+s})}function ta(t,n){var e=n&&n.debugTiming?_I:xI;e("layout",function(){var n=e("  buildLayoutGraph",function(){return RM(t)});e("  runLayout",function(){EM(n,e)}),e("  updateInputGraph",function(){CM(t,n)})})}function EM(e,t){t("    makeSpaceForEdgeLabels",function(){FM(e)}),t("    removeSelfEdges",function(){GM(e)}),t("    acyclic",function(){fI(e)}),t("    nestingGraph.run",function(){zI(e)}),t("    rank",function(){PI(gm(e))}),t("    injectEdgeLabelProxies",function(){OM(e)}),t("    removeEmptyRanks",function(){mI(e)}),t("    nestingGraph.cleanup",function(){HI(e)}),t("    normalizeRanks",function(){yI(e)}),t("    assignRankMinMax",function(){PM(e)}),t("    removeEdgeLabelProxies",function(){VM(e)}),t("    normalize.run",function(){CI(e)}),t("    parentDummyChains",function(){oM(e)}),t("    addBorderSegments",function(){vI(e)}),t("    order",function(){sM(e)}),t("    insertSelfEdges",function(){qM(e)}),t("    adjustCoordinateSystem",function(){kI(e)}),t("    position",function(){wM(e)}),t("    positionSelfEdges",function(){$M(e)}),t("    removeBorderNodes",function(){HM(e)}),t("    normalize.undo",function(){AI(e)}),t("    fixupEdgeLabelCoords",function(){UM(e)}),t("    undoCoordinateSystem",function(){wI(e)}),t("    translateGraph",function(){YM(e)}),t("    assignNodeIntersects",function(){zM(e)}),t("    reversePoints",function(){WM(e)}),t("    acyclic.undo",function(){pI(e)})}function CM(e,t){dt(e.nodes(),function(o){var n=e.node(o),s=t.node(o);n&&(n.x=s.x,n.y=s.y,t.children(o).length&&(n.width=s.width,n.height=s.height))}),dt(e.edges(),function(o){var s=e.edge(o),n=t.edge(o);s.points=n.points,Qt(n,"x")&&(s.x=n.x,s.y=n.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var SM=["nodesep","edgesep","ranksep","marginx","marginy"],AM={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},LM=["acyclicer","ranker","rankdir","align"],BM=["width","height"],DM={width:0,height:0},IM=["minlen","weight","width","height","labeloffset"],MM={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},NM=["labelpos"];function RM(e){var t=new Ve({multigraph:!0,compound:!0}),n=qu(e.graph());return t.setGraph(Hh({},AM,Gu(n,SM),Ja(n,LM))),dt(e.nodes(),function(n){var s=qu(e.node(n));t.setNode(n,ls(Gu(s,BM),DM)),t.setParent(n,e.parent(n))}),dt(e.edges(),function(n){var s=qu(e.edge(n));t.setEdge(n,Hh({},MM,Gu(s,IM),Ja(s,NM)))}),t}function FM(e){var t=e.graph();t.ranksep/=2,dt(e.edges(),function(s){var n=e.edge(s);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function OM(e){dt(e.edges(),function(t){if(n=e.edge(t),n.width&&n.height){var n,s=e.node(t.v),o=e.node(t.w),i={rank:(o.rank-s.rank)/2+s.rank,e:t};Js(e,"edge-proxy",i,"_ep")}})}function PM(e){var t=0;dt(e.nodes(),function(s){var n=e.node(s);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=Wi(t,n.maxRank))}),e.graph().maxRank=t}function VM(e){dt(e.nodes(),function(n){var t=e.node(n);t.dummy==="edge-proxy"&&(e.edge(t.e).labelRank=t.rank,e.removeNode(n))})}function YM(e){var t=Number.POSITIVE_INFINITY,o=0,n=Number.POSITIVE_INFINITY,i=0,s=e.graph(),a=s.marginx||0,r=s.marginy||0;function c(e){var s=e.x,a=e.y,r=e.width,c=e.height;t=Math.min(t,s-r/2),o=Math.max(o,s+r/2),n=Math.min(n,a-c/2),i=Math.max(i,a+c/2)}dt(e.nodes(),function(t){c(e.node(t))}),dt(e.edges(),function(n){var t=e.edge(n);Qt(t,"x")&&c(t)}),t-=a,n-=r,dt(e.nodes(),function(o){var s=e.node(o);s.x-=t,s.y-=n}),dt(e.edges(),function(o){var s=e.edge(o);dt(s.points,function(e){e.x-=t,e.y-=n}),Qt(s,"x")&&(s.x-=t),Qt(s,"y")&&(s.y-=n)}),s.width=o-t+a,s.height=i-n+r}function zM(e){dt(e.edges(),function(n){var t=e.edge(n),i=e.node(n.v),a=e.node(n.w),s,o;t.points?(s=t.points[0],o=t.points[t.points.length-1]):(t.points=[],s=a,o=i),t.points.unshift(i2(i,s)),t.points.push(i2(a,o))})}function UM(e){dt(e.edges(),function(n){var t=e.edge(n);if(Qt(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function WM(e){dt(e.edges(),function(n){var t=e.edge(n);t.reversed&&t.points.reverse()})}function HM(e){dt(e.nodes(),function(n){if(e.children(n).length){var t=e.node(n),s=e.node(t.borderTop),i=e.node(t.borderBottom),o=e.node(ic(t.borderLeft)),a=e.node(ic(t.borderRight));t.width=Math.abs(a.x-o.x),t.height=Math.abs(i.y-s.y),t.x=o.x+t.width/2,t.y=s.y+t.height/2}}),dt(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function GM(e){dt(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function qM(e){var t=Qc(e);dt(t,function(n){var t=0;dt(n,function(o,s){var n=e.node(o);n.order=s+t,dt(n.selfEdges,function(o){Js(e,"selfedge",{width:o.label.width,height:o.label.height,rank:n.rank,order:s+ ++t,e:o.e,label:o.label},"_se")}),delete n.selfEdges})})}function $M(e){dt(e.nodes(),function(r){if(t=e.node(r),t.dummy==="selfedge"){var t,a=e.node(t.e.v),n=a.x+a.width/2,s=a.y,o=t.x-n,i=a.height/2;e.setEdge(t.e,t.label),e.removeNode(r),t.label.points=[{x:n+2*o/3,y:s-i},{x:n+5*o/6,y:s-i},{x:n+o,y:s},{x:n+5*o/6,y:s+i},{x:n+2*o/3,y:s+i}],t.label.x=t.x,t.label.y=t.y}})}function Gu(e,t){return Kc(Ja(e,t),Number)}function qu(t){var e={};return dt(t,function(t,n){e[n.toLowerCase()]=t}),e}let d2=0;const jM=function(a,t,e,s,o){const d=function(e){switch(e){case o.db.relationType.AGGREGATION:return"aggregation";case o.db.relationType.EXTENSION:return"extension";case o.db.relationType.COMPOSITION:return"composition";case o.db.relationType.DEPENDENCY:return"dependency";case o.db.relationType.LOLLIPOP:return"lollipop"}};t.points=t.points.filter(e=>!Number.isNaN(e.y));const v=t.points,g=js().x(function(e){return e.x}).y(function(e){return e.y}).curve(Is),i=a.append("path").attr("d",g(v)).attr("id","edge"+d2).attr("class","relation");let n="";s.arrowMarkerAbsolute&&(n=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,n=n.replace(/\(/g,"\\("),n=n.replace(/\)/g,"\\)")),e.relation.lineType==1&&i.attr("class","relation dashed-line"),e.relation.lineType==10&&i.attr("class","relation dotted-line"),e.relation.type1!=="none"&&i.attr("marker-start","url("+n+"#"+d(e.relation.type1)+"Start)"),e.relation.type2!=="none"&&i.attr("marker-end","url("+n+"#"+d(e.relation.type2)+"End)");let u,h;const r=t.points.length;let c=jt.calcLabelPosition(t.points);u=c.x,h=c.y;let l,m,f,p;if(r%2!==0&&r>1){let n=jt.calcCardinalityPosition(e.relation.type1!=="none",t.points,t.points[0]),s=jt.calcCardinalityPosition(e.relation.type2!=="none",t.points,t.points[r-1]);B.debug("cardinality_1_point "+JSON.stringify(n)),B.debug("cardinality_2_point "+JSON.stringify(s)),l=n.x,m=n.y,f=s.x,p=s.y}if(e.title!==void 0){const n=a.append("g").attr("class","classLabel"),o=n.append("text").attr("class","label").attr("x",u).attr("y",h).attr("fill","red").attr("text-anchor","middle").text(e.title);window.label=o;const t=o.node().getBBox();n.insert("rect",":first-child").attr("class","box").attr("x",t.x-s.padding/2).attr("y",t.y-s.padding/2).attr("width",t.width+s.padding).attr("height",t.height+s.padding)}B.info("Rendering relation "+JSON.stringify(e)),e.relationTitle1!==void 0&&e.relationTitle1!=="none"&&a.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",l).attr("y",m).attr("fill","black").attr("font-size","6").text(e.relationTitle1),e.relationTitle2!==void 0&&e.relationTitle2!=="none"&&a.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",f).attr("y",p).attr("fill","black").attr("font-size","6").text(e.relationTitle2),d2++},XM=function(j,t,e,b){B.debug("Rendering class ",t,e);const h=t.id,c={id:h,label:t.id,width:0,height:0},s=j.append("g").attr("id",b.db.lookUpDomId(h)).attr("class","classGroup");let o;t.link?o=s.append("svg:a").attr("xlink:href",t.link).attr("target",t.linkTarget).append("text").attr("y",e.textHeight+e.padding).attr("x",0):o=s.append("text").attr("y",e.textHeight+e.padding).attr("x",0);let n=!0;t.annotations.forEach(function(t){const s=o.append("tspan").text("«"+t+"»");n||s.attr("dy",e.textHeight),n=!1});let u=t.id;t.type!==void 0&&t.type!==""&&(u+="<"+t.type+">");const f=o.append("tspan").text(u).attr("class","title");n||f.attr("dy",e.textHeight);const i=o.node().getBBox().height,v=s.append("line").attr("x1",0).attr("y1",e.padding+i+e.dividerMargin/2).attr("y2",e.padding+i+e.dividerMargin/2),m=s.append("text").attr("x",e.padding).attr("y",i+e.dividerMargin+e.textHeight).attr("fill","white").attr("class","classText");n=!0,t.members.forEach(function(t){p2(m,t,n,e),n=!1});const r=m.node().getBBox(),p=s.append("line").attr("x1",0).attr("y1",e.padding+i+e.dividerMargin+r.height).attr("y2",e.padding+i+e.dividerMargin+r.height),g=s.append("text").attr("x",e.padding).attr("y",i+2*e.dividerMargin+r.height+e.textHeight).attr("fill","white").attr("class","classText");n=!0,t.methods.forEach(function(t){p2(g,t,n,e),n=!1});const l=s.node().getBBox();var d=" ";t.cssClasses.length>0&&(d=d+t.cssClasses.join(" "));const a=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",l.width+2*e.padding).attr("height",l.height+e.padding+.5*e.dividerMargin).attr("class",d).node().getBBox().width;return o.node().childNodes.forEach(function(e){e.setAttribute("x",(a-e.getBBox().width)/2)}),t.tooltip&&o.insert("title").text(t.tooltip),v.attr("x2",a),p.attr("x2",a),c.width=a,c.height=l.height+e.padding+.5*e.dividerMargin,c},KM=function(l,t,e){B.debug("Rendering note ",t,e);const a=t.id,o={id:a,text:t.text,width:0,height:0},n=l.append("g").attr("id",a).attr("class","classGroup");let r=n.append("text").attr("y",e.textHeight+e.padding).attr("x",0);const i=JSON.parse(`"${t.text}"`).split(`
`);i.forEach(function(t){B.debug(`Adding line: ${t}`),r.append("tspan").text(t).attr("class","title").attr("dy",e.textHeight)});const s=n.node().getBBox(),c=n.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",s.width+2*e.padding).attr("height",s.height+i.length*e.textHeight+e.padding+.5*e.dividerMargin).node().getBBox().width;return r.node().childNodes.forEach(function(e){e.setAttribute("x",(c-e.getBBox().width)/2)}),o.width=c,o.height=s.height+i.length*e.textHeight+e.padding+.5*e.dividerMargin,o},sc=function(e){const s=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,o=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let n=e.match(s),t=e.match(o);return n&&!t?ZM(n):t?QM(t):JM(e)},ZM=function(e){let n="",t="";try{let s=e[1]?e[1].trim():"",o=e[2]?e[2].trim():"",i=e[3]?ci(e[3].trim()):"",a=e[4]?e[4].trim():"",r=e[5]?e[5].trim():"";t=s+o+i+" "+a,n=L0(r)}catch{t=e}return{displayText:t,cssStyle:n}},QM=function(e){let n="",t="";try{let s=e[1]?e[1].trim():"",o=e[2]?e[2].trim():"",i=e[3]?ci(e[3].trim()):"",a=e[4]?e[4].trim():"",r=e[5]?" : "+ci(e[5]).trim():"";t=s+o+"("+i+")"+r,n=L0(a)}catch{t=e}return{displayText:t,cssStyle:n}},JM=function(e){let o="",i="",n="",s=e.indexOf("("),t=e.indexOf(")");if(s>1&&t>s&&t<=e.length){let c="",a="",r=e.substring(0,1);r.match(/\w/)?a=e.substring(0,s).trim():(r.match(/[#+~-]/)&&(c=r),a=e.substring(1,s).trim());const l=e.substring(s+1,t);e.substring(t+1,1),i=L0(e.substring(t+1,t+2)),o=c+a+"("+ci(l.trim())+")",t<e.length&&(n=e.substring(t+2).trim(),n!==""&&(n=" : "+ci(n),o+=n))}else o=ci(e);return{displayText:o,cssStyle:i}},p2=function(s,o,i,t){let e=sc(o);const n=s.append("tspan").attr("x",t.padding).text(e.displayText);e.cssStyle!==""&&n.attr("style",e.cssStyle),i||n.attr("dy",t.textHeight)},L0=function(e){switch(e){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},$u={drawClass:XM,drawEdge:jM,drawNote:KM,parseMember:sc};let ll={};const zo=20,ha=function(t){const e=Object.entries(ll).find(e=>e[1].label===t);if(e)return e[0]},tN=function(e){e.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),e.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},eN=function(f,h,p,n){const o=q().class;ll={},B.info("Rendering diagram "+f);const l=q().securityLevel;let c;l==="sandbox"&&(c=_t("#i"+h));const r=_t(l==="sandbox"?c.nodes()[0].contentDocument.body:"body"),t=r.select(`[id='${h}']`);tN(t);const e=new Ve({multigraph:!0});e.setGraph({isMultiGraph:!0}),e.setDefaultEdgeLabel(function(){return{}});const i=n.db.getClasses(),m=Object.keys(i);for(const a of m){const r=i[a],s=$u.drawClass(t,r,o,n);ll[s.id]=s,e.setNode(s.id,s),B.info("Org height: "+s.height)}n.db.getRelations().forEach(function(t){B.info("tjoho"+ha(t.id1)+ha(t.id2)+JSON.stringify(t)),e.setEdge(ha(t.id1),ha(t.id2),{relation:t},t.title||"DEFAULT")}),n.db.getNotes().forEach(function(s){B.debug(`Adding note: ${JSON.stringify(s)}`);const a=$u.drawNote(t,s,o,n);ll[a.id]=a,e.setNode(a.id,a),s.class&&s.class in i&&e.setEdge(s.id,ha(s.class),{relation:{id1:s.id,id2:s.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),ta(e),e.nodes().forEach(function(t){t!==void 0&&e.node(t)!==void 0&&(B.debug("Node "+t+": "+JSON.stringify(e.node(t))),r.select("#"+(n.db.lookUpDomId(t)||t)).attr("transform","translate("+(e.node(t).x-e.node(t).width/2)+","+(e.node(t).y-e.node(t).height/2)+" )"))}),e.edges().forEach(function(s){s!==void 0&&e.edge(s)!==void 0&&(B.debug("Edge "+s.v+" -> "+s.w+": "+JSON.stringify(e.edge(s))),$u.drawEdge(t,e.edge(s),e.edge(s).relation,o,n))});const s=t.node().getBBox(),u=s.width+zo*2,d=s.height+zo*2;cn(t,d,u,o.useMaxWidth);const a=`${s.x-zo} ${s.y-zo} ${u} ${d}`;B.debug(`viewBox ${a}`),t.attr("viewBox",a)},rN={draw:eN};function qn(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:nN(e),edges:iN(e)};return De(e.graph())||(t.value=mB(e.graph())),t}function nN(e){return Oe(e.nodes(),function(t){var s=e.node(t),o=e.parent(t),n={v:t};return De(s)||(n.value=s),De(o)||(n.parent=o),n})}function iN(e){return Oe(e.edges(),function(t){var s=e.edge(t),n={v:t.v,w:t.w};return De(t.name)||(n.name=t.name),De(s)||(n.value=s),n})}const sN=(e,t,n,s)=>{t.forEach(t=>{gN[t](e,n,s)})},aN=(t,e,n)=>{B.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},oN=(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},lN=(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},cN=(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},uN=(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},hN=(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 12 20").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},fN=(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},dN=(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},pN=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},gN={extension:aN,composition:oN,aggregation:lN,dependency:cN,lollipop:uN,point:hN,circle:fN,cross:dN,barb:pN},yN=sN;function mN(t,e){e&&t.attr("style",e)}function bN(e){const n=_t(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),t=n.append("xhtml:div"),s=e.label,o=e.isNode?"nodeLabel":"edgeLabel";return t.html('<span class="'+o+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+s+"</span>"),mN(t,e.labelStyle),t.style("display","inline-block"),t.style("white-space","nowrap"),t.attr("xmlns","http://www.w3.org/1999/xhtml"),n.node()}const _N=(a,s,o,i)=>{let e=a||"";if(typeof e=="object"&&(e=e[0]),Ke(q().flowchart.htmlLabels)){e=e.replace(/\\n|\n/g,"<br />"),B.info("vertexText"+e);const t={isNode:i,label:af(e).replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`),labelStyle:s.replace("fill:","color:")};return bN(t)}const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",s.replace("color:","fill:"));let t=[];typeof e=="string"?t=e.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(e)?t=e:t=[];for(const s of t){const e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","0"),o?e.setAttribute("class","title-row"):e.setAttribute("class","row"),e.textContent=s.trim(),n.appendChild(e)}return n},xr=_N,cr=(c,e,r,l)=>{let o;r?o=r:o="node default";const a=c.insert("g").attr("class",o).attr("id",e.domId||e.id),n=a.insert("g").attr("class","label").attr("style",e.labelStyle);let i;e.labelText===void 0?i="":i=typeof e.labelText=="string"?e.labelText:e.labelText[0];const s=n.node().appendChild(xr(Ur(af(i),q()),e.labelStyle,!1,l));let t=s.getBBox();if(Ke(q().flowchart.htmlLabels)){const n=s.children[0],e=_t(s);t=n.getBoundingClientRect(),e.attr("width",t.width),e.attr("height",t.height)}const d=e.padding/2;return n.attr("transform","translate("+-t.width/2+", "+-t.height/2+")"),{shapeSvg:a,bbox:t,halfPadding:d,label:n}},Ie=(e,n)=>{const t=n.node().getBBox();e.width=t.width,e.height=t.height};function ri(e,t,n,s){return e.insert("polygon",":first-child").attr("points",s.map(function(e){return e.x+","+e.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+n/2+")")}let ce={},Zr={},Lm={};const xN=()=>{Zr={},Lm={},ce={}},ac=(e,t)=>(B.trace("In isDecendant",t," ",e," = ",Zr[t].includes(e)),!!Zr[t].includes(e)),vN=(t,e)=>(B.info("Decendants of ",e," is ",Zr[e]),B.info("Edge is ",t),!(t.v===e||t.w===e)&&(Zr[e]?Zr[e].includes(t.v)||ac(t.v,e)||ac(t.w,e)||Zr[e].includes(t.w):(B.debug("Tilt, ",e,",not in decendants"),!1))),Bm=(e,n,s,t)=>{B.warn("Copying children of ",e,"root",t,"data",n.node(e),t);const o=n.children(e)||[];e!==t&&o.push(e),B.warn("Copying (nodes) clusterId",e,"nodes",o),o.forEach(o=>{if(n.children(o).length>0)Bm(o,n,s,t);else{const a=n.node(o);B.info("cp ",o," to ",t," with parent ",e),s.setNode(o,a),t!==n.parent(o)&&(B.warn("Setting parent",o,n.parent(o)),s.setParent(o,n.parent(o))),e!==t&&o!==e?(B.debug("Setting parent",o,e),s.setParent(o,e)):(B.info("In copy ",e,"root",t,"data",n.node(e),t),B.debug("Not Setting parent for node=",o,"cluster!==rootId",e!==t,"node!==clusterId",o!==e));const i=n.edges(o);B.debug("Copying Edges",i),i.forEach(o=>{B.info("Edge",o);const i=n.edge(o.v,o.w,o.name);B.info("Edge data",i,t);try{vN(o,t)?(B.info("Copying as ",o.v,o.w,i,o.name),s.setEdge(o.v,o.w,i,o.name),B.info("newGraph edges ",s.edges(),s.edge(s.edges()[0]))):B.info("Skipping copy of edge ",o.v,"-->",o.w," rootId: ",t," clusterId:",e)}catch(e){B.error(e)}})}B.debug("Removing node",o),n.removeNode(o)})},Dm=(t,n)=>{const s=n.children(t);let e=[...s];for(const o of s)Lm[o]=t,e=[...e,...Dm(o,n)];return e},eo=(e,n)=>{B.trace("Searching",e);const t=n.children(e);if(B.trace("Searching children of id ",e,t),t.length<1)return B.trace("This is a valid node",e),e;for(const o of t){const s=eo(o,n);if(s)return B.trace("Found replacement for",e," => ",s),s}},Uo=e=>!ce[e]||!ce[e].externalConnections?e:ce[e]?ce[e].id:e,kN=(e,t)=>{if(!e||t>10){B.debug("Opting out, no graph ");return}B.debug("Opting in, graph "),e.nodes().forEach(function(t){e.children(t).length>0&&(B.warn("Cluster identified",t," Replacement id in edges: ",eo(t,e)),Zr[t]=Dm(t,e),ce[t]={id:eo(t,e),clusterData:e.node(t)})}),e.nodes().forEach(function(t){const n=e.children(t),s=e.edges();n.length>0?(B.debug("Cluster identified",t,Zr),s.forEach(e=>{if(e.v!==t&&e.w!==t){const n=ac(e.v,t),s=ac(e.w,t);n^s&&(B.warn("Edge: ",e," leaves cluster ",t),B.warn("Decendants of XXX ",t,": ",Zr[t]),ce[t].externalConnections=!0)}})):B.debug("Not a cluster ",t,Zr)}),e.edges().forEach(function(t){const n=e.edge(t);B.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),B.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(e.edge(t)));let s=t.v,o=t.w;if(B.warn("Fix XXX",ce,"ids:",t.v,t.w,"Translating: ",ce[t.v]," --- ",ce[t.w]),ce[t.v]&&ce[t.w]&&ce[t.v]===ce[t.w]){B.warn("Fixing and trixing link to self - removing XXX",t.v,t.w,t.name),B.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),s=Uo(t.v),o=Uo(t.w),e.removeEdge(t.v,t.w,t.name);const i=t.w+"---"+t.v;e.setNode(i,{domId:i,id:i,labelStyle:"",labelText:n.label,padding:0,shape:"labelRect",style:""});const a=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(n));a.label="",a.arrowTypeEnd="none",r.label="",a.fromCluster=t.v,r.toCluster=t.v,e.setEdge(s,i,a,t.name+"-cyclic-special"),e.setEdge(i,o,r,t.name+"-cyclic-special")}else(ce[t.v]||ce[t.w])&&(B.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),s=Uo(t.v),o=Uo(t.w),e.removeEdge(t.v,t.w,t.name),s!==t.v&&(n.fromCluster=t.v),o!==t.w&&(n.toCluster=t.w),B.warn("Fix Replacing with XXX",s,o,t.name),e.setEdge(s,o,n,t.name))}),B.warn("Adjusted Graph",qn(e)),Im(e,0),B.trace(ce)},Im=(e,t)=>{if(B.warn("extractor - ",t,qn(e),e.children("D")),t>10){B.error("Bailing out");return}let n=e.nodes(),s=!1;for(const t of n){const o=e.children(t);s=s||o.length>0}if(!s){B.debug("Done, no node has children",e.nodes());return}B.debug("Nodes = ",n,t);for(const s of n)if(B.debug("Extracting node",s,ce,ce[s]&&!ce[s].externalConnections,!e.parent(s),e.node(s),e.children("D")," Depth ",t),!ce[s])B.debug("Not a cluster",s,t);else if(!ce[s].externalConnections&&e.children(s)&&e.children(s).length>0){B.warn("Cluster without external connections, without a parent and with children",s,t);let n=e.graph().rankdir==="TB"?"LR":"TB";ce[s]&&ce[s].clusterData&&ce[s].clusterData.dir&&(n=ce[s].clusterData.dir,B.warn("Fixing dir",ce[s].clusterData.dir,n));const o=new Ve({multigraph:!0,compound:!0}).setGraph({rankdir:n,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});B.warn("Old graph before copy",qn(e)),Bm(s,e,o,s),e.setNode(s,{clusterNode:!0,id:s,clusterData:ce[s].clusterData,labelText:ce[s].labelText,graph:o}),B.warn("New graph after copy node: (",s,")",qn(o)),B.debug("Old graph after copy",qn(e))}else B.warn("Cluster ** ",s," **not meeting the criteria !externalConnections:",!ce[s].externalConnections," no parent: ",!e.parent(s)," children ",e.children(s)&&e.children(s).length>0,e.children("D"),t),B.debug(ce);n=e.nodes(),B.warn("New list of nodes",n);for(const o of n){const s=e.node(o);B.warn(" Now next level",o,s),s.clusterNode&&Im(s.graph,t+1)}},Mm=(n,e)=>{if(e.length===0)return[];let t=Object.assign(e);return e.forEach(e=>{const s=n.children(e),o=Mm(n,s);t=[...t,...o]}),t},wN=e=>Mm(e,e.children());function TN(e,t){return e.intersect(t)}function Nm(l,e,t,n){var o=l.x,i=l.y,s=o-n.x,a=i-n.y,d=Math.sqrt(e*e*a*a+t*t*s*s),r=Math.abs(e*t*s/d),c;return n.x<o&&(r=-r),c=Math.abs(e*t*a/d),n.y<i&&(c=-c),{x:o+r,y:i+c}}function EN(t,e,n){return Nm(t,e,e,n)}function CN(i,n,s,o){var d,a,r,c,l,h,g,p,f,m,t,u,e,v,b;if(d=n.y-i.y,r=i.x-n.x,l=n.x*i.y-i.x*n.y,f=d*s.x+r*s.y+l,m=d*o.x+r*o.y+l,!(f!==0&&m!==0&&g2(f,m))&&(a=o.y-s.y,c=s.x-o.x,h=o.x*s.y-s.x*o.y,g=a*i.x+c*i.y+h,p=a*n.x+c*n.y+h,!(g!==0&&p!==0&&g2(g,p))&&(t=d*c-a*r,t!==0)))return u=Math.abs(t/2),e=r*h-c*l,v=e<0?(e-u)/t:(e+u)/t,e=a*l-d*h,b=e<0?(e-u)/t:(e+u)/t,{x:v,y:b}}function g2(e,t){return e*t>0}function SN(t,e,s){var h=t.x,m=t.y,i=[],n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(e){n=Math.min(n,e.x),a=Math.min(a,e.y)}):(n=Math.min(n,e.x),a=Math.min(a,e.y));for(var c=h-t.width/2-n,l=m-t.height/2-a,o=0;o<e.length;o++){var d=e[o],u=e[o<e.length-1?o+1:0],r=CN(t,s,{x:c+d.x,y:l+d.y},{x:c+u.x,y:l+u.y});r&&i.push(r)}return i.length?(i.length>1&&i.sort(function(e,t){var n=e.x-s.x,o=e.y-s.y,i=Math.sqrt(n*n+o*o),a=t.x-s.x,r=t.y-s.y,c=Math.sqrt(a*a+r*r);return i<c?-1:i===c?0:1}),i[0]):t}const AN=(o,r)=>{var c=o.x,l=o.y,n=r.x-c,s=r.y-l,e=o.width/2,t=o.height/2,i,a;return Math.abs(s)*e>Math.abs(n)*t?(s<0&&(t=-t),i=s===0?0:t*n/s,a=t):(n<0&&(e=-e),i=e,a=n===0?0:e*s/n),{x:c+i,y:l+a}},bo=AN,Ee={node:TN,circle:EN,ellipse:Nm,polygon:SN,rect:bo},LN=(i,e)=>{const{shapeSvg:n,bbox:t,halfPadding:s}=cr(i,e,"node "+e.classes,!0);B.info("Classes = ",e.classes);const o=n.insert("rect",":first-child");return o.attr("rx",e.rx).attr("ry",e.ry).attr("x",-t.width/2-s).attr("y",-t.height/2-s).attr("width",t.width+e.padding).attr("height",t.height+e.padding),Ie(e,o),e.intersect=function(t){return Ee.rect(e,t)},n},BN=LN,y2=(c,t)=>{const{shapeSvg:n,bbox:s}=cr(c,t,void 0,!0),a=s.width+t.padding,r=s.height+t.padding,e=a+r,o=[{x:e/2,y:0},{x:e,y:-e/2},{x:e/2,y:-e},{x:0,y:-e/2}];B.info("Question main (Circle)");const i=ri(n,e,e,o);return i.attr("style",t.style),Ie(t,i),t.intersect=function(e){return B.warn("Intersect called"),Ee.polygon(t,o,e)},n},DN=(s,e)=>{const n=s.insert("g").attr("class","node default").attr("id",e.domId||e.id),t=28,o=[{x:0,y:t/2},{x:t/2,y:0},{x:0,y:-t/2},{x:-t/2,y:0}];return n.insert("polygon",":first-child").attr("points",o.map(function(e){return e.x+","+e.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return Ee.circle(e,14,t)},n},IN=(l,e)=>{const{shapeSvg:o,bbox:i}=cr(l,e,void 0,!0),c=4,t=i.height+e.padding,n=t/c,s=i.width+2*n+e.padding,a=[{x:n,y:0},{x:s-n,y:0},{x:s,y:-t/2},{x:s-n,y:-t},{x:n,y:-t},{x:0,y:-t/2}],r=ri(o,s,t,a);return r.attr("style",e.style),Ie(e,r),e.intersect=function(t){return Ee.polygon(e,a,t)},o},MN=(a,e)=>{const{shapeSvg:o,bbox:i}=cr(a,e,void 0,!0),n=i.width+e.padding,t=i.height+e.padding,s=[{x:-t/2,y:0},{x:n,y:0},{x:n,y:-t},{x:-t/2,y:-t},{x:0,y:-t/2}];return ri(o,n,t,s).attr("style",e.style),e.width=n+t,e.height=t,e.intersect=function(t){return Ee.polygon(e,s,t)},o},NN=(r,e)=>{const{shapeSvg:o,bbox:i}=cr(r,e,void 0,!0),n=i.width+e.padding,t=i.height+e.padding,s=[{x:-2*t/6,y:0},{x:n-t/6,y:0},{x:n+2*t/6,y:-t},{x:t/6,y:-t}],a=ri(o,n,t,s);return a.attr("style",e.style),Ie(e,a),e.intersect=function(t){return Ee.polygon(e,s,t)},o},RN=(r,e)=>{const{shapeSvg:o,bbox:i}=cr(r,e,void 0,!0),n=i.width+e.padding,t=i.height+e.padding,s=[{x:2*t/6,y:0},{x:n+t/6,y:0},{x:n-2*t/6,y:-t},{x:-t/6,y:-t}],a=ri(o,n,t,s);return a.attr("style",e.style),Ie(e,a),e.intersect=function(t){return Ee.polygon(e,s,t)},o},FN=(r,e)=>{const{shapeSvg:o,bbox:i}=cr(r,e,void 0,!0),n=i.width+e.padding,t=i.height+e.padding,s=[{x:-2*t/6,y:0},{x:n+2*t/6,y:0},{x:n-t/6,y:-t},{x:t/6,y:-t}],a=ri(o,n,t,s);return a.attr("style",e.style),Ie(e,a),e.intersect=function(t){return Ee.polygon(e,s,t)},o},ON=(r,e)=>{const{shapeSvg:o,bbox:i}=cr(r,e,void 0,!0),n=i.width+e.padding,t=i.height+e.padding,s=[{x:t/6,y:0},{x:n-t/6,y:0},{x:n+2*t/6,y:-t},{x:-2*t/6,y:-t}],a=ri(o,n,t,s);return a.attr("style",e.style),Ie(e,a),e.intersect=function(t){return Ee.polygon(e,s,t)},o},PN=(r,e)=>{const{shapeSvg:o,bbox:i}=cr(r,e,void 0,!0),n=i.width+e.padding,t=i.height+e.padding,s=[{x:0,y:0},{x:n+t/2,y:0},{x:n,y:-t/2},{x:n+t/2,y:-t},{x:0,y:-t}],a=ri(o,n,t,s);return a.attr("style",e.style),Ie(e,a),e.intersect=function(t){return Ee.polygon(e,s,t)},o},VN=(r,e)=>{const{shapeSvg:i,bbox:a}=cr(r,e,void 0,!0),s=a.width+e.padding,n=s/2,t=n/(2.5+s/50),o=a.height+t+e.padding,c="M 0,"+t+" a "+n+","+t+" 0,0,0 "+s+" 0 a "+n+","+t+" 0,0,0 "+-s+" 0 l 0,"+o+" a "+n+","+t+" 0,0,0 "+s+" 0 l 0,"+-o,l=i.attr("label-offset-y",t).insert("path",":first-child").attr("style",e.style).attr("d",c).attr("transform","translate("+-s/2+","+-(o/2+t)+")");return Ie(e,l),e.intersect=function(i){const s=Ee.rect(e,i),o=s.x-e.x;if(n!=0&&(Math.abs(o)<e.width/2||Math.abs(o)==e.width/2&&Math.abs(s.y-e.y)>e.height/2-t)){let a=t*t*(1-o*o/(n*n));a!=0&&(a=Math.sqrt(a)),a=t-a,i.y-e.y>0&&(a=-a),s.y+=a}return s},i},YN=(r,e)=>{const{shapeSvg:o,bbox:t,halfPadding:i}=cr(r,e,"node "+e.classes,!0);B.trace("Classes = ",e.classes);const n=o.insert("rect",":first-child"),s=t.width+e.padding,a=t.height+e.padding;if(n.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-t.width/2-i).attr("y",-t.height/2-i).attr("width",s).attr("height",a),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(Rm(n,e.props.borders,s,a),t.delete("borders")),t.forEach(e=>{B.warn(`Unknown node property ${e}`)})}return Ie(e,n),e.intersect=function(t){return Ee.rect(e,t)},o},zN=(i,e)=>{const{shapeSvg:t}=cr(i,e,"label",!0);B.trace("Classes = ",e.classes);const n=t.insert("rect",":first-child"),s=0,o=0;if(n.attr("width",s).attr("height",o),t.attr("class","label edgeLabel"),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(Rm(n,e.props.borders,s,o),t.delete("borders")),t.forEach(e=>{B.warn(`Unknown node property ${e}`)})}return Ie(e,n),e.intersect=function(t){return Ee.rect(e,t)},t};function Rm(a,t,n,s){const i=[],o=e=>{i.push(e,0)},e=e=>{i.push(0,e)};t.includes("t")?(B.debug("add top border"),o(n)):e(n),t.includes("r")?(B.debug("add right border"),o(s)):e(s),t.includes("b")?(B.debug("add bottom border"),o(n)):e(n),t.includes("l")?(B.debug("add left border"),o(s)):e(s),a.attr("stroke-dasharray",i.join(" "))}const UN=(f,t)=>{let l;t.classes?l="node "+t.classes:l="node default";const i=f.insert("g").attr("class",l).attr("id",t.domId||t.id),h=i.insert("rect",":first-child"),m=i.insert("line"),c=i.insert("g").attr("class","label"),s=t.labelText.flat?t.labelText.flat():t.labelText;let a="";typeof s=="object"?a=s[0]:a=s,B.info("Label text abc79",a,s,typeof s=="object");const r=c.node().appendChild(xr(a,t.labelStyle,!0,!0));let e={width:0,height:0};if(Ke(q().flowchart.htmlLabels)){const n=r.children[0],t=_t(r);e=n.getBoundingClientRect(),t.attr("width",e.width),t.attr("height",e.height)}B.info("Text 2",s);const d=s.slice(1,s.length);let o=r.getBBox();const u=c.node().appendChild(xr(d.join?d.join("<br/>"):d,t.labelStyle,!0,!0));if(Ke(q().flowchart.htmlLabels)){const n=u.children[0],t=_t(u);e=n.getBoundingClientRect(),t.attr("width",e.width),t.attr("height",e.height)}const n=t.padding/2;return _t(u).attr("transform","translate( "+(e.width>o.width?0:(o.width-e.width)/2)+", "+(o.height+n+5)+")"),_t(r).attr("transform","translate( "+(e.width<o.width?0:-(o.width-e.width)/2)+", "+0+")"),e=c.node().getBBox(),c.attr("transform","translate("+-e.width/2+", "+(-e.height/2-n+3)+")"),h.attr("class","outer title-state").attr("x",-e.width/2-n).attr("y",-e.height/2-n).attr("width",e.width+t.padding).attr("height",e.height+t.padding),m.attr("class","divider").attr("x1",-e.width/2-n).attr("x2",e.width/2+n).attr("y1",-e.height/2-n+o.height+n).attr("y2",-e.height/2-n+o.height+n),Ie(t,h),t.intersect=function(e){return Ee.rect(t,e)},i},WN=(i,e)=>{const{shapeSvg:n,bbox:s}=cr(i,e,void 0,!0),t=s.height+e.padding,o=s.width+t/4+e.padding,a=n.insert("rect",":first-child").attr("style",e.style).attr("rx",t/2).attr("ry",t/2).attr("x",-o/2).attr("y",-t/2).attr("width",o).attr("height",t);return Ie(e,a),e.intersect=function(t){return Ee.rect(e,t)},n},HN=(i,e)=>{const{shapeSvg:s,bbox:t,halfPadding:n}=cr(i,e,void 0,!0),o=s.insert("circle",":first-child");return o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",t.width/2+n).attr("width",t.width+e.padding).attr("height",t.height+e.padding),B.info("Circle main"),Ie(e,o),e.intersect=function(s){return B.info("Circle intersect",e,t.width/2+n,s),Ee.circle(e,t.width/2+n,s)},s},GN=(r,e)=>{const{shapeSvg:i,bbox:t,halfPadding:s}=cr(r,e,void 0,!0),n=5,o=i.insert("g",":first-child"),a=o.insert("circle"),c=o.insert("circle");return a.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",t.width/2+s+n).attr("width",t.width+e.padding+n*2).attr("height",t.height+e.padding+n*2),c.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",t.width/2+s).attr("width",t.width+e.padding).attr("height",t.height+e.padding),B.info("DoubleCircle main"),Ie(e,a),e.intersect=function(o){return B.info("DoubleCircle intersect",e,t.width/2+s+n,o),Ee.circle(e,t.width/2+s+n,o)},i},qN=(r,e)=>{const{shapeSvg:o,bbox:i}=cr(r,e,void 0,!0),t=i.width+e.padding,n=i.height+e.padding,s=[{x:0,y:0},{x:t,y:0},{x:t,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:t+8,y:0},{x:t+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],a=ri(o,t,n,s);return a.attr("style",e.style),Ie(e,a),e.intersect=function(t){return Ee.polygon(e,s,t)},o},$N=(s,e)=>{const t=s.insert("g").attr("class","node default").attr("id",e.domId||e.id),n=t.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),Ie(e,n),e.intersect=function(t){return Ee.circle(e,7,t)},t},m2=(o,e,i)=>{const s=o.insert("g").attr("class","node default").attr("id",e.domId||e.id);let t=70,n=10;i==="LR"&&(t=10,n=70);const a=s.append("rect").attr("x",-1*t/2).attr("y",-1*n/2).attr("width",t).attr("height",n).attr("class","fork-join");return Ie(e,a),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return Ee.rect(e,t)},s},jN=(s,e)=>{const t=s.insert("g").attr("class","node default").attr("id",e.domId||e.id),o=t.insert("circle",":first-child"),n=t.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),o.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),Ie(e,n),e.intersect=function(t){return Ee.circle(e,7,t)},t},XN=(b,e)=>{const a=e.padding/2,r=4,o=8;let f;e.classes?f="node "+e.classes:f="node default";const l=b.insert("g").attr("class",f).attr("id",e.domId||e.id),g=l.insert("rect",":first-child"),w=l.insert("line"),_=l.insert("line");let t=0,n=r;const h=l.insert("g").attr("class","label");let s=0;const y=e.classData.annotations&&e.classData.annotations[0],j=e.classData.annotations[0]?"«"+e.classData.annotations[0]+"»":"",u=h.node().appendChild(xr(j,e.labelStyle,!0,!0));let c=u.getBBox();if(Ke(q().flowchart.htmlLabels)){const t=u.children[0],e=_t(u);c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}e.classData.annotations[0]&&(n+=c.height+r,t+=c.width);let m=e.classData.id;e.classData.type!==void 0&&e.classData.type!==""&&(q().flowchart.htmlLabels?m+="&lt;"+e.classData.type+"&gt;":m+="<"+e.classData.type+">");const d=h.node().appendChild(xr(m,e.labelStyle,!0,!0));_t(d).attr("class","classTitle");let i=d.getBBox();if(Ke(q().flowchart.htmlLabels)){const t=d.children[0],e=_t(d);i=t.getBoundingClientRect(),e.attr("width",i.width),e.attr("height",i.height)}n+=i.height+r,i.width>t&&(t=i.width);const v=[];e.classData.members.forEach(c=>{const i=sc(c);let a=i.displayText;q().flowchart.htmlLabels&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const o=h.node().appendChild(xr(a,i.cssStyle?i.cssStyle:e.labelStyle,!0,!0));let s=o.getBBox();if(Ke(q().flowchart.htmlLabels)){const t=o.children[0],e=_t(o);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>t&&(t=s.width),n+=s.height+r,v.push(o)}),n+=o;const p=[];if(e.classData.methods.forEach(c=>{const i=sc(c);let a=i.displayText;q().flowchart.htmlLabels&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const o=h.node().appendChild(xr(a,i.cssStyle?i.cssStyle:e.labelStyle,!0,!0));let s=o.getBBox();if(Ke(q().flowchart.htmlLabels)){const t=o.children[0],e=_t(o);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>t&&(t=s.width),n+=s.height+r,p.push(o)}),n+=o,y){let e=(t-c.width)/2;_t(u).attr("transform","translate( "+(-1*t/2+e)+", "+-1*n/2+")"),s=c.height+r}let O=(t-i.width)/2;return _t(d).attr("transform","translate( "+(-1*t/2+O)+", "+(-1*n/2+s)+")"),s+=i.height+r,w.attr("class","divider").attr("x1",-t/2-a).attr("x2",t/2+a).attr("y1",-n/2-a+o+s).attr("y2",-n/2-a+o+s),s+=o,v.forEach(e=>{_t(e).attr("transform","translate( "+-t/2+", "+(-1*n/2+s+o/2)+")"),s+=i.height+r}),s+=o,_.attr("class","divider").attr("x1",-t/2-a).attr("x2",t/2+a).attr("y1",-n/2-a+o+s).attr("y2",-n/2-a+o+s),s+=o,p.forEach(e=>{_t(e).attr("transform","translate( "+-t/2+", "+(-1*n/2+s)+")"),s+=i.height+r}),g.attr("class","outer title-state").attr("x",-t/2-a).attr("y",-(n/2)-a).attr("width",t+e.padding).attr("height",n+e.padding),Ie(e,g),e.intersect=function(t){return Ee.rect(e,t)},l},b2={rhombus:y2,question:y2,rect:YN,labelRect:zN,rectWithTitle:UN,choice:DN,circle:HN,doublecircle:GN,stadium:WN,hexagon:IN,rect_left_inv_arrow:MN,lean_right:NN,lean_left:RN,trapezoid:FN,inv_trapezoid:ON,rect_right_inv_arrow:PN,cylinder:VN,start:$N,end:jN,note:BN,subroutine:qN,fork:m2,join:m2,class_box:XN};let ks={};const KN=(s,e,o)=>{let t,n;if(e.link){let i;q().securityLevel==="sandbox"?i="_top":e.linkTarget&&(i=e.linkTarget||"_blank"),t=s.insert("svg:a").attr("xlink:href",e.link).attr("target",i),n=b2[e.shape](t,e,o)}else n=b2[e.shape](s,e,o),t=n;return e.tooltip&&n.attr("title",e.tooltip),e.class&&n.attr("class","node default "+e.class),ks[e.id]=t,e.haveCallback&&ks[e.id].attr("class",ks[e.id].attr("class")+" clickable"),t},ZN=(e,t)=>{ks[t.id]=e},QN=()=>{ks={}},_2=e=>{const t=ks[e.id];B.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const s=8,n=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+n-e.width/2)+", "+(e.y-e.height/2-s)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),n},JN=(l,e)=>{B.trace("Creating subgraph rect for ",e.id,e);const s=l.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),i=s.insert("rect",":first-child"),a=s.insert("g").attr("class","cluster-label"),o=a.node().appendChild(xr(e.labelText,e.labelStyle,void 0,!0));let t=o.getBBox();if(Ke(q().flowchart.htmlLabels)){const n=o.children[0],e=_t(o);t=n.getBoundingClientRect(),e.attr("width",t.width),e.attr("height",t.height)}const n=0*e.padding,d=n/2,r=e.width<=t.width+n?t.width+n:e.width;e.width<=t.width+n?e.diff=(t.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,B.trace("Data ",e,JSON.stringify(e)),i.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-r/2).attr("y",e.y-e.height/2-d).attr("width",r).attr("height",e.height+n),a.attr("transform","translate("+(e.x-t.width/2)+", "+(e.y-e.height/2)+")");const c=i.node().getBBox();return e.width=c.width,e.height=c.height,e.intersect=function(t){return bo(e,t)},s},tR=(a,e)=>{const s=a.insert("g").attr("class","note-cluster").attr("id",e.id),o=s.insert("rect",":first-child"),t=0*e.padding,i=t/2;o.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-i).attr("y",e.y-e.height/2-i).attr("width",e.width+t).attr("height",e.height+t).attr("fill","none");const n=o.node().getBBox();return e.width=n.width,e.height=n.height,e.intersect=function(t){return bo(e,t)},s},eR=(d,e)=>{const a=d.insert("g").attr("class",e.classes).attr("id",e.id),r=a.insert("rect",":first-child"),c=a.insert("g").attr("class","cluster-label"),l=a.append("rect"),s=c.node().appendChild(xr(e.labelText,e.labelStyle,void 0,!0));let t=s.getBBox();if(Ke(q().flowchart.htmlLabels)){const n=s.children[0],e=_t(s);t=n.getBoundingClientRect(),e.attr("width",t.width),e.attr("height",t.height)}t=s.getBBox();const n=0*e.padding,o=n/2,i=e.width<=t.width+e.padding?t.width+e.padding:e.width;e.width<=t.width+e.padding?e.diff=(t.width+e.padding*0-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-i/2-o).attr("y",e.y-e.height/2-o).attr("width",i+n).attr("height",e.height+n),l.attr("class","inner").attr("x",e.x-i/2-o).attr("y",e.y-e.height/2-o+t.height-1).attr("width",i+n).attr("height",e.height+n-t.height-3),c.attr("transform","translate("+(e.x-t.width/2)+", "+(e.y-e.height/2-e.padding/3+(Ke(q().flowchart.htmlLabels)?5:3))+")");const u=r.node().getBBox();return e.height=u.height,e.intersect=function(t){return bo(e,t)},a},rR=(a,e)=>{const s=a.insert("g").attr("class",e.classes).attr("id",e.id),o=s.insert("rect",":first-child"),t=0*e.padding,i=t/2;o.attr("class","divider").attr("x",e.x-e.width/2-i).attr("y",e.y-e.height/2).attr("width",e.width+t).attr("height",e.height+t);const n=o.node().getBBox();return e.width=n.width,e.height=n.height,e.diff=-e.padding/2,e.intersect=function(t){return bo(e,t)},s},nR={rect:JN,roundedWithTitle:eR,noteGroup:tR,divider:rR};let Fm={};const iR=(t,e)=>{B.trace("Inserting cluster");const n=e.shape||"rect";Fm[e.id]=nR[n](t,e)},sR=()=>{Fm={}};let oc={},er={};const aR=()=>{oc={},er={}},oR=(o,e)=>{const s=xr(e.label,e.labelStyle),i=o.insert("g").attr("class","edgeLabel"),a=i.insert("g").attr("class","label");a.node().appendChild(s);let n=s.getBBox();if(Ke(q().flowchart.htmlLabels)){const t=s.children[0],e=_t(s);n=t.getBoundingClientRect(),e.attr("width",n.width),e.attr("height",n.height)}a.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),oc[e.id]=i,e.width=n.width,e.height=n.height;let t;if(e.startLabelLeft){const n=xr(e.startLabelLeft,e.labelStyle),s=o.insert("g").attr("class","edgeTerminals"),i=s.insert("g").attr("class","inner");t=i.node().appendChild(n);const a=n.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),er[e.id]||(er[e.id]={}),er[e.id].startLeft=s,Wo(t,e.startLabelLeft)}if(e.startLabelRight){const n=xr(e.startLabelRight,e.labelStyle),s=o.insert("g").attr("class","edgeTerminals"),i=s.insert("g").attr("class","inner");t=s.node().appendChild(n),i.node().appendChild(n);const a=n.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),er[e.id]||(er[e.id]={}),er[e.id].startRight=s,Wo(t,e.startLabelRight)}if(e.endLabelLeft){const n=xr(e.endLabelLeft,e.labelStyle),s=o.insert("g").attr("class","edgeTerminals"),i=s.insert("g").attr("class","inner");t=i.node().appendChild(n);const a=n.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),s.node().appendChild(n),er[e.id]||(er[e.id]={}),er[e.id].endLeft=s,Wo(t,e.endLabelLeft)}if(e.endLabelRight){const n=xr(e.endLabelRight,e.labelStyle),s=o.insert("g").attr("class","edgeTerminals"),i=s.insert("g").attr("class","inner");t=i.node().appendChild(n);const a=n.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),s.node().appendChild(n),er[e.id]||(er[e.id]={}),er[e.id].endRight=s,Wo(t,e.endLabelRight)}return s};function Wo(e,t){q().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}const lR=(e,n)=>{B.info("Moving label abc78 ",e.id,e.label,oc[e.id]);let t=n.updatedPath?n.updatedPath:n.originalPath;if(e.label){const i=oc[e.id];let s=e.x,o=e.y;if(t){const i=jt.calcLabelPosition(t);B.info("Moving label "+e.label+" from (",s,",",o,") to (",i.x,",",i.y,") abc78"),n.updatedPath&&(s=i.x,o=i.y)}i.attr("transform","translate("+s+", "+o+")")}if(e.startLabelLeft){const o=er[e.id].startLeft;let n=e.x,s=e.y;if(t){const o=jt.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",t);n=o.x,s=o.y}o.attr("transform","translate("+n+", "+s+")")}if(e.startLabelRight){const o=er[e.id].startRight;let n=e.x,s=e.y;if(t){const o=jt.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",t);n=o.x,s=o.y}o.attr("transform","translate("+n+", "+s+")")}if(e.endLabelLeft){const o=er[e.id].endLeft;let n=e.x,s=e.y;if(t){const o=jt.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",t);n=o.x,s=o.y}o.attr("transform","translate("+n+", "+s+")")}if(e.endLabelRight){const o=er[e.id].endRight;let n=e.x,s=e.y;if(t){const o=jt.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",t);n=o.x,s=o.y}o.attr("transform","translate("+n+", "+s+")")}},cR=(e,t)=>{const n=e.x,s=e.y,o=Math.abs(t.x-n),i=Math.abs(t.y-s),a=e.width/2,r=e.height/2;return o>=a||i>=r},uR=(i,e,t)=>{B.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(t)}
  node        : x:${i.x} y:${i.y} w:${i.width} h:${i.height}`);const c=i.x,u=i.y,m=Math.abs(c-t.x),a=i.width/2;let n=t.x<e.x?a-m:a+m;const d=i.height/2,o=Math.abs(e.y-t.y),s=Math.abs(e.x-t.x);if(Math.abs(u-e.y)*a>Math.abs(c-e.x)*d){let a=t.y<e.y?e.y-d-u:u-d-e.y;n=s*a/o;const i={x:t.x<e.x?t.x+n:t.x-s+n,y:t.y<e.y?t.y+o-a:t.y-o+a};return n===0&&(i.x=e.x,i.y=e.y),s===0&&(i.x=e.x),o===0&&(i.y=e.y),B.warn(`abc89 topp/bott calc, Q ${o}, q ${a}, R ${s}, r ${n}`,i),i}t.x<e.x?n=e.x-a-c:n=c-a-e.x;let h=o*n/s,l=t.x<e.x?t.x+s-n:t.x-s+n,r=t.y<e.y?t.y+h:t.y-h;return B.warn(`sides calc abc89, Q ${o}, q ${h}, R ${s}, r ${n}`,{_x:l,_y:r}),n===0&&(l=e.x,r=e.y),s===0&&(l=e.x),o===0&&(r=e.y),{x:l,y:r}},x2=(s,t)=>{B.warn("abc88 cutPathAtIntersect",s,t);let e=[],n=s[0],o=!1;return s.forEach(s=>{if(B.info("abc88 checking point",s,t),!cR(t,s)&&!o){const i=uR(t,n,s);B.warn("abc88 inside",s,n,i),B.warn("abc88 intersection",i);let a=!1;e.forEach(e=>{a=a||e.x===i.x&&e.y===i.y}),e.some(e=>e.x===i.x&&e.y===i.y)?B.warn("abc88 no intersect",i,e):e.push(i),o=!0}else B.warn("abc88 outside",s,n),n=s,o||e.push(s)}),B.warn("abc88 returning points",e),e},hR=function(g,m,t,a,n,h){let o=t.points,l=!1;const u=h.node(m.v);var r=h.node(m.w);B.info("abc88 InsertEdge: ",t),r.intersect&&u.intersect&&(o=o.slice(1,t.points.length-1),o.unshift(u.intersect(o[0])),B.info("Last point",o[o.length-1],r,r.intersect(o[o.length-1])),o.push(r.intersect(o[o.length-1]))),t.toCluster&&(B.info("to cluster abc88",a[t.toCluster]),o=x2(t.points,a[t.toCluster].node),l=!0),t.fromCluster&&(B.info("from cluster abc88",a[t.fromCluster]),o=x2(o.reverse(),a[t.fromCluster].node).reverse(),l=!0);const p=o.filter(e=>!Number.isNaN(e.y));let c;n==="graph"||n==="flowchart"?c=t.curve||Is:c=Is;const f=js().x(function(e){return e.x}).y(function(e){return e.y}).curve(c);let i;switch(t.thickness){case"normal":i="edge-thickness-normal";break;case"thick":i="edge-thickness-thick";break;default:i=""}switch(t.pattern){case"solid":i+=" edge-pattern-solid";break;case"dotted":i+=" edge-pattern-dotted";break;case"dashed":i+=" edge-pattern-dashed";break}const s=g.append("path").attr("d",f(p)).attr("id",t.id).attr("class"," "+i+(t.classes?" "+t.classes:"")).attr("style",t.style);let e="";switch((q().flowchart.arrowMarkerAbsolute||q().state.arrowMarkerAbsolute)&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replace(/\(/g,"\\("),e=e.replace(/\)/g,"\\)")),B.info("arrowTypeStart",t.arrowTypeStart),B.info("arrowTypeEnd",t.arrowTypeEnd),t.arrowTypeStart){case"arrow_cross":s.attr("marker-start","url("+e+"#"+n+"-crossStart)");break;case"arrow_point":s.attr("marker-start","url("+e+"#"+n+"-pointStart)");break;case"arrow_barb":s.attr("marker-start","url("+e+"#"+n+"-barbStart)");break;case"arrow_circle":s.attr("marker-start","url("+e+"#"+n+"-circleStart)");break;case"aggregation":s.attr("marker-start","url("+e+"#"+n+"-aggregationStart)");break;case"extension":s.attr("marker-start","url("+e+"#"+n+"-extensionStart)");break;case"composition":s.attr("marker-start","url("+e+"#"+n+"-compositionStart)");break;case"dependency":s.attr("marker-start","url("+e+"#"+n+"-dependencyStart)");break;case"lollipop":s.attr("marker-start","url("+e+"#"+n+"-lollipopStart)");break}switch(t.arrowTypeEnd){case"arrow_cross":s.attr("marker-end","url("+e+"#"+n+"-crossEnd)");break;case"arrow_point":s.attr("marker-end","url("+e+"#"+n+"-pointEnd)");break;case"arrow_barb":s.attr("marker-end","url("+e+"#"+n+"-barbEnd)");break;case"arrow_circle":s.attr("marker-end","url("+e+"#"+n+"-circleEnd)");break;case"aggregation":s.attr("marker-end","url("+e+"#"+n+"-aggregationEnd)");break;case"extension":s.attr("marker-end","url("+e+"#"+n+"-extensionEnd)");break;case"composition":s.attr("marker-end","url("+e+"#"+n+"-compositionEnd)");break;case"dependency":s.attr("marker-end","url("+e+"#"+n+"-dependencyEnd)");break;case"lollipop":s.attr("marker-end","url("+e+"#"+n+"-lollipopEnd)");break}let d={};return l&&(d.updatedPath=o),d.originalPath=t.points,d},Om=(r,e,s,t)=>{B.info("Graph in recursive render: XXX",qn(e),t);const o=e.graph().rankdir;B.trace("Dir in recursive render - dir:",o);const n=r.insert("g").attr("class","root");e.nodes()?B.info("Recursive render XXX",e.nodes()):B.info("No nodes found for",e),e.edges().length>0&&B.trace("Recursive edges",e.edge(e.edges()[0]));const c=n.insert("g").attr("class","clusters"),l=n.insert("g").attr("class","edgePaths"),d=n.insert("g").attr("class","edgeLabels"),i=n.insert("g").attr("class","nodes");e.nodes().forEach(function(a){const n=e.node(a);if(t!==void 0){const n=JSON.parse(JSON.stringify(t.clusterData));B.info("Setting data for cluster XXX (",a,") ",n,t),e.setNode(t.id,n),e.parent(a)||(B.trace("Setting parent",a,t.id),e.setParent(a,t.id,n))}if(B.info("(Insert) Node XXX"+a+": "+JSON.stringify(e.node(a))),n&&n.clusterNode){B.info("Cluster identified",a,n.width,e.node(a));const o=Om(i,n.graph,s,e.node(a)),t=o.elem;Ie(n,t),n.diff=o.diff||0,B.info("Node bounds (abc123)",a,n,n.width,n.x,n.y),ZN(t,n),B.warn("Recursive render complete ",t,n)}else e.children(a).length>0?(B.info("Cluster - the non recursive path XXX",a,n.id,n,e),B.info(eo(n.id,e)),ce[n.id]={id:eo(n.id,e),node:n}):(B.info("Node - the non recursive path",a,n.id,n),KN(i,e.node(a),o))}),e.edges().forEach(function(t){const n=e.edge(t.v,t.w,t.name);B.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),B.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(e.edge(t))),B.info("Fix",ce,"ids:",t.v,t.w,"Translateing: ",ce[t.v],ce[t.w]),oR(d,n)}),e.edges().forEach(function(e){B.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e))}),B.info("#############################################"),B.info("###                Layout                 ###"),B.info("#############################################"),B.info(e),ta(e),B.info("Graph after layout:",qn(e));let a=0;return wN(e).forEach(function(n){const t=e.node(n);B.info("Position "+n+": "+JSON.stringify(e.node(n))),B.info("Position "+n+": ("+t.x,","+t.y,") width: ",t.width," height: ",t.height),t&&t.clusterNode?_2(t):e.children(n).length>0?(iR(c,t),ce[t.id].node=t):_2(t)}),e.edges().forEach(function(t){const n=e.edge(t);B.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(n),n);const o=hR(l,t,n,ce,s,e);lR(n,o)}),e.nodes().forEach(function(n){const t=e.node(n);B.info(n,t.type,t.diff),t.type==="group"&&(a=t.diff)}),{elem:n,diff:a}},B0=(t,e,s,n,o)=>{yN(t,s,n,o),QN(),aR(),sR(),xN(),B.warn("Graph at first:",qn(e)),kN(e),B.warn("Graph after:",qn(e)),Om(t,e,n)},Pm=e=>Xt.sanitizeText(e,q());let Vm={dividerMargin:10,padding:5,textHeight:10};const fR=function(e,n,o,s){const t=Object.keys(e);B.info("keys:",t),B.info(e),t.forEach(function(l){const t=e[l];let i="";t.cssClasses.length>0&&(i=i+" "+t.cssClasses.join(" "));const a={labelStyle:""};let c=t.text!==void 0?t.text:t.id,r=0,o="";switch(t.type){case"class":o="class_box";break;default:o="class_box"}n.setNode(t.id,{labelStyle:a.labelStyle,shape:o,labelText:Pm(c),classData:t,rx:r,ry:r,class:i,style:a.style,id:t.id,domId:t.domId,tooltip:s.db.getTooltip(t.id)||"",haveCallback:t.haveCallback,link:t.link,width:t.type==="group"?500:void 0,type:t.type,padding:q().flowchart.padding}),B.info("setNode",{labelStyle:a.labelStyle,shape:o,labelText:c,rx:r,ry:r,class:i,style:a.style,id:t.id,width:t.type==="group"?500:void 0,type:t.type,padding:q().flowchart.padding})})},dR=function(e,t,n,s){B.info(e),e.forEach(function(d,u){const o=d;let h="";const a={labelStyle:"",style:""};let c=o.text,i=0,r="note";if(t.setNode(o.id,{labelStyle:a.labelStyle,shape:r,labelText:Pm(c),noteData:o,rx:i,ry:i,class:h,style:a.style,id:o.id,domId:o.id,tooltip:"",type:"note",padding:q().flowchart.padding}),B.info("setNode",{labelStyle:a.labelStyle,shape:r,labelText:c,rx:i,ry:i,style:a.style,id:o.id,type:"note",padding:q().flowchart.padding}),!o.class||!(o.class in s))return;const l=n+u,e={};e.classes="relation",e.pattern="dotted",e.id=`edgeNote${l}`,e.arrowhead="none",B.info(`Note edge: ${JSON.stringify(e)}, ${JSON.stringify(o)}`),e.startLabelRight="",e.endLabelLeft="",e.arrowTypeStart="none",e.arrowTypeEnd="none";let m="fill:none",f="";e.style=m,e.labelStyle=f,e.curve=Qr(Vm.curve,Ar),t.setEdge(o.id,o.class,e,l)})},pR=function(e,n){const s=q().flowchart;let t=0;e.forEach(function(i){t++;const o={};o.classes="relation",o.pattern=i.relation.lineType==1?"dashed":"solid",o.id="id"+t,i.type==="arrow_open"?o.arrowhead="none":o.arrowhead="normal",B.info(o,i),o.startLabelRight=i.relationTitle1==="none"?"":i.relationTitle1,o.endLabelLeft=i.relationTitle2==="none"?"":i.relationTitle2,o.arrowTypeStart=v2(i.relation.type1),o.arrowTypeEnd=v2(i.relation.type2);let a="",r="";if(i.style!==void 0){const e=yi(i.style);a=e.style,r=e.labelStyle}else a="fill:none";o.style=a,o.labelStyle=r,i.interpolate!==void 0?o.curve=Qr(i.interpolate,Ar):e.defaultInterpolate!==void 0?o.curve=Qr(e.defaultInterpolate,Ar):o.curve=Qr(s.curve,Ar),i.text=i.title,i.text===void 0?i.style!==void 0&&(o.arrowheadStyle="fill: #333"):(o.arrowheadStyle="fill: #333",o.labelpos="c",q().flowchart.htmlLabels?(o.labelType="html",o.label='<span class="edgeLabel">'+i.text+"</span>"):(o.labelType="text",o.label=i.text.replace(Xt.lineBreakRegex,`
`),i.style===void 0&&(o.style=o.style||"stroke: #333; stroke-width: 1.5px;fill:none"),o.labelStyle=o.labelStyle.replace("color:","fill:"))),n.setEdge(i.id1,i.id2,o,t)})},gR=function(e){Object.keys(e).forEach(function(t){Vm[t]=e[t]})},yR=function(p,e,f,n){B.info("Drawing class - ",e);const t=q().flowchart,i=q().securityLevel;B.info("config:",t);const m=t.nodeSpacing||50,h=t.rankSpacing||50,s=new Ve({multigraph:!0,compound:!0}).setGraph({rankdir:n.db.getDirection(),nodesep:m,ranksep:h,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),l=n.db.getClasses(),o=n.db.getRelations(),u=n.db.getNotes();B.info(o),fR(l,s,e,n),pR(o,s),dR(u,s,o.length+1,l);let a;i==="sandbox"&&(a=_t("#i"+e));const r=_t(i==="sandbox"?a.nodes()[0].contentDocument.body:"body"),c=r.select(`[id="${e}"]`),d=r.select("#"+e+" g");if(B0(d,s,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),jt.insertTitle(c,"classTitleText",t.titleTopMargin,n.db.getDiagramTitle()),Oc(s,c,t.diagramPadding,t.useMaxWidth),!t.htmlLabels){const t=i==="sandbox"?a.nodes()[0].contentDocument:document,n=t.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const s of n){const o=s.getBBox(),e=t.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("rx",0),e.setAttribute("ry",0),e.setAttribute("width",o.width),e.setAttribute("height",o.height),s.insertBefore(e,s.firstChild)}}};function v2(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const mR={setConf:gR,draw:yR};qh=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},x=[1,2],o=[1,5],t=[6,9,11,23,25,27,29,30,31,51],O=[1,17],y=[1,18],v=[1,19],m=[1,20],c=[1,21],a=[1,22],d=[1,25],u=[1,30],h=[1,31],C=[1,32],f=[1,33],p=[6,9,11,15,20,23,25,27,29,30,31,44,45,46,47,51],g=[1,45],s=[30,31,48,49],b=[4,6,9,11,23,25,27,29,30,31,51],j=[44,45,46,47],n=[22,37],_=[1,65],w=[1,64],i=[22,37,39,41],r={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyTypeList:35,attributeComment:36,ATTRIBUTE_WORD:37,attributeKeyType:38,COMMA:39,ATTRIBUTE_KEY:40,COMMENT:41,cardinality:42,relType:43,ZERO_OR_ONE:44,ZERO_OR_MORE:45,ONE_OR_MORE:46,ONLY_ONE:47,NON_IDENTIFYING:48,IDENTIFYING:49,WORD:50,open_directive:51,type_directive:52,arg_directive:53,close_directive:54,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",39:"COMMA",40:"ATTRIBUTE_KEY",41:"COMMENT",44:"ZERO_OR_ONE",45:"ZERO_OR_MORE",46:"ONE_OR_MORE",47:"ONLY_ONE",48:"NON_IDENTIFYING",49:"IDENTIFYING",50:"WORD",51:"open_directive",52:"type_directive",53:"arg_directive",54:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[35,3],[38,1],[36,1],[18,3],[42,1],[42,1],[42,1],[42,1],[43,1],[43,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(o,r,i,n,s,e){var t=e.length-1;switch(s){case 1:break;case 3:this.$=[];break;case 4:e[t-1].push(e[t]),this.$=e[t-1];break;case 5:case 6:this.$=e[t];break;case 7:case 8:this.$=[];break;case 12:n.addEntity(e[t-4]),n.addEntity(e[t-2]),n.addRelationship(e[t-4],e[t],e[t-2],e[t-3]);break;case 13:n.addEntity(e[t-3]),n.addAttributes(e[t-3],e[t-1]);break;case 14:n.addEntity(e[t-2]);break;case 15:n.addEntity(e[t]);break;case 16:case 17:this.$=e[t].trim(),n.setAccTitle(this.$);break;case 18:case 19:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 20:case 43:this.$=e[t];break;case 21:case 41:case 42:this.$=e[t].replace(/"/g,"");break;case 22:case 30:this.$=[e[t]];break;case 23:e[t].push(e[t-1]),this.$=e[t];break;case 24:this.$={attributeType:e[t-1],attributeName:e[t]};break;case 25:this.$={attributeType:e[t-2],attributeName:e[t-1],attributeKeyTypeList:e[t]};break;case 26:this.$={attributeType:e[t-2],attributeName:e[t-1],attributeComment:e[t]};break;case 27:this.$={attributeType:e[t-3],attributeName:e[t-2],attributeKeyTypeList:e[t-1],attributeComment:e[t]};break;case 28:case 29:case 32:this.$=e[t];break;case 31:e[t-2].push(e[t]),this.$=e[t-2];break;case 33:this.$=e[t].replace(/"/g,"");break;case 34:this.$={cardA:e[t],relType:e[t-1],cardB:e[t-2]};break;case 35:this.$=n.Cardinality.ZERO_OR_ONE;break;case 36:this.$=n.Cardinality.ZERO_OR_MORE;break;case 37:this.$=n.Cardinality.ONE_OR_MORE;break;case 38:this.$=n.Cardinality.ONLY_ONE;break;case 39:this.$=n.Identification.NON_IDENTIFYING;break;case 40:this.$=n.Identification.IDENTIFYING;break;case 44:n.parseDirective("%%{","open_directive");break;case 45:n.parseDirective(e[t],"type_directive");break;case 46:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 47:n.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:x,7:3,12:4,51:o},{1:[3]},e(t,[2,3],{5:6}),{3:7,4:x,7:3,12:4,51:o},{13:8,52:[1,9]},{52:[2,44]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:O,25:y,27:v,29:m,30:c,31:a,51:o},{1:[2,2]},{14:23,15:[1,24],54:d},e([15,54],[2,45]),e(t,[2,8],{1:[2,1]}),e(t,[2,4]),{7:15,10:26,12:4,17:16,23:O,25:y,27:v,29:m,30:c,31:a,51:o},e(t,[2,6]),e(t,[2,7]),e(t,[2,11]),e(t,[2,15],{18:27,42:29,20:[1,28],44:u,45:h,46:C,47:f}),{24:[1,34]},{26:[1,35]},{28:[1,36]},e(t,[2,19]),e(p,[2,20]),e(p,[2,21]),{11:[1,37]},{16:38,53:[1,39]},{11:[2,47]},e(t,[2,5]),{17:40,30:c,31:a},{21:41,22:[1,42],32:43,33:44,37:g},{43:46,48:[1,47],49:[1,48]},e(s,[2,35]),e(s,[2,36]),e(s,[2,37]),e(s,[2,38]),e(t,[2,16]),e(t,[2,17]),e(t,[2,18]),e(b,[2,9]),{14:49,54:d},{54:[2,46]},{15:[1,50]},{22:[1,51]},e(t,[2,14]),{21:52,22:[2,22],32:43,33:44,37:g},{34:53,37:[1,54]},{37:[2,28]},{42:55,44:u,45:h,46:C,47:f},e(j,[2,39]),e(j,[2,40]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],50:[1,58]},e(t,[2,13]),{22:[2,23]},e(n,[2,24],{35:61,36:62,38:63,40:_,41:w}),e([22,37,40,41],[2,29]),e([30,31],[2,34]),e(b,[2,10]),e(t,[2,12]),e(t,[2,41]),e(t,[2,42]),e(t,[2,43]),e(n,[2,25],{36:66,39:[1,67],41:w}),e(n,[2,26]),e(i,[2,30]),e(n,[2,33]),e(i,[2,32]),e(n,[2,27]),{38:68,40:_},e(i,[2,31])],defaultActions:{5:[2,44],7:[2,2],25:[2,47],39:[2,46],45:[2,28],52:[2,23]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},E=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(n,e,t){switch(t){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),51;case 8:return this.begin("type_directive"),52;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),54;case 11:return 53;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 50;case 19:return 4;case 20:return this.begin("block"),20;case 21:return 39;case 22:break;case 23:return 40;case 24:return 37;case 25:return 37;case 26:return 41;case 27:break;case 28:return this.popState(),22;case 29:return e.yytext[0];case 30:return 44;case 31:return 46;case 32:return 46;case 33:return 46;case 34:return 44;case 35:return 44;case 36:return 45;case 37:return 45;case 38:return 45;case 39:return 45;case 40:return 45;case 41:return 46;case 42:return 45;case 43:return 46;case 44:return 47;case 45:return 47;case 46:return 47;case 47:return 47;case 48:return 44;case 49:return 45;case 50:return 46;case 51:return 48;case 52:return 49;case 53:return 49;case 54:return 48;case 55:return 48;case 56:return 48;case 57:return 30;case 58:return e.yytext[0];case 59:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z_][A-Za-z0-9-_[\]()]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28,29],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}};return e}();r.lexer=E;function l(){this.yy={}}return l.prototype=r,r.Parser=l,new l}(),qh.parser=qh;const bR=qh,_R=e=>e.match(/^\s*erDiagram/)!==null;let Da={},D0=[];const xR={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},vR={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},kR=function(e,t,n){xe.parseDirective(this,e,t,n)},Ym=function(e){return Da[e]===void 0&&(Da[e]={attributes:[]},B.info("Added new entity :",e)),Da[e]},wR=()=>Da,TR=function(n,t){let s=Ym(n),e;for(e=t.length-1;e>=0;e--)s.attributes.push(t[e]),B.debug("Added attribute ",t[e].attributeName)},ER=function(t,n,s,o){let e={entityA:t,roleA:n,entityB:s,relSpec:o};D0.push(e),B.debug("Added new relationship :",e)},CR=()=>D0,SR=function(){Da={},D0=[],Br()},AR={Cardinality:xR,Identification:vR,parseDirective:kR,getConfig:()=>q().er,addEntity:Ym,addAttributes:TR,getEntities:wR,addRelationship:ER,getRelationships:CR,clear:SR,setAccTitle:Tr,getAccTitle:Dr,setAccDescription:Ir,getAccDescription:Mr,setDiagramTitle:un,getDiagramTitle:hn},Fn={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},LR=function(n,e){let t;n.append("defs").append("marker").attr("id",Fn.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),n.append("defs").append("marker").attr("id",Fn.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),t=n.append("defs").append("marker").attr("id",Fn.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),t.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),t.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),t=n.append("defs").append("marker").attr("id",Fn.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),t.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),t.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),n.append("defs").append("marker").attr("id",Fn.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),n.append("defs").append("marker").attr("id",Fn.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),t=n.append("defs").append("marker").attr("id",Fn.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),t.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),t.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),t=n.append("defs").append("marker").attr("id",Fn.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),t.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),t.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},On={ERMarkers:Fn,insertMarkers:LR},BR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function DR(e){return typeof e=="string"&&BR.test(e)}const tr=[];for(let e=0;e<256;++e)tr.push((e+256).toString(16).slice(1));function IR(e,t=0){return(tr[e[t+0]]+tr[e[t+1]]+tr[e[t+2]]+tr[e[t+3]]+"-"+tr[e[t+4]]+tr[e[t+5]]+"-"+tr[e[t+6]]+tr[e[t+7]]+"-"+tr[e[t+8]]+tr[e[t+9]]+"-"+tr[e[t+10]]+tr[e[t+11]]+tr[e[t+12]]+tr[e[t+13]]+tr[e[t+14]]+tr[e[t+15]]).toLowerCase()}function MR(n){if(!DR(n))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function NR(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}const RR="6ba7b810-9dad-11d1-80b4-00c04fd430c8",FR="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function OR(t,n,s){function e(o,t,i,a){var r;if(typeof o=="string"&&(o=NR(o)),typeof t=="string"&&(t=MR(t)),((r=t)===null||r===void 0?void 0:r.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let e=new Uint8Array(16+o.length);if(e.set(t),e.set(o,t.length),e=s(e),e[6]=e[6]&15|n,e[8]=e[8]&63|128,i){a=a||0;for(let t=0;t<16;++t)i[a+t]=e[t];return i}return IR(e)}try{e.name=t}catch{}return e.DNS=RR,e.URL=FR,e}function PR(s,e,t,n){switch(s){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function ju(e,t){return e<<t|e>>>32-t}function VR(t){const o=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const i=t.length/4+2,n=Math.ceil(i/16),s=new Array(n);for(let e=0;e<n;++e){const o=new Uint32Array(16);for(let n=0;n<16;++n)o[n]=t[e*64+n*4]<<24|t[e*64+n*4+1]<<16|t[e*64+n*4+2]<<8|t[e*64+n*4+3];s[e]=o}s[n-1][14]=(t.length-1)*8/Math.pow(2,32),s[n-1][14]=Math.floor(s[n-1][14]),s[n-1][15]=(t.length-1)*8&4294967295;for(let l=0;l<n;++l){const t=new Uint32Array(80);for(let e=0;e<16;++e)t[e]=s[l][e];for(let e=16;e<80;++e)t[e]=ju(t[e-3]^t[e-8]^t[e-14]^t[e-16],1);let i=e[0],a=e[1],r=e[2],c=e[3],d=e[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),s=ju(i,5)+PR(n,a,r,c)+d+o[n]+t[e]>>>0;d=c,c=r,r=ju(a,30)>>>0,a=i,i=s}e[0]=e[0]+i>>>0,e[1]=e[1]+a>>>0,e[2]=e[2]+r>>>0,e[3]=e[3]+c>>>0,e[4]=e[4]+d>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}const YR=OR("v5",80,VR),zR=YR,UR=/[^\dA-Za-z](\W)*/g;let We={},ro=new Map;const WR=function(e){const t=Object.keys(e);for(const n of t)We[n]=e[n]},HR=(n,l,m)=>{const e=We.entityPadding/3,t=We.entityPadding/3,r=We.fontSize*.85,o=l.node().getBBox(),v=[];let c=!1,f=!1,d=0,u=0,h=0,a=0,p=o.height+e*2,g=1;m.forEach(e=>{e.attributeKeyTypeList!==void 0&&e.attributeKeyTypeList.length>0&&(c=!0),e.attributeComment!==void 0&&(f=!0)}),m.forEach(o=>{const i=`${l.node().id}-attr-${g}`;let t=0;const _=ci(o.attributeType),m=n.append("text").classed("er entityLabel",!0).attr("id",`${i}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",q().fontFamily).style("font-size",r+"px").text(_),b=n.append("text").classed("er entityLabel",!0).attr("id",`${i}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",q().fontFamily).style("font-size",r+"px").text(o.attributeName),s={};s.tn=m,s.nn=b;const j=m.node().getBBox(),y=b.node().getBBox();if(d=Math.max(d,j.width),u=Math.max(u,y.width),t=Math.max(j.height,y.height),c){const c=o.attributeKeyTypeList!==void 0?o.attributeKeyTypeList.join(","):"",e=n.append("text").classed("er entityLabel",!0).attr("id",`${i}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",q().fontFamily).style("font-size",r+"px").text(c);s.kn=e;const a=e.node().getBBox();h=Math.max(h,a.width),t=Math.max(t,a.height)}if(f){const e=n.append("text").classed("er entityLabel",!0).attr("id",`${i}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",q().fontFamily).style("font-size",r+"px").text(o.attributeComment||"");s.cn=e;const c=e.node().getBBox();a=Math.max(a,c.width),t=Math.max(t,c.height)}s.height=t,v.push(s),p+=t+e*2,g+=1});let i=4;c&&(i+=2),f&&(i+=2);const b=d+u+h+a,s={width:Math.max(We.minEntityWidth,Math.max(o.width+We.entityPadding*2,b+t*i)),height:m.length>0?p:Math.max(We.minEntityHeight,o.height+We.entityPadding*2)};if(m.length>0){const p=Math.max(0,(s.width-b-t*i)/(i/2));l.attr("transform","translate("+s.width/2+","+(e+o.height/2)+")");let r=o.height+e*2,m="attributeBoxOdd";v.forEach(s=>{const i=r+e+s.height/2;s.tn.attr("transform","translate("+t+","+i+")");const l=n.insert("rect","#"+s.tn.node().id).classed(`er ${m}`,!0).attr("x",0).attr("y",r).attr("width",d+t*2+p).attr("height",s.height+e*2),g=parseFloat(l.attr("x"))+parseFloat(l.attr("width"));s.nn.attr("transform","translate("+(g+t)+","+i+")");const v=n.insert("rect","#"+s.nn.node().id).classed(`er ${m}`,!0).attr("x",g).attr("y",r).attr("width",u+t*2+p).attr("height",s.height+e*2);let o=parseFloat(v.attr("x"))+parseFloat(v.attr("width"));if(c){s.kn.attr("transform","translate("+(o+t)+","+i+")");const a=n.insert("rect","#"+s.kn.node().id).classed(`er ${m}`,!0).attr("x",o).attr("y",r).attr("width",h+t*2+p).attr("height",s.height+e*2);o=parseFloat(a.attr("x"))+parseFloat(a.attr("width"))}f&&(s.cn.attr("transform","translate("+(o+t)+","+i+")"),n.insert("rect","#"+s.cn.node().id).classed(`er ${m}`,"true").attr("x",o).attr("y",r).attr("width",a+t*2+p).attr("height",s.height+e*2)),r+=s.height+e*2,m=m==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else s.height=Math.max(We.minEntityHeight,p),l.attr("transform","translate("+s.width/2+","+s.height/2+")");return s},GR=function(n,t,s){const o=Object.keys(t);let e;return o.forEach(function(i){const o=ZR(i,"entity");ro.set(i,o);const a=n.append("g").attr("id",o);e=e===void 0?o:e;const r="text-"+o,l=a.append("text").classed("er entityLabel",!0).attr("id",r).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",q().fontFamily).style("font-size",We.fontSize+"px").text(i),{width:d,height:u}=HR(a,l,t[i].attributes),c=a.insert("rect","#"+r).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",d).attr("height",u).node().getBBox();s.setNode(o,{width:c.width,height:c.height,shape:"rect",id:o})}),e},qR=function(t,e){e.nodes().forEach(function(n){n!==void 0&&e.node(n)!==void 0&&t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )")})},zm=function(e){return(e.entityA+e.roleA+e.entityB).replace(/\s/g,"")},$R=function(e,t){return e.forEach(function(e){t.setEdge(ro.get(e.entityA),ro.get(e.entityB),{relationship:e},zm(e))}),e};let k2=0;const jR=function(a,s,u,l,n){k2++;const c=u.edge(ro.get(s.entityA),ro.get(s.entityB),zm(s)),h=js().x(function(e){return e.x}).y(function(e){return e.y}).curve(Is),t=a.insert("path","#"+l).classed("er relationshipLine",!0).attr("d",h(c.points)).style("stroke",We.stroke).style("fill","none");s.relSpec.relType===n.db.Identification.NON_IDENTIFYING&&t.attr("stroke-dasharray","8,8");let e="";switch(We.arrowMarkerAbsolute&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replace(/\(/g,"\\("),e=e.replace(/\)/g,"\\)")),s.relSpec.cardA){case n.db.Cardinality.ZERO_OR_ONE:t.attr("marker-end","url("+e+"#"+On.ERMarkers.ZERO_OR_ONE_END+")");break;case n.db.Cardinality.ZERO_OR_MORE:t.attr("marker-end","url("+e+"#"+On.ERMarkers.ZERO_OR_MORE_END+")");break;case n.db.Cardinality.ONE_OR_MORE:t.attr("marker-end","url("+e+"#"+On.ERMarkers.ONE_OR_MORE_END+")");break;case n.db.Cardinality.ONLY_ONE:t.attr("marker-end","url("+e+"#"+On.ERMarkers.ONLY_ONE_END+")");break}switch(s.relSpec.cardB){case n.db.Cardinality.ZERO_OR_ONE:t.attr("marker-start","url("+e+"#"+On.ERMarkers.ZERO_OR_ONE_START+")");break;case n.db.Cardinality.ZERO_OR_MORE:t.attr("marker-start","url("+e+"#"+On.ERMarkers.ZERO_OR_MORE_START+")");break;case n.db.Cardinality.ONE_OR_MORE:t.attr("marker-start","url("+e+"#"+On.ERMarkers.ONE_OR_MORE_START+")");break;case n.db.Cardinality.ONLY_ONE:t.attr("marker-start","url("+e+"#"+On.ERMarkers.ONLY_ONE_START+")");break}const d=t.node().getTotalLength(),i=t.node().getPointAtLength(d*.5),r="rel"+k2,o=a.append("text").classed("er relationshipLabel",!0).attr("id",r).attr("x",i.x).attr("y",i.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",q().fontFamily).style("font-size",We.fontSize+"px").text(s.roleA).node().getBBox();a.insert("rect","#"+r).classed("er relationshipLabelBox",!0).attr("x",i.x-o.width/2).attr("y",i.y-o.height/2).attr("width",o.width).attr("height",o.height)},XR=function(m,l,h,o){We=q().er,B.info("Drawing ER diagram");const r=q().securityLevel;let a;r==="sandbox"&&(a=_t("#i"+l));const e=_t(r==="sandbox"?a.nodes()[0].contentDocument.body:"body").select(`[id='${l}']`);On.insertMarkers(e,We);let t;t=new Ve({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:We.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const u=GR(e,o.db.getEntities(),t),d=$R(o.db.getRelationships(),t);ta(t),qR(e,t),d.forEach(function(n){jR(e,n,t,u,o)});const n=We.diagramPadding;jt.insertTitle(e,"entityTitleText",We.titleTopMargin,o.db.getDiagramTitle());const s=e.node().getBBox(),c=s.width+n*2,i=s.height+n*2;cn(e,i,c,We.useMaxWidth),e.attr("viewBox",`${s.x-n} ${s.y-n} ${c} ${i}`)},KR="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function ZR(e="",t=""){const n=e.replace(UR,"");return`${w2(t)}${w2(n)}${zR(e,KR)}`}function w2(e=""){return e.length>0?`${e}-`:""}const QR={setConf:WR,draw:XR};$h=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},eW=[1,9],eO=[1,7],eD=[1,6],ey=[1,8],em=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],eC=[2,10],eE=[1,20],eS=[1,21],eM=[1,22],eg=[1,23],ew=[1,30],eF=[1,32],eA=[1,33],e7=[1,34],e1=[1,62],e4=[1,48],el=[1,52],e_=[1,36],eT=[1,37],eb=[1,38],e9=[1,39],ev=[1,40],eo=[1,56],eh=[1,63],e3=[1,51],en=[1,53],es=[1,55],e0=[1,59],e2=[1,60],ej=[1,41],e5=[1,42],ez=[1,43],ex=[1,44],eu=[1,61],ed=[1,50],ec=[1,54],er=[1,57],ea=[1,58],ei=[1,49],eV=[1,66],ep=[1,71],D=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],$=[1,75],V=[1,74],U=[1,76],ek=[20,21,23,81,82],I=[1,99],i=[1,104],o=[1,107],s=[1,108],H=[1,101],n=[1,106],r=[1,109],P=[1,102],a=[1,114],t=[1,113],c=[1,103],l=[1,105],u=[1,110],h=[1,111],d=[1,112],m=[1,115],eH=[20,21,22,23,81,82],R=[20,21,22,23,53,81,82],N=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],z=[20,21,23],eI=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],eN=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],e6=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],k=[1,149],F=[1,157],M=[1,158],S=[1,159],A=[1,160],T=[1,144],E=[1,145],L=[1,141],x=[1,152],O=[1,153],w=[1,154],_=[1,155],y=[1,156],C=[1,161],j=[1,162],b=[1,147],v=[1,150],p=[1,146],g=[1,143],eR=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],eB=[1,165],ef=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],f=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],eU=[12,21,22,24],eK=[22,106],J=[1,250],Q=[1,245],et=[1,246],q=[1,254],W=[1,251],K=[1,248],ee=[1,247],Y=[1,249],G=[1,252],X=[1,253],Z=[1,255],e8=[1,273],e$=[20,21,23,106],B=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],eL={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(i,r,c,n,o,e){var t=e.length-1,s;switch(o){case 5:n.parseDirective("%%{","open_directive");break;case 6:n.parseDirective(e[t],"type_directive");break;case 7:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 8:n.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(e[t])||e[t].length>0)&&e[t-1].push(e[t]),this.$=e[t-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=e[t];break;case 19:n.setDirection("TB"),this.$="TB";break;case 20:n.setDirection(e[t-1]),this.$=e[t-1];break;case 35:this.$=e[t-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=n.addSubGraph(e[t-6],e[t-1],e[t-4]);break;case 42:this.$=n.addSubGraph(e[t-3],e[t-1],e[t-3]);break;case 43:this.$=n.addSubGraph(void 0,e[t-1],void 0);break;case 45:this.$=e[t].trim(),n.setAccTitle(this.$);break;case 46:case 47:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 51:n.addLink(e[t-2].stmt,e[t],e[t-1]),this.$={stmt:e[t],nodes:e[t].concat(e[t-2].nodes)};break;case 52:n.addLink(e[t-3].stmt,e[t-1],e[t-2]),this.$={stmt:e[t-1],nodes:e[t-1].concat(e[t-3].nodes)};break;case 53:this.$={stmt:e[t-1],nodes:e[t-1]};break;case 54:this.$={stmt:e[t],nodes:e[t]};break;case 55:this.$=[e[t]];break;case 56:this.$=e[t-4].concat(e[t]);break;case 57:this.$=[e[t-2]],n.setClass(e[t-2],e[t]);break;case 58:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"square");break;case 59:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"doublecircle");break;case 60:this.$=e[t-5],n.addVertex(e[t-5],e[t-2],"circle");break;case 61:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"ellipse");break;case 62:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"stadium");break;case 63:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"subroutine");break;case 64:this.$=e[t-7],n.addVertex(e[t-7],e[t-1],"rect",void 0,void 0,void 0,Object.fromEntries([[e[t-5],e[t-3]]]));break;case 65:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"cylinder");break;case 66:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"round");break;case 67:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"diamond");break;case 68:this.$=e[t-5],n.addVertex(e[t-5],e[t-2],"hexagon");break;case 69:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"odd");break;case 70:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"trapezoid");break;case 71:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"inv_trapezoid");break;case 72:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"lean_right");break;case 73:this.$=e[t-3],n.addVertex(e[t-3],e[t-1],"lean_left");break;case 74:this.$=e[t],n.addVertex(e[t]);break;case 75:e[t-1].text=e[t],this.$=e[t-1];break;case 76:case 77:e[t-2].text=e[t-1],this.$=e[t-2];break;case 78:this.$=e[t];break;case 79:s=n.destructLink(e[t],e[t-2]),this.$={type:s.type,stroke:s.stroke,length:s.length,text:e[t-1]};break;case 80:s=n.destructLink(e[t]),this.$={type:s.type,stroke:s.stroke,length:s.length};break;case 81:this.$=e[t-1];break;case 83:case 97:case 153:this.$=e[t-1]+""+e[t];break;case 98:case 99:this.$=e[t-4],n.addClass(e[t-2],e[t]);break;case 100:this.$=e[t-4],n.setClass(e[t-2],e[t]);break;case 101:case 109:this.$=e[t-1],n.setClickEvent(e[t-1],e[t]);break;case 102:case 110:this.$=e[t-3],n.setClickEvent(e[t-3],e[t-2]),n.setTooltip(e[t-3],e[t]);break;case 103:this.$=e[t-2],n.setClickEvent(e[t-2],e[t-1],e[t]);break;case 104:this.$=e[t-4],n.setClickEvent(e[t-4],e[t-3],e[t-2]),n.setTooltip(e[t-4],e[t]);break;case 105:case 111:this.$=e[t-1],n.setLink(e[t-1],e[t]);break;case 106:case 112:this.$=e[t-3],n.setLink(e[t-3],e[t-2]),n.setTooltip(e[t-3],e[t]);break;case 107:case 113:this.$=e[t-3],n.setLink(e[t-3],e[t-2],e[t]);break;case 108:case 114:this.$=e[t-5],n.setLink(e[t-5],e[t-4],e[t]),n.setTooltip(e[t-5],e[t-2]);break;case 115:this.$=e[t-4],n.addVertex(e[t-2],void 0,void 0,e[t]);break;case 116:case 118:this.$=e[t-4],n.updateLink(e[t-2],e[t]);break;case 117:this.$=e[t-4],n.updateLink([e[t-2]],e[t]);break;case 119:this.$=e[t-8],n.updateLinkInterpolate([e[t-6]],e[t-2]),n.updateLink([e[t-6]],e[t]);break;case 120:this.$=e[t-8],n.updateLinkInterpolate(e[t-6],e[t-2]),n.updateLink(e[t-6],e[t]);break;case 121:this.$=e[t-6],n.updateLinkInterpolate([e[t-4]],e[t]);break;case 122:this.$=e[t-6],n.updateLinkInterpolate(e[t-4],e[t]);break;case 123:case 125:this.$=[e[t]];break;case 124:case 126:e[t-2].push(e[t]),this.$=e[t-2];break;case 128:this.$=e[t-1]+e[t];break;case 150:this.$=e[t];break;case 151:this.$=e[t-1]+""+e[t];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:eW,16:4,21:eO,22:eD,24:ey},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:eW,16:4,21:eO,22:eD,24:ey},e(em,eC,{17:11}),{7:12,13:[1,13]},{16:14,21:eO,22:eD,24:ey},{16:15,21:eO,22:eD,24:ey},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:eE,21:eS,22:eM,23:eg,32:24,33:25,34:26,35:27,36:28,37:29,38:ew,43:31,44:eF,46:eA,48:e7,50:35,51:45,52:e1,54:46,66:e4,67:el,86:e_,87:eT,88:eb,89:e9,90:ev,91:eo,95:eh,105:e3,106:en,109:es,111:e0,112:e2,116:47,118:ej,119:e5,120:ez,121:ex,122:eu,123:ed,124:ec,125:er,126:ea,127:ei},{8:64,10:[1,65],15:eV},e([10,15],[2,6]),e(em,[2,17]),e(em,[2,18]),e(em,[2,19]),{20:[1,68],21:[1,69],22:ep,27:67,30:70},e(D,[2,11]),e(D,[2,12]),e(D,[2,13]),e(D,[2,14]),e(D,[2,15]),e(D,[2,16]),{9:72,20:$,21:V,23:U,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:$,21:V,23:U},{9:81,20:$,21:V,23:U},{9:82,20:$,21:V,23:U},{9:83,20:$,21:V,23:U},{9:84,20:$,21:V,23:U},{9:86,20:$,21:V,22:[1,85],23:U},e(D,[2,44]),{45:[1,87]},{47:[1,88]},e(D,[2,47]),e(ek,[2,54],{30:89,22:ep}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:I,52:i,66:o,67:s,84:[1,97],91:H,97:96,98:[1,94],100:[1,95],105:n,106:r,109:P,111:a,112:t,115:100,117:98,122:c,123:l,124:u,125:h,126:d,127:m},e(D,[2,158]),e(D,[2,159]),e(D,[2,160]),e(D,[2,161]),e(eH,[2,55],{53:[1,116]}),e(R,[2,74],{116:129,40:[1,117],52:e1,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:e4,67:el,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:eo,95:eh,105:e3,106:en,109:es,111:e0,112:e2,122:eu,123:ed,124:ec,125:er,126:ea,127:ei}),e(N,[2,150]),e(N,[2,175]),e(N,[2,176]),e(N,[2,177]),e(N,[2,178]),e(N,[2,179]),e(N,[2,180]),e(N,[2,181]),e(N,[2,182]),e(N,[2,183]),e(N,[2,184]),e(N,[2,185]),e(N,[2,186]),e(N,[2,187]),e(N,[2,188]),e(N,[2,189]),e(N,[2,190]),{9:130,20:$,21:V,23:U},{11:131,14:[1,132]},e(z,[2,8]),e(em,[2,20]),e(em,[2,26]),e(em,[2,27]),{21:[1,133]},e(eI,[2,34],{30:134,22:ep}),e(D,[2,35]),{50:135,51:45,52:e1,54:46,66:e4,67:el,91:eo,95:eh,105:e3,106:en,109:es,111:e0,112:e2,116:47,122:eu,123:ed,124:ec,125:er,126:ea,127:ei},e(eN,[2,48]),e(eN,[2,49]),e(eN,[2,50]),e(e6,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:k,24:F,26:M,38:S,39:139,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},e([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),e(D,[2,36]),e(D,[2,37]),e(D,[2,38]),e(D,[2,39]),e(D,[2,40]),{22:k,24:F,26:M,38:S,39:163,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},e(eR,eC,{17:164}),e(D,[2,45]),e(D,[2,46]),e(ek,[2,53],{52:eB}),{26:I,52:i,66:o,67:s,91:H,97:166,102:[1,167],105:n,106:r,109:P,111:a,112:t,115:100,117:98,122:c,123:l,124:u,125:h,126:d,127:m},{95:[1,168],103:169,105:[1,170]},{26:I,52:i,66:o,67:s,91:H,95:[1,171],97:172,105:n,106:r,109:P,111:a,112:t,115:100,117:98,122:c,123:l,124:u,125:h,126:d,127:m},{26:I,52:i,66:o,67:s,91:H,97:173,105:n,106:r,109:P,111:a,112:t,115:100,117:98,122:c,123:l,124:u,125:h,126:d,127:m},e(z,[2,101],{22:[1,174],99:[1,175]}),e(z,[2,105],{22:[1,176]}),e(z,[2,109],{115:100,117:178,22:[1,177],26:I,52:i,66:o,67:s,91:H,105:n,106:r,109:P,111:a,112:t,122:c,123:l,124:u,125:h,126:d,127:m}),e(z,[2,111],{22:[1,179]}),e(ef,[2,152]),e(ef,[2,154]),e(ef,[2,155]),e(ef,[2,156]),e(ef,[2,157]),e(f,[2,162]),e(f,[2,163]),e(f,[2,164]),e(f,[2,165]),e(f,[2,166]),e(f,[2,167]),e(f,[2,168]),e(f,[2,169]),e(f,[2,170]),e(f,[2,171]),e(f,[2,172]),e(f,[2,173]),e(f,[2,174]),{52:e1,54:180,66:e4,67:el,91:eo,95:eh,105:e3,106:en,109:es,111:e0,112:e2,116:47,122:eu,123:ed,124:ec,125:er,126:ea,127:ei},{22:k,24:F,26:M,38:S,39:181,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:182,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:184,42:A,52:i,57:[1,183],66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:185,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:186,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:187,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{66:[1,188]},{22:k,24:F,26:M,38:S,39:189,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:190,42:A,52:i,66:o,67:s,71:[1,191],73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:192,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:193,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:194,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},e(N,[2,151]),e(eU,[2,3]),{8:195,15:eV},{15:[2,7]},e(em,[2,28]),e(eI,[2,33]),e(ek,[2,51],{30:196,22:ep}),e(e6,[2,75],{22:[1,197]}),{22:[1,198]},{22:k,24:F,26:M,38:S,39:199,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,42:A,52:i,66:o,67:s,73:T,81:E,82:[1,200],83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},e(f,[2,82]),e(f,[2,84]),e(f,[2,140]),e(f,[2,141]),e(f,[2,142]),e(f,[2,143]),e(f,[2,144]),e(f,[2,145]),e(f,[2,146]),e(f,[2,147]),e(f,[2,148]),e(f,[2,149]),e(f,[2,85]),e(f,[2,86]),e(f,[2,87]),e(f,[2,88]),e(f,[2,89]),e(f,[2,90]),e(f,[2,91]),e(f,[2,92]),e(f,[2,93]),e(f,[2,94]),e(f,[2,95]),{9:203,20:$,21:V,22:k,23:U,24:F,26:M,38:S,40:[1,202],42:A,52:i,66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{18:18,19:19,20:eE,21:eS,22:eM,23:eg,32:24,33:25,34:26,35:27,36:28,37:29,38:ew,42:[1,204],43:31,44:eF,46:eA,48:e7,50:35,51:45,52:e1,54:46,66:e4,67:el,86:e_,87:eT,88:eb,89:e9,90:ev,91:eo,95:eh,105:e3,106:en,109:es,111:e0,112:e2,116:47,118:ej,119:e5,120:ez,121:ex,122:eu,123:ed,124:ec,125:er,126:ea,127:ei},{22:ep,30:205},{22:[1,206],26:I,52:i,66:o,67:s,91:H,105:n,106:r,109:P,111:a,112:t,115:100,117:178,122:c,123:l,124:u,125:h,126:d,127:m},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},e(eK,[2,123]),{22:[1,211]},{22:[1,212],26:I,52:i,66:o,67:s,91:H,105:n,106:r,109:P,111:a,112:t,115:100,117:178,122:c,123:l,124:u,125:h,126:d,127:m},{22:[1,213],26:I,52:i,66:o,67:s,91:H,105:n,106:r,109:P,111:a,112:t,115:100,117:178,122:c,123:l,124:u,125:h,126:d,127:m},{84:[1,214]},e(z,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},e(ef,[2,153]),{84:[1,219],101:[1,220]},e(eH,[2,57],{116:129,52:e1,66:e4,67:el,91:eo,95:eh,105:e3,106:en,109:es,111:e0,112:e2,122:eu,123:ed,124:ec,125:er,126:ea,127:ei}),{22:k,24:F,26:M,38:S,41:[1,221],42:A,52:i,66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,42:A,52:i,56:[1,222],66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:223,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,42:A,52:i,58:[1,224],66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,42:A,52:i,60:[1,225],66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,42:A,52:i,62:[1,226],66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,42:A,52:i,64:[1,227],66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{67:[1,228]},{22:k,24:F,26:M,38:S,42:A,52:i,66:o,67:s,70:[1,229],73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,42:A,52:i,66:o,67:s,72:[1,230],73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,39:231,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,41:[1,232],42:A,52:i,66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,42:A,52:i,66:o,67:s,73:T,75:[1,233],77:[1,234],81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{22:k,24:F,26:M,38:S,42:A,52:i,66:o,67:s,73:T,75:[1,236],77:[1,235],81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{9:237,20:$,21:V,23:U},e(ek,[2,52],{52:eB}),e(e6,[2,77]),e(e6,[2,76]),{22:k,24:F,26:M,38:S,42:A,52:i,66:o,67:s,68:[1,238],73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},e(e6,[2,79]),e(f,[2,83]),{22:k,24:F,26:M,38:S,39:239,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},e(eR,eC,{17:240}),e(D,[2,43]),{51:241,52:e1,54:46,66:e4,67:el,91:eo,95:eh,105:e3,106:en,109:es,111:e0,112:e2,116:47,122:eu,123:ed,124:ec,125:er,126:ea,127:ei},{22:J,66:Q,67:et,86:q,96:242,102:W,105:K,107:243,108:244,109:ee,110:Y,111:G,112:X,113:Z},{22:J,66:Q,67:et,86:q,96:256,102:W,105:K,107:243,108:244,109:ee,110:Y,111:G,112:X,113:Z},{22:J,66:Q,67:et,86:q,96:257,102:W,104:[1,258],105:K,107:243,108:244,109:ee,110:Y,111:G,112:X,113:Z},{22:J,66:Q,67:et,86:q,96:259,102:W,104:[1,260],105:K,107:243,108:244,109:ee,110:Y,111:G,112:X,113:Z},{105:[1,261]},{22:J,66:Q,67:et,86:q,96:262,102:W,105:K,107:243,108:244,109:ee,110:Y,111:G,112:X,113:Z},{22:J,66:Q,67:et,86:q,96:263,102:W,105:K,107:243,108:244,109:ee,110:Y,111:G,112:X,113:Z},{26:I,52:i,66:o,67:s,91:H,97:264,105:n,106:r,109:P,111:a,112:t,115:100,117:98,122:c,123:l,124:u,125:h,126:d,127:m},e(z,[2,102]),{84:[1,265]},e(z,[2,106],{22:[1,266]}),e(z,[2,107]),e(z,[2,110]),e(z,[2,112],{22:[1,267]}),e(z,[2,113]),e(R,[2,58]),e(R,[2,59]),{22:k,24:F,26:M,38:S,42:A,52:i,58:[1,268],66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},e(R,[2,66]),e(R,[2,61]),e(R,[2,62]),e(R,[2,63]),{66:[1,269]},e(R,[2,65]),e(R,[2,67]),{22:k,24:F,26:M,38:S,42:A,52:i,66:o,67:s,72:[1,270],73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},e(R,[2,69]),e(R,[2,70]),e(R,[2,72]),e(R,[2,71]),e(R,[2,73]),e(eU,[2,4]),e([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:k,24:F,26:M,38:S,41:[1,271],42:A,52:i,66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{18:18,19:19,20:eE,21:eS,22:eM,23:eg,32:24,33:25,34:26,35:27,36:28,37:29,38:ew,42:[1,272],43:31,44:eF,46:eA,48:e7,50:35,51:45,52:e1,54:46,66:e4,67:el,86:e_,87:eT,88:eb,89:e9,90:ev,91:eo,95:eh,105:e3,106:en,109:es,111:e0,112:e2,116:47,118:ej,119:e5,120:ez,121:ex,122:eu,123:ed,124:ec,125:er,126:ea,127:ei},e(eH,[2,56]),e(z,[2,115],{106:e8}),e(e$,[2,125],{108:274,22:J,66:Q,67:et,86:q,102:W,105:K,109:ee,110:Y,111:G,112:X,113:Z}),e(B,[2,127]),e(B,[2,129]),e(B,[2,130]),e(B,[2,131]),e(B,[2,132]),e(B,[2,133]),e(B,[2,134]),e(B,[2,135]),e(B,[2,136]),e(B,[2,137]),e(B,[2,138]),e(B,[2,139]),e(z,[2,116],{106:e8}),e(z,[2,117],{106:e8}),{22:[1,275]},e(z,[2,118],{106:e8}),{22:[1,276]},e(eK,[2,124]),e(z,[2,98],{106:e8}),e(z,[2,99],{106:e8}),e(z,[2,100],{115:100,117:178,26:I,52:i,66:o,67:s,91:H,105:n,106:r,109:P,111:a,112:t,122:c,123:l,124:u,125:h,126:d,127:m}),e(z,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:$,21:V,23:U},e(D,[2,42]),{22:J,66:Q,67:et,86:q,102:W,105:K,107:283,108:244,109:ee,110:Y,111:G,112:X,113:Z},e(B,[2,128]),{26:I,52:i,66:o,67:s,91:H,97:284,105:n,106:r,109:P,111:a,112:t,115:100,117:98,122:c,123:l,124:u,125:h,126:d,127:m},{26:I,52:i,66:o,67:s,91:H,97:285,105:n,106:r,109:P,111:a,112:t,115:100,117:98,122:c,123:l,124:u,125:h,126:d,127:m},e(z,[2,108]),e(z,[2,114]),e(R,[2,60]),{22:k,24:F,26:M,38:S,39:286,42:A,52:i,66:o,67:s,73:T,81:E,83:140,84:L,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},e(R,[2,68]),e(eR,eC,{17:287}),e(e$,[2,126],{108:274,22:J,66:Q,67:et,86:q,102:W,105:K,109:ee,110:Y,111:G,112:X,113:Z}),e(z,[2,121],{115:100,117:178,22:[1,288],26:I,52:i,66:o,67:s,91:H,105:n,106:r,109:P,111:a,112:t,122:c,123:l,124:u,125:h,126:d,127:m}),e(z,[2,122],{115:100,117:178,22:[1,289],26:I,52:i,66:o,67:s,91:H,105:n,106:r,109:P,111:a,112:t,122:c,123:l,124:u,125:h,126:d,127:m}),{22:k,24:F,26:M,38:S,41:[1,290],42:A,52:i,66:o,67:s,73:T,81:E,83:201,85:151,86:x,87:O,88:w,89:_,90:y,91:C,92:j,94:142,95:b,105:n,106:r,109:v,111:a,112:t,113:p,114:g,115:148,122:c,123:l,124:u,125:h,126:d,127:m},{18:18,19:19,20:eE,21:eS,22:eM,23:eg,32:24,33:25,34:26,35:27,36:28,37:29,38:ew,42:[1,291],43:31,44:eF,46:eA,48:e7,50:35,51:45,52:e1,54:46,66:e4,67:el,86:e_,87:eT,88:eb,89:e9,90:ev,91:eo,95:eh,105:e3,106:en,109:es,111:e0,112:e2,116:47,118:ej,119:e5,120:ez,121:ex,122:eu,123:ed,124:ec,125:er,126:ea,127:ei},{22:J,66:Q,67:et,86:q,96:292,102:W,105:K,107:243,108:244,109:ee,110:Y,111:G,112:X,113:Z},{22:J,66:Q,67:et,86:q,96:293,102:W,105:K,107:243,108:244,109:ee,110:Y,111:G,112:X,113:Z},e(R,[2,64]),e(D,[2,41]),e(z,[2,119],{106:e8}),e(z,[2,120],{106:e8})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},eq=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,n,t){switch(t){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return e.lex.firstGraph()&&this.begin("dir"),24;case 36:return e.lex.firstGraph()&&this.begin("dir"),24;case 37:return e.lex.firstGraph()&&this.begin("dir"),24;case 38:return 38;case 39:return 42;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return 101;case 44:return this.popState(),25;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return this.popState(),26;case 55:return 118;case 56:return 119;case 57:return 120;case 58:return 121;case 59:return 105;case 60:return 111;case 61:return 53;case 62:return 67;case 63:return 52;case 64:return 20;case 65:return 106;case 66:return 126;case 67:return 82;case 68:return 82;case 69:return 82;case 70:return 81;case 71:return 81;case 72:return 81;case 73:return 59;case 74:return 60;case 75:return 61;case 76:return 62;case 77:return 63;case 78:return 64;case 79:return 65;case 80:return 69;case 81:return 70;case 82:return 55;case 83:return 56;case 84:return 109;case 85:return 112;case 86:return 127;case 87:return 124;case 88:return 113;case 89:return 125;case 90:return 125;case 91:return 114;case 92:return 73;case 93:return 92;case 94:return"SEP";case 95:return 91;case 96:return 66;case 97:return 75;case 98:return 74;case 99:return 77;case 100:return 76;case 101:return 122;case 102:return 123;case 103:return 68;case 104:return 57;case 105:return 58;case 106:return 40;case 107:return 41;case 108:return 71;case 109:return 72;case 110:return 133;case 111:return 21;case 112:return 22;case 113:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[}])/,/^(?:[^}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[44,45,46,47,48,49,50,51,52,53,54],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],inclusive:!0}}};return e}();eL.lexer=eq;function eP(){this.yy={}}return eP.prototype=eL,eL.Parser=eP,new eP}(),$h.parser=$h;const T2=$h,JR=(s,e)=>{var t,n;return!(((t=e==null?void 0:e.flowchart)==null?void 0:t.defaultRenderer)==="dagre-wrapper"||((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="elk")&&s.match(/^\s*graph/)!==null},tF=(t,e)=>{var n,s;return!(((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-d3"||((s=e==null?void 0:e.flowchart)==null?void 0:s.defaultRenderer)==="elk")&&(t.match(/^\s*graph/)!==null||t.match(/^\s*flowchart/)!==null)},eF="flowchart-";let E2=0,I0=q(),_e={},Gi=[],ys={},Qn=[],lc={},M0={},cl=0,jh=!0,Pr,Jc,tu=[];const eu=e=>Xt.sanitizeText(e,I0),Um=function(e,t,n){xe.parseDirective(this,e,t,n)},_o=function(e){const t=Object.keys(_e);for(const n of t)if(_e[n].id===e)return _e[n].domId;return e},Wm=function(a,r,c,s,o,i,n={}){let t,e=a;e!==void 0&&e.trim().length!==0&&(_e[e]===void 0&&(_e[e]={id:e,domId:eF+e+"-"+E2,styles:[],classes:[]}),E2++,r!==void 0?(I0=q(),t=eu(r.trim()),t[0]==='"'&&t[t.length-1]==='"'&&(t=t.substring(1,t.length-1)),_e[e].text=t):_e[e].text===void 0&&(_e[e].text=a),c!==void 0&&(_e[e].type=c),s!=null&&s.forEach(function(t){_e[e].styles.push(t)}),o!=null&&o.forEach(function(t){_e[e].classes.push(t)}),i!==void 0&&(_e[e].dir=i),_e[e].props===void 0?_e[e].props=n:n!==void 0&&Object.assign(_e[e].props,n))},Hm=function(s,o,t,n){const e={start:s,end:o,type:void 0,text:""};n=t.text,n!==void 0&&(e.text=eu(n.trim()),e.text[0]==='"'&&e.text[e.text.length-1]==='"'&&(e.text=e.text.substring(1,e.text.length-1))),t!==void 0&&(e.type=t.type,e.stroke=t.stroke,e.length=t.length),Gi.push(e)},Gm=function(n,s,o,i){let e,t;for(e=0;e<n.length;e++)for(t=0;t<s.length;t++)Hm(n[e],s[t],o,i)},qm=function(t,e){t.forEach(function(t){t==="default"?Gi.defaultInterpolate=e:Gi[t].interpolate=e})},$m=function(t,e){t.forEach(function(t){t==="default"?Gi.defaultStyle=e:(jt.isSubstringInArray("fill",e)===-1&&e.push("fill:none"),Gi[t].style=e)})},jm=function(e,t){ys[e]===void 0&&(ys[e]={id:e,styles:[],textStyles:[]}),t!=null&&t.forEach(function(t){if(t.match("color")){const n=t.replace("fill","bgFill").replace("color","fill");ys[e].textStyles.push(n)}ys[e].styles.push(t)})},Xm=function(e){Pr=e,Pr.match(/.*</)&&(Pr="RL"),Pr.match(/.*\^/)&&(Pr="BT"),Pr.match(/.*>/)&&(Pr="LR"),Pr.match(/.*v/)&&(Pr="TB"),Pr==="TD"&&(Pr="TB")},ru=function(t,e){t.split(",").forEach(function(n){let t=n;_e[t]!==void 0&&_e[t].classes.push(e),lc[t]!==void 0&&lc[t].classes.push(e)})},rF=function(t,e){t.split(",").forEach(function(t){e!==void 0&&(M0[Jc==="gen-1"?_o(t):t]=eu(e))})},nF=function(t,n,s){let o=_o(t);if(q().securityLevel!=="loose"||n===void 0)return;let e=[];if(typeof s=="string"){e=s.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<e.length;n++){let t=e[n].trim();t.charAt(0)==='"'&&t.charAt(t.length-1)==='"'&&(t=t.substr(1,t.length-2)),e[n]=t}}e.length===0&&e.push(t),_e[t]!==void 0&&(_e[t].haveCallback=!0,tu.push(function(){const t=document.querySelector(`[id="${o}"]`);t!==null&&t.addEventListener("click",function(){jt.runFunc(n,...e)},!1)}))},Km=function(e,t,n){e.split(",").forEach(function(e){_e[e]!==void 0&&(_e[e].link=jt.formatUrl(t,I0),_e[e].linkTarget=n)}),ru(e,"clickable")},Zm=function(e){return M0[e]},Qm=function(e,t,n){e.split(",").forEach(function(e){nF(e,t,n)}),ru(e,"clickable")},Jm=function(e){tu.forEach(function(t){t(e)})},t3=function(){return Pr.trim()},e3=function(){return _e},r3=function(){return Gi},n3=function(){return ys},i3=function(t){let e=_t(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=_t("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),_t(t).select("svg").selectAll("g.node").on("mouseover",function(){const n=_t(this);if(n.attr("title")===null)return;const t=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(n.attr("title")).style("left",window.scrollX+t.left+(t.right-t.left)/2+"px").style("top",window.scrollY+t.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),_t(this).classed("hover",!1)})};tu.push(i3);const s3=function(e="gen-1"){_e={},ys={},Gi=[],tu=[i3],Qn=[],lc={},cl=0,M0=[],jh=!0,Jc=e,Br()},a3=e=>{Jc=e||"gen-2"},o3=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},l3=function(i,a,o){let n=i.trim(),s=o;i===o&&o.match(/\s/)&&(n=void 0);function r(s){const e={boolean:{},number:{},string:{}},t=[];let n;return{nodeList:s.filter(function(s){const o=typeof s;return s.stmt&&s.stmt==="dir"?(n=s.value,!1):s.trim()!==""&&(o in e?!e[o].hasOwnProperty(s)&&(e[o][s]=!0):!t.includes(s)&&t.push(s))}),dir:n}}let e=[];const{nodeList:c,dir:l}=r(e.concat.apply(e,a));if(e=c,Jc==="gen-1")for(let t=0;t<e.length;t++)e[t]=_o(e[t]);n=n||"subGraph"+cl,s=s||"",s=eu(s),cl=cl+1;const t={id:n,nodes:e,title:s.trim(),classes:[],dir:l};return B.info("Adding",t.id,t.nodes,t.dir),t.nodes=m3(t,Qn).nodes,Qn.push(t),lc[n]=t,n},iF=function(e){for(const[t,n]of Qn.entries())if(n.id===e)return t;return-1};let va=-1;const c3=[],u3=function(s,n){const o=Qn[n].nodes;if(va=va+1,va>2e3)return;if(c3[va]=n,Qn[n].id===s)return{result:!0,count:0};let e=0,t=1;for(;e<o.length;){const n=iF(o[e]);if(n>=0){const e=u3(s,n);if(e.result)return{result:!0,count:t+e.count};t=t+e.count}e=e+1}return{result:!1,count:t}},h3=function(e){return c3[e]},f3=function(){va=-1,Qn.length>0&&u3("none",Qn.length-1)},d3=function(){return Qn},p3=()=>!!jh&&(jh=!1,!0),sF=s=>{let e=s.trim(),t="arrow_open";switch(e[0]){case"<":t="arrow_point",e=e.slice(1);break;case"x":t="arrow_cross",e=e.slice(1);break;case"o":t="arrow_circle",e=e.slice(1);break}let n="normal";return e.includes("=")&&(n="thick"),e.includes(".")&&(n="dotted"),{type:t,stroke:n}},aF=(n,e)=>{const s=e.length;let t=0;for(let o=0;o<s;++o)e[o]===n&&++t;return t},oF=a=>{const n=a.trim();let t=n.slice(0,-1),e="arrow_open";switch(n.slice(-1)){case"x":e="arrow_cross",n[0]==="x"&&(e="double_"+e,t=t.slice(1));break;case">":e="arrow_point",n[0]==="<"&&(e="double_"+e,t=t.slice(1));break;case"o":e="arrow_circle",n[0]==="o"&&(e="double_"+e,t=t.slice(1));break}let s="normal",i=t.length-1;t[0]==="="&&(s="thick");let o=aF(".",t);return o&&(s="dotted",i=o),{type:e,stroke:s,length:i}},g3=(s,n)=>{const t=oF(s);let e;if(n){if(e=sF(n),e.stroke!==t.stroke)return{type:"INVALID",stroke:"INVALID"};if(e.type==="arrow_open")e.type=t.type;else{if(e.type!==t.type)return{type:"INVALID",stroke:"INVALID"};e.type="double_"+e.type}return e.type==="double_arrow"&&(e.type="double_arrow_point"),e.length=t.length,e}return t},y3=(t,n)=>{let e=!1;return t.forEach(t=>{t.nodes.indexOf(n)>=0&&(e=!0)}),e},m3=(e,n)=>{const t=[];return e.nodes.forEach((s,o)=>{y3(n,s)||t.push(e.nodes[o])}),{nodes:t}},b3={firstGraph:p3},gn={parseDirective:Um,defaultConfig:()=>Fs.flowchart,setAccTitle:Tr,getAccTitle:Dr,getAccDescription:Mr,setAccDescription:Ir,addVertex:Wm,lookUpDomId:_o,addLink:Gm,updateLinkInterpolate:qm,updateLink:$m,addClass:jm,setDirection:Xm,setClass:ru,setTooltip:rF,getTooltip:Zm,setClickEvent:Qm,setLink:Km,bindFunctions:Jm,getDirection:t3,getVertices:e3,getEdges:r3,getClasses:n3,clear:s3,setGen:a3,defaultStyle:o3,addSubGraph:l3,getDepthFirstPos:h3,indexNodes:f3,getSubGraphs:d3,destructLink:g3,lex:b3,exists:y3,makeUniq:m3,setDiagramTitle:un,getDiagramTitle:hn},fU=Object.freeze(Object.defineProperty({__proto__:null,addClass:jm,addLink:Gm,addSingleLink:Hm,addSubGraph:l3,addVertex:Wm,bindFunctions:Jm,clear:s3,default:gn,defaultStyle:o3,destructLink:g3,firstGraph:p3,getClasses:n3,getDepthFirstPos:h3,getDirection:t3,getEdges:r3,getSubGraphs:d3,getTooltip:Zm,getVertices:e3,indexNodes:f3,lex:b3,lookUpDomId:_o,parseDirective:Um,setClass:ru,setClickEvent:Qm,setDirection:Xm,setGen:a3,setLink:Km,updateLink:$m,updateLinkInterpolate:qm},Symbol.toStringTag,{value:"Module"}));function _3(e,t){return!!e.children(t).length}function x3(e){return Xu(e.v)+":"+Xu(e.w)+":"+Xu(e.name)}lF=/:/g;function Xu(e){return e?String(e).replace(lF,"\\:"):""}function En(t,e){e&&t.attr("style",e)}function v3(e,t,n){t&&e.attr("class",t).attr("class",n+" "+e.attr("class"))}function sn(e,s){var t=s.graph(),n;if(Hy(t))if(n=t.transition,Ns(n))return n(e);return e}Xh={normal:uF,vee:hF,undirected:fF};function cF(e){Xh=e}function uF(s,o,e,t){var i=s.append("marker").attr("id",o).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),n=i.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");En(n,e[t+"Style"]),e[t+"Class"]&&n.attr("class",e[t+"Class"])}function hF(s,o,e,t){var i=s.append("marker").attr("id",o).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),n=i.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");En(n,e[t+"Style"]),e[t+"Class"]&&n.attr("class",e[t+"Class"])}function fF(s,o,e,t){var i=s.append("marker").attr("id",o).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),n=i.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");En(n,e[t+"Style"]),e[t+"Class"]&&n.attr("class",e[t+"Class"])}function N0(i,s){var n=i.append("foreignObject").attr("width","100000"),e=n.append("xhtml:div"),t,o;switch(e.attr("xmlns","http://www.w3.org/1999/xhtml"),t=s.label,typeof t){case"function":e.insert(t);break;case"object":e.insert(function(){return t});break;default:e.html(t)}return En(e,s.labelStyle),e.style("display","inline-block"),e.style("white-space","nowrap"),o=e.node().getBoundingClientRect(),n.attr("width",o.width).attr("height",o.height),n}function dF(n,t){var e=n;return e.node().appendChild(t.label),En(e,t.labelStyle),e}function pF(o,n){for(var e=o.append("text"),s=gF(n.label).split(`
`),t=0;t<s.length;t++)e.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(s[t]);return En(e,n.labelStyle),e}function gF(o){for(var t="",n=!1,e,s=0;s<o.length;++s)if(e=o[s],n){switch(e){case"n":t+=`
`;break;default:t+=e}n=!1}else e==="\\"?n=!0:t+=e;return t}function R0(a,e,o){var i=e.label,t=a.append("g"),s,n;switch(e.labelType==="svg"?dF(t,e):typeof i!="string"||e.labelType==="html"?N0(t,e):pF(t,e),s=t.node().getBBox(),o){case"top":n=-e.height/2;break;case"bottom":n=e.height/2-s.height;break;default:n=-s.height/2}return t.attr("transform","translate("+-s.width/2+","+n+")"),t}Kh=function(n,t){var s=t.nodes().filter(function(e){return _3(t,e)}),e=n.selectAll("g.cluster").data(s,function(e){return e}),o;return sn(e.exit(),t).style("opacity",0).remove(),o=e.enter().append("g").attr("class","cluster").attr("id",function(e){var n=t.node(e);return n.id}).style("opacity",0).each(function(n){var e=t.node(n),s=_t(this),o;_t(this).append("rect"),o=s.append("g").attr("class","label"),R0(o,e,e.clusterLabelPos)}),e=e.merge(o),e=sn(e,t).style("opacity",1),e.selectAll("rect").each(function(e){var n=t.node(e),s=_t(this);En(s,n.style)}),e};function yF(e){Kh=e}let Zh=function(s,t){var e=s.selectAll("g.edgeLabel").data(t.edges(),function(e){return x3(e)}).classed("update",!0),n;return e.exit().remove(),e.enter().append("g").classed("edgeLabel",!0).style("opacity",0),e=s.selectAll("g.edgeLabel"),e.each(function(n){s=_t(this),s.select(".label").remove();var s,e=t.edge(n),o=R0(s,t.edge(n),0).classed("label",!0),i=o.node().getBBox();e.labelId&&o.attr("id",e.labelId),Qt(e,"width")||(e.width=i.width),Qt(e,"height")||(e.height=i.height)}),e.exit?n=e.exit():n=e.selectAll(null),sn(n,t).style("opacity",0).remove(),e};function mF(e){Zh=e}function C2(e,t){return e.intersect(t)}Qh=function(s,e,o){var n=s.selectAll("g.edgePath").data(e.edges(),function(e){return x3(e)}).classed("update",!0),i=kF(n,e),t;return wF(n,e),t=n.merge!==void 0?n.merge(i):n,sn(t,e).style("opacity",1),t.each(function(s){var n=_t(this),t=e.edge(s);t.elem=this,t.id&&n.attr("id",t.id),v3(n,t.class,(n.classed("update")?"update ":"")+"edgePath")}),t.selectAll("path.path").each(function(s){var t=e.edge(s),n;t.arrowheadId=Zc("arrowhead"),n=_t(this).attr("marker-end",function(){return"url("+_F(location.href,t.arrowheadId)+")"}).style("fill","none"),sn(n,e).attr("d",function(t){return xF(e,t)}),En(n,t.style)}),t.selectAll("defs *").remove(),t.selectAll("defs").each(function(n){var t=e.edge(n),s=o[t.arrowhead];s(_t(this),t.arrowheadId,t,"arrowhead")}),t};function bF(e){Qh=e}function _F(e,t){var n=e.split("#")[0];return n+"#"+t}function xF(t,n){var s=t.edge(n),o=t.node(n.v),i=t.node(n.w),e=s.points.slice(1,s.points.length-1);return e.unshift(C2(o,e[0])),e.push(C2(i,e[e.length-1])),k3(s,e)}function k3(t,n){var e=(js||g6.line)().x(function(e){return e.x}).y(function(e){return e.y});return(e.curve||e.interpolate)(t.curve),e(n)}function vF(e){var t=e.getBBox(),n=e.ownerSVGElement.getScreenCTM().inverse().multiply(e.getScreenCTM()).translate(t.width/2,t.height/2);return{x:n.e,y:n.f}}function kF(n,t){var e=n.enter().append("g").attr("class","edgePath").style("opacity",0);return e.append("path").attr("class","path").attr("d",function(e){var n=t.edge(e),s=t.node(e.v).elem,o=Hi(n.points.length).map(function(){return vF(s)});return k3(n,o)}),e.append("defs"),e}function wF(e,t){var n=e.exit();sn(n,t).style("opacity",0).remove()}Jh=function(s,t,o){var i=t.nodes().filter(function(e){return!_3(t,e)}),e=s.selectAll("g.node").data(i,function(e){return e}).classed("update",!0),n;return e.exit().remove(),e.enter().append("g").attr("class","node").style("opacity",0),e=s.selectAll("g.node"),e.each(function(u){e=t.node(u),s=_t(this),v3(s,e.class,(s.classed("update")?"update ":"")+"node"),s.select("g.label").remove();var e,s,i=s.append("g").attr("class","label"),l=R0(i,e),d=o[e.shape],n=Ja(l.node().getBBox(),"width","height"),a,r,c;e.elem=this,e.id&&s.attr("id",e.id),e.labelId&&i.attr("id",e.labelId),Qt(e,"width")&&(n.width=e.width),Qt(e,"height")&&(n.height=e.height),n.width+=e.paddingLeft+e.paddingRight,n.height+=e.paddingTop+e.paddingBottom,i.attr("transform","translate("+(e.paddingLeft-e.paddingRight)/2+","+(e.paddingTop-e.paddingBottom)/2+")"),a=_t(this),a.select(".label-container").remove(),r=d(a,n,e).classed("label-container",!0),En(r,e.style),c=r.node().getBBox(),e.width=c.width,e.height=c.height}),e.exit?n=e.exit():n=e.selectAll(null),sn(n,t).style("opacity",0).remove(),e};function TF(e){Jh=e}function EF(t,e){var n=t.filter(function(){return!_t(this).classed("update")});function s(n){var t=e.node(n);return"translate("+t.x+","+t.y+")"}n.attr("transform",s),sn(t,e).style("opacity",1).attr("transform",s),sn(n.selectAll("rect"),e).attr("width",function(t){return e.node(t).width}).attr("height",function(t){return e.node(t).height}).attr("x",function(t){var n=e.node(t);return-n.width/2}).attr("y",function(t){var n=e.node(t);return-n.height/2})}function CF(e,t){var s=e.filter(function(){return!_t(this).classed("update")});function n(n){var e=t.edge(n);return Qt(e,"x")?"translate("+e.x+","+e.y+")":""}s.attr("transform",n),sn(e,t).style("opacity",1).attr("transform",n)}function SF(e,t){var s=e.filter(function(){return!_t(this).classed("update")});function n(n){var e=t.node(n);return"translate("+e.x+","+e.y+")"}s.attr("transform",n),sn(e,t).style("opacity",1).attr("transform",n)}function w3(l,e,t,n){var o=l.x,i=l.y,s=o-n.x,a=i-n.y,d=Math.sqrt(e*e*a*a+t*t*s*s),r=Math.abs(e*t*s/d),c;return n.x<o&&(r=-r),c=Math.abs(e*t*a/d),n.y<i&&(c=-c),{x:o+r,y:i+c}}function AF(t,e,n){return w3(t,e,e,n)}function LF(i,n,s,o){var d,a,r,c,l,h,g,p,f,m,t,u,e,v,b;if(d=n.y-i.y,r=i.x-n.x,l=n.x*i.y-i.x*n.y,f=d*s.x+r*s.y+l,m=d*o.x+r*o.y+l,!(f!==0&&m!==0&&S2(f,m))&&(a=o.y-s.y,c=s.x-o.x,h=o.x*s.y-s.x*o.y,g=a*i.x+c*i.y+h,p=a*n.x+c*n.y+h,!(g!==0&&p!==0&&S2(g,p))&&(t=d*c-a*r,t!==0)))return u=Math.abs(t/2),e=r*h-c*l,v=e<0?(e-u)/t:(e+u)/t,e=a*l-d*h,b=e<0?(e-u)/t:(e+u)/t,{x:v,y:b}}function S2(e,t){return e*t>0}function Cn(e,t,n){var h=e.x,m=e.y,o=[],i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;t.forEach(function(e){i=Math.min(i,e.x),a=Math.min(a,e.y)});for(var c=h-e.width/2-i,l=m-e.height/2-a,s=0;s<t.length;s++){var d=t[s],u=t[s<t.length-1?s+1:0],r=LF(e,n,{x:c+d.x,y:l+d.y},{x:c+u.x,y:l+u.y});r&&o.push(r)}return o.length?(o.length>1&&o.sort(function(e,t){var s=e.x-n.x,o=e.y-n.y,i=Math.sqrt(s*s+o*o),a=t.x-n.x,r=t.y-n.y,c=Math.sqrt(a*a+r*r);return i<c?-1:i===c?0:1}),o[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",e),e)}function F0(o,r){var c=o.x,l=o.y,n=r.x-c,s=r.y-l,e=o.width/2,t=o.height/2,i,a;return Math.abs(s)*e>Math.abs(n)*t?(s<0&&(t=-t),i=s===0?0:t*n/s,a=t):(n<0&&(e=-e),i=e,a=n===0?0:e*s/n),{x:c+i,y:l+a}}t1={rect:DF,ellipse:IF,circle:MF,diamond:NF};function BF(e){t1=e}function DF(n,e,t){var s=n.insert("rect",":first-child").attr("rx",t.rx).attr("ry",t.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return t.intersect=function(e){return F0(t,e)},s}function IF(o,e,t){var n=e.width/2,s=e.height/2,i=o.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",n).attr("ry",s);return t.intersect=function(e){return w3(t,n,s,e)},i}function MF(s,e,t){var n=Math.max(e.width,e.height)/2,o=s.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",n);return t.intersect=function(e){return AF(t,n,e)},o}function NF(i,e,t){var n=e.width*Math.SQRT2/2,s=e.height*Math.SQRT2/2,o=[{x:0,y:-s},{x:-n,y:0},{x:0,y:s},{x:n,y:0}],a=i.insert("polygon",":first-child").attr("points",o.map(function(e){return e.x+","+e.y}).join(" "));return t.intersect=function(e){return Cn(t,o,e)},a}function RF(){var e=function(n,e){PF(e);var t=fa(n,"output"),s=fa(t,"clusters"),o=fa(t,"edgePaths"),i=Zh(fa(t,"edgeLabels"),e),a=Jh(fa(t,"nodes"),e,t1),r;ta(e),SF(a,e),CF(i,e),Qh(o,e,Xh),r=Kh(s,e),EF(r,e),VF(e)};return e.createNodes=function(t){return arguments.length?(TF(t),e):Jh},e.createClusters=function(t){return arguments.length?(yF(t),e):Kh},e.createEdgeLabels=function(t){return arguments.length?(mF(t),e):Zh},e.createEdgePaths=function(t){return arguments.length?(bF(t),e):Qh},e.shapes=function(t){return arguments.length?(BF(t),e):t1},e.arrows=function(t){return arguments.length?(cF(t),e):Xh},e}FF={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},OF={arrowhead:"normal",curve:Ar};function PF(e){e.nodes().forEach(function(n){var t=e.node(n);!Qt(t,"label")&&!e.children(n).length&&(t.label=n),Qt(t,"paddingX")&&ls(t,{paddingLeft:t.paddingX,paddingRight:t.paddingX}),Qt(t,"paddingY")&&ls(t,{paddingTop:t.paddingY,paddingBottom:t.paddingY}),Qt(t,"padding")&&ls(t,{paddingLeft:t.padding,paddingRight:t.padding,paddingTop:t.padding,paddingBottom:t.padding}),ls(t,FF),dt(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(e){t[e]=Number(t[e])}),Qt(t,"width")&&(t._prevWidth=t.width),Qt(t,"height")&&(t._prevHeight=t.height)}),e.edges().forEach(function(n){var t=e.edge(n);Qt(t,"label")||(t.label=""),ls(t,OF)})}function VF(e){dt(e.nodes(),function(n){var t=e.node(n);Qt(t,"_prevWidth")?t.width=t._prevWidth:delete t.width,Qt(t,"_prevHeight")?t.height=t._prevHeight:delete t.height,delete t._prevWidth,delete t._prevHeight})}function fa(t,n){var e=t.select("g."+n);return e.empty()&&(e=t.append("g").attr("class",n)),e}function T3(a,n,s){const o=n.width,i=n.height,e=(o+i)*.9,t=[{x:e/2,y:0},{x:e,y:-e/2},{x:e/2,y:-e},{x:0,y:-e/2}],r=ni(a,e,e,t);return s.intersect=function(e){return Cn(s,t,e)},r}function E3(a,o,i){const e=o.height,t=e/4,n=o.width+2*t,s=[{x:t,y:0},{x:n-t,y:0},{x:n,y:-e/2},{x:n-t,y:-e},{x:t,y:-e},{x:0,y:-e/2}],r=ni(a,n,e,s);return i.intersect=function(e){return Cn(i,s,e)},r}function C3(i,n,s){const t=n.width,e=n.height,o=[{x:-e/2,y:0},{x:t,y:0},{x:t,y:-e},{x:-e/2,y:-e},{x:0,y:-e/2}],a=ni(i,t,e,o);return s.intersect=function(e){return Cn(s,o,e)},a}function S3(i,n,s){const t=n.width,e=n.height,o=[{x:-2*e/6,y:0},{x:t-e/6,y:0},{x:t+2*e/6,y:-e},{x:e/6,y:-e}],a=ni(i,t,e,o);return s.intersect=function(e){return Cn(s,o,e)},a}function A3(i,n,s){const t=n.width,e=n.height,o=[{x:2*e/6,y:0},{x:t+e/6,y:0},{x:t-2*e/6,y:-e},{x:-e/6,y:-e}],a=ni(i,t,e,o);return s.intersect=function(e){return Cn(s,o,e)},a}function L3(i,n,s){const t=n.width,e=n.height,o=[{x:-2*e/6,y:0},{x:t+2*e/6,y:0},{x:t-e/6,y:-e},{x:e/6,y:-e}],a=ni(i,t,e,o);return s.intersect=function(e){return Cn(s,o,e)},a}function B3(i,n,s){const t=n.width,e=n.height,o=[{x:e/6,y:0},{x:t-e/6,y:0},{x:t+2*e/6,y:-e},{x:-2*e/6,y:-e}],a=ni(i,t,e,o);return s.intersect=function(e){return Cn(s,o,e)},a}function D3(i,n,s){const t=n.width,e=n.height,o=[{x:0,y:0},{x:t+e/2,y:0},{x:t,y:-e/2},{x:t+e/2,y:-e},{x:0,y:-e}],a=ni(i,t,e,o);return s.intersect=function(e){return Cn(s,o,e)},a}function I3(o,t,n){const e=t.height,s=t.width+e/4,i=o.insert("rect",":first-child").attr("rx",e/2).attr("ry",e/2).attr("x",-s/2).attr("y",-e/2).attr("width",s).attr("height",e);return n.intersect=function(e){return F0(n,e)},i}function M3(i,n,s){const e=n.width,t=n.height,o=[{x:0,y:0},{x:e,y:0},{x:e,y:-t},{x:0,y:-t},{x:0,y:0},{x:-8,y:0},{x:e+8,y:0},{x:e+8,y:-t},{x:-8,y:-t},{x:-8,y:0}],a=ni(i,e,t,o);return s.intersect=function(e){return Cn(s,o,e)},a}function N3(a,i,t){const s=i.width,n=s/2,e=n/(2.5+s/50),o=i.height+e,r="M 0,"+e+" a "+n+","+e+" 0,0,0 "+s+" 0 a "+n+","+e+" 0,0,0 "+-s+" 0 l 0,"+o+" a "+n+","+e+" 0,0,0 "+s+" 0 l 0,"+-o,c=a.attr("label-offset-y",e).insert("path",":first-child").attr("d",r).attr("transform","translate("+-s/2+","+-(o/2+e)+")");return t.intersect=function(i){const s=F0(t,i),o=s.x-t.x;if(n!=0&&(Math.abs(o)<t.width/2||Math.abs(o)==t.width/2&&Math.abs(s.y-t.y)>t.height/2-e)){let a=e*e*(1-o*o/(n*n));a!=0&&(a=Math.sqrt(a)),a=e-a,i.y-t.y>0&&(a=-a),s.y+=a}return s},c}function YF(e){e.shapes().question=T3,e.shapes().hexagon=E3,e.shapes().stadium=I3,e.shapes().subroutine=M3,e.shapes().cylinder=N3,e.shapes().rect_left_inv_arrow=C3,e.shapes().lean_right=S3,e.shapes().lean_left=A3,e.shapes().trapezoid=L3,e.shapes().inv_trapezoid=B3,e.shapes().rect_right_inv_arrow=D3}function zF(e){e({question:T3}),e({hexagon:E3}),e({stadium:I3}),e({subroutine:M3}),e({cylinder:N3}),e({rect_left_inv_arrow:C3}),e({lean_right:S3}),e({lean_left:A3}),e({trapezoid:L3}),e({inv_trapezoid:B3}),e({rect_right_inv_arrow:D3})}function ni(e,t,n,s){return e.insert("polygon",":first-child").attr("points",s.map(function(e){return e.x+","+e.y}).join(" ")).attr("transform","translate("+-t/2+","+n/2+")")}const UF={addToRender:YF,addToRenderV2:zF},R3={},WF=function(e){const t=Object.keys(e);for(const n of t)R3[n]=e[n]},F3=function(e,r,n,s,i,o){const a=s?s.select(`[id="${n}"]`):_t(`[id="${n}"]`),t=i||document;Object.keys(e).forEach(function(h){const s=e[h];let d="default";s.classes.length>0&&(d=s.classes.join(" "));const l=yi(s.styles);let u=s.text!==void 0?s.text:s.id,i;if(Ke(q().flowchart.htmlLabels)){const e={label:u.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)};i=N0(a,e).node(),i.parentNode.removeChild(i)}else{const e=t.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("style",l.labelStyle.replace("color:","fill:"));const n=u.split(Xt.lineBreakRegex);for(const o of n){const s=t.createElementNS("http://www.w3.org/2000/svg","tspan");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s.setAttribute("dy","1em"),s.setAttribute("x","1"),s.textContent=o,e.appendChild(s)}i=e}let c=0,n="";switch(s.type){case"round":c=5,n="rect";break;case"square":n="rect";break;case"diamond":n="question";break;case"hexagon":n="hexagon";break;case"odd":n="rect_left_inv_arrow";break;case"lean_right":n="lean_right";break;case"lean_left":n="lean_left";break;case"trapezoid":n="trapezoid";break;case"inv_trapezoid":n="inv_trapezoid";break;case"odd_right":n="rect_left_inv_arrow";break;case"circle":n="circle";break;case"ellipse":n="ellipse";break;case"stadium":n="stadium";break;case"subroutine":n="subroutine";break;case"cylinder":n="cylinder";break;case"group":n="rect";break;default:n="rect"}B.warn("Adding node",s.id,s.domId),r.setNode(o.db.lookUpDomId(s.id),{labelType:"svg",labelStyle:l.labelStyle,shape:n,label:i,rx:c,ry:c,class:d,style:l.style,id:o.db.lookUpDomId(s.id)})})},O3=function(e,i,s){let o=0,t,n;if(e.defaultStyle!==void 0){const s=yi(e.defaultStyle);t=s.style,n=s.labelStyle}e.forEach(function(r){o++;var d="L-"+r.start+"-"+r.end,u="LS-"+r.start,h="LE-"+r.end;const a={};r.type==="arrow_open"?a.arrowhead="none":a.arrowhead="normal";let c="",l="";if(r.style!==void 0){const e=yi(r.style);c=e.style,l=e.labelStyle}else switch(r.stroke){case"normal":c="fill:none",t!==void 0&&(c=t),n!==void 0&&(l=n);break;case"dotted":c="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":c=" stroke-width: 3.5px;fill:none";break}a.style=c,a.labelStyle=l,r.interpolate!==void 0?a.curve=Qr(r.interpolate,Ar):e.defaultInterpolate!==void 0?a.curve=Qr(e.defaultInterpolate,Ar):a.curve=Qr(R3.curve,Ar),r.text===void 0?r.style!==void 0&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c",Ke(q().flowchart.htmlLabels)?(a.labelType="html",a.label=`<span id="L-${d}" class="edgeLabel L-${u}' L-${h}" style="${a.labelStyle}">${r.text.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)}</span>`):(a.labelType="text",a.label=r.text.replace(Xt.lineBreakRegex,`
`),r.style===void 0&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none"),a.labelStyle=a.labelStyle.replace("color:","fill:"))),a.id=d,a.class=u+" "+h,a.minlen=r.length||1,i.setEdge(s.db.lookUpDomId(r.start),s.db.lookUpDomId(r.end),a,o)})},HF=function(t,e){B.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch(e){return B.error(e),{}}},GF=function(j,n,y,e){B.info("Drawing flowchart"),e.db.clear();const{securityLevel:l,flowchart:r}=q();let m;l==="sandbox"&&(m=_t("#i"+n));const c=_t(l==="sandbox"?m.nodes()[0].contentDocument.body:"body"),o=l==="sandbox"?m.nodes()[0].contentDocument:document;try{e.parser.parse(j)}catch{B.debug("Parsing failed")}let h=e.db.getDirection();h===void 0&&(h="TD");const p=r.nodeSpacing||50,v=r.rankSpacing||50,a=new Ve({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:p,ranksep:v,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let t;const i=e.db.getSubGraphs();for(let n=i.length-1;n>=0;n--)t=i[n],e.db.addVertex(t.id,t.title,"group",void 0,t.classes);const u=e.db.getVertices();B.warn("Get vertices",u);const g=e.db.getEdges();let s=0;for(s=i.length-1;s>=0;s--){t=i[s],I1("cluster").append("text");for(let n=0;n<t.nodes.length;n++)B.warn("Setting subgraph",t.nodes[n],e.db.lookUpDomId(t.nodes[n]),e.db.lookUpDomId(t.id)),a.setParent(e.db.lookUpDomId(t.nodes[n]),e.db.lookUpDomId(t.id))}F3(u,a,n,c,o,e),O3(g,a,e);const d=new RF;UF.addToRender(d),d.arrows().none=function(e,t,n,s){const o=e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");En(o,n[s+"Style"])},d.arrows().normal=function(e,t){e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const b=c.select(`[id="${n}"]`),f=c.select("#"+n+" g");for(d(f,a),f.selectAll("g.node").attr("title",function(){return e.db.getTooltip(this.id)}),e.db.indexNodes("subGraph"+s),s=0;s<i.length;s++)if(t=i[s],t.title!=="undefined"){const s=o.querySelectorAll("#"+n+' [id="'+e.db.lookUpDomId(t.id)+'"] rect'),i=o.querySelectorAll("#"+n+' [id="'+e.db.lookUpDomId(t.id)+'"]'),r=s[0].x.baseVal.value,c=s[0].y.baseVal.value,l=s[0].width.baseVal.value,a=_t(i[0]).select(".label");a.attr("transform",`translate(${r+l/2}, ${c+14})`),a.attr("id",n+"Text");for(let e=0;e<t.classes.length;e++)i[0].classList.add(t.classes[e])}if(!r.htmlLabels){const e=o.querySelectorAll('[id="'+n+'"] .edgeLabel .label');for(const n of e){const s=n.getBBox(),t=o.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("rx",0),t.setAttribute("ry",0),t.setAttribute("width",s.width),t.setAttribute("height",s.height),n.insertBefore(t,n.firstChild)}}Oc(a,b,r.diagramPadding,r.useMaxWidth),Object.keys(u).forEach(function(s){const t=u[s];if(t.link){const i=c.select("#"+n+' [id="'+e.db.lookUpDomId(s)+'"]');if(i){const e=o.createElementNS("http://www.w3.org/2000/svg","a");e.setAttributeNS("http://www.w3.org/2000/svg","class",t.classes.join(" ")),e.setAttributeNS("http://www.w3.org/2000/svg","href",t.link),e.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),l==="sandbox"?e.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):t.linkTarget&&e.setAttributeNS("http://www.w3.org/2000/svg","target",t.linkTarget);const n=i.insert(function(){return e},":first-child"),s=i.select(".label-container");s&&n.append(function(){return s.node()});const a=i.select(".label");a&&n.append(function(){return a.node()})}}})},qF={setConf:WF,addVertices:F3,addEdges:O3,getClasses:HF,draw:GF},P3={},$F=function(e){const t=Object.keys(e);for(const n of t)P3[n]=e[n]},V3=function(t,s,o,i,n,e){const a=i.select(`[id="${o}"]`);Object.keys(t).forEach(function(h){const o=t[h];let u="default";o.classes.length>0&&(u=o.classes.join(" "));const c=yi(o.styles);let l=o.text!==void 0?o.text:o.id,d;if(Ke(q().flowchart.htmlLabels)){const e={label:l.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)};d=N0(a,e).node(),d.parentNode.removeChild(d)}else{const e=n.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("style",c.labelStyle.replace("color:","fill:"));const t=l.split(Xt.lineBreakRegex);for(const o of t){const s=n.createElementNS("http://www.w3.org/2000/svg","tspan");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s.setAttribute("dy","1em"),s.setAttribute("x","1"),s.textContent=o,e.appendChild(s)}d=e}let r=0,i="";switch(o.type){case"round":r=5,i="rect";break;case"square":i="rect";break;case"diamond":i="question";break;case"hexagon":i="hexagon";break;case"odd":i="rect_left_inv_arrow";break;case"lean_right":i="lean_right";break;case"lean_left":i="lean_left";break;case"trapezoid":i="trapezoid";break;case"inv_trapezoid":i="inv_trapezoid";break;case"odd_right":i="rect_left_inv_arrow";break;case"circle":i="circle";break;case"ellipse":i="ellipse";break;case"stadium":i="stadium";break;case"subroutine":i="subroutine";break;case"cylinder":i="cylinder";break;case"group":i="rect";break;case"doublecircle":i="doublecircle";break;default:i="rect"}s.setNode(o.id,{labelStyle:c.labelStyle,shape:i,labelText:l,rx:r,ry:r,class:u,style:c.style,id:o.id,link:o.link,linkTarget:o.linkTarget,tooltip:e.db.getTooltip(o.id)||"",domId:e.db.lookUpDomId(o.id),haveCallback:o.haveCallback,width:o.type==="group"?500:void 0,dir:o.dir,type:o.type,props:o.props,padding:q().flowchart.padding}),B.info("setNode",{labelStyle:c.labelStyle,shape:i,labelText:l,rx:r,ry:r,class:u,style:c.style,id:o.id,domId:e.db.lookUpDomId(o.id),width:o.type==="group"?500:void 0,type:o.type,dir:o.dir,props:o.props,padding:q().flowchart.padding})})},Y3=function(t,i){B.info("abc78 edges = ",t);let o=0,e={},n,s;if(t.defaultStyle!==void 0){const e=yi(t.defaultStyle);n=e.style,s=e.labelStyle}t.forEach(function(r){o++,c="L-"+r.start+"-"+r.end,e[c]===void 0?(e[c]=0,B.info("abc78 new entry",c,e[c])):(e[c]++,B.info("abc78 new entry",c,e[c]));let u=c+"-"+e[c];B.info("abc78 new link id to be used is",c,u,e[c]);var c,h="LS-"+r.start,m="LE-"+r.end;const a={style:"",labelStyle:""};switch(a.minlen=r.length||1,r.type==="arrow_open"?a.arrowhead="none":a.arrowhead="normal",a.arrowTypeStart="arrow_open",a.arrowTypeEnd="arrow_open",r.type){case"double_arrow_cross":a.arrowTypeStart="arrow_cross";case"arrow_cross":a.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":a.arrowTypeStart="arrow_point";case"arrow_point":a.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":a.arrowTypeStart="arrow_circle";case"arrow_circle":a.arrowTypeEnd="arrow_circle";break}let l="",d="";switch(r.stroke){case"normal":l="fill:none;",n!==void 0&&(l=n),s!==void 0&&(d=s),a.thickness="normal",a.pattern="solid";break;case"dotted":a.thickness="normal",a.pattern="dotted",a.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":a.thickness="thick",a.pattern="solid",a.style="stroke-width: 3.5px;fill:none;";break}if(r.style!==void 0){const e=yi(r.style);l=e.style,d=e.labelStyle}a.style=a.style+=l,a.labelStyle=a.labelStyle+=d,r.interpolate!==void 0?a.curve=Qr(r.interpolate,Ar):t.defaultInterpolate!==void 0?a.curve=Qr(t.defaultInterpolate,Ar):a.curve=Qr(P3.curve,Ar),r.text===void 0?r.style!==void 0&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c"),a.labelType="text",a.label=r.text.replace(Xt.lineBreakRegex,`
`),r.style===void 0&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),a.labelStyle=a.labelStyle.replace("color:","fill:"),a.id=u,a.classes="flowchart-link "+h+" "+m,i.setEdge(r.start,r.end,a,o)})},jF=function(t,e){B.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch{return}},XF=function(p,n,j,t){B.info("Drawing flowchart"),t.db.clear(),gn.setGen("gen-2"),t.parser.parse(p);let h=t.db.getDirection();h===void 0&&(h="TD");const{securityLevel:r,flowchart:s}=q(),v=s.nodeSpacing||50,g=s.rankSpacing||50;let d;r==="sandbox"&&(d=_t("#i"+n));const u=_t(r==="sandbox"?d.nodes()[0].contentDocument.body:"body"),c=r==="sandbox"?d.nodes()[0].contentDocument:document,o=new Ve({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:v,ranksep:g,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let e;const a=t.db.getSubGraphs();B.info("Subgraphs - ",a);for(let n=a.length-1;n>=0;n--)e=a[n],B.info("Subgraph - ",e),t.db.addVertex(e.id,e.title,"group",void 0,e.classes,e.dir);const l=t.db.getVertices(),f=t.db.getEdges();B.info("Edges",f);let i=0;for(i=a.length-1;i>=0;i--){e=a[i],I1("cluster").append("text");for(let t=0;t<e.nodes.length;t++)B.info("Setting up subgraphs",e.nodes[t],e.id),o.setParent(e.nodes[t],e.id)}V3(l,o,n,u,c,t),Y3(f,o);const m=u.select(`[id="${n}"]`),b=u.select("#"+n+" g");if(B0(b,o,["point","circle","cross"],"flowchart",n),jt.insertTitle(m,"flowchartTitleText",s.titleTopMargin,t.db.getDiagramTitle()),Oc(o,m,s.diagramPadding,s.useMaxWidth),t.db.indexNodes("subGraph"+i),!s.htmlLabels){const e=c.querySelectorAll('[id="'+n+'"] .edgeLabel .label');for(const n of e){const s=n.getBBox(),t=c.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("rx",0),t.setAttribute("ry",0),t.setAttribute("width",s.width),t.setAttribute("height",s.height),n.insertBefore(t,n.firstChild)}}Object.keys(l).forEach(function(t){const e=l[t];if(e.link){const s=_t("#"+n+' [id="'+t+'"]');if(s){const t=c.createElementNS("http://www.w3.org/2000/svg","a");t.setAttributeNS("http://www.w3.org/2000/svg","class",e.classes.join(" ")),t.setAttributeNS("http://www.w3.org/2000/svg","href",e.link),t.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),r==="sandbox"?t.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):e.linkTarget&&t.setAttributeNS("http://www.w3.org/2000/svg","target",e.linkTarget);const n=s.insert(function(){return t},":first-child"),o=s.select(".label-container");o&&n.append(function(){return o.node()});const i=s.select(".label");i&&n.append(function(){return i.node()})}}})},Ku={setConf:$F,addVertices:V3,addEdges:Y3,getClasses:jF,draw:XF};e1=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},_=[1,3],n=[1,5],t=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],h=[1,15],i=[1,16],a=[1,17],r=[1,18],c=[1,19],l=[1,20],d=[1,21],u=[1,22],w=[1,23],m=[1,24],f=[1,25],p=[1,26],g=[1,27],v=[1,29],b=[1,31],j=[1,34],y=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],s={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(o,r,i,n,s,e){var t=e.length-1;switch(s){case 2:return e[t-1];case 3:this.$=[];break;case 4:e[t-1].push(e[t]),this.$=e[t-1];break;case 5:case 6:this.$=e[t];break;case 7:case 8:this.$=[];break;case 9:n.setDateFormat(e[t].substr(11)),this.$=e[t].substr(11);break;case 10:n.enableInclusiveEndDates(),this.$=e[t].substr(18);break;case 11:n.TopAxis(),this.$=e[t].substr(8);break;case 12:n.setAxisFormat(e[t].substr(11)),this.$=e[t].substr(11);break;case 13:n.setTickInterval(e[t].substr(13)),this.$=e[t].substr(13);break;case 14:n.setExcludes(e[t].substr(9)),this.$=e[t].substr(9);break;case 15:n.setIncludes(e[t].substr(9)),this.$=e[t].substr(9);break;case 16:n.setTodayMarker(e[t].substr(12)),this.$=e[t].substr(12);break;case 17:n.setDiagramTitle(e[t].substr(6)),this.$=e[t].substr(6);break;case 18:this.$=e[t].trim(),n.setAccTitle(this.$);break;case 19:case 20:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 21:n.addSection(e[t].substr(8)),this.$=e[t].substr(8);break;case 23:n.addTask(e[t-1],e[t]),this.$="task";break;case 27:this.$=e[t-1],n.setClickEvent(e[t-1],e[t],null);break;case 28:this.$=e[t-2],n.setClickEvent(e[t-2],e[t-1],e[t]);break;case 29:this.$=e[t-2],n.setClickEvent(e[t-2],e[t-1],null),n.setLink(e[t-2],e[t]);break;case 30:this.$=e[t-3],n.setClickEvent(e[t-3],e[t-2],e[t-1]),n.setLink(e[t-3],e[t]);break;case 31:this.$=e[t-2],n.setClickEvent(e[t-2],e[t],null),n.setLink(e[t-2],e[t-1]);break;case 32:this.$=e[t-3],n.setClickEvent(e[t-3],e[t-1],e[t]),n.setLink(e[t-3],e[t-2]);break;case 33:this.$=e[t-1],n.setLink(e[t-1],e[t]);break;case 34:case 40:this.$=e[t-1]+" "+e[t];break;case 35:case 36:case 38:this.$=e[t-2]+" "+e[t-1]+" "+e[t];break;case 37:case 39:this.$=e[t-3]+" "+e[t-2]+" "+e[t-1]+" "+e[t];break;case 41:n.parseDirective("%%{","open_directive");break;case 42:n.parseDirective(e[t],"type_directive");break;case 43:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 44:n.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:_,30:4,40:n},{1:[3]},{3:6,4:2,5:_,30:4,40:n},e(t,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:h,13:i,14:a,15:r,16:c,17:l,18:d,19:u,20:w,21:m,23:f,25:p,26:g,27:28,28:v,30:4,35:b,40:n},{32:32,33:[1,33],43:j},e([33,43],[2,42]),e(t,[2,8],{1:[2,2]}),e(t,[2,4]),{4:30,10:35,12:h,13:i,14:a,15:r,16:c,17:l,18:d,19:u,20:w,21:m,23:f,25:p,26:g,27:28,28:v,30:4,35:b,40:n},e(t,[2,6]),e(t,[2,7]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),e(t,[2,17]),{22:[1,36]},{24:[1,37]},e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),{29:[1,38]},e(t,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},e(t,[2,5]),e(t,[2,18]),e(t,[2,19]),e(t,[2,23]),e(t,[2,27],{37:[1,44],38:[1,45]}),e(t,[2,33],{36:[1,46]}),e(y,[2,25]),{32:47,43:j},{43:[2,43]},e(t,[2,28],{38:[1,48]}),e(t,[2,29]),e(t,[2,31],{37:[1,49]}),{11:[1,50]},e(t,[2,30]),e(t,[2,32]),e(y,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},O=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,e){switch(e){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 38;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 26:this.popState();break;case 27:return 37;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return e}();s.lexer=O;function o(){this.yy={}}return o.prototype=s,s.Parser=o,new o}(),e1.parser=e1;const KF=e1,ZF=e=>e.match(/^\s*gantt/)!==null;r1={},QF={get exports(){return r1},set exports(e){r1=e}},function(e){(function(n,t){e.exports=t()})(bc,function(){var e="day";return function(a,o,n){var s=function(t){return t.add(4-t.isoWeekday(),e)},t=o.prototype,i;t.isoWeekYear=function(){return s(this).year()},t.isoWeek=function(i){if(!this.$utils().u(i))return this.add(7*(i-this.isoWeek()),e);var a,r,t,o,c=s(this),l=(a=this.isoWeekYear(),r=this.$u,t=(r?n.utc:n)().year(a).startOf("year"),o=4-t.isoWeekday(),t.isoWeekday()>4&&(o+=7),t.add(o,e));return c.diff(l,"week")+1},t.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)},i=t.startOf,t.startOf=function(t,e){var n=this.$utils(),s=!!n.u(e)||e;return n.p(t)==="isoweek"?s?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):i.bind(this)(t,e)}}})}(QF);const JF=r1;n1={},tO={get exports(){return n1},set exports(e){n1=e}},function(e){(function(n,t){e.exports=t()})(bc,function(){var l={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},d=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d\d/,t=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,n={},a=function(e){return(e=+e)+(e>68?1900:2e3)},e=function(e){return function(t){this[e]=+t}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||e==="Z")return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return n===0?0:t[0]==="+"?-n:n}(e)}],i=function(t){var e=n[t];return e&&(e.indexOf?e:e.s.concat(e.f))},r=function(s,o){var t,i=n.meridiem,e;if(i){for(e=1;e<=24;e+=1)if(s.indexOf(i(e,0,o))>-1){t=e>12;break}}else t=s===(o?"pm":"PM");return t},u={A:[s,function(e){this.afternoon=r(e,!1)}],a:[s,function(e){this.afternoon=r(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[o,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[t,e("seconds")],ss:[t,e("seconds")],m:[t,e("minutes")],mm:[t,e("minutes")],H:[t,e("hours")],h:[t,e("hours")],HH:[t,e("hours")],hh:[t,e("hours")],D:[t,e("day")],DD:[o,e("day")],Do:[s,function(t){var s=n.ordinal,o=t.match(/\d+/),e;if(this.day=o[0],s)for(e=1;e<=31;e+=1)s(e).replace(/\[|\]/g,"")===t&&(this.day=e)}],M:[t,e("month")],MM:[o,e("month")],MMM:[s,function(t){var n=i("months"),e=(i("monthsShort")||n.map(function(e){return e.slice(0,3)})).indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],MMMM:[s,function(t){var e=i("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,e("year")],YY:[o,function(e){this.year=a(e)}],YYYY:[/\d{4}/,e("year")],Z:c,ZZ:c};function h(i){c=i,o=n&&n.formats;for(var t=(i=c.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(s,t,e){var n=e&&e.toUpperCase();return t||o[e]||l[e]||o[n].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(n,e,t){return e||t.slice(1)})})).match(d),a=t.length,s=0;s<a;s+=1){var c,o,r=t[s],e=u[r],m=e&&e[0],h=e&&e[1];t[s]=h?{regex:m,parser:h}:r.replace(/^\[|\]$/g,"")}return function(n){for(var s={},o=0,i=0;o<a;o+=1)if(e=t[o],typeof e=="string")i+=e.length;else{var e,c=e.regex,l=e.parser,d=n.slice(i),r=c.exec(d)[0];l.call(s,r),n=n.replace(r,"")}return function(e){var t=e.afternoon,n;t!==void 0&&(n=e.hours,t?n<12&&(e.hours+=12):n===12&&(e.hours=0),delete e.afternoon)}(s),s}}return function(e,o,t){t.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(a=e.parseTwoDigitYear);var s=o.prototype,i=s.parse;s.parse=function(a){var l=a.date,u=a.utc,e=a.args;if(this.$u=u,o=e[1],typeof o=="string"){var o,f=e[2]===!0,d=e[3]===!0,p=f||d,s=e[2],m,r,c;d&&(s=e[2]),n=this.$locale(),!f&&s&&(n=t.Ls[s]),this.$d=function(f,c,j){try{if(["x","X"].indexOf(c)>-1)return new Date((c==="X"?1e3:1)*f);var e=h(c)(f),o=e.year,n=e.month,b=e.day,v=e.hours,g=e.minutes,p=e.seconds,y=e.milliseconds,m=e.zone,u=new Date,s=b||(o||n?1:u.getDate()),l=o||u.getFullYear(),t=0;o&&!n||(t=n>0?n-1:u.getMonth());var r=v||0,a=g||0,i=p||0,d=y||0;return m?new Date(Date.UTC(l,t,s,r,a,i,d+60*m.offset*1e3)):j?new Date(Date.UTC(l,t,s,r,a,i,d)):new Date(l,t,s,r,a,i,d)}catch{return new Date("")}}(l,o,u),this.init(),s&&s!==!0&&(this.$L=this.locale(s).$L),p&&l!=this.format(o)&&(this.$d=new Date("")),n={}}else if(o instanceof Array)for(m=o.length,r=1;r<=m;r+=1){if(e[1]=o[r-1],c=t.apply(this,e),c.isValid()){this.$d=c.$d,this.$L=c.$L,this.init();break}r===m&&(this.$d=new Date(""))}else i.call(this,a)}}})}(tO);const eO=n1;i1={},rO={get exports(){return i1},set exports(e){i1=e}},function(e){(function(n,t){e.exports=t()})(bc,function(){return function(s,n){var e=n.prototype,t=e.format;e.format=function(s){var e=this,o=this.$locale(),n,i;return this.isValid()?(n=this.$utils(),i=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return o.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return o.ordinal(e.week(),"W");case"w":case"ww":return n.s(e.week(),t==="w"?1:2,"0");case"W":case"WW":return n.s(e.isoWeek(),t==="W"?1:2,"0");case"k":case"kk":return n.s(String(e.$H===0?24:e.$H),t==="k"?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}}),t.bind(this)(i)):t.bind(this)(s)}}})}(rO);const nO=i1;kr.extend(JF),kr.extend(eO),kr.extend(nO);let mn="",O0="",P0,V0="",xo=[],vo=[],Y0={},z0=[],cc=[],Us="";const z3=["active","done","crit","milestone"];let U0=[],ko=!1,W0=!1,s1=0;const iO=function(e,t,n){xe.parseDirective(this,e,t,n)},sO=function(){z0=[],cc=[],Us="",U0=[],ul=0,o1=void 0,hl=void 0,Ue=[],mn="",O0="",P0=void 0,V0="",xo=[],vo=[],ko=!1,W0=!1,s1=0,Y0={},Br()},aO=function(e){O0=e},oO=function(){return O0},lO=function(e){P0=e},cO=function(){return P0},uO=function(e){V0=e},hO=function(){return V0},fO=function(e){mn=e},dO=function(){ko=!0},pO=function(){return ko},gO=function(){W0=!0},yO=function(){return W0},mO=function(){return mn},bO=function(e){xo=e.toLowerCase().split(/[\s,]+/)},_O=function(){return xo},xO=function(e){vo=e.toLowerCase().split(/[\s,]+/)},vO=function(){return vo},kO=function(){return Y0},wO=function(e){Us=e,z0.push(e)},TO=function(){return z0},EO=function(){let e=A2();const n=10;let t=0;for(;!e&&t<n;)e=A2(),t++;return cc=Ue,cc},U3=function(e,n,t,s){return!s.includes(e.format(n.trim()))&&(!!(e.isoWeekday()>=6&&t.includes("weekends")||t.includes(e.format("dddd").toLowerCase()))||t.includes(e.format(n.trim())))},W3=function(e,n,o,i){if(!o.length||e.manualEndTime)return;let t;e.startTime instanceof Date?t=kr(e.startTime):t=kr(e.startTime,n,!0),t=t.add(1,"d");let s;e.endTime instanceof Date?s=kr(e.endTime):s=kr(e.endTime,n,!0);const[a,r]=CO(t,s,n,o,i);e.endTime=a.toDate(),e.renderEndTime=r},CO=function(t,e,o,i,a){let n=!1,s=null;for(;t<=e;)n||(s=e.toDate()),n=U3(t,o,i,a),n&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,s]},a1=function(o,t,e){e=e.trim();const n=/^after\s+([\d\w- ]+)/.exec(e.trim());if(n!==null){let e=null;if(n[1].split(" ").forEach(function(n){let t=ea(n);t!==void 0&&(e?t.endTime>e.endTime&&(e=t):e=t)}),e)return e.endTime;{const e=new Date;return e.setHours(0,0,0,0),e}}let s=kr(e,t.trim(),!0);if(s.isValid())return s.toDate();{B.debug("Invalid date:"+e),B.debug("With date format:"+t.trim());const n=new Date(e);if(n===void 0||isNaN(n.getTime()))throw new Error("Invalid date:"+e);return n}},H3=function(t){const e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return e!==null?[Number.parseFloat(e[1]),e[2]]:[NaN,"ms"]},G3=function(a,o,e,i=!1){e=e.trim();let t=kr(e,o.trim(),!0);if(t.isValid())return i&&(t=t.add(1,"d")),t.toDate();let n=kr(a);const[s,r]=H3(e);if(!Number.isNaN(s)){const e=n.add(s,r);e.isValid()&&(n=e)}return n.toDate()};let ul=0;const ws=function(e){return e===void 0?(ul=ul+1,"task"+ul):e},SO=function(i,s){let o;s.substr(0,1)===":"?o=s.substr(1,s.length):o=s;const t=o.split(","),e={};X3(t,e,z3);for(let e=0;e<t.length;e++)t[e]=t[e].trim();let n="";switch(t.length){case 1:e.id=ws(),e.startTime=i.endTime,n=t[0];break;case 2:e.id=ws(),e.startTime=a1(void 0,mn,t[0]),n=t[1];break;case 3:e.id=ws(t[0]),e.startTime=a1(void 0,mn,t[1]),n=t[2];break}return n&&(e.endTime=G3(e.startTime,mn,n,ko),e.manualEndTime=kr(n,"YYYY-MM-DD",!0).isValid(),W3(e,mn,vo,xo)),e},AO=function(o,n){let s;n.substr(0,1)===":"?s=n.substr(1,n.length):s=n;const e=s.split(","),t={};X3(e,t,z3);for(let t=0;t<e.length;t++)e[t]=e[t].trim();switch(e.length){case 1:t.id=ws(),t.startTime={type:"prevTaskEnd",id:o},t.endTime={data:e[0]};break;case 2:t.id=ws(),t.startTime={type:"getStartDate",startData:e[0]},t.endTime={data:e[1]};break;case 3:t.id=ws(e[0]),t.startTime={type:"getStartDate",startData:e[1]},t.endTime={data:e[2]};break}return t};let o1,hl,Ue=[];const q3={},LO=function(s,n){const e={section:Us,type:Us,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:n},task:s,classes:[]},t=AO(hl,n);e.raw.startTime=t.startTime,e.raw.endTime=t.endTime,e.id=t.id,e.prevTaskId=hl,e.active=t.active,e.done=t.done,e.crit=t.crit,e.milestone=t.milestone,e.order=s1,s1++;const o=Ue.push(e);hl=e.id,q3[e.id]=o-1},ea=function(e){const t=q3[e];return Ue[t]},BO=function(n,s){const e={section:Us,type:Us,description:n,task:n,classes:[]},t=SO(o1,s);e.startTime=t.startTime,e.endTime=t.endTime,e.id=t.id,e.active=t.active,e.done=t.done,e.crit=t.crit,e.milestone=t.milestone,o1=e,cc.push(e)},A2=function(){const t=function(e){const n=Ue[e];let t="";switch(Ue[e].raw.startTime.type){case"prevTaskEnd":{const e=ea(n.prevTaskId);n.startTime=e.endTime;break}case"getStartDate":t=a1(void 0,mn,Ue[e].raw.startTime.startData),t&&(Ue[e].startTime=t);break}return Ue[e].startTime&&(Ue[e].endTime=G3(Ue[e].startTime,mn,Ue[e].raw.endTime.data,ko),Ue[e].endTime&&(Ue[e].processed=!0,Ue[e].manualEndTime=kr(Ue[e].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),W3(Ue[e],mn,vo,xo))),Ue[e].processed};let e=!0;for(const[n,s]of Ue.entries())t(n),e=e&&s.processed;return e},DO=function(t,n){let e=n;q().securityLevel!=="loose"&&(e=Jn(n)),t.split(",").forEach(function(t){ea(t)!==void 0&&(j3(t,()=>{window.open(e,"_self")}),Y0[t]=e)}),$3(t,"clickable")},$3=function(e,t){e.split(",").forEach(function(n){let e=ea(n);e!==void 0&&e.classes.push(t)})},IO=function(t,n,s){if(q().securityLevel!=="loose"||n===void 0)return;let e=[];if(typeof s=="string"){e=s.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<e.length;n++){let t=e[n].trim();t.charAt(0)==='"'&&t.charAt(t.length-1)==='"'&&(t=t.substr(1,t.length-2)),e[n]=t}}e.length===0&&e.push(t),ea(t)!==void 0&&j3(t,()=>{jt.runFunc(n,...e)})},j3=function(e,t){U0.push(function(){const n=document.querySelector(`[id="${e}"]`);n!==null&&n.addEventListener("click",function(){t()})},function(){const n=document.querySelector(`[id="${e}-text"]`);n!==null&&n.addEventListener("click",function(){t()})})},MO=function(e,t,n){e.split(",").forEach(function(e){IO(e,t,n)}),$3(e,"clickable")},NO=function(e){U0.forEach(function(t){t(e)})},H0={parseDirective:iO,getConfig:()=>q().gantt,clear:sO,setDateFormat:fO,getDateFormat:mO,enableInclusiveEndDates:dO,endDatesAreInclusive:pO,enableTopAxis:gO,topAxisEnabled:yO,setAxisFormat:aO,getAxisFormat:oO,setTickInterval:lO,getTickInterval:cO,setTodayMarker:uO,getTodayMarker:hO,setAccTitle:Tr,getAccTitle:Dr,setDiagramTitle:un,getDiagramTitle:hn,setAccDescription:Ir,getAccDescription:Mr,addSection:wO,getSections:TO,getTasks:EO,addTask:LO,findTaskById:ea,addTaskOrg:BO,setIncludes:bO,getIncludes:_O,setExcludes:xO,getExcludes:vO,setClickEvent:MO,setLink:DO,getLinks:kO,bindFunctions:NO,parseDuration:H3,isInvalidDate:U3};function X3(t,n,s){let e=!0;for(;e;)e=!1,s.forEach(function(s){const o="^\\s*"+s+"\\s*$",i=new RegExp(o);t[0].match(i)&&(n[s]=!0,t.shift(1),e=!0)})}const RO=function(){B.debug("Something is calling, setConf, remove the call")};let Mn;const FO=function(C,a,x,n){const e=q().gantt,r=q().securityLevel;let c;r==="sandbox"&&(c=_t("#i"+a));const m=_t(r==="sandbox"?c.nodes()[0].contentDocument.body:"body"),l=r==="sandbox"?c.nodes()[0].contentDocument:document,u=l.getElementById(a);Mn=u.parentElement.offsetWidth,Mn===void 0&&(Mn=1200),e.useWidth!==void 0&&(Mn=e.useWidth);const i=n.db.getTasks(),d=i.length*(e.barHeight+e.barGap)+2*e.topPadding;u.setAttribute("viewBox","0 0 "+Mn+" "+d);const o=m.select(`[id="${a}"]`),t=Jv().domain([D5(i,function(e){return e.startTime}),B5(i,function(e){return e.endTime})]).rangeRound([0,Mn-e.leftPadding-e.rightPadding]);let s=[];for(const e of i)s.push(e.type);const p=s;s=O(s);function g(s,o){const t=s.startTime,n=o.startTime;let e=0;return t>n?e=1:t<n&&(e=-1),e}i.sort(g),v(i,Mn,d),cn(o,d,Mn,e.useMaxWidth),o.append("text").text(n.db.getDiagramTitle()).attr("x",Mn/2).attr("y",e.titleTopMargin).attr("class","titleText");function v(l,i,a){const c=e.barHeight,r=c+e.barGap,t=e.topPadding,o=e.leftPadding,d=Fp().domain([0,s.length]).range(["#00B9FA","#F95002"]).interpolate(Q_);j(r,t,o,i,a,l,n.db.getExcludes(),n.db.getIncludes()),y(o,t,i,a),b(l,r,t,o,c,d,i),_(r,t),w(o,t,i,a)}function b(h,c,l,r,i,f,d){o.append("g").selectAll("rect").data(h).enter().append("rect").attr("x",0).attr("y",function(t,e){return e=t.order,e*c+l-2}).attr("width",function(){return d-e.rightPadding/2}).attr("height",c).attr("class",function(t){for(const[n,o]of s.entries())if(t.type===o)return"section section"+n%e.numberSectionStyles;return"section section0"});const u=o.append("g").selectAll("rect").data(h).enter(),m=n.db.getLinks();if(u.append("rect").attr("id",function(e){return e.id}).attr("rx",3).attr("ry",3).attr("x",function(e){return e.milestone?t(e.startTime)+r+.5*(t(e.endTime)-t(e.startTime))-.5*i:t(e.startTime)+r}).attr("y",function(t,e){return e=t.order,e*c+l}).attr("width",function(e){return e.milestone?i:t(e.renderEndTime||e.endTime)-t(e.startTime)}).attr("height",i).attr("transform-origin",function(e,n){return n=e.order,(t(e.startTime)+r+.5*(t(e.endTime)-t(e.startTime))).toString()+"px "+(n*c+l+.5*i).toString()+"px"}).attr("class",function(n){const a="task";let o="";n.classes.length>0&&(o=n.classes.join(" "));let i=0;for(const[t,o]of s.entries())n.type===o&&(i=t%e.numberSectionStyles);let t="";return n.active?n.crit?t+=" activeCrit":t=" active":n.done?n.crit?t=" doneCrit":t=" done":n.crit&&(t+=" crit"),t.length===0&&(t=" task"),n.milestone&&(t=" milestone "+t),t+=i,t+=" "+o,a+t}),u.append("text").attr("id",function(e){return e.id+"-text"}).text(function(e){return e.task}).attr("font-size",e.fontSize).attr("x",function(n){let s=t(n.startTime),o=t(n.renderEndTime||n.endTime);n.milestone&&(s+=.5*(t(n.endTime)-t(n.startTime))-.5*i),n.milestone&&(o=s+i);const a=this.getBBox().width;return a>o-s?o+a+1.5*e.leftPadding>d?s+r-5:o+r+5:(o-s)/2+s+r}).attr("y",function(n,t){return t=n.order,t*c+e.barHeight/2+(e.fontSize/2-2)+l}).attr("text-height",i).attr("class",function(n){const u=t(n.startTime);let l=t(n.endTime);n.milestone&&(l=u+i);const r=this.getBBox().width;let c="";n.classes.length>0&&(c=n.classes.join(" "));let a=0;for(const[t,o]of s.entries())n.type===o&&(a=t%e.numberSectionStyles);let o="";return n.active&&(n.crit?o="activeCritText"+a:o="activeText"+a),n.done?n.crit?o=o+" doneCritText"+a:o=o+" doneText"+a:n.crit&&(o=o+" critText"+a),n.milestone&&(o+=" milestoneText"),r>l-u?l+r+1.5*e.leftPadding>d?c+" taskTextOutsideLeft taskTextOutside"+a+" "+o:c+" taskTextOutsideRight taskTextOutside"+a+" "+o+" width-"+r:c+" taskText taskText"+a+" "+o+" width-"+r}),q().securityLevel==="sandbox"){let t;t=_t("#i"+a);const e=t.nodes()[0].contentDocument;u.filter(function(e){return m[e.id]!==void 0}).each(function(n){var s=e.querySelector("#"+n.id),o=e.querySelector("#"+n.id+"-text"),t;const i=s.parentNode;t=e.createElement("a"),t.setAttribute("xlink:href",m[n.id]),t.setAttribute("target","_top"),i.appendChild(t),t.appendChild(s),t.appendChild(o)})}}function j(g,p,r,v,c,l,m,h){const a=l.reduce((e,{startTime:t})=>e?Math.min(e,t):t,0),d=l.reduce((e,{endTime:t})=>e?Math.max(e,t):t,0),f=n.db.getDateFormat();if(!a||!d)return;const u=[];let i=null,s=kr(a);for(;s.valueOf()<=d;)n.db.isInvalidDate(s,f,m,h)?i?i.end=s:i={start:s,end:s}:i&&(u.push(i),i=null),s=s.add(1,"d");o.append("g").selectAll("rect").data(u).enter().append("rect").attr("id",function(e){return"exclude-"+e.start.format("YYYY-MM-DD")}).attr("x",function(e){return t(e.start)+r}).attr("y",e.gridLineStartPadding).attr("width",function(e){const n=e.end.add(1,"day");return t(n)-t(e.start)}).attr("height",c-p-e.gridLineStartPadding).attr("transform-origin",function(e,n){return(t(e.start)+r+.5*(t(e.end)-t(e.start))).toString()+"px "+(n*g+.5*c).toString()+"px"}).attr("class","exclude-range")}function y(c,a,l,r){let s=V5(t).tickSize(-r+a+e.gridLineStartPadding).tickFormat(Dl(n.db.getAxisFormat()||e.axisFormat||"%Y-%m-%d"));const i=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(n.db.getTickInterval()||e.tickInterval);if(i!==null){const e=i[1];switch(i[2]){case"minute":s.ticks(Cl.every(e));break;case"hour":s.ticks(Sl.every(e));break;case"day":s.ticks(Ss.every(e));break;case"week":s.ticks(As.every(e));break;case"month":s.ticks(Ll.every(e));break}}if(o.append("g").attr("class","grid").attr("transform","translate("+c+", "+(r-50)+")").call(s).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),n.db.topAxisEnabled()||e.topAxis){let s=P5(t).tickSize(-r+a+e.gridLineStartPadding).tickFormat(Dl(n.db.getAxisFormat()||e.axisFormat||"%Y-%m-%d"));if(i!==null){const e=i[1];switch(i[2]){case"minute":s.ticks(Cl.every(e));break;case"hour":s.ticks(Sl.every(e));break;case"day":s.ticks(Ss.every(e));break;case"week":s.ticks(As.every(e));break;case"month":s.ticks(Ll.every(e));break}}o.append("g").attr("class","grid").attr("transform","translate("+c+", "+a+")").call(s).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function _(t,i){const n=[];let a=0;for(const[t,e]of s.entries())n[t]=[e,h(e,p)];o.append("g").selectAll("text").data(n).enter().append(function(n){const t=n[0].split(Xt.lineBreakRegex),s=-(t.length-1)/2,e=l.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("dy",s+"em");for(const[s,o]of t.entries()){const n=l.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttribute("alignment-baseline","central"),n.setAttribute("x","10"),s>0&&n.setAttribute("dy","1em"),n.textContent=o,e.appendChild(n)}return e}).attr("x",10).attr("y",function(s,e){if(e>0)for(let o=0;o<e;o++)return a+=n[e-1][1],s[1]*t/2+a*t+i;else return s[1]*t/2+i}).attr("font-size",e.sectionFontSize).attr("font-size",e.sectionFontSize).attr("class",function(t){for(const[n,o]of s.entries())if(t[0]===o)return"sectionTitle sectionTitle"+n%e.numberSectionStyles;return"sectionTitle"})}function w(i,u,d,c){const s=n.db.getTodayMarker();if(s==="off")return;const l=o.append("g").attr("class","today"),r=new Date,a=l.append("line");a.attr("x1",t(r)+i).attr("x2",t(r)+i).attr("y1",e.titleTopMargin).attr("y2",c-e.titleTopMargin).attr("class","today"),s!==""&&a.attr("style",s.replace(/,/g,";"))}function O(e){const t={},n=[];for(let s=0,o=e.length;s<o;++s)Object.prototype.hasOwnProperty.call(t,e[s])||(t[e[s]]=!0,n.push(e[s]));return n}function f(e){let t=e.length;const n={};for(;t;)n[e[--t]]=(n[e[t]]||0)+1;return n}function h(e,t){return f(t)[e]||0}},OO={setConf:RO,draw:FO};l1=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},t=[6,9,10],n={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(s,o,i,e,t,n){switch(n.length-1,t){case 1:return e;case 4:break;case 6:e.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},e(t,[2,3]),e(t,[2,4]),e(t,[2,5]),e(t,[2,6])],defaultActions:{4:[2,1]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},o=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,e){switch(e){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return e}();n.lexer=o;function s(){this.yy={}}return s.prototype=n,n.Parser=s,new s}(),l1.parser=l1;const PO=l1;K3="",Z3=!1;const VO=e=>{B.debug("Setting message to: "+e),K3=e},YO=()=>K3,zO=e=>{Z3=e},UO=()=>Z3,WO={setMessage:VO,getMessage:YO,setInfo:zO,getInfo:UO,clear:Br},HO=(t,e,n)=>{try{B.debug(`Rendering info diagram
`+t);const o=q().securityLevel;let i;o==="sandbox"&&(i=_t("#i"+e));const s=_t(o==="sandbox"?i.nodes()[0].contentDocument.body:"body").select("#"+e);s.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+n),s.attr("height",100),s.attr("width",400)}catch(e){B.error("Error while rendering info diagram"),B.error(e.message)}},GO={draw:HO},qO=e=>e.match(/^\s*info/)!==null;c1=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},r=[1,4],s=[1,5],a=[1,6],o=[1,7],n=[1,9],i=[1,11,13,15,17,19,20,26,27,28,29],j=[2,5],l=[1,6,11,13,15,17,19,20,26,27,28,29],t=[26,27,28],b=[2,8],y=[1,18],h=[1,19],m=[1,20],f=[1,21],p=[1,22],g=[1,23],v=[1,28],d=[6,26,27,28,29],c={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(o,r,i,n,s,e){var t=e.length-1;switch(s){case 4:n.setShowData(!0);break;case 7:this.$=e[t-1];break;case 9:n.addSection(e[t-1],n.cleanupValue(e[t]));break;case 10:this.$=e[t].trim(),n.setDiagramTitle(this.$);break;case 11:this.$=e[t].trim(),n.setAccTitle(this.$);break;case 12:case 13:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 14:n.addSection(e[t].substr(8)),this.$=e[t].substr(8);break;case 21:n.parseDirective("%%{","open_directive");break;case 22:n.parseDirective(e[t],"type_directive");break;case 23:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 24:n.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:r,21:8,26:s,27:a,28:o,29:n},{1:[3]},{3:10,4:2,5:3,6:r,21:8,26:s,27:a,28:o,29:n},{3:11,4:2,5:3,6:r,21:8,26:s,27:a,28:o,29:n},e(i,j,{7:12,8:[1,13]}),e(l,[2,18]),e(l,[2,19]),e(l,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},e(t,b,{21:8,9:16,10:17,5:24,1:[2,3],11:y,13:h,15:m,17:f,19:p,20:g,29:n}),e(i,j,{7:25}),{23:26,24:[1,27],32:v},e([24,32],[2,22]),e(i,[2,6]),{4:29,26:s,27:a,28:o},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,b,{21:8,9:16,10:17,5:24,1:[2,4],11:y,13:h,15:m,17:f,19:p,20:g,29:n}),e(d,[2,16]),{25:34,31:[1,35]},e(d,[2,24]),e(i,[2,7]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),{23:36,32:v},{32:[2,23]},e(d,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},_=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,e){switch(e){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return e}();c.lexer=_;function u(){this.yy={}}return u.prototype=c,c.Parser=u,new u}(),c1.parser=c1;const $O=c1,jO=e=>e.match(/^\s*pie/)!==null||e.match(/^\s*bar/)!==null;let uc={},G0=!1;const XO=function(e,t,n){xe.parseDirective(this,e,t,n)},KO=function(e,t){e=Xt.sanitizeText(e,q()),uc[e]===void 0&&(uc[e]=t,B.debug("Added new section :",e))},ZO=()=>uc,QO=function(e){G0=e},JO=function(){return G0},tP=function(e){return e.substring(0,1)===":"&&(e=e.substring(1).trim()),Number(e.trim())},eP=function(){uc={},G0=!1,Br()},rP={parseDirective:XO,getConfig:()=>q().pie,addSection:KO,getSections:ZO,cleanupValue:tP,clear:eP,setAccTitle:Tr,getAccTitle:Dr,setDiagramTitle:un,getDiagramTitle:hn,setShowData:QO,getShowData:JO,getAccDescription:Mr,setAccDescription:Ir};let Nn=q(),Rn;const da=450,nP=(d,a,v,n)=>{try{Nn=q(),B.debug(`Rendering info diagram
`+d);const j=q().securityLevel;let b;j==="sandbox"&&(b=_t("#i"+a));const w=_t(j==="sandbox"?b.nodes()[0].contentDocument.body:"body"),O=j==="sandbox"?b.nodes()[0].contentDocument:document;n.db.clear(),n.parser.parse(d),B.debug("Parsed info diagram");const y=O.getElementById(a);Rn=y.parentElement.offsetWidth,Rn===void 0&&(Rn=1200),Nn.useWidth!==void 0&&(Rn=Nn.useWidth),Nn.pie.useWidth!==void 0&&(Rn=Nn.pie.useWidth);const _=w.select("#"+a);cn(_,da,Rn,Nn.pie.useMaxWidth),y.setAttribute("viewBox","0 0 "+Rn+" "+da);var p=40,e=18,o=4,h=Math.min(Rn,da)/2-p,s=_.append("g").attr("transform","translate("+Rn/2+","+da/2+")"),r=n.db.getSections(),c=0,u;Object.keys(r).forEach(function(e){c+=r[e]});const v=Nn.themeVariables;var g=[v.pie1,v.pie2,v.pie3,v.pie4,v.pie5,v.pie6,v.pie7,v.pie8,v.pie9,v.pie10,v.pie11,v.pie12],t=Mp().range(g),m=Object.entries(r).map(function(e,t){return{order:t,name:e[0],value:e[1]}}),f=fk().value(function(e){return e.value}).sort(function(e,t){return e.order-t.order}),i=f(m),l=xh().innerRadius(0).outerRadius(h);s.selectAll("mySlices").data(i).enter().append("path").attr("d",l).attr("fill",function(e){return t(e.data.name)}).attr("class","pieCircle"),s.selectAll("mySlices").data(i).enter().append("text").text(function(e){return(e.data.value/c*100).toFixed(0)+"%"}).attr("transform",function(e){return"translate("+l.centroid(e)+")"}).style("text-anchor","middle").attr("class","slice"),s.append("text").text(n.db.getDiagramTitle()).attr("x",0).attr("y",-(da-50)/2).attr("class","pieTitleText"),u=s.selectAll(".legend").data(t.domain()).enter().append("g").attr("class","legend").attr("transform",function(c,s){const n=e+o,i=n*t.domain().length/2,a=12*e,r=s*n-i;return"translate("+a+","+r+")"}),u.append("rect").attr("width",e).attr("height",e).style("fill",t).style("stroke",t),u.data(i).append("text").attr("x",e+o).attr("y",e-o).text(function(e){return n.db.getShowData()||Nn.showData||Nn.pie.showData?e.data.name+" ["+e.data.value+"]":e.data.name})}catch(e){B.error("Error while rendering info diagram"),B.error(e)}},iP={draw:nP};u1=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},M=[1,3],s=[1,5],o=[1,6],i=[1,7],n=[1,8],_=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],v=[1,22],g=[2,13],f=[1,26],d=[1,27],u=[1,28],h=[1,29],m=[1,30],l=[1,31],p=[1,24],r=[1,32],a=[1,33],P=[1,36],j=[71,72],R=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],B=[1,56],L=[1,57],N=[1,58],D=[1,59],H=[1,60],I=[1,61],z=[1,62],c=[62,63],C=[1,74],b=[1,70],w=[1,71],y=[1,72],O=[1,73],x=[1,75],E=[1,79],k=[1,80],S=[1,77],A=[1,78],t=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],F={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(o,r,i,e,s,t){var n=t.length-1;switch(s){case 6:this.$=t[n].trim(),e.setAccTitle(this.$);break;case 7:case 8:this.$=t[n].trim(),e.setAccDescription(this.$);break;case 9:e.parseDirective("%%{","open_directive");break;case 10:e.parseDirective(t[n],"type_directive");break;case 11:t[n]=t[n].trim().replace(/'/g,'"'),e.parseDirective(t[n],"arg_directive");break;case 12:e.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:e.addRequirement(t[n-3],t[n-4]);break;case 20:e.setNewReqId(t[n-2]);break;case 21:e.setNewReqText(t[n-2]);break;case 22:e.setNewReqRisk(t[n-2]);break;case 23:e.setNewReqVerifyMethod(t[n-2]);break;case 26:this.$=e.RequirementType.REQUIREMENT;break;case 27:this.$=e.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=e.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=e.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=e.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=e.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=e.RiskLevel.LOW_RISK;break;case 33:this.$=e.RiskLevel.MED_RISK;break;case 34:this.$=e.RiskLevel.HIGH_RISK;break;case 35:this.$=e.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=e.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=e.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=e.VerifyType.VERIFY_TEST;break;case 39:e.addElement(t[n-3]);break;case 40:e.setNewElementType(t[n-2]);break;case 41:e.setNewElementDocRef(t[n-2]);break;case 44:e.addRelationship(t[n-2],t[n],t[n-4]);break;case 45:e.addRelationship(t[n-2],t[n-4],t[n]);break;case 46:this.$=e.Relationships.CONTAINS;break;case 47:this.$=e.Relationships.COPIES;break;case 48:this.$=e.Relationships.DERIVES;break;case 49:this.$=e.Relationships.SATISFIES;break;case 50:this.$=e.Relationships.VERIFIES;break;case 51:this.$=e.Relationships.REFINES;break;case 52:this.$=e.Relationships.TRACES;break}},table:[{3:1,4:2,6:M,9:4,14:s,16:o,18:i,19:n},{1:[3]},{3:10,4:2,5:[1,9],6:M,9:4,14:s,16:o,18:i,19:n},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},e(_,[2,8]),{20:[2,9]},{3:16,4:2,6:M,9:4,14:s,16:o,18:i,19:n},{1:[2,2]},{4:21,5:v,7:17,8:g,9:4,14:s,16:o,18:i,19:n,23:18,24:19,25:20,26:23,32:25,40:f,41:d,42:u,43:h,44:m,45:l,53:p,71:r,72:a},{11:34,12:[1,35],22:P},e([12,22],[2,10]),e(_,[2,6]),e(_,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:v,7:38,8:g,9:4,14:s,16:o,18:i,19:n,23:18,24:19,25:20,26:23,32:25,40:f,41:d,42:u,43:h,44:m,45:l,53:p,71:r,72:a},{4:21,5:v,7:39,8:g,9:4,14:s,16:o,18:i,19:n,23:18,24:19,25:20,26:23,32:25,40:f,41:d,42:u,43:h,44:m,45:l,53:p,71:r,72:a},{4:21,5:v,7:40,8:g,9:4,14:s,16:o,18:i,19:n,23:18,24:19,25:20,26:23,32:25,40:f,41:d,42:u,43:h,44:m,45:l,53:p,71:r,72:a},{4:21,5:v,7:41,8:g,9:4,14:s,16:o,18:i,19:n,23:18,24:19,25:20,26:23,32:25,40:f,41:d,42:u,43:h,44:m,45:l,53:p,71:r,72:a},{4:21,5:v,7:42,8:g,9:4,14:s,16:o,18:i,19:n,23:18,24:19,25:20,26:23,32:25,40:f,41:d,42:u,43:h,44:m,45:l,53:p,71:r,72:a},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},e(j,[2,26]),e(j,[2,27]),e(j,[2,28]),e(j,[2,29]),e(j,[2,30]),e(j,[2,31]),e(R,[2,55]),e(R,[2,56]),e(_,[2,4]),{13:51,21:[1,52]},e(_,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:B,65:L,66:N,67:D,68:H,69:I,70:z},{61:63,64:B,65:L,66:N,67:D,68:H,69:I,70:z},{11:64,22:P},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},e(c,[2,46]),e(c,[2,47]),e(c,[2,48]),e(c,[2,49]),e(c,[2,50]),e(c,[2,51]),e(c,[2,52]),{63:[1,68]},e(_,[2,5]),{5:C,29:69,30:b,33:w,35:y,37:O,39:x},{5:E,39:k,55:76,56:S,58:A},{32:81,71:r,72:a},{32:82,71:r,72:a},e(t,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:C,29:87,30:b,33:w,35:y,37:O,39:x},e(t,[2,25]),e(t,[2,39]),{31:[1,88]},{31:[1,89]},{5:E,39:k,55:90,56:S,58:A},e(t,[2,43]),e(t,[2,44]),e(t,[2,45]),{32:91,71:r,72:a},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},e(t,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},e(t,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:C,29:116,30:b,33:w,35:y,37:O,39:x},{5:C,29:117,30:b,33:w,35:y,37:O,39:x},{5:C,29:118,30:b,33:w,35:y,37:O,39:x},{5:C,29:119,30:b,33:w,35:y,37:O,39:x},{5:E,39:k,55:120,56:S,58:A},{5:E,39:k,55:121,56:S,58:A},e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),e(t,[2,23]),e(t,[2,40]),e(t,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},V=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(n,e,t){switch(t){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return e.yytext=e.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n{<>\-=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return e}();F.lexer=V;function T(){this.yy={}}return T.prototype=F,F.Parser=T,new T}(),u1.parser=u1;const sP=u1,aP=e=>e.match(/^\s*requirement(Diagram)?/)!==null;let q0=[],vr={},Ia={},di={},Ma={};const oP={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},lP={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},cP={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},uP={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},hP=function(e,t,n){xe.parseDirective(this,e,t,n)},fP=(e,t)=>(Ia[e]===void 0&&(Ia[e]={name:e,type:t,id:vr.id,text:vr.text,risk:vr.risk,verifyMethod:vr.verifyMethod}),vr={},Ia[e]),dP=()=>Ia,pP=e=>{vr!==void 0&&(vr.id=e)},gP=e=>{vr!==void 0&&(vr.text=e)},yP=e=>{vr!==void 0&&(vr.risk=e)},mP=e=>{vr!==void 0&&(vr.verifyMethod=e)},bP=e=>(Ma[e]===void 0&&(Ma[e]={name:e,type:di.type,docRef:di.docRef},B.info("Added new requirement: ",e)),di={},Ma[e]),_P=()=>Ma,xP=e=>{di!==void 0&&(di.type=e)},vP=e=>{di!==void 0&&(di.docRef=e)},kP=(e,t,n)=>{q0.push({type:e,src:t,dst:n})},wP=()=>q0,TP=()=>{q0=[],vr={},Ia={},di={},Ma={},Br()},EP={RequirementType:oP,RiskLevel:lP,VerifyType:cP,Relationships:uP,parseDirective:hP,getConfig:()=>q().req,addRequirement:fP,getRequirements:dP,setNewReqId:pP,setNewReqText:gP,setNewReqRisk:yP,setNewReqVerifyMethod:mP,setAccTitle:Tr,getAccTitle:Dr,setAccDescription:Ir,getAccDescription:Mr,addElement:bP,getElements:_P,setNewElementType:xP,setNewElementDocRef:vP,addRelationship:kP,getRelationships:wP,clear:TP},h1={CONTAINS:"contains",ARROW:"arrow"},CP=(n,e)=>{let t=n.append("defs").append("marker").attr("id",h1.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");t.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),t.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),t.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),n.append("defs").append("marker").attr("id",h1.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,${e.line_height}`).attr("stroke-width",1)},Q3={ReqMarkers:h1,insertLineEndings:CP};let Te={},L2=0;const J3=(e,t)=>e.insert("rect","#"+t).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",Te.rect_min_width+"px").attr("height",Te.rect_min_height+"px"),t4=(s,o,c)=>{let i=Te.rect_min_width/2,t=s.append("text").attr("class","req reqLabel reqTitle").attr("id",o).attr("x",i).attr("y",Te.rect_padding).attr("dominant-baseline","hanging"),n=0;c.forEach(e=>{n==0?t.append("tspan").attr("text-anchor","middle").attr("x",Te.rect_min_width/2).attr("dy",0).text(e):t.append("tspan").attr("text-anchor","middle").attr("x",Te.rect_min_width/2).attr("dy",Te.line_height*.75).text(e),n++});let a=1.5*Te.rect_padding,r=n*Te.line_height*.75,e=a+r;return s.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",Te.rect_min_width).attr("y1",e).attr("y2",e),{titleNode:t,y:e}},e4=(a,r,o,i)=>{let s=a.append("text").attr("class","req reqLabel").attr("id",r).attr("x",Te.rect_padding).attr("y",i).attr("dominant-baseline","hanging"),t=0;const n=30;let e=[];return o.forEach(s=>{let o=s.length;for(;o>n&&t<3;){let i=s.substring(0,n);s=s.substring(n,s.length),o=s.length,e[e.length]=i,t++}if(t==3){let t=e[e.length-1];e[e.length-1]=t.substring(0,t.length-4)+"..."}else e[e.length]=s;t=0}),e.forEach(e=>{s.append("tspan").attr("x",Te.rect_padding).attr("dy",Te.line_height).text(e)}),s},SP=(n,o,r,i)=>{const a=o.node().getTotalLength(),t=o.node().getPointAtLength(a*.5),s="rel"+L2;L2++;const e=n.append("text").attr("class","req relationshipLabel").attr("id",s).attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(i).node().getBBox();n.insert("rect","#"+s).attr("class","req reqLabelBox").attr("x",t.x-e.width/2).attr("y",t.y-e.height/2).attr("width",e.width).attr("height",e.height).attr("fill","white").attr("fill-opacity","85%")},AP=function(n,e,s,o,i){const a=s.edge(Ws(e.src),Ws(e.dst)),r=js().x(function(e){return e.x}).y(function(e){return e.y}),t=n.insert("path","#"+o).attr("class","er relationshipLine").attr("d",r(a.points)).attr("fill","none");e.type==i.db.Relationships.CONTAINS?t.attr("marker-start","url("+Xt.getUrl(Te.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(t.attr("stroke-dasharray","10,7"),t.attr("marker-end","url("+Xt.getUrl(Te.arrowMarkerAbsolute)+"#"+Q3.ReqMarkers.ARROW+"_line_ending)")),SP(n,t,Te,`<<${e.type}>>`)},LP=(e,t,n)=>{Object.keys(e).forEach(s=>{let o=e[s];s=Ws(s),B.info("Added new requirement: ",s);const i=n.append("g").attr("id",s),r="req-"+s,c=J3(i,r);let l=t4(i,s+"_title",[`<<${o.type}>>`,`${o.name}`]);e4(i,s+"_body",[`Id: ${o.id}`,`Text: ${o.text}`,`Risk: ${o.risk}`,`Verification: ${o.verifyMethod}`],l.y);const a=c.node().getBBox();t.setNode(s,{width:a.width,height:a.height,shape:"rect",id:s})})},BP=(e,t,n)=>{Object.keys(e).forEach(o=>{let r=e[o];const s=Ws(o),i=n.append("g").attr("id",s),a="element-"+s,l=J3(i,a);let d=t4(i,a+"_title",["<<Element>>",`${o}`]);e4(i,a+"_body",[`Type: ${r.type||"Not Specified"}`,`Doc Ref: ${r.docRef||"None"}`],d.y);const c=l.node().getBBox();t.setNode(s,{width:c.width,height:c.height,shape:"rect",id:s})})},DP=(e,t)=>(e.forEach(function(e){let n=Ws(e.src),s=Ws(e.dst);t.setEdge(n,s,{relationship:e})}),e),IP=function(t,e){e.nodes().forEach(function(n){n!==void 0&&e.node(n)!==void 0&&(t.select("#"+n),t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )"))})},Ws=e=>e.replace(/\s/g,"").replace(/\./g,"_"),MP=(m,i,f,t)=>{Te=q().requirement,t.db.clear(),t.parser.parse(m);const c=Te.securityLevel;let r;c==="sandbox"&&(r=_t("#i"+i));const e=_t(c==="sandbox"?r.nodes()[0].contentDocument.body:"body").select(`[id='${i}']`);Q3.insertLineEndings(e,Te);const n=new Ve({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:Te.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let h=t.db.getRequirements(),u=t.db.getElements(),d=t.db.getRelationships();LP(h,n,e),BP(u,n,e),DP(d,n),ta(n),IP(e,n),d.forEach(function(s){AP(e,s,n,i,t)});const s=Te.rect_padding,o=e.node().getBBox(),l=o.width+s*2,a=o.height+s*2;cn(e,a,l,Te.useMaxWidth),e.attr("viewBox",`${o.x-s} ${o.y-s} ${l} ${a}`)},NP={draw:MP};f1=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},D=[1,2],z=[1,3],L=[1,5],s=[1,7],o=[2,5],M=[1,15],S=[1,17],c=[1,19],l=[1,21],d=[1,22],u=[1,23],h=[1,29],m=[1,30],f=[1,31],p=[1,32],g=[1,33],v=[1,34],b=[1,35],j=[1,36],y=[1,37],_=[1,38],A=[1,39],O=[1,40],a=[1,42],i=[1,43],E=[1,45],k=[1,46],r=[1,47],w=[1,48],x=[1,49],n=[1,50],H=[1,53],t=[1,4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],T=[4,5,21,54,56],N=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],V=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,53,54,56,57,62,63,64,65,73,83],$=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,52,54,56,57,62,63,64,65,73,83],I=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,54,56,57,62,63,64,65,73,83],F=[71,72,73],C=[1,125],B=[1,4,5,7,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],R={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,box_section:11,box_line:12,participant_statement:13,openDirective:14,typeDirective:15,closeDirective:16,":":17,argDirective:18,box:19,restOfLine:20,end:21,signal:22,autonumber:23,NUM:24,off:25,activate:26,actor:27,deactivate:28,note_statement:29,links_statement:30,link_statement:31,properties_statement:32,details_statement:33,title:34,legacy_title:35,acc_title:36,acc_title_value:37,acc_descr:38,acc_descr_value:39,acc_descr_multiline_value:40,loop:41,rect:42,opt:43,alt:44,else_sections:45,par:46,par_sections:47,critical:48,option_sections:49,break:50,option:51,and:52,else:53,participant:54,AS:55,participant_actor:56,note:57,placement:58,text2:59,over:60,actor_pair:61,links:62,link:63,properties:64,details:65,spaceList:66,",":67,left_of:68,right_of:69,signaltype:70,"+":71,"-":72,ACTOR:73,SOLID_OPEN_ARROW:74,DOTTED_OPEN_ARROW:75,SOLID_ARROW:76,DOTTED_ARROW:77,SOLID_CROSS:78,DOTTED_CROSS:79,SOLID_POINT:80,DOTTED_POINT:81,TXT:82,open_directive:83,type_directive:84,arg_directive:85,close_directive:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",17:":",19:"box",20:"restOfLine",21:"end",23:"autonumber",24:"NUM",25:"off",26:"activate",28:"deactivate",34:"title",35:"legacy_title",36:"acc_title",37:"acc_title_value",38:"acc_descr",39:"acc_descr_value",40:"acc_descr_multiline_value",41:"loop",42:"rect",43:"opt",44:"alt",46:"par",48:"critical",50:"break",51:"option",52:"and",53:"else",54:"participant",55:"AS",56:"participant_actor",57:"note",60:"over",62:"links",63:"link",64:"properties",65:"details",67:",",68:"left_of",69:"right_of",71:"+",72:"-",73:"ACTOR",74:"SOLID_OPEN_ARROW",75:"DOTTED_OPEN_ARROW",76:"SOLID_ARROW",77:"DOTTED_ARROW",78:"SOLID_CROSS",79:"DOTTED_CROSS",80:"SOLID_POINT",81:"DOTTED_POINT",82:"TXT",83:"open_directive",84:"type_directive",85:"arg_directive",86:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[11,0],[11,2],[12,2],[12,1],[12,1],[6,4],[6,6],[10,1],[10,4],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[49,1],[49,4],[47,1],[47,4],[45,1],[45,4],[13,5],[13,3],[13,5],[13,3],[29,4],[29,4],[30,3],[31,3],[32,3],[33,3],[66,2],[66,1],[61,3],[61,1],[58,1],[58,1],[22,5],[22,5],[22,4],[27,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[59,1],[14,1],[15,1],[18,1],[16,1]],performAction:function(o,r,i,n,s,e){var t=e.length-1;switch(s){case 4:return n.apply(e[t]),e[t];case 5:case 10:this.$=[];break;case 6:case 11:e[t-1].push(e[t]),this.$=e[t-1];break;case 7:case 8:case 12:case 13:this.$=e[t];break;case 9:case 14:this.$=[];break;case 18:e[t-1].unshift({type:"boxStart",boxData:n.parseBoxData(e[t-2])}),e[t-1].push({type:"boxEnd",boxText:e[t-2]}),this.$=e[t-1];break;case 20:this.$={type:"sequenceIndex",sequenceIndex:Number(e[t-2]),sequenceIndexStep:Number(e[t-1]),sequenceVisible:!0,signalType:n.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceIndex:Number(e[t-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:n.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:n.LINETYPE.AUTONUMBER};break;case 23:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:n.LINETYPE.AUTONUMBER};break;case 24:this.$={type:"activeStart",signalType:n.LINETYPE.ACTIVE_START,actor:e[t-1]};break;case 25:this.$={type:"activeEnd",signalType:n.LINETYPE.ACTIVE_END,actor:e[t-1]};break;case 31:n.setDiagramTitle(e[t].substring(6)),this.$=e[t].substring(6);break;case 32:n.setDiagramTitle(e[t].substring(7)),this.$=e[t].substring(7);break;case 33:this.$=e[t].trim(),n.setAccTitle(this.$);break;case 34:case 35:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 36:e[t-1].unshift({type:"loopStart",loopText:n.parseMessage(e[t-2]),signalType:n.LINETYPE.LOOP_START}),e[t-1].push({type:"loopEnd",loopText:e[t-2],signalType:n.LINETYPE.LOOP_END}),this.$=e[t-1];break;case 37:e[t-1].unshift({type:"rectStart",color:n.parseMessage(e[t-2]),signalType:n.LINETYPE.RECT_START}),e[t-1].push({type:"rectEnd",color:n.parseMessage(e[t-2]),signalType:n.LINETYPE.RECT_END}),this.$=e[t-1];break;case 38:e[t-1].unshift({type:"optStart",optText:n.parseMessage(e[t-2]),signalType:n.LINETYPE.OPT_START}),e[t-1].push({type:"optEnd",optText:n.parseMessage(e[t-2]),signalType:n.LINETYPE.OPT_END}),this.$=e[t-1];break;case 39:e[t-1].unshift({type:"altStart",altText:n.parseMessage(e[t-2]),signalType:n.LINETYPE.ALT_START}),e[t-1].push({type:"altEnd",signalType:n.LINETYPE.ALT_END}),this.$=e[t-1];break;case 40:e[t-1].unshift({type:"parStart",parText:n.parseMessage(e[t-2]),signalType:n.LINETYPE.PAR_START}),e[t-1].push({type:"parEnd",signalType:n.LINETYPE.PAR_END}),this.$=e[t-1];break;case 41:e[t-1].unshift({type:"criticalStart",criticalText:n.parseMessage(e[t-2]),signalType:n.LINETYPE.CRITICAL_START}),e[t-1].push({type:"criticalEnd",signalType:n.LINETYPE.CRITICAL_END}),this.$=e[t-1];break;case 42:e[t-1].unshift({type:"breakStart",breakText:n.parseMessage(e[t-2]),signalType:n.LINETYPE.BREAK_START}),e[t-1].push({type:"breakEnd",optText:n.parseMessage(e[t-2]),signalType:n.LINETYPE.BREAK_END}),this.$=e[t-1];break;case 45:this.$=e[t-3].concat([{type:"option",optionText:n.parseMessage(e[t-1]),signalType:n.LINETYPE.CRITICAL_OPTION},e[t]]);break;case 47:this.$=e[t-3].concat([{type:"and",parText:n.parseMessage(e[t-1]),signalType:n.LINETYPE.PAR_AND},e[t]]);break;case 49:this.$=e[t-3].concat([{type:"else",altText:n.parseMessage(e[t-1]),signalType:n.LINETYPE.ALT_ELSE},e[t]]);break;case 50:e[t-3].type="addParticipant",e[t-3].description=n.parseMessage(e[t-1]),this.$=e[t-3];break;case 51:e[t-1].type="addParticipant",this.$=e[t-1];break;case 52:e[t-3].type="addActor",e[t-3].description=n.parseMessage(e[t-1]),this.$=e[t-3];break;case 53:e[t-1].type="addActor",this.$=e[t-1];break;case 54:this.$=[e[t-1],{type:"addNote",placement:e[t-2],actor:e[t-1].actor,text:e[t]}];break;case 55:e[t-2]=[].concat(e[t-1],e[t-1]).slice(0,2),e[t-2][0]=e[t-2][0].actor,e[t-2][1]=e[t-2][1].actor,this.$=[e[t-1],{type:"addNote",placement:n.PLACEMENT.OVER,actor:e[t-2].slice(0,2),text:e[t]}];break;case 56:this.$=[e[t-1],{type:"addLinks",actor:e[t-1].actor,text:e[t]}];break;case 57:this.$=[e[t-1],{type:"addALink",actor:e[t-1].actor,text:e[t]}];break;case 58:this.$=[e[t-1],{type:"addProperties",actor:e[t-1].actor,text:e[t]}];break;case 59:this.$=[e[t-1],{type:"addDetails",actor:e[t-1].actor,text:e[t]}];break;case 62:this.$=[e[t-2],e[t]];break;case 63:this.$=e[t];break;case 64:this.$=n.PLACEMENT.LEFTOF;break;case 65:this.$=n.PLACEMENT.RIGHTOF;break;case 66:this.$=[e[t-4],e[t-1],{type:"addMessage",from:e[t-4].actor,to:e[t-1].actor,signalType:e[t-3],msg:e[t]},{type:"activeStart",signalType:n.LINETYPE.ACTIVE_START,actor:e[t-1]}];break;case 67:this.$=[e[t-4],e[t-1],{type:"addMessage",from:e[t-4].actor,to:e[t-1].actor,signalType:e[t-3],msg:e[t]},{type:"activeEnd",signalType:n.LINETYPE.ACTIVE_END,actor:e[t-4]}];break;case 68:this.$=[e[t-3],e[t-1],{type:"addMessage",from:e[t-3].actor,to:e[t-1].actor,signalType:e[t-2],msg:e[t]}];break;case 69:this.$={type:"addParticipant",actor:e[t]};break;case 70:this.$=n.LINETYPE.SOLID_OPEN;break;case 71:this.$=n.LINETYPE.DOTTED_OPEN;break;case 72:this.$=n.LINETYPE.SOLID;break;case 73:this.$=n.LINETYPE.DOTTED;break;case 74:this.$=n.LINETYPE.SOLID_CROSS;break;case 75:this.$=n.LINETYPE.DOTTED_CROSS;break;case 76:this.$=n.LINETYPE.SOLID_POINT;break;case 77:this.$=n.LINETYPE.DOTTED_POINT;break;case 78:this.$=n.parseMessage(e[t].trim().substring(1));break;case 79:n.parseDirective("%%{","open_directive");break;case 80:n.parseDirective(e[t],"type_directive");break;case 81:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 82:n.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:D,5:z,6:4,7:L,14:6,83:s},{1:[3]},{3:8,4:D,5:z,6:4,7:L,14:6,83:s},{3:9,4:D,5:z,6:4,7:L,14:6,83:s},{3:10,4:D,5:z,6:4,7:L,14:6,83:s},e([1,4,5,19,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],o,{8:11}),{15:12,84:[1,13]},{84:[2,79]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:M,5:S,6:41,9:14,10:16,13:18,14:6,19:c,22:20,23:l,26:d,27:44,28:u,29:24,30:25,31:26,32:27,33:28,34:h,35:m,36:f,38:p,40:g,41:v,42:b,43:j,44:y,46:_,48:A,50:O,54:a,56:i,57:E,62:k,63:r,64:w,65:x,73:n,83:s},{16:51,17:[1,52],86:H},e([17,86],[2,80]),e(t,[2,6]),{6:41,10:54,13:18,14:6,19:c,22:20,23:l,26:d,27:44,28:u,29:24,30:25,31:26,32:27,33:28,34:h,35:m,36:f,38:p,40:g,41:v,42:b,43:j,44:y,46:_,48:A,50:O,54:a,56:i,57:E,62:k,63:r,64:w,65:x,73:n,83:s},e(t,[2,8]),e(t,[2,9]),e(t,[2,17]),{20:[1,55]},{5:[1,56]},{5:[1,59],24:[1,57],25:[1,58]},{27:60,73:n},{27:61,73:n},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},{5:[1,66]},e(t,[2,31]),e(t,[2,32]),{37:[1,67]},{39:[1,68]},e(t,[2,35]),{20:[1,69]},{20:[1,70]},{20:[1,71]},{20:[1,72]},{20:[1,73]},{20:[1,74]},{20:[1,75]},e(t,[2,43]),{27:76,73:n},{27:77,73:n},{70:78,74:[1,79],75:[1,80],76:[1,81],77:[1,82],78:[1,83],79:[1,84],80:[1,85],81:[1,86]},{58:87,60:[1,88],68:[1,89],69:[1,90]},{27:91,73:n},{27:92,73:n},{27:93,73:n},{27:94,73:n},e([5,55,67,74,75,76,77,78,79,80,81,82],[2,69]),{5:[1,95]},{18:96,85:[1,97]},{5:[2,82]},e(t,[2,7]),e(T,[2,10],{11:98}),e(t,[2,19]),{5:[1,100],24:[1,99]},{5:[1,101]},e(t,[2,23]),{5:[1,102]},{5:[1,103]},e(t,[2,26]),e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),e(t,[2,30]),e(t,[2,33]),e(t,[2,34]),e(N,o,{8:104}),e(N,o,{8:105}),e(N,o,{8:106}),e(V,o,{45:107,8:108}),e($,o,{47:109,8:110}),e(I,o,{49:111,8:112}),e(N,o,{8:113}),{5:[1,115],55:[1,114]},{5:[1,117],55:[1,116]},{27:120,71:[1,118],72:[1,119],73:n},e(F,[2,70]),e(F,[2,71]),e(F,[2,72]),e(F,[2,73]),e(F,[2,74]),e(F,[2,75]),e(F,[2,76]),e(F,[2,77]),{27:121,73:n},{27:123,61:122,73:n},{73:[2,64]},{73:[2,65]},{59:124,82:C},{59:126,82:C},{59:127,82:C},{59:128,82:C},e(B,[2,15]),{16:129,86:H},{86:[2,81]},{4:[1,132],5:[1,134],12:131,13:133,21:[1,130],54:a,56:i},{5:[1,135]},e(t,[2,21]),e(t,[2,22]),e(t,[2,24]),e(t,[2,25]),{4:M,5:S,6:41,9:14,10:16,13:18,14:6,19:c,21:[1,136],22:20,23:l,26:d,27:44,28:u,29:24,30:25,31:26,32:27,33:28,34:h,35:m,36:f,38:p,40:g,41:v,42:b,43:j,44:y,46:_,48:A,50:O,54:a,56:i,57:E,62:k,63:r,64:w,65:x,73:n,83:s},{4:M,5:S,6:41,9:14,10:16,13:18,14:6,19:c,21:[1,137],22:20,23:l,26:d,27:44,28:u,29:24,30:25,31:26,32:27,33:28,34:h,35:m,36:f,38:p,40:g,41:v,42:b,43:j,44:y,46:_,48:A,50:O,54:a,56:i,57:E,62:k,63:r,64:w,65:x,73:n,83:s},{4:M,5:S,6:41,9:14,10:16,13:18,14:6,19:c,21:[1,138],22:20,23:l,26:d,27:44,28:u,29:24,30:25,31:26,32:27,33:28,34:h,35:m,36:f,38:p,40:g,41:v,42:b,43:j,44:y,46:_,48:A,50:O,54:a,56:i,57:E,62:k,63:r,64:w,65:x,73:n,83:s},{21:[1,139]},{4:M,5:S,6:41,9:14,10:16,13:18,14:6,19:c,21:[2,48],22:20,23:l,26:d,27:44,28:u,29:24,30:25,31:26,32:27,33:28,34:h,35:m,36:f,38:p,40:g,41:v,42:b,43:j,44:y,46:_,48:A,50:O,53:[1,140],54:a,56:i,57:E,62:k,63:r,64:w,65:x,73:n,83:s},{21:[1,141]},{4:M,5:S,6:41,9:14,10:16,13:18,14:6,19:c,21:[2,46],22:20,23:l,26:d,27:44,28:u,29:24,30:25,31:26,32:27,33:28,34:h,35:m,36:f,38:p,40:g,41:v,42:b,43:j,44:y,46:_,48:A,50:O,52:[1,142],54:a,56:i,57:E,62:k,63:r,64:w,65:x,73:n,83:s},{21:[1,143]},{4:M,5:S,6:41,9:14,10:16,13:18,14:6,19:c,21:[2,44],22:20,23:l,26:d,27:44,28:u,29:24,30:25,31:26,32:27,33:28,34:h,35:m,36:f,38:p,40:g,41:v,42:b,43:j,44:y,46:_,48:A,50:O,51:[1,144],54:a,56:i,57:E,62:k,63:r,64:w,65:x,73:n,83:s},{4:M,5:S,6:41,9:14,10:16,13:18,14:6,19:c,21:[1,145],22:20,23:l,26:d,27:44,28:u,29:24,30:25,31:26,32:27,33:28,34:h,35:m,36:f,38:p,40:g,41:v,42:b,43:j,44:y,46:_,48:A,50:O,54:a,56:i,57:E,62:k,63:r,64:w,65:x,73:n,83:s},{20:[1,146]},e(t,[2,51]),{20:[1,147]},e(t,[2,53]),{27:148,73:n},{27:149,73:n},{59:150,82:C},{59:151,82:C},{59:152,82:C},{67:[1,153],82:[2,63]},{5:[2,56]},{5:[2,78]},{5:[2,57]},{5:[2,58]},{5:[2,59]},{5:[1,154]},e(t,[2,18]),e(T,[2,11]),{13:155,54:a,56:i},e(T,[2,13]),e(T,[2,14]),e(t,[2,20]),e(t,[2,36]),e(t,[2,37]),e(t,[2,38]),e(t,[2,39]),{20:[1,156]},e(t,[2,40]),{20:[1,157]},e(t,[2,41]),{20:[1,158]},e(t,[2,42]),{5:[1,159]},{5:[1,160]},{59:161,82:C},{59:162,82:C},{5:[2,68]},{5:[2,54]},{5:[2,55]},{27:163,73:n},e(B,[2,16]),e(T,[2,12]),e(V,o,{8:108,45:164}),e($,o,{8:110,47:165}),e(I,o,{8:112,49:166}),e(t,[2,50]),e(t,[2,52]),{5:[2,66]},{5:[2,67]},{82:[2,62]},{21:[2,49]},{21:[2,47]},{21:[2,45]}],defaultActions:{7:[2,79],8:[2,1],9:[2,2],10:[2,3],53:[2,82],89:[2,64],90:[2,65],97:[2,81],124:[2,56],125:[2,78],126:[2,57],127:[2,58],128:[2,59],150:[2,68],151:[2,54],152:[2,55],161:[2,66],162:[2,67],163:[2,62],164:[2,49],165:[2,47],166:[2,45]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},W=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(n,e,t){switch(t){case 0:return this.begin("open_directive"),83;case 1:return this.begin("type_directive"),84;case 2:return this.popState(),this.begin("arg_directive"),17;case 3:return this.popState(),this.popState(),86;case 4:return 85;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 24;case 12:return this.begin("LINE"),19;case 13:return this.begin("ID"),54;case 14:return this.begin("ID"),56;case 15:return e.yytext=e.yytext.trim(),this.begin("ALIAS"),73;case 16:return this.popState(),this.popState(),this.begin("LINE"),55;case 17:return this.popState(),this.popState(),5;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),44;case 22:return this.begin("LINE"),53;case 23:return this.begin("LINE"),46;case 24:return this.begin("LINE"),52;case 25:return this.begin("LINE"),48;case 26:return this.begin("LINE"),51;case 27:return this.begin("LINE"),50;case 28:return this.popState(),20;case 29:return 21;case 30:return 68;case 31:return 69;case 32:return 62;case 33:return 63;case 34:return 64;case 35:return 65;case 36:return 60;case 37:return 57;case 38:return this.begin("ID"),26;case 39:return this.begin("ID"),28;case 40:return 34;case 41:return 35;case 42:return this.begin("acc_title"),36;case 43:return this.popState(),"acc_title_value";case 44:return this.begin("acc_descr"),38;case 45:return this.popState(),"acc_descr_value";case 46:this.begin("acc_descr_multiline");break;case 47:this.popState();break;case 48:return"acc_descr_multiline_value";case 49:return 7;case 50:return 23;case 51:return 25;case 52:return 67;case 53:return 5;case 54:return e.yytext=e.yytext.trim(),73;case 55:return 76;case 56:return 77;case 57:return 74;case 58:return 75;case 59:return 78;case 60:return 79;case 61:return 80;case 62:return 81;case 63:return 82;case 64:return 71;case 65:return 72;case 66:return 5;case 67:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^->:\n,;]+?([-]*[^->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^+\->:\n,;]+((?!(-x|--x|-\)|--\)))[-]*[^+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[)])/i,/^(?:--[)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[47,48],inclusive:!1},acc_descr:{rules:[45],inclusive:!1},acc_title:{rules:[43],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,15],inclusive:!1},ALIAS:{rules:[7,8,16,17],inclusive:!1},LINE:{rules:[7,8,28],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24,25,26,27,29,30,31,32,33,34,35,36,37,38,39,40,41,42,44,46,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}};return e}();R.lexer=W;function P(){this.yy={}}return P.prototype=R,R.Parser=P,new P}(),f1.parser=f1;const RP=f1,FP=e=>e.match(/^\s*sequenceDiagram/)!==null;let pa,li={},Hs=[],Xr=[],nu=!1,d1,Pn;const OP=function(e,t,n){xe.parseDirective(this,e,t,n)},PP=function(e){Hs.push({name:e.text,wrap:e.wrap===void 0&&qi()||!!e.wrap,fill:e.color,actorKeys:[]}),Pn=Hs.slice(-1)[0]},p1=function(n,s,t,o){let i=Pn;const e=li[n];if(e){if(Pn&&e.box&&Pn!==e.box)throw new Error("A same participant should only be defined in one Box: "+e.name+" can't be in '"+e.box.name+"' and in '"+Pn.name+"' at the same time.");if(i=e.box?e.box:Pn,e.box=i,e&&s===e.name&&t==null)return}(t==null||t.text==null)&&(t={text:s,wrap:null,type:o}),(o==null||t.text==null)&&(t={text:s,wrap:null,type:o}),li[n]={box:i,name:s,description:t.text,wrap:t.wrap===void 0&&qi()||!!t.wrap,prevActor:pa,links:{},properties:{},actorCnt:null,rectData:null,type:o||"participant"},pa&&li[pa]&&(li[pa].nextActor=n),Pn&&Pn.actorKeys.push(n),pa=n},VP=n=>{let e,t=0;for(e=0;e<Xr.length;e++)Xr[e].type===no.ACTIVE_START&&Xr[e].from.actor===n&&t++,Xr[e].type===no.ACTIVE_END&&Xr[e].from.actor===n&&t--;return t},YP=function(t,n,e,s){Xr.push({from:t,to:n,message:e.text,wrap:e.wrap===void 0&&qi()||!!e.wrap,answer:s})},Ae=function(e,s,t={text:void 0,wrap:void 0},n){if(n===no.ACTIVE_END&&VP(e.actor)<1){let t=new Error("Trying to inactivate an inactive participant ("+e.actor+")");throw t.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},t}return Xr.push({from:e,to:s,message:t.text,wrap:t.wrap===void 0&&qi()||!!t.wrap,type:n}),!0},zP=function(){return Hs.length>0},UP=function(){return Hs.some(e=>e.name)},WP=function(){return Xr},HP=function(){return Hs},GP=function(){return li},wo=function(e){return li[e]},qP=function(){return Object.keys(li)},$P=function(){nu=!0},jP=function(){nu=!1},XP=()=>nu,KP=function(e){d1=e},qi=()=>d1!==void 0?d1:q().sequence.wrap,ZP=function(){li={},Hs=[],Xr=[],nu=!1,Br()},QP=function(n){const e=n.trim(),t={text:e.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:e.match(/^:?wrap:/)!==null||(e.match(/^:?nowrap:/)===null&&void 0)};return B.debug("parseMessage:",t),t},JP=function(s){const t=s.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let n=t!=null&&t[1]?t[1].trim():"transparent",e=t!=null&&t[2]?t[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",n)||(n="transparent",e=s.trim());else{const t=(new Option).style;t.color=n,t.color!==n&&(n="transparent",e=s.trim())}return{color:n,text:e!==void 0?Ur(e.replace(/^:?(?:no)?wrap:/,""),q()):void 0,wrap:e!==void 0?e.match(/^:?wrap:/)!==null||(e.match(/^:?nowrap:/)===null&&void 0):void 0}},no={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},tV={FILLED:0,OPEN:1},eV={LEFTOF:0,RIGHTOF:1,OVER:2},r4=function(t,s,e){e.text,e.wrap===void 0&&qi()||e.wrap;const n=[].concat(t,t);Xr.push({from:n[0],to:n[1],message:e.text,wrap:e.wrap===void 0&&qi()||!!e.wrap,type:no.NOTE,placement:s})},n4=function(e,t){const n=wo(e);try{let e=Ur(t.text,q());e=e.replace(/&amp;/g,"&"),e=e.replace(/&equals;/g,"=");const s=JSON.parse(e);$0(n,s)}catch(e){B.error("error while parsing actor link text",e)}},rV=function(t,n){const s=wo(t);try{const a={};let t=Ur(n.text,q());e=t.indexOf("@"),t=t.replace(/&amp;/g,"&"),t=t.replace(/&equals;/g,"=");var e,o=t.slice(0,e-1).trim(),i=t.slice(e+1).trim();a[o]=i,$0(s,a)}catch(e){B.error("error while parsing actor link text",e)}};function $0(e,t){if(e.links==null)e.links=t;else for(let n in t)e.links[n]=t[n]}const i4=function(e,t){const n=wo(e);try{let e=Ur(t.text,q());const s=JSON.parse(e);s4(n,s)}catch(e){B.error("error while parsing actor properties text",e)}};function s4(e,t){if(e.properties==null)e.properties=t;else for(let n in t)e.properties[n]=t[n]}function nV(){Pn=void 0}const a4=function(t,n){const e=wo(t),s=document.getElementById(n.text);try{const n=s.innerHTML,t=JSON.parse(n);t.properties&&s4(e,t.properties),t.links&&$0(e,t.links)}catch(e){B.error("error while parsing actor details text",e)}},iV=function(e,t){if(e!==void 0&&e.properties!==void 0)return e.properties[t]},o4=function(e){if(Array.isArray(e))e.forEach(function(e){o4(e)});else switch(e.type){case"sequenceIndex":Xr.push({from:void 0,to:void 0,message:{start:e.sequenceIndex,step:e.sequenceIndexStep,visible:e.sequenceVisible},wrap:!1,type:e.signalType});break;case"addParticipant":p1(e.actor,e.actor,e.description,"participant");break;case"addActor":p1(e.actor,e.actor,e.description,"actor");break;case"activeStart":Ae(e.actor,void 0,void 0,e.signalType);break;case"activeEnd":Ae(e.actor,void 0,void 0,e.signalType);break;case"addNote":r4(e.actor,e.placement,e.text);break;case"addLinks":n4(e.actor,e.text);break;case"addALink":rV(e.actor,e.text);break;case"addProperties":i4(e.actor,e.text);break;case"addDetails":a4(e.actor,e.text);break;case"addMessage":Ae(e.from,e.to,e.msg,e.signalType);break;case"boxStart":PP(e.boxData);break;case"boxEnd":nV();break;case"loopStart":Ae(void 0,void 0,e.loopText,e.signalType);break;case"loopEnd":Ae(void 0,void 0,void 0,e.signalType);break;case"rectStart":Ae(void 0,void 0,e.color,e.signalType);break;case"rectEnd":Ae(void 0,void 0,void 0,e.signalType);break;case"optStart":Ae(void 0,void 0,e.optText,e.signalType);break;case"optEnd":Ae(void 0,void 0,void 0,e.signalType);break;case"altStart":Ae(void 0,void 0,e.altText,e.signalType);break;case"else":Ae(void 0,void 0,e.altText,e.signalType);break;case"altEnd":Ae(void 0,void 0,void 0,e.signalType);break;case"setAccTitle":Tr(e.text);break;case"parStart":Ae(void 0,void 0,e.parText,e.signalType);break;case"and":Ae(void 0,void 0,e.parText,e.signalType);break;case"parEnd":Ae(void 0,void 0,void 0,e.signalType);break;case"criticalStart":Ae(void 0,void 0,e.criticalText,e.signalType);break;case"option":Ae(void 0,void 0,e.optionText,e.signalType);break;case"criticalEnd":Ae(void 0,void 0,void 0,e.signalType);break;case"breakStart":Ae(void 0,void 0,e.breakText,e.signalType);break;case"breakEnd":Ae(void 0,void 0,void 0,e.signalType);break}},B2={addActor:p1,addMessage:YP,addSignal:Ae,addLinks:n4,addDetails:a4,addProperties:i4,autoWrap:qi,setWrap:KP,enableSequenceNumbers:$P,disableSequenceNumbers:jP,showSequenceNumbers:XP,getMessages:WP,getActors:GP,getActor:wo,getActorKeys:qP,getActorProperty:iV,getAccTitle:Dr,getBoxes:HP,getDiagramTitle:hn,setDiagramTitle:un,parseDirective:OP,getConfig:()=>q().sequence,clear:ZP,parseMessage:QP,parseBoxData:JP,LINETYPE:no,ARROWTYPE:tV,PLACEMENT:eV,addNote:r4,setAccTitle:Tr,apply:o4,setAccDescription:Ir,getAccDescription:Mr,hasAtLeastOneBox:zP,hasAtLeastOneBoxWithTitle:UP};let g1=[];const sV=e=>{g1.push(e)},l4=()=>{g1.forEach(e=>{e()}),g1=[]},iu=function(n,e){const t=n.append("rect");return t.attr("x",e.x),t.attr("y",e.y),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",e.width),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),e.class!==void 0&&t.attr("class",e.class),t},c4=(t,e)=>{sV(()=>{const n=document.querySelectorAll(t);n.length!==0&&(n[0].addEventListener("mouseover",function(){cV("actor"+e+"_popup")}),n[0].addEventListener("mouseout",function(){uV("actor"+e+"_popup")}))})},aV=function(m,n,u,l,f){if(n.links===void 0||n.links===null||Object.keys(n.links).length===0)return{height:0,width:0};const i=n.links,c=n.actorCnt,e=n.rectData;d="none",f&&(d="block !important");const s=m.append("g");s.attr("id","actor"+c+"_popup"),s.attr("class","actorPopupMenu"),s.attr("display",d),c4("#actor"+c+"_popup",c),h="",e.class!==void 0&&(h=" "+e.class);let r=e.width>u?e.width:u;const t=s.append("rect");if(t.attr("class","actorPopupMenuPanel"+h),t.attr("x",e.x),t.attr("y",e.height),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",r),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),i!=null){o=20;for(let t in i){var d,h,o,a=s.append("a"),p=Jn(i[t]);a.attr("xlink:href",p),a.attr("target","_blank"),EV(l)(t,a,e.x+10,e.height+o,r,20,{class:"actor"},l),o+=30}}return t.attr("height",o),{height:e.height+o,width:r}},u4=function(t,n,s,o){const e=t.append("image");e.attr("x",n),e.attr("y",s);var i=Jn(o);e.attr("xlink:href",i)},h4=function(t,n,s,o){const e=t.append("use");e.attr("x",n),e.attr("y",s);var i=Jn(o);e.attr("xlink:href","#"+i)},oV=function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = 'block'; }"},lV=function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = 'none'; }"},cV=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="block")},uV=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="none")},Gs=function(l,e){let s=0,t=0;const c=e.text.split(Xt.lineBreakRegex),[a,i]=ho(e.fontSize);let r=[],o=0,n=()=>e.y;if(e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0)switch(e.valign){case"top":case"start":n=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":n=()=>Math.round(e.y+(s+t+e.textMargin)/2);break;case"bottom":case"end":n=()=>Math.round(e.y+(s+t+2*e.textMargin)-e.textMargin);break}if(e.anchor!==void 0&&e.textMargin!==void 0&&e.width!==void 0)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle";break}for(let[h,u]of c.entries()){e.textMargin!==void 0&&e.textMargin===0&&a!==void 0&&(o=h*a);const d=l.append("text");if(d.attr("x",e.x),d.attr("y",n()),e.anchor!==void 0&&d.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),e.fontFamily!==void 0&&d.style("font-family",e.fontFamily),i!==void 0&&d.style("font-size",i),e.fontWeight!==void 0&&d.style("font-weight",e.fontWeight),e.fill!==void 0&&d.attr("fill",e.fill),e.class!==void 0&&d.attr("class",e.class),e.dy!==void 0?d.attr("dy",e.dy):o!==0&&d.attr("dy",o),e.tspan){const t=d.append("tspan");t.attr("x",e.x),e.fill!==void 0&&t.attr("fill",e.fill),t.text(u)}else d.text(u);e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0&&(t+=(d._groups||d)[0][0].getBBox().height,s=t),r.push(d)}return r},f4=function(n,e){function s(e,t,n,s,o){return e+","+t+" "+(e+n)+","+t+" "+(e+n)+","+(t+s-o)+" "+(e+n-o*1.2)+","+(t+s)+" "+e+","+(t+s)}const t=n.append("polygon");return t.attr("points",s(e.x,e.y,e.width,e.height,7)),t.attr("class","labelBox"),e.y=e.y+e.height/2,Gs(n,e),t};let yn=-1;const d4=(e,t)=>{e.selectAll&&e.selectAll(".actor-line").attr("class","200").attr("y2",t-55)},hV=function(l,t,r,d){const i=t.x+t.width/2,u=t.y+5,s=l.append("g");var n=s,o;d||(yn++,n.append("line").attr("id","actor"+yn).attr("x1",i).attr("y1",u).attr("x2",i).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),n=s.append("g"),t.actorCnt=yn,t.links!=null&&(n.attr("id","root-"+yn),c4("#root-"+yn,yn)));const e=su();o="actor",t.properties!=null&&t.properties.class?o=t.properties.class:e.fill="#eaeaea",e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e.class=o,e.rx=3,e.ry=3;const c=iu(n,e);if(t.rectData=e,t.properties!=null&&t.properties.icon){const s=t.properties.icon.trim();s.charAt(0)==="@"?h4(n,e.x+e.width-20,e.y+10,s.substr(1)):u4(n,e.x+e.width-20,e.y+10,s)}j0(r)(t.description,n,e.x,e.y,e.width,e.height,{class:"actor"},r);let a=t.height;if(c.node){const e=c.node().getBBox();t.height=e.height,a=e.height}return a},fV=function(i,e,a,r){const n=e.x+e.width/2,c=e.y+80;r||(yn++,i.append("line").attr("id","actor"+yn).attr("x1",n).attr("y1",c).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const s=i.append("g");s.attr("class","actor-man");const t=su();t.x=e.x,t.y=e.y,t.fill="#eaeaea",t.width=e.width,t.height=e.height,t.class="actor",t.rx=3,t.ry=3,s.append("line").attr("id","actor-man-torso"+yn).attr("x1",n).attr("y1",e.y+25).attr("x2",n).attr("y2",e.y+45),s.append("line").attr("id","actor-man-arms"+yn).attr("x1",n-18).attr("y1",e.y+33).attr("x2",n+18).attr("y2",e.y+33),s.append("line").attr("x1",n-18).attr("y1",e.y+60).attr("x2",n).attr("y2",e.y+45),s.append("line").attr("x1",n).attr("y1",e.y+45).attr("x2",n+16).attr("y2",e.y+60);const o=s.append("circle");o.attr("cx",e.x+e.width/2),o.attr("cy",e.y+10),o.attr("r",15),o.attr("width",e.width),o.attr("height",e.height);const l=s.node().getBBox();return e.height=l.height,j0(a)(e.description,s,t.x,t.y+35,t.width,t.height,{class:"actor"},a),e.height},dV=function(t,e,n,s){switch(e.type){case"actor":return fV(t,e,n,s);case"participant":return hV(t,e,n,s)}},pV=function(s,e,n){const t=s.append("g");p4(t,e),e.name&&j0(n)(e.name,t,e.x,e.y+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},n),t.lower()},gV=function(e){return e.append("g")},yV=function(a,e,s,i,o){const t=su(),n=e.anchored;t.x=e.startx,t.y=e.starty,t.class="activation"+o%3,t.width=e.stopx-e.startx,t.height=s-e.starty,iu(n,t)},mV=function(f,t,m,h){const{boxMargin:i,boxTextMargin:o,labelBoxHeight:u,labelBoxWidth:d,messageFontFamily:c,messageFontSize:a,messageFontWeight:r}=h,n=f.append("g"),s=function(e,t,s,o){return n.append("line").attr("x1",e).attr("y1",t).attr("x2",s).attr("y2",o).attr("class","loopLine")};s(t.startx,t.starty,t.stopx,t.starty),s(t.stopx,t.starty,t.stopx,t.stopy),s(t.startx,t.stopy,t.stopx,t.stopy),s(t.startx,t.starty,t.startx,t.stopy),t.sections!==void 0&&t.sections.forEach(function(e){s(t.startx,e.y,t.stopx,e.y).style("stroke-dasharray","3, 3")});let e=y1();e.text=m,e.x=t.startx,e.y=t.starty,e.fontFamily=c,e.fontSize=a,e.fontWeight=r,e.anchor="middle",e.valign="middle",e.tspan=!1,e.width=d||50,e.height=u||20,e.textMargin=o,e.class="labelText",f4(n,e),e=y1(),e.text=t.title,e.x=t.startx+d/2+(t.stopx-t.startx)/2,e.y=t.starty+i+o,e.anchor="middle",e.valign="middle",e.textMargin=o,e.class="loopText",e.fontFamily=c,e.fontSize=a,e.fontWeight=r,e.wrap=!0;let l=Gs(n,e);return t.sectionTitles!==void 0&&t.sectionTitles.forEach(function(s,d){if(s.message){e.text=s.message,e.x=t.startx+(t.stopx-t.startx)/2,e.y=t.sections[d].y+i+o,e.class="loopText",e.anchor="middle",e.valign="middle",e.tspan=!1,e.fontFamily=c,e.fontSize=a,e.fontWeight=r,e.wrap=t.wrap,l=Gs(n,e);let u=Math.round(l.map(e=>(e._groups||e)[0][0].getBBox().height).reduce((e,t)=>e+t));t.sections[d].height+=u-(i+o)}}),t.height=Math.round(t.stopy-t.starty),n},p4=function(t,e){iu(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"}).lower()},bV=function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},_V=function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},xV=function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},vV=function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},kV=function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},wV=function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},TV=function(e){e.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},y1=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},su=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},j0=function(){function n(t,n,s,o,i,a,r){const c=n.append("text").attr("x",s+i/2).attr("y",o+a/2+5).style("text-anchor","middle").text(t);e(c,r)}function t(f,h,s,o,i,c,r,a){const{actorFontSize:l,actorFontFamily:d,actorFontWeight:u}=a,[n,m]=ho(l),t=f.split(Xt.lineBreakRegex);for(let a=0;a<t.length;a++){const f=a*n-n*(t.length-1)/2,l=h.append("text").attr("x",s+i/2).attr("y",o).style("text-anchor","middle").style("font-size",m).style("font-weight",u).style("font-family",d);l.append("tspan").attr("x",s+i/2).attr("dy",f).text(t[a]),l.attr("y",o+c/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),e(l,r)}}function s(n,d,s,o,i,a,r,u){const c=d.append("switch"),l=c.append("foreignObject").attr("x",s).attr("y",o).attr("width",i).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");l.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,c,s,o,i,a,r,u),e(l,r)}function e(t,e){for(const n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),EV=function(){function n(t,n,s,o,r,c,i){const a=n.append("text").attr("x",s).attr("y",o).style("text-anchor","start").text(t);e(a,i)}function t(i,a,o,s,h,u,c,l){const{actorFontSize:t,actorFontFamily:d,actorFontWeight:r}=l,n=i.split(Xt.lineBreakRegex);for(let i=0;i<n.length;i++){const h=i*t-t*(n.length-1)/2,l=a.append("text").attr("x",o).attr("y",s).style("text-anchor","start").style("font-size",t).style("font-weight",r).style("font-family",d);l.append("tspan").attr("x",o).attr("dy",h).text(n[i]),l.attr("y",s+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),e(l,c)}}function s(n,d,s,o,i,a,r,u){const c=d.append("switch"),l=c.append("foreignObject").attr("x",s).attr("y",o).attr("width",i).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");l.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,c,s,o,i,a,r,u),e(l,r)}function e(t,e){for(const n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),ke={drawRect:iu,drawText:Gs,drawLabel:f4,drawActor:dV,drawBox:pV,drawPopup:aV,drawImage:u4,drawEmbeddedImage:h4,anchorElement:gV,drawActivation:yV,drawLoop:mV,drawBackgroundRect:p4,insertArrowHead:vV,insertArrowFilledHead:kV,insertSequenceNumber:wV,insertArrowCrossHead:TV,insertDatabaseIcon:bV,insertComputerIcon:_V,insertClockIcon:xV,getTextObj:y1,getNoteRect:su,popupMenu:oV,popdownMenu:lV,fixLifeLineHeights:d4,sanitizeUrl:Jn};let rt={};const kt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(e=>e.height||0))+(this.loops.length===0?0:this.loops.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.messages.length===0?0:this.messages.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.notes.length===0?0:this.notes.map(e=>e.height||0).reduce((e,t)=>e+t))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(e){this.boxes.push(e)},addActor:function(e){this.actors.push(e)},addLoop:function(e){this.loops.push(e)},addMessage:function(e){this.messages.push(e)},addNote:function(e){this.notes.push(e)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,y4(q())},updateVal:function(e,t,n,s){e[t]===void 0?e[t]=n:e[t]=s(n,e[t])},updateBounds:function(t,n,s,o){const e=this;let i=0;function a(a){return function(c){i++;const r=e.sequenceItems.length-i+1;e.updateVal(c,"starty",n-r*rt.boxMargin,Math.min),e.updateVal(c,"stopy",o+r*rt.boxMargin,Math.max),e.updateVal(kt.data,"startx",t-r*rt.boxMargin,Math.min),e.updateVal(kt.data,"stopx",s+r*rt.boxMargin,Math.max),a!=="activation"&&(e.updateVal(c,"startx",t-r*rt.boxMargin,Math.min),e.updateVal(c,"stopx",s+r*rt.boxMargin,Math.max),e.updateVal(kt.data,"starty",n-r*rt.boxMargin,Math.min),e.updateVal(kt.data,"stopy",o+r*rt.boxMargin,Math.max))}}this.sequenceItems.forEach(a()),this.activations.forEach(a("activation"))},insert:function(e,t,n,s){const o=Math.min(e,n),i=Math.max(e,n),a=Math.min(t,s),r=Math.max(t,s);this.updateVal(kt.data,"startx",o,Math.min),this.updateVal(kt.data,"starty",a,Math.min),this.updateVal(kt.data,"stopx",i,Math.max),this.updateVal(kt.data,"stopy",r,Math.max),this.updateBounds(o,a,i,r)},newActivation:function(e,s,o){const t=o[e.from.actor],i=au(e.from.actor).length||0,n=t.x+t.width/2+(i-1)*rt.activationWidth/2;this.activations.push({startx:n,starty:this.verticalPos+2,stopx:n+rt.activationWidth,stopy:void 0,actor:e.from.actor,anchored:ke.anchorElement(s)})},endActivation:function(e){const t=this.activations.map(function(e){return e.actor}).lastIndexOf(e.from.actor);return this.activations.splice(t,1)[0]},createLoop:function(e={message:void 0,wrap:!1,width:void 0},t){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:e.message,wrap:e.wrap,width:e.width,height:0,fill:t}},newLoop:function(e={message:void 0,wrap:!1,width:void 0},t){this.sequenceItems.push(this.createLoop(e,t))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:kt.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},bumpVerticalPos:function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},CV=function(i,e){kt.bumpVerticalPos(rt.boxMargin),e.height=rt.boxMargin,e.starty=kt.getVerticalPos();const n=ke.getNoteRect();n.x=e.startx,n.y=e.starty,n.width=e.width||rt.width,n.class="note";const o=i.append("g"),a=ke.drawRect(o,n),t=ke.getTextObj();t.x=e.startx,t.y=e.starty,t.width=n.width,t.dy="1em",t.text=e.message,t.class="noteText",t.fontFamily=rt.noteFontFamily,t.fontSize=rt.noteFontSize,t.fontWeight=rt.noteFontWeight,t.anchor=rt.noteAlign,t.textMargin=rt.noteMargin,t.valign="center";const r=Gs(o,t),s=Math.round(r.map(e=>(e._groups||e)[0][0].getBBox().height).reduce((e,t)=>e+t));a.attr("height",s+2*rt.noteMargin),e.height+=s+2*rt.noteMargin,kt.bumpVerticalPos(s+2*rt.noteMargin),e.stopy=e.starty+s+2*rt.noteMargin,e.stopx=e.startx+n.width,kt.insert(e.startx,e.starty,e.stopx,e.stopy),kt.models.addNote(e)},$i=e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),cs=e=>({fontFamily:e.noteFontFamily,fontSize:e.noteFontSize,fontWeight:e.noteFontWeight}),m1=e=>({fontFamily:e.actorFontFamily,fontSize:e.actorFontSize,fontWeight:e.actorFontWeight});function SV(d,e){kt.bumpVerticalPos(10);const{startx:o,stopx:i,message:a}=e,c=Xt.splitBreaks(a).length,s=jt.calculateTextDimensions(a,$i(rt)),r=s.height/c;e.height+=r,kt.bumpVerticalPos(r);let n,t=s.height-10;const l=s.width;if(o===i){n=kt.getVerticalPos()+t,rt.rightAngles||(t+=rt.boxMargin,n=kt.getVerticalPos()+t),t+=30;const e=Math.max(l/2,rt.width/2);kt.insert(o-e,kt.getVerticalPos()-10+t,i+e,kt.getVerticalPos()+30+t)}else t+=rt.boxMargin,n=kt.getVerticalPos()+t,kt.insert(o,n-10,i,n);return kt.bumpVerticalPos(t),e.height+=t,e.stopy=e.starty+e.height,kt.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),n}const AV=function(r,f,i,o){const{startx:n,stopx:c,starty:d,message:l,type:s,sequenceIndex:p,sequenceVisible:u}=f,h=jt.calculateTextDimensions(l,$i(rt)),t=ke.getTextObj();t.x=n,t.y=d+10,t.width=c-n,t.class="messageText",t.dy="1em",t.text=l,t.fontFamily=rt.messageFontFamily,t.fontSize=rt.messageFontSize,t.fontWeight=rt.messageFontWeight,t.anchor=rt.messageAlign,t.valign="center",t.textMargin=rt.wrapPadding,t.tspan=!1,Gs(r,t);const m=h.width;let e;n===c?rt.rightAngles?e=r.append("path").attr("d",`M  ${n},${i} H ${n+Math.max(rt.width/2,m/2)} V ${i+25} H ${n}`):e=r.append("path").attr("d","M "+n+","+i+" C "+(n+60)+","+(i-10)+" "+(n+60)+","+(i+30)+" "+n+","+(i+20)):(e=r.append("line"),e.attr("x1",n),e.attr("y1",i),e.attr("x2",c),e.attr("y2",i)),s===o.db.LINETYPE.DOTTED||s===o.db.LINETYPE.DOTTED_CROSS||s===o.db.LINETYPE.DOTTED_POINT||s===o.db.LINETYPE.DOTTED_OPEN?(e.style("stroke-dasharray","3, 3"),e.attr("class","messageLine1")):e.attr("class","messageLine0");let a="";rt.arrowMarkerAbsolute&&(a=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,a=a.replace(/\(/g,"\\("),a=a.replace(/\)/g,"\\)")),e.attr("stroke-width",2),e.attr("stroke","none"),e.style("fill","none"),(s===o.db.LINETYPE.SOLID||s===o.db.LINETYPE.DOTTED)&&e.attr("marker-end","url("+a+"#arrowhead)"),(s===o.db.LINETYPE.SOLID_POINT||s===o.db.LINETYPE.DOTTED_POINT)&&e.attr("marker-end","url("+a+"#filled-head)"),(s===o.db.LINETYPE.SOLID_CROSS||s===o.db.LINETYPE.DOTTED_CROSS)&&e.attr("marker-end","url("+a+"#crosshead)"),(u||rt.showSequenceNumbers)&&(e.attr("marker-start","url("+a+"#sequencenumber)"),r.append("text").attr("x",n).attr("y",i+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(p))},b1=function(c,l,i,a,d,r,n){if(d.hideUnusedParticipants===!0){const e=new Set;r.forEach(t=>{e.add(t.from),e.add(t.to)}),i=i.filter(t=>e.has(t))}let s=0,t=0,o=0,e;for(const u of i){const r=l[u],d=r.box;e&&e!=d&&(n||kt.models.addBox(e),t+=rt.boxMargin+e.margin),d&&d!=e&&(n||(d.x=s+t,d.y=a),t+=d.margin),r.width=r.width||rt.width,r.height=Math.max(r.height||rt.height,rt.height),r.margin=r.margin||rt.actorMargin,r.x=s+t,r.y=kt.getVerticalPos();const h=ke.drawActor(c,r,rt,n);o=Math.max(o,h),kt.insert(r.x,a,r.x+r.width,r.height),s+=r.width+t,r.box&&(r.box.width=s+d.margin-r.box.x),t=r.margin,e=r.box,kt.models.addActor(r)}e&&!n&&kt.models.addBox(e),kt.bumpVerticalPos(o)},g4=function(n,s,o,i){let e=0,t=0;for(const c of o){const a=s[c],l=DV(a),r=ke.drawPopup(n,a,l,rt,rt.forceMenus,i);r.height>e&&(e=r.height),r.width+a.x>t&&(t=r.width+a.x)}return{maxHeight:e,maxWidth:t}},y4=function(e){Xe(rt,e),e.fontFamily&&(rt.actorFontFamily=rt.noteFontFamily=rt.messageFontFamily=e.fontFamily),e.fontSize&&(rt.actorFontSize=rt.noteFontSize=rt.messageFontSize=e.fontSize),e.fontWeight&&(rt.actorFontWeight=rt.noteFontWeight=rt.messageFontWeight=e.fontWeight)},au=function(e){return kt.activations.filter(function(t){return t.actor===e})},D2=function(t,s){const e=s[t],n=au(t),o=n.reduce(function(e,t){return Math.min(e,t.startx)},e.x+e.width/2),i=n.reduce(function(e,t){return Math.max(e,t.stopx)},e.x+e.width/2);return[o,i]};function dn(t,e,o,n,i){kt.bumpVerticalPos(o);let s=n;if(e.id&&e.message&&t[e.id]){const o=t[e.id].width,i=$i(rt);e.message=jt.wrapLabel(`[${e.message}]`,o-2*rt.wrapPadding,i),e.width=o,e.wrap=!0;const r=jt.calculateTextDimensions(e.message,i),a=Math.max(r.height,rt.labelBoxHeight);s=n+a,B.debug(`${a} - ${e.message}`)}i(e),kt.bumpVerticalPos(s)}const LV=function(A,r,S,e){const{securityLevel:d,sequence:k}=q();rt=k,e.db.clear(),e.parser.parse(A);let m;d==="sandbox"&&(m=_t("#i"+r));const E=_t(d==="sandbox"?m.nodes()[0].contentDocument.body:"body"),C=d==="sandbox"?m.nodes()[0].contentDocument:document;kt.init(),B.debug(e.db);const t=d==="sandbox"?E.select(`[id="${r}"]`):_t(`[id="${r}"]`),o=e.db.getActors(),v=e.db.getBoxes(),h=e.db.getActorKeys(),i=e.db.getMessages(),f=e.db.getDiagramTitle(),j=e.db.hasAtLeastOneBox(),x=e.db.hasAtLeastOneBoxWithTitle(),b=BV(o,i,e);rt.height=IV(o,b,v),ke.insertComputerIcon(t),ke.insertDatabaseIcon(t),ke.insertClockIcon(t),j&&(kt.bumpVerticalPos(rt.boxMargin),x&&kt.bumpVerticalPos(v[0].textMaxHeight)),b1(t,o,h,0,rt,i,!1);const n=RV(i,o,b,e);ke.insertArrowHead(t),ke.insertArrowCrossHead(t),ke.insertArrowFilledHead(t),ke.insertSequenceNumber(t);function O(s,e){const n=kt.endActivation(s);n.starty+18>e&&(n.starty=e-6,e+=12),ke.drawActivation(t,n,e,rt,au(s.from.actor).length),kt.insert(n.startx,e-10,n.stopx,e)}let a=1,u=1;const _=[];i.forEach(function(i){let s,c,r;switch(i.type){case e.db.LINETYPE.NOTE:c=i.noteModel,CV(t,c);break;case e.db.LINETYPE.ACTIVE_START:kt.newActivation(i,t,o);break;case e.db.LINETYPE.ACTIVE_END:O(i,kt.getVerticalPos());break;case e.db.LINETYPE.LOOP_START:dn(n,i,rt.boxMargin,rt.boxMargin+rt.boxTextMargin,e=>kt.newLoop(e));break;case e.db.LINETYPE.LOOP_END:s=kt.endLoop(),ke.drawLoop(t,s,"loop",rt),kt.bumpVerticalPos(s.stopy-kt.getVerticalPos()),kt.models.addLoop(s);break;case e.db.LINETYPE.RECT_START:dn(n,i,rt.boxMargin,rt.boxMargin,e=>kt.newLoop(void 0,e.message));break;case e.db.LINETYPE.RECT_END:s=kt.endLoop(),ke.drawBackgroundRect(t,s),kt.models.addLoop(s),kt.bumpVerticalPos(s.stopy-kt.getVerticalPos());break;case e.db.LINETYPE.OPT_START:dn(n,i,rt.boxMargin,rt.boxMargin+rt.boxTextMargin,e=>kt.newLoop(e));break;case e.db.LINETYPE.OPT_END:s=kt.endLoop(),ke.drawLoop(t,s,"opt",rt),kt.bumpVerticalPos(s.stopy-kt.getVerticalPos()),kt.models.addLoop(s);break;case e.db.LINETYPE.ALT_START:dn(n,i,rt.boxMargin,rt.boxMargin+rt.boxTextMargin,e=>kt.newLoop(e));break;case e.db.LINETYPE.ALT_ELSE:dn(n,i,rt.boxMargin+rt.boxTextMargin,rt.boxMargin,e=>kt.addSectionToLoop(e));break;case e.db.LINETYPE.ALT_END:s=kt.endLoop(),ke.drawLoop(t,s,"alt",rt),kt.bumpVerticalPos(s.stopy-kt.getVerticalPos()),kt.models.addLoop(s);break;case e.db.LINETYPE.PAR_START:dn(n,i,rt.boxMargin,rt.boxMargin+rt.boxTextMargin,e=>kt.newLoop(e));break;case e.db.LINETYPE.PAR_AND:dn(n,i,rt.boxMargin+rt.boxTextMargin,rt.boxMargin,e=>kt.addSectionToLoop(e));break;case e.db.LINETYPE.PAR_END:s=kt.endLoop(),ke.drawLoop(t,s,"par",rt),kt.bumpVerticalPos(s.stopy-kt.getVerticalPos()),kt.models.addLoop(s);break;case e.db.LINETYPE.AUTONUMBER:a=i.message.start||a,u=i.message.step||u,i.message.visible?e.db.enableSequenceNumbers():e.db.disableSequenceNumbers();break;case e.db.LINETYPE.CRITICAL_START:dn(n,i,rt.boxMargin,rt.boxMargin+rt.boxTextMargin,e=>kt.newLoop(e));break;case e.db.LINETYPE.CRITICAL_OPTION:dn(n,i,rt.boxMargin+rt.boxTextMargin,rt.boxMargin,e=>kt.addSectionToLoop(e));break;case e.db.LINETYPE.CRITICAL_END:s=kt.endLoop(),ke.drawLoop(t,s,"critical",rt),kt.bumpVerticalPos(s.stopy-kt.getVerticalPos()),kt.models.addLoop(s);break;case e.db.LINETYPE.BREAK_START:dn(n,i,rt.boxMargin,rt.boxMargin+rt.boxTextMargin,e=>kt.newLoop(e));break;case e.db.LINETYPE.BREAK_END:s=kt.endLoop(),ke.drawLoop(t,s,"break",rt),kt.bumpVerticalPos(s.stopy-kt.getVerticalPos()),kt.models.addLoop(s);break;default:try{r=i.msgModel,r.starty=kt.getVerticalPos(),r.sequenceIndex=a,r.sequenceVisible=e.db.showSequenceNumbers();const n=SV(t,r);_.push({messageModel:r,lineStartY:n}),kt.models.addMessage(r)}catch(e){B.error("error while drawing message",e)}}[e.db.LINETYPE.SOLID_OPEN,e.db.LINETYPE.DOTTED_OPEN,e.db.LINETYPE.SOLID,e.db.LINETYPE.DOTTED,e.db.LINETYPE.SOLID_CROSS,e.db.LINETYPE.DOTTED_CROSS,e.db.LINETYPE.SOLID_POINT,e.db.LINETYPE.DOTTED_POINT].includes(i.type)&&(a=a+u)}),_.forEach(n=>AV(t,n.messageModel,n.lineStartY,e)),rt.mirrorActors&&(kt.bumpVerticalPos(rt.boxMargin*2),b1(t,o,h,kt.getVerticalPos(),rt,i,!0),kt.bumpVerticalPos(rt.boxMargin),d4(t,kt.getVerticalPos())),kt.models.boxes.forEach(function(e){e.height=kt.getVerticalPos()-e.y,kt.insert(e.x,e.y,e.x+e.width,e.height),e.startx=e.x,e.starty=e.y,e.stopx=e.startx+e.width,e.stopy=e.starty+e.height,e.stroke="rgb(0,0,0, 0.5)",ke.drawBox(t,e,rt)}),j&&kt.bumpVerticalPos(rt.boxMargin);const c=g4(t,o,h,C),{bounds:s}=kt.getBounds();B.debug("For line height fix Querying: #"+r+" .actor-line"),I1("#"+r+" .actor-line").attr("y2",s.stopy);let g=s.stopy-s.starty;g<c.maxHeight&&(g=c.maxHeight);let l=g+2*rt.diagramMarginY;rt.mirrorActors&&(l=l-rt.boxMargin+rt.bottomMarginAdj);let p=s.stopx-s.startx;p<c.maxWidth&&(p=c.maxWidth);const y=p+2*rt.diagramMarginX;f&&t.append("text").text(f).attr("x",(s.stopx-s.startx)/2-2*rt.diagramMarginX).attr("y",-25),cn(t,l,y,rt.useMaxWidth);const w=f?40:0;t.attr("viewBox",s.startx-rt.diagramMarginX+" -"+(rt.diagramMarginY+w)+" "+y+" "+(l+w)),B.debug("models:",kt.models)};function BV(n,s,t){const e={};return s.forEach(function(s){if(n[s.to]&&n[s.from]){const o=n[s.to];if(s.placement===t.db.PLACEMENT.LEFTOF&&!o.prevActor||s.placement===t.db.PLACEMENT.RIGHTOF&&!o.nextActor)return;const r=s.placement!==void 0,a=!r,c=r?cs(rt):$i(rt),l=s.wrap?jt.wrapLabel(s.message,rt.width-2*rt.wrapPadding,c):s.message,i=jt.calculateTextDimensions(l,c).width+2*rt.wrapPadding;a&&s.from===o.nextActor?e[s.to]=Math.max(e[s.to]||0,i):a&&s.from===o.prevActor?e[s.from]=Math.max(e[s.from]||0,i):a&&s.from===s.to?(e[s.from]=Math.max(e[s.from]||0,i/2),e[s.to]=Math.max(e[s.to]||0,i/2)):s.placement===t.db.PLACEMENT.RIGHTOF?e[s.from]=Math.max(e[s.from]||0,i):s.placement===t.db.PLACEMENT.LEFTOF?e[o.prevActor]=Math.max(e[o.prevActor]||0,i):s.placement===t.db.PLACEMENT.OVER&&(o.prevActor&&(e[o.prevActor]=Math.max(e[o.prevActor]||0,i/2)),o.nextActor&&(e[s.from]=Math.max(e[s.from]||0,i/2)))}}),B.debug("maxMessageWidthPerActor:",e),e}const DV=function(t){let e=0;const n=m1(rt);for(const o in t.links){const s=jt.calculateTextDimensions(o,n).width+2*rt.wrapPadding+2*rt.boxMargin;e<s&&(e=s)}return e};function IV(e,t,o){let n=0;Object.keys(e).forEach(o=>{const t=e[o];t.wrap&&(t.description=jt.wrapLabel(t.description,rt.width-2*rt.wrapPadding,m1(rt)));const s=jt.calculateTextDimensions(t.description,m1(rt));t.width=t.wrap?rt.width:Math.max(rt.width,s.width+2*rt.wrapPadding),t.height=t.wrap?Math.max(s.height,rt.height):rt.height,n=Math.max(n,t.height)});for(const s in t){const n=e[s];if(!n)continue;const o=e[n.nextActor];if(!o){const e=t[s]+rt.actorMargin-n.width/2;n.margin=Math.max(e,rt.actorMargin);continue}const i=t[s]+rt.actorMargin-n.width/2-o.width/2;n.margin=Math.max(i,rt.actorMargin)}let s=0;return o.forEach(t=>{const o=$i(rt);let n=t.actorKeys.reduce((n,t)=>n+=e[t].width+(e[t].margin||0),0);n-=2*rt.boxTextMargin,t.wrap&&(t.name=jt.wrapLabel(t.name,n-2*rt.wrapPadding,o));const i=jt.calculateTextDimensions(t.name,o);s=Math.max(i.height,s);const a=Math.max(n,i.width+2*rt.wrapPadding);if(t.margin=rt.boxTextMargin,n<a){const e=(a-n)/2;t.margin+=e}}),o.forEach(e=>e.textMaxHeight=s),Math.max(n,rt.height)}const MV=function(e,n,r){const o=n[e.from].x,a=n[e.to].x,s=e.wrap&&e.message;let i=jt.calculateTextDimensions(s?jt.wrapLabel(e.message,rt.width,cs(rt)):e.message,cs(rt));const t={width:s?rt.width:Math.max(rt.width,i.width+2*rt.noteMargin),height:0,startx:n[e.from].x,stopx:0,starty:0,stopy:0,message:e.message};return e.placement===r.db.PLACEMENT.RIGHTOF?(t.width=s?Math.max(rt.width,i.width):Math.max(n[e.from].width/2+n[e.to].width/2,i.width+2*rt.noteMargin),t.startx=o+(n[e.from].width+rt.actorMargin)/2):e.placement===r.db.PLACEMENT.LEFTOF?(t.width=Math.max(s?rt.width:n[e.from].width/2+n[e.to].width/2,i.width+2*rt.noteMargin),t.startx=o-t.width+(n[e.from].width-rt.actorMargin)/2):e.to===e.from?(i=jt.calculateTextDimensions(s?jt.wrapLabel(e.message,Math.max(rt.width,n[e.from].width),cs(rt)):e.message,cs(rt)),t.width=s?Math.max(rt.width,n[e.from].width):Math.max(n[e.from].width,rt.width,i.width+2*rt.noteMargin),t.startx=o+(n[e.from].width-t.width)/2):(t.width=Math.abs(o+n[e.from].width/2-(a+n[e.to].width/2))+rt.actorMargin,t.startx=o<a?o+n[e.from].width/2-rt.actorMargin/2:a+n[e.to].width/2-rt.actorMargin/2),s&&(t.message=jt.wrapLabel(e.message,t.width-2*rt.wrapPadding,cs(rt))),B.debug(`NM:[${t.startx},${t.stopx},${t.starty},${t.stopy}:${t.width},${t.height}=${e.message}]`),t},NV=function(e,o,t){let i=!1;if([t.db.LINETYPE.SOLID_OPEN,t.db.LINETYPE.DOTTED_OPEN,t.db.LINETYPE.SOLID,t.db.LINETYPE.DOTTED,t.db.LINETYPE.SOLID_CROSS,t.db.LINETYPE.DOTTED_CROSS,t.db.LINETYPE.SOLID_POINT,t.db.LINETYPE.DOTTED_POINT].includes(e.type)&&(i=!0),!i)return{};const n=D2(e.from,o),s=D2(e.to,o),a=n[0]<=s[0]?1:0,r=n[0]<s[0]?0:1,c=[...n,...s],l=Math.abs(s[r]-n[a]);e.wrap&&e.message&&(e.message=jt.wrapLabel(e.message,Math.max(l+2*rt.wrapPadding,rt.width),$i(rt)));const d=jt.calculateTextDimensions(e.message,$i(rt));return{width:Math.max(e.wrap?0:d.width+2*rt.wrapPadding,l+2*rt.wrapPadding,rt.width),height:0,startx:n[a],stopx:s[r],starty:0,stopy:0,message:e.message,type:e.type,wrap:e.wrap,fromBounds:Math.min.apply(null,c),toBounds:Math.max.apply(null,c)}},RV=function(r,o,c,t){const i={},s=[];let e,a,n;return r.forEach(function(r){switch(r.id=jt.random({length:10}),r.type){case t.db.LINETYPE.LOOP_START:case t.db.LINETYPE.ALT_START:case t.db.LINETYPE.OPT_START:case t.db.LINETYPE.PAR_START:case t.db.LINETYPE.CRITICAL_START:case t.db.LINETYPE.BREAK_START:s.push({id:r.id,msg:r.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case t.db.LINETYPE.ALT_ELSE:case t.db.LINETYPE.PAR_AND:case t.db.LINETYPE.CRITICAL_OPTION:r.message&&(e=s.pop(),i[e.id]=e,i[r.id]=e,s.push(e));break;case t.db.LINETYPE.LOOP_END:case t.db.LINETYPE.ALT_END:case t.db.LINETYPE.OPT_END:case t.db.LINETYPE.PAR_END:case t.db.LINETYPE.CRITICAL_END:case t.db.LINETYPE.BREAK_END:e=s.pop(),i[e.id]=e;break;case t.db.LINETYPE.ACTIVE_START:{const e=o[r.from?r.from.actor:r.to.actor],n=au(r.from?r.from.actor:r.to.actor).length,t=e.x+e.width/2+(n-1)*rt.activationWidth/2,s={startx:t,stopx:t+rt.activationWidth,actor:r.from.actor,enabled:!0};kt.activations.push(s)}break;case t.db.LINETYPE.ACTIVE_END:{const e=kt.activations.map(e=>e.actor).lastIndexOf(r.from.actor);delete kt.activations.splice(e,1)[0]}break}r.placement!==void 0?(a=MV(r,o,t),r.noteModel=a,s.forEach(t=>{e=t,e.from=Math.min(e.from,a.startx),e.to=Math.max(e.to,a.startx+a.width),e.width=Math.max(e.width,Math.abs(e.from-e.to))-rt.labelBoxWidth})):(n=NV(r,o,t),r.msgModel=n,n.startx&&n.stopx&&s.length>0&&s.forEach(t=>{if(e=t,n.startx===n.stopx){const t=o[r.from],s=o[r.to];e.from=Math.min(t.x-n.width/2,t.x-t.width/2,e.from),e.to=Math.max(s.x+n.width/2,s.x+t.width/2,e.to),e.width=Math.max(e.width,Math.abs(e.to-e.from))-rt.labelBoxWidth}else e.from=Math.min(n.startx,e.from),e.to=Math.max(n.stopx,e.to),e.width=Math.max(e.width,n.width)-rt.labelBoxWidth}))}),kt.activations=[],B.debug("Loop type widths:",i),i},I2={bounds:kt,drawActors:b1,drawActorsPopup:g4,setConf:y4,draw:LV};_1=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},b=[1,2],h=[1,3],r=[1,5],n=[1,7],S=[2,5],A=[1,15],k=[1,17],c=[1,21],l=[1,22],d=[1,23],u=[1,24],s=[1,37],m=[1,25],f=[1,26],p=[1,27],g=[1,28],v=[1,29],E=[1,32],j=[1,33],y=[1,34],_=[1,35],w=[1,36],O=[1,39],x=[1,40],C=[1,41],i=[1,42],o=[1,38],z=[1,45],t=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],a=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],M=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],D=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],F={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(r,l,d,n,a,e){switch(t=e.length-1,a){case 4:return n.setRootDoc(e[t]),e[t];case 5:this.$=[];break;case 6:e[t]!="nl"&&(e[t-1].push(e[t]),this.$=e[t-1]);break;case 7:case 8:this.$=e[t];break;case 9:this.$="nl";break;case 12:this.$=e[t];break;case 13:const a=e[t-1];a.description=n.trimColon(e[t]),this.$=a;break;case 14:this.$={stmt:"relation",state1:e[t-2],state2:e[t]};break;case 15:const r=n.trimColon(e[t]);this.$={stmt:"relation",state1:e[t-3],state2:e[t-1],description:r};break;case 19:this.$={stmt:"state",id:e[t-3],type:"default",description:"",doc:e[t-1]};break;case 20:var t,o=e[t],s=e[t-2].trim(),i;e[t].match(":")&&(i=e[t].split(":"),o=i[0],s=[s,i[1]]),this.$={stmt:"state",id:o,type:"default",description:s};break;case 21:this.$={stmt:"state",id:e[t-3],type:"default",description:e[t-5],doc:e[t-1]};break;case 22:this.$={stmt:"state",id:e[t],type:"fork"};break;case 23:this.$={stmt:"state",id:e[t],type:"join"};break;case 24:this.$={stmt:"state",id:e[t],type:"choice"};break;case 25:this.$={stmt:"state",id:n.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:e[t-1].trim(),note:{position:e[t-2].trim(),text:e[t].trim()}};break;case 30:this.$=e[t].trim(),n.setAccTitle(this.$);break;case 31:case 32:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:e[t-1].trim(),classes:e[t].trim()};break;case 35:this.$={stmt:"applyClass",id:e[t-1].trim(),styleClass:e[t].trim()};break;case 38:n.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:n.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:n.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:n.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:e[t].trim(),type:"default",description:""};break;case 46:this.$={stmt:"state",id:e[t-2].trim(),classes:[e[t].trim()],type:"default",description:""};break;case 47:this.$={stmt:"state",id:e[t-2].trim(),classes:[e[t].trim()],type:"default",description:""};break;case 50:n.parseDirective("%%{","open_directive");break;case 51:n.parseDirective(e[t],"type_directive");break;case 52:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 53:n.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:b,5:h,6:4,7:r,45:6,60:n},{1:[3]},{3:8,4:b,5:h,6:4,7:r,45:6,60:n},{3:9,4:b,5:h,6:4,7:r,45:6,60:n},{3:10,4:b,5:h,6:4,7:r,45:6,60:n},e([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],S,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:A,5:k,6:30,9:14,10:16,11:18,12:19,13:20,16:c,17:l,19:d,22:u,24:s,25:m,26:f,27:p,28:g,29:v,32:31,33:E,35:j,37:y,38:_,42:w,45:6,50:O,51:x,52:C,53:i,56:o,60:n},{47:43,48:[1,44],63:z},e([48,63],[2,51]),e(t,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:c,17:l,19:d,22:u,24:s,25:m,26:f,27:p,28:g,29:v,32:31,33:E,35:j,37:y,38:_,42:w,45:6,50:O,51:x,52:C,53:i,56:o,60:n},e(t,[2,8]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12],{14:[1,47],15:[1,48]}),e(t,[2,16]),{18:[1,49]},e(t,[2,18],{20:[1,50]}),{23:[1,51]},e(t,[2,22]),e(t,[2,23]),e(t,[2,24]),e(t,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},e(t,[2,28]),e(t,[2,29]),{34:[1,56]},{36:[1,57]},e(t,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},e(a,[2,44],{57:[1,61]}),e(a,[2,45],{57:[1,62]}),e(t,[2,38]),e(t,[2,39]),e(t,[2,40]),e(t,[2,41]),e(M,[2,36]),{49:63,62:[1,64]},e(M,[2,53]),e(t,[2,7]),e(t,[2,13]),{13:65,24:s,56:o},e(t,[2,17]),e(D,S,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},e(t,[2,30]),e(t,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:z},{63:[2,52]},e(t,[2,14],{14:[1,76]}),{4:A,5:k,6:30,9:14,10:16,11:18,12:19,13:20,16:c,17:l,19:d,21:[1,77],22:u,24:s,25:m,26:f,27:p,28:g,29:v,32:31,33:E,35:j,37:y,38:_,42:w,45:6,50:O,51:x,52:C,53:i,56:o,60:n},e(t,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},e(t,[2,33]),e(t,[2,34]),e(t,[2,35]),e(a,[2,46]),e(a,[2,47]),e(M,[2,37]),e(t,[2,15]),e(t,[2,19]),e(D,S,{8:81}),e(t,[2,26]),e(t,[2,27]),{4:A,5:k,6:30,9:14,10:16,11:18,12:19,13:20,16:c,17:l,19:d,21:[1,82],22:u,24:s,25:m,26:f,27:p,28:g,29:v,32:31,33:E,35:j,37:y,38:_,42:w,45:6,50:O,51:x,52:C,53:i,56:o,60:n},e(t,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},N=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(n,e,t){switch(t){case 0:return 41;case 1:return 50;case 2:return 51;case 3:return 52;case 4:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:break;case 11:break;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:break;case 17:return this.pushState("SCALE"),17;case 18:return 18;case 19:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 25:this.popState();break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 34:return this.pushState("SCALE"),17;case 35:return 18;case 36:this.popState();break;case 37:this.pushState("STATE");break;case 38:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),25;case 39:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),26;case 40:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),27;case 41:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),25;case 42:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),26;case 43:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),27;case 44:return 50;case 45:return 51;case 46:return 52;case 47:return 53;case 48:this.pushState("STATE_STRING");break;case 49:return this.pushState("STATE_ID"),"AS";case 50:return this.popState(),"ID";case 51:this.popState();break;case 52:return"STATE_DESCR";case 53:return 19;case 54:this.popState();break;case 55:return this.popState(),this.pushState("struct"),20;case 56:break;case 57:return this.popState(),21;case 58:break;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 64:break;case 65:return"NOTE_TEXT";case 66:return this.popState(),"ID";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),e.yytext=e.yytext.substr(2).trim(),31;case 69:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),31;case 70:return 7;case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return e.yytext=e.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 79:return 5;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};return e}();F.lexer=N;function T(){this.yy={}}return T.prototype=F,F.Parser=T,new T}(),_1.parser=_1;const M2=_1,FV=(n,e)=>{var t;return((t=e==null?void 0:e.state)==null?void 0:t.defaultRenderer)!=="dagre-wrapper"&&n.match(/^\s*stateDiagram/)!==null},OV=(e,t)=>{var n;return!!(e.match(/^\s*stateDiagram-v2/)!==null||e.match(/^\s*stateDiagram/)&&((n=t==null?void 0:t.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper")},m4="LR",PV="TB",hc="state",X0="relation",VV="classDef",YV="applyClass",To="default",b4="divider",K0="[*]",_4="start",x4=K0,v4="end",N2="color",R2="fill",zV="bgFill",UV=",";function k4(){return{}}let w4=m4,fc=[],Na=k4();const T4=()=>({relations:[],states:{},documents:{}});let dc={root:T4()},ar=dc.root,io=0,F2=0;const WV={LINE:0,DOTTED_LINE:1},HV={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},Ho=e=>JSON.parse(JSON.stringify(e)),GV=function(e,t,n){xe.parseDirective(this,e,t,n)},qV=e=>{B.info("Setting root doc",e),fc=e},$V=()=>fc,fl=(t,e,n)=>{if(e.stmt===X0)fl(t,e.state1,!0),fl(t,e.state2,!1);else if(e.stmt===hc&&(e.id==="[*]"?(e.id=n?t.id+"_start":t.id+"_end",e.start=n):e.id=e.id.trim()),e.doc){const s=[];let n=[],t;for(t=0;t<e.doc.length;t++)if(e.doc[t].type===b4){const o=Ho(e.doc[t]);o.doc=Ho(n),s.push(o),n=[]}else n.push(e.doc[t]);if(s.length>0&&n.length>0){const t={stmt:hc,id:Vg(),type:"divider",doc:Ho(n)};s.push(Ho(t)),e.doc=s}e.doc.forEach(t=>fl(e,t,!0))}},jV=()=>(fl({id:"root"},{id:"root",doc:fc},!0),{id:"root",doc:fc}),XV=t=>{let e;t.doc?e=t.doc:e=t,B.info(e),E4(!0),B.info("Extract",e),e.forEach(e=>{switch(e.stmt){case hc:ji(e.id.trim(),e.type,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles);break;case X0:C4(e.state1,e.state2,e.description);break;case VV:S4(e.id.trim(),e.classes);break;case YV:Z0(e.id.trim(),e.styleClass);break}})},ji=function(a,r=To,c=null,t=null,i=null,s=null,n=null,o=null){const e=a==null?void 0:a.trim();ar.states[e]===void 0?(B.info("Adding state ",e,t),ar.states[e]={id:e,descriptions:[],type:r,doc:c,note:i,classes:[],styles:[],textStyles:[]}):(ar.states[e].doc||(ar.states[e].doc=c),ar.states[e].type||(ar.states[e].type=r)),t&&(B.info("Setting state description",e,t),typeof t=="string"&&k1(e,t.trim()),typeof t=="object"&&t.forEach(t=>k1(e,t.trim()))),i&&(ar.states[e].note=i,ar.states[e].note.text=Xt.sanitizeText(ar.states[e].note.text,q())),s&&(B.info("Setting state classes",e,s),(typeof s=="string"?[s]:s).forEach(t=>Z0(e,t.trim()))),n&&(B.info("Setting state styles",e,n),(typeof n=="string"?[n]:n).forEach(t=>sY(e,t.trim()))),o&&(B.info("Setting state styles",e,n),(typeof o=="string"?[o]:o).forEach(t=>aY(e,t.trim())))},E4=function(e){dc={root:T4()},ar=dc.root,io=0,Na=k4(),e||Br()},so=function(e){return ar.states[e]},KV=function(){return ar.states},ZV=function(){B.info("Documents = ",dc)},QV=function(){return ar.relations};function x1(e=""){let t=e;return e===K0&&(io++,t=`${_4}${io}`),t}function v1(e="",t=To){return e===K0?_4:t}function JV(e=""){let t=e;return e===x4&&(io++,t=`${v4}${io}`),t}function tY(e="",t=To){return e===x4?v4:t}function eY(e,t,o){let n=x1(e.id.trim()),i=v1(e.id.trim(),e.type),s=x1(t.id.trim()),a=v1(t.id.trim(),t.type);ji(n,i,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),ji(s,a,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),ar.relations.push({id1:n,id2:s,relationTitle:Xt.sanitizeText(o,q())})}const C4=function(e,t,n){if(typeof e=="object")eY(e,t,n);else{const s=x1(e.trim()),i=v1(e),o=JV(t.trim()),a=tY(t);ji(s,i),ji(o,a),ar.relations.push({id1:s,id2:o,title:Xt.sanitizeText(n,q())})}},k1=function(t,e){const n=ar.states[t],s=e.startsWith(":")?e.replace(":","").trim():e;n.descriptions.push(Xt.sanitizeText(s,q()))},rY=function(e){return e.substring(0,1)===":"?e.substr(2).trim():e.trim()},nY=()=>(F2++,"divider-id-"+F2),S4=function(e,t=""){Na[e]===void 0&&(Na[e]={id:e,styles:[],textStyles:[]});const n=Na[e];t!=null&&t.split(UV).forEach(e=>{const t=e.replace(/([^;]*);/,"$1").trim();if(e.match(N2)){const e=t.replace(R2,zV).replace(N2,R2);n.textStyles.push(e)}n.styles.push(t)})},iY=function(){return Na},Z0=function(e,t){e.split(",").forEach(function(n){let e=so(n);if(e===void 0){const t=n.trim();ji(t),e=so(t)}e.classes.push(t)})},sY=function(t,n){const e=so(t);e!==void 0&&e.textStyles.push(n)},aY=function(t,n){const e=so(t);e!==void 0&&e.textStyles.push(n)},oY=()=>w4,lY=e=>{w4=e},cY=e=>e&&e[0]===":"?e.substr(1).trim():e.trim(),Yn={parseDirective:GV,getConfig:()=>q().state,addState:ji,clear:E4,getState:so,getStates:KV,getRelations:QV,getClasses:iY,getDirection:oY,addRelation:C4,getDividerId:nY,setDirection:lY,cleanupLabel:rY,lineType:WV,relationType:HV,logDocuments:ZV,getRootDoc:$V,setRootDoc:qV,getRootDocV2:jV,extract:XV,trimColon:cY,getAccTitle:Dr,setAccTitle:Tr,getAccDescription:Mr,setAccDescription:Ir,addStyleClass:S4,setCssClass:Z0,addDescription:k1,setDiagramTitle:un,getDiagramTitle:hn},Q0={},uY=(e,t)=>{Q0[e]=t},hY=e=>Q0[e],A4=()=>Object.keys(Q0),fY=()=>A4().length,dY={get:hY,set:uY,keys:A4,size:fY},pY=e=>e.append("circle").attr("class","start-state").attr("r",q().state.sizeUnit).attr("cx",q().state.padding+q().state.sizeUnit).attr("cy",q().state.padding+q().state.sizeUnit),gY=e=>e.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",q().state.textHeight).attr("class","divider").attr("x2",q().state.textHeight*2).attr("y1",0).attr("y2",0),yY=(e,s)=>{const t=e.append("text").attr("x",2*q().state.padding).attr("y",q().state.textHeight+2*q().state.padding).attr("font-size",q().state.fontSize).attr("class","state-title").text(s.id),n=t.node().getBBox();return e.insert("rect",":first-child").attr("x",q().state.padding).attr("y",q().state.padding).attr("width",n.width+2*q().state.padding).attr("height",n.height+2*q().state.padding).attr("rx",q().state.radius),t},mY=(e,n)=>{const l=function(e,t,n){const s=e.append("tspan").attr("x",2*q().state.padding).text(t);n||s.attr("dy",q().state.textHeight)},s=e.append("text").attr("x",2*q().state.padding).attr("y",q().state.textHeight+1.3*q().state.padding).attr("font-size",q().state.fontSize).attr("class","state-title").text(n.descriptions[0]).node().getBBox(),t=s.height,o=e.append("text").attr("x",q().state.padding).attr("y",t+q().state.padding*.4+q().state.dividerMargin+q().state.textHeight).attr("class","state-description");let i=!0,a=!0;n.descriptions.forEach(function(e){i||(l(o,e,a),a=!1),i=!1});const d=e.append("line").attr("x1",q().state.padding).attr("y1",q().state.padding+t+q().state.dividerMargin/2).attr("y2",q().state.padding+t+q().state.dividerMargin/2).attr("class","descr-divider"),r=o.node().getBBox(),c=Math.max(r.width,s.width);return d.attr("x2",c+3*q().state.padding),e.insert("rect",":first-child").attr("x",q().state.padding).attr("y",q().state.padding).attr("width",c+2*q().state.padding).attr("height",r.height+t+2*q().state.padding).attr("rx",q().state.radius),e},bY=(s,u,h)=>{const i=q().state.padding,c=2*q().state.padding,d=s.node().getBBox(),t=d.width,a=d.x,r=s.append("text").attr("x",0).attr("y",q().state.titleShift).attr("font-size",q().state.fontSize).attr("class","state-title").text(u.id),o=r.node().getBBox().width+c;let e=Math.max(o,t);e===t&&(e=e+c);let n;const l=s.node().getBBox();u.doc,n=a-i,o>t&&(n=(t-e)/2+i),Math.abs(a-l.x)<i&&o>t&&(n=a-(o-t)/2);const m=1-q().state.textHeight;return s.insert("rect",":first-child").attr("x",n).attr("y",m).attr("class",h?"alt-composit":"composit").attr("width",e).attr("height",l.height+q().state.textHeight+q().state.titleShift+1).attr("rx","0"),r.attr("x",n+i),o<=t&&r.attr("x",a+(e-c)/2-o/2+i),s.insert("rect",":first-child").attr("x",n).attr("y",q().state.titleShift-q().state.textHeight-q().state.padding).attr("width",e).attr("height",q().state.textHeight*3).attr("rx",q().state.radius),s.insert("rect",":first-child").attr("x",n).attr("y",q().state.titleShift-q().state.textHeight-q().state.padding).attr("width",e).attr("height",l.height+3+2*q().state.textHeight).attr("rx",q().state.radius),s},_Y=e=>(e.append("circle").attr("class","end-state-outer").attr("r",q().state.sizeUnit+q().state.miniPadding).attr("cx",q().state.padding+q().state.sizeUnit+q().state.miniPadding).attr("cy",q().state.padding+q().state.sizeUnit+q().state.miniPadding),e.append("circle").attr("class","end-state-inner").attr("r",q().state.sizeUnit).attr("cx",q().state.padding+q().state.sizeUnit+2).attr("cy",q().state.padding+q().state.sizeUnit+2)),xY=(n,s)=>{let e=q().state.forkWidth,t=q().state.forkHeight;if(s.parentId){let n=e;e=t,t=n}return n.append("rect").style("stroke","black").style("fill","black").attr("width",e).attr("height",t).attr("x",q().state.padding).attr("y",q().state.padding)},vY=(a,o,c,i)=>{let s=0;const e=i.append("text");e.style("text-anchor","start"),e.attr("class","noteText");let t=a.replace(/\r\n/g,"<br/>");t=t.replace(/\n/g,"<br/>");const r=t.split(Xt.lineBreakRegex);let n=1.25*q().state.noteMargin;for(const i of r){const t=i.trim();if(t.length>0){const i=e.append("tspan");if(i.text(t),n===0){const e=i.node().getBBox();n+=e.height}s+=n,i.attr("x",o+q().state.noteMargin),i.attr("y",c+s+1.25*q().state.noteMargin)}}return{textWidth:e.node().getBBox().width,textHeight:s}},kY=(n,e)=>{e.attr("class","state-note");const t=e.append("rect").attr("x",0).attr("y",q().state.padding),s=e.append("g"),{textWidth:o,textHeight:i}=vY(n,0,0,s);return t.attr("height",i+2*q().state.noteMargin),t.attr("width",o+q().state.noteMargin*2),t},O2=function(i,e){const s=e.id,n={id:s,label:e.id,width:0,height:0},t=i.append("g").attr("id",s).attr("class","stateGroup");e.type==="start"&&pY(t),e.type==="end"&&_Y(t),(e.type==="fork"||e.type==="join")&&xY(t,e),e.type==="note"&&kY(e.note.text,t),e.type==="divider"&&gY(t),e.type==="default"&&e.descriptions.length===0&&yY(t,e),e.type==="default"&&e.descriptions.length>0&&mY(t,e);const o=t.node().getBBox();return n.width=o.width+2*q().state.padding,n.height=o.height+2*q().state.padding,dY.set(s,n),n};let P2=0;const wY=function(n,t,s){const o=function(e){switch(e){case Yn.relationType.AGGREGATION:return"aggregation";case Yn.relationType.EXTENSION:return"extension";case Yn.relationType.COMPOSITION:return"composition";case Yn.relationType.DEPENDENCY:return"dependency"}};t.points=t.points.filter(e=>!Number.isNaN(e.y));const i=t.points,a=js().x(function(e){return e.x}).y(function(e){return e.y}).curve(Is),r=n.append("path").attr("d",a(i)).attr("id","edge"+P2).attr("class","transition");let e="";if(q().state.arrowMarkerAbsolute&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replace(/\(/g,"\\("),e=e.replace(/\)/g,"\\)")),r.attr("marker-end","url("+e+"#"+o(Yn.relationType.DEPENDENCY)+"End)"),s.title!==void 0){const c=n.append("g").attr("class","stateLabel"),{x:r,y:i}=jt.calcLabelPosition(t.points),o=Xt.getRows(s.title);let e=0;const d=[];let a=0,u=0;for(let t=0;t<=o.length;t++){const n=c.append("text").attr("text-anchor","middle").text(o[t]).attr("x",r).attr("y",i+e),s=n.node().getBBox();a=Math.max(a,s.width),u=Math.min(u,s.x),B.info(s.x,r,i+e),e===0&&(e=n.node().getBBox().height,B.info("Title height",e,i)),d.push(n)}let l=e*o.length;if(o.length>1){const t=(o.length-1)*e*.5;d.forEach((n,s)=>n.attr("y",i+s*e-t)),l=e*o.length}const h=c.node().getBBox();c.insert("rect",":first-child").attr("class","box").attr("x",r-a/2-q().state.padding/2).attr("y",i-l/2-q().state.padding/2-3.5).attr("width",a+q().state.padding).attr("height",l+q().state.padding),B.info(h)}P2++};let Cr;const Zu={},TY=function(){},EY=function(e){e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},CY=function(d,i,f,l){Cr=q().state;const n=q().securityLevel;let s;n==="sandbox"&&(s=_t("#i"+i));const a=_t(n==="sandbox"?s.nodes()[0].contentDocument.body:"body"),h=n==="sandbox"?s.nodes()[0].contentDocument:document;B.debug("Rendering diagram "+d);const e=a.select(`[id='${i}']`);EY(e),new Ve({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}});const u=l.db.getRootDoc();L4(u,e,void 0,!1,a,h,l);const o=Cr.padding,t=e.node().getBBox(),r=t.width+o*2,c=t.height+o*2,m=r*1.75;cn(e,c,m,Cr.useMaxWidth),e.attr("viewBox",`${t.x-Cr.padding}  ${t.y-Cr.padding} `+r+" "+c)},SY=e=>e?e.length*Cr.fontSizeFactor:1,L4=(l,t,n,m,c,u,a)=>{const e=new Ve({compound:!0,multigraph:!0});let i,o=!0;for(i=0;i<l.length;i++)if(l[i].stmt==="relation"){o=!1;break}n?e.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:o?1:Cr.edgeLengthFactor,nodeSep:o?1:50,isMultiGraph:!0}):e.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:o?1:Cr.edgeLengthFactor,nodeSep:o?1:50,ranker:"tight-tree",isMultiGraph:!0}),e.setDefaultEdgeLabel(function(){return{}}),a.db.extract(l);const f=a.db.getStates(),p=a.db.getRelations(),g=Object.keys(f);for(const i of g){const o=f[i];n&&(o.parentId=n);let s;if(o.doc){let e=t.append("g").attr("id",o.id).attr("class","stateGroup");s=L4(o.doc,e,o.id,!m,c,u,a);{e=bY(e,o,m);let t=e.node().getBBox();s.width=t.width,s.height=t.height+Cr.padding/2,Zu[o.id]={y:Cr.compositTitleSize}}}else s=O2(t,o);if(o.note){const i={descriptions:[],id:o.id+"-note",note:o.note,type:"note"},n=O2(t,i);o.note.position==="left of"?(e.setNode(s.id+"-note",n),e.setNode(s.id,s)):(e.setNode(s.id,s),e.setNode(s.id+"-note",n)),e.setParent(s.id,s.id+"-group"),e.setParent(s.id+"-note",s.id+"-group")}else e.setNode(s.id,s)}B.debug("Count=",e.nodeCount(),e);let h=0;p.forEach(function(t){h++,B.debug("Setting edge",t),e.setEdge(t.id1,t.id2,{relation:t,width:SY(t.title),height:Cr.labelHeight*Xt.getRows(t.title).length,labelpos:"c"},"id"+h)}),ta(e),B.debug("Graph after layout",e.nodes());const s=t.node();e.nodes().forEach(function(t){t!==void 0&&e.node(t)!==void 0?(B.warn("Node "+t+": "+JSON.stringify(e.node(t))),c.select("#"+s.id+" #"+t).attr("transform","translate("+(e.node(t).x-e.node(t).width/2)+","+(e.node(t).y+(Zu[t]?Zu[t].y:0)-e.node(t).height/2)+" )"),c.select("#"+s.id+" #"+t).attr("data-x-shift",e.node(t).x-e.node(t).width/2),u.querySelectorAll("#"+s.id+" #"+t+" .divider").forEach(n=>{const t=n.parentElement;let s=0,e=0;t&&(t.parentElement&&(s=t.parentElement.getBBox().width),e=parseInt(t.getAttribute("data-x-shift"),10),Number.isNaN(e)&&(e=0)),n.setAttribute("x1",0-e+8),n.setAttribute("x2",s-e-8)})):B.debug("No Node "+t+": "+JSON.stringify(e.node(t)))});let d=s.getBBox();e.edges().forEach(function(n){n!==void 0&&e.edge(n)!==void 0&&(B.debug("Edge "+n.v+" -> "+n.w+": "+JSON.stringify(e.edge(n))),wY(t,e.edge(n),e.edge(n).relation))}),d=s.getBBox();const r={id:n||"root",label:n||"root",width:0,height:0};return r.width=d.width+2*Cr.padding,r.height=d.height+2*Cr.padding,B.debug("Doc rendered",r,e),r},AY={setConf:TY,draw:CY},dl="rect",Qu="rectWithTitle",LY="start",BY="end",DY="divider",IY="roundedWithTitle",MY="note",NY="noteGroup",qs="statediagram",RY="state",FY=`${qs}-${RY}`,B4="transition",OY="note",PY="note-edge",VY=`${B4} ${PY}`,YY=`${qs}-${OY}`,zY="cluster",UY=`${qs}-${zY}`,WY="cluster-alt",HY=`${qs}-${WY}`,D4="parent",I4="note",GY="state",J0="----",qY=`${J0}${I4}`,V2=`${J0}${D4}`,M4="fill:none",N4="fill: #333",R4="c",F4="text",O4="normal";let pl={},oi=0;const $Y=function(e){const t=Object.keys(e);for(const n of t)e[n]},jY=function(t,e){B.trace("Extracting classes"),e.db.clear();try{return e.parser.parse(t),e.db.extract(e.db.getRootDocV2()),e.db.getClasses()}catch(e){return e}};function XY(e){return e==null?"":e.classes?e.classes.join(" "):""}function Ju(t="",n=0,e="",s=J0){const o=e!==null&&e.length>0?`${s}${e}`:"";return`${GY}-${t}${o}-${n}`}const ka=(n,s,t,o,a,i)=>{const e=t.id,r=XY(o[e]);if(e!=="root"){let o=dl;t.start===!0&&(o=LY),t.start===!1&&(o=BY),t.type!==To&&(o=t.type),pl[e]||(pl[e]={id:e,shape:o,description:Xt.sanitizeText(e,q()),classes:`${r} ${FY}`});const s=pl[e];t.description&&(Array.isArray(s.description)?(s.shape=Qu,s.description.push(t.description)):s.description.length>0?(s.shape=Qu,s.description===e?s.description=[t.description]:s.description=[s.description,t.description]):(s.shape=dl,s.description=t.description),s.description=Xt.sanitizeTextOrArray(s.description,q())),s.description.length===1&&s.shape===Qu&&(s.shape=dl),!s.type&&t.doc&&(B.info("Setting cluster for ",e,w1(t)),s.type="group",s.dir=w1(t),s.shape=t.type===b4?DY:IY,s.classes=s.classes+" "+UY+" "+(i?HY:""));const a={labelStyle:"",shape:s.shape,labelText:s.description,classes:s.classes,style:"",id:e,dir:s.dir,domId:Ju(e,oi),type:s.type,padding:15};if(t.note){const o={labelStyle:"",shape:MY,labelText:t.note.text,classes:YY,style:"",id:e+qY+"-"+oi,domId:Ju(e,oi,I4),type:s.type,padding:15},l={labelStyle:"",shape:NY,labelText:t.note.text,classes:s.classes,style:"",id:e+V2,domId:Ju(e,oi,D4),type:"group",padding:0};oi++;const i=e+V2;n.setNode(i,l),n.setNode(o.id,o),n.setNode(e,a),n.setParent(e,i),n.setParent(o.id,i);let r=e,c=o.id;t.note.position==="left of"&&(r=o.id,c=e),n.setEdge(r,c,{arrowhead:"none",arrowType:"",style:M4,labelStyle:"",classes:VY,arrowheadStyle:N4,labelpos:R4,labelType:F4,thickness:O4})}else n.setNode(e,a)}s&&s.id!=="root"&&(B.trace("Setting node ",e," to be child of its parent ",s.id),n.setParent(e,s.id)),t.doc&&(B.trace("Adding nodes children "),KY(n,t,t.doc,o,a,!i))},KY=(e,t,i,n,s,o)=>{B.trace("items",i),i.forEach(i=>{switch(i.stmt){case hc:ka(e,t,i,n,s,o);break;case To:ka(e,t,i,n,s,o);break;case X0:{ka(e,t,i.state1,n,s,o),ka(e,t,i.state2,n,s,o);const a={id:"edge"+oi,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:M4,labelStyle:"",label:Xt.sanitizeText(i.description,q()),arrowheadStyle:N4,labelpos:R4,labelType:F4,thickness:O4,classes:B4};e.setEdge(i.state1.id,i.state2.id,a,oi),oi++}break}})},w1=(e,n=PV)=>{let t=n;if(e.doc)for(let n=0;n<e.doc.length;n++){const s=e.doc[n];s.stmt==="dir"&&(t=s.value)}return t},ZY=function(_,t,y,e){B.info("Drawing state diagram (v2)",t),pl={};let r=e.db.getDirection();r===void 0&&(r=m4);const{securityLevel:a,state:s}=q(),j=s.nodeSpacing||50,b=s.rankSpacing||50;B.info(e.db.getRootDocV2()),e.db.extract(e.db.getRootDocV2()),B.info(e.db.getRootDocV2());const v=e.db.getStates(),d=new Ve({multigraph:!0,compound:!0}).setGraph({rankdir:w1(e.db.getRootDocV2()),nodesep:j,ranksep:b,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});ka(d,void 0,e.db.getRootDocV2(),v,e.db,!0);let u;a==="sandbox"&&(u=_t("#i"+t));const h=_t(a==="sandbox"?u.nodes()[0].contentDocument.body:"body"),n=h.select(`[id="${t}"]`),g=h.select("#"+t+" g");B0(g,d,["barb"],qs,t);const o=8;jt.insertTitle(n,"statediagramTitleText",s.titleTopMargin,e.db.getDiagramTitle());const f=n.node().getBBox(),l=f.width+o*2,c=f.height+o*2;n.attr("class",qs);const i=n.node().getBBox();cn(n,c,l,s.useMaxWidth);const m=`${i.x-o} ${i.y-o} ${l} ${c}`;B.debug(`viewBox ${m}`),n.attr("viewBox",m);const p=document.querySelectorAll('[id="'+t+'"] .edgeLabel .label');for(const t of p){const n=t.getBBox(),e=document.createElementNS("http://www.w3.org/2000/svg",dl);e.setAttribute("rx",0),e.setAttribute("ry",0),e.setAttribute("width",n.width),e.setAttribute("height",n.height),t.insertBefore(e,t.firstChild)}},QY={setConf:$Y,getClasses:jY,draw:ZY};T1=function(){var e=function(n,s,e,t){for(e=e||{},t=n.length;t--;e[n[t]]=s);return e},h=[1,2],n=[1,5],t=[6,9,11,17,18,20,22,23,24,26],r=[1,15],i=[1,16],a=[1,17],m=[1,18],c=[1,19],l=[1,20],d=[1,24],u=[4,6,9,11,17,18,20,22,23,24,26],s={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(o,r,i,n,s,e){var t=e.length-1;switch(s){case 1:return e[t-1];case 3:this.$=[];break;case 4:e[t-1].push(e[t]),this.$=e[t-1];break;case 5:case 6:this.$=e[t];break;case 7:case 8:this.$=[];break;case 11:n.setDiagramTitle(e[t].substr(6)),this.$=e[t].substr(6);break;case 12:this.$=e[t].trim(),n.setAccTitle(this.$);break;case 13:case 14:this.$=e[t].trim(),n.setAccDescription(this.$);break;case 15:n.addSection(e[t].substr(8)),this.$=e[t].substr(8);break;case 16:n.addTask(e[t-1],e[t]),this.$="task";break;case 18:n.parseDirective("%%{","open_directive");break;case 19:n.parseDirective(e[t],"type_directive");break;case 20:e[t]=e[t].trim().replace(/'/g,'"'),n.parseDirective(e[t],"arg_directive");break;case 21:n.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:h,7:3,12:4,26:n},{1:[3]},e(t,[2,3],{5:6}),{3:7,4:h,7:3,12:4,26:n},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:r,18:i,20:a,22:m,23:c,24:l,26:n},{1:[2,2]},{14:22,15:[1,23],29:d},e([15,29],[2,19]),e(t,[2,8],{1:[2,1]}),e(t,[2,4]),{7:21,10:25,12:4,17:r,18:i,20:a,22:m,23:c,24:l,26:n},e(t,[2,6]),e(t,[2,7]),e(t,[2,11]),{19:[1,26]},{21:[1,27]},e(t,[2,14]),e(t,[2,15]),{25:[1,28]},e(t,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},e(t,[2,5]),e(t,[2,12]),e(t,[2,13]),e(t,[2,16]),e(u,[2,9]),{14:32,29:d},{29:[2,20]},{11:[1,33]},e(u,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=t,n}},parse:function(A){var k=this,s=[0],f=[],a=[null],e=[],h=this.table,j="",d=0,w=0,x=2,_=1,O=e.slice.call(arguments,1),t=Object.create(this.lexer),r={yy:{}},p,g,E,n,c,o,v,l,u,i,y,m,b;for(p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(r.yy[p]=this.yy[p]);t.setInput(A,r.yy),r.yy.lexer=t,r.yy.parser=this,typeof t.yylloc>"u"&&(t.yylloc={}),g=t.yylloc,e.push(g),E=t.options&&t.options.ranges,typeof r.yy.parseError=="function"?this.parseError=r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var e;return e=f.pop()||t.lex()||_,typeof e!="number"&&(e instanceof Array&&(f=e,e=f.pop()),e=k.symbols_[e]||e),e}for(l={};;){if(c=s[s.length-1],this.defaultActions[c]?o=this.defaultActions[c]:((n===null||typeof n>"u")&&(n=C()),o=h[c]&&h[c][n]),typeof o>"u"||!o.length||!o[0]){b="",m=[];for(u in h[c])this.terminals_[u]&&u>x&&m.push("'"+this.terminals_[u]+"'");t.showPosition?b="Parse error on line "+(d+1)+`:
`+t.showPosition()+`
Expecting `+m.join(", ")+", got '"+(this.terminals_[n]||n)+"'":b="Parse error on line "+(d+1)+": Unexpected "+(n==_?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(b,{text:t.match,token:this.terminals_[n]||n,line:t.yylineno,loc:g,expected:m})}if(o[0]instanceof Array&&o.length>1)throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+n);switch(o[0]){case 1:s.push(n),a.push(t.yytext),e.push(t.yylloc),s.push(o[1]),n=null,w=t.yyleng,j=t.yytext,d=t.yylineno,g=t.yylloc;break;case 2:if(i=this.productions_[o[1]][1],l.$=a[a.length-i],l._$={first_line:e[e.length-(i||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(i||1)].first_column,last_column:e[e.length-1].last_column},E&&(l._$.range=[e[e.length-(i||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.apply(l,[j,w,d,r.yy,o[1],a,e].concat(O)),typeof v<"u")return v;i&&(s=s.slice(0,-1*i*2),a=a.slice(0,-1*i),e=e.slice(0,-1*i)),s.push(this.productions_[o[1]][0]),a.push(l.$),e.push(l._$),y=h[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},f=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw new Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0],t;return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(n){var t=n.length,e=n.split(/(?:\r\n?|\n)/g),s,o;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(t,i){var s,e,n,o;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),e=t[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(o in n)this[o]=n[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,e){switch(e){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return e}();s.lexer=f;function o(){this.yy={}}return o.prototype=s,s.Parser=o,new o}(),T1.parser=T1;const JY=T1,tz=e=>e.match(/^\s*journey/)!==null;let $s="";const tf=[],ao=[],oo=[],ez=function(e,t,n){xe.parseDirective(this,e,t,n)},rz=function(){tf.length=0,ao.length=0,$s="",oo.length=0,Br()},nz=function(e){$s=e,tf.push(e)},iz=function(){return tf},sz=function(){let e=Y2();const n=100;let t=0;for(;!e&&t<n;)e=Y2(),t++;return ao.push(...oo),ao},az=function(){const e=[];return ao.forEach(t=>{t.people&&e.push(...t.people)}),[...new Set(e)].sort()},oz=function(s,o){const e=o.substr(1).split(":");let t=0,n=[];e.length===1?(t=Number(e[0]),n=[]):(t=Number(e[0]),n=e[1].split(","));const i=n.map(e=>e.trim()),a={section:$s,type:$s,people:i,task:s,score:t};oo.push(a)},lz=function(e){const t={section:$s,type:$s,description:e,task:e,classes:[]};ao.push(t)},Y2=function(){const t=function(e){return oo[e].processed};let e=!0;for(const[n,s]of oo.entries())t(n),e=e&&s.processed;return e},cz=function(){return az()},z2={parseDirective:ez,getConfig:()=>q().journey,clear:rz,setDiagramTitle:un,getDiagramTitle:hn,setAccTitle:Tr,getAccTitle:Dr,setAccDescription:Ir,getAccDescription:Mr,addSection:nz,getSections:iz,getTasks:sz,addTask:oz,addTaskOrg:lz,getActors:cz},ou=function(n,e){const t=n.append("rect");return t.attr("x",e.x),t.attr("y",e.y),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",e.width),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),e.class!==void 0&&t.attr("class",e.class),t},uz=function(n,e){const s=n.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),t=n.append("g");t.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),t.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function o(t){const n=xh().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);t.append("path").attr("class","mouth").attr("d",n).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function i(t){const n=xh().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);t.append("path").attr("class","mouth").attr("d",n).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function a(t){t.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?o(t):e.score<3?i(t):a(t),s},P4=function(n,t){const e=n.append("circle");return e.attr("cx",t.cx),e.attr("cy",t.cy),e.attr("class","actor-"+t.pos),e.attr("fill",t.fill),e.attr("stroke",t.stroke),e.attr("r",t.r),e.class!==void 0&&e.attr("class",e.class),t.title!==void 0&&e.append("title").text(t.title),e},V4=function(s,e){const o=e.text.replace(/<br\s*\/?>/gi," "),t=s.append("text");t.attr("x",e.x),t.attr("y",e.y),t.attr("class","legend"),t.style("text-anchor",e.anchor),e.class!==void 0&&t.attr("class",e.class);const n=t.append("tspan");return n.attr("x",e.x+e.textMargin*2),n.text(o),t},hz=function(t,e){function s(e,t,n,s,o){return e+","+t+" "+(e+n)+","+t+" "+(e+n)+","+(t+s-o)+" "+(e+n-o*1.2)+","+(t+s)+" "+e+","+(t+s)}const n=t.append("polygon");n.attr("points",s(e.x,e.y,50,20,7)),n.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,V4(t,e)},fz=function(o,t,n){const s=o.append("g"),e=ef();e.x=t.x,e.y=t.y,e.fill=t.fill,e.width=n.width,e.height=n.height,e.class="journey-section section-type-"+t.num,e.rx=3,e.ry=3,ou(s,e),Y4(n)(t.text,s,e.x,e.y,e.width,e.height,{class:"journey-section section-type-"+t.num},n,t.colour)};let U2=-1;const dz=function(r,e,n){const o=e.x+n.width/2,s=r.append("g");U2++;const a=300+5*30;s.append("line").attr("id","task"+U2).attr("x1",o).attr("y1",e.y).attr("x2",o).attr("y2",a).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),uz(s,{cx:o,cy:300+(5-e.score)*30,score:e.score});const t=ef();t.x=e.x,t.y=e.y,t.fill=e.fill,t.width=n.width,t.height=n.height,t.class="task task-type-"+e.num,t.rx=3,t.ry=3,ou(s,t);let i=e.x+14;e.people.forEach(t=>{const n=e.actors[t].color,o={cx:i,cy:e.y,r:7,fill:n,stroke:"#000",title:t,pos:e.actors[t].position};P4(s,o),i+=10}),Y4(n)(e.task,s,t.x,t.y,t.width,t.height,{class:"task"},n,e.colour)},pz=function(t,e){ou(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},gz=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},ef=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},Y4=function(){function n(t,n,s,o,i,a,r,c){const l=n.append("text").attr("x",s+i/2).attr("y",o+a/2+5).style("font-color",c).style("text-anchor","middle").text(t);e(l,r)}function t(a,r,s,i,o,h,c,l,d){const{taskFontSize:t,taskFontFamily:u}=l,n=a.split(/<br\s*\/?>/gi);for(let a=0;a<n.length;a++){const m=a*t-t*(n.length-1)/2,l=r.append("text").attr("x",s+o/2).attr("y",i).attr("fill",d).style("text-anchor","middle").style("font-size",t).style("font-family",u);l.append("tspan").attr("x",s+o/2).attr("dy",m).text(n[a]),l.attr("y",i+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),e(l,c)}}function s(n,d,s,o,i,a,r,u){const c=d.append("switch"),l=c.append("foreignObject").attr("x",s).attr("y",o).attr("width",i).attr("height",a).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");l.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,c,s,o,i,a,r,u),e(l,r)}function e(t,e){for(const n in e)n in e&&t.attr(n,e[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),yz=function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},lo={drawRect:ou,drawCircle:P4,drawSection:fz,drawText:V4,drawLabel:hz,drawTask:dz,drawBackgroundRect:pz,getTextObj:gz,getNoteRect:ef,initGraphics:yz},mz=function(e){Object.keys(e).forEach(function(t){lu[t]=e[t]})},$n={};function bz(t){const n=q().journey;let e=60;Object.keys($n).forEach(s=>{const o=$n[s].color,i={cx:20,cy:e,r:7,fill:o,stroke:"#000",pos:$n[s].position};lo.drawCircle(t,i);const a={x:40,y:e+7,fill:"#666",text:s,textMargin:n.boxTextMargin|5};lo.drawText(t,a),e+=20})}const lu=q().journey,Bi=lu.leftMargin,_z=function(p,d,g,n){const t=q().journey;n.db.clear(),n.parser.parse(p+`
`);const c=q().securityLevel;let l;c==="sandbox"&&(l=_t("#i"+d));const f=_t(c==="sandbox"?l.nodes()[0].contentDocument.body:"body");Vr.init();const e=f.select("#"+d);lo.initGraphics(e);const m=n.db.getTasks(),r=n.db.getDiagramTitle(),h=n.db.getActors();for(const e in $n)delete $n[e];let o=0;h.forEach(e=>{$n[e]={color:t.actorColours[o%t.actorColours.length],position:o},o++}),bz(e),Vr.insert(0,0,Bi,Object.keys($n).length*50),xz(e,m,0);const s=Vr.getBounds();r&&e.append("text").text(r).attr("x",Bi).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const i=s.stopy-s.starty+2*t.diagramMarginY,a=Bi+s.stopx+2*t.diagramMarginX;cn(e,i,a,t.useMaxWidth),e.append("line").attr("x1",Bi).attr("y1",t.height*4).attr("x2",a-Bi-4).attr("y2",t.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const u=r?70:0;e.attr("viewBox",`${s.startx} -25 ${a} ${i+u}`),e.attr("preserveAspectRatio","xMinYMin meet"),e.attr("height",i+u+25)},Vr={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(e,t,n,s){e[t]===void 0?e[t]=n:e[t]=s(n,e[t])},updateBounds:function(n,s,o,i){const t=q().journey,e=this;let a=0;function r(r){return function(l){a++;const c=e.sequenceItems.length-a+1;e.updateVal(l,"starty",s-c*t.boxMargin,Math.min),e.updateVal(l,"stopy",i+c*t.boxMargin,Math.max),e.updateVal(Vr.data,"startx",n-c*t.boxMargin,Math.min),e.updateVal(Vr.data,"stopx",o+c*t.boxMargin,Math.max),r!=="activation"&&(e.updateVal(l,"startx",n-c*t.boxMargin,Math.min),e.updateVal(l,"stopx",o+c*t.boxMargin,Math.max),e.updateVal(Vr.data,"starty",s-c*t.boxMargin,Math.min),e.updateVal(Vr.data,"stopy",i+c*t.boxMargin,Math.max))}}this.sequenceItems.forEach(r())},insert:function(e,t,n,s){const o=Math.min(e,n),i=Math.max(e,n),a=Math.min(t,s),r=Math.max(t,s);this.updateVal(Vr.data,"startx",o,Math.min),this.updateVal(Vr.data,"starty",a,Math.min),this.updateVal(Vr.data,"stopx",i,Math.max),this.updateVal(Vr.data,"stopy",r,Math.max),this.updateBounds(o,a,i,r)},bumpVerticalPos:function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},th=lu.sectionFills,W2=lu.sectionColours,xz=function(i,l,d){const e=q().journey;let a="";const r=e.height*2+e.diagramMarginY,c=d+r;let t=0,n="#CCC",o="black",s=0;for(const[d,r]of l.entries()){if(a!==r.section){n=th[t%th.length],s=t%th.length,o=W2[t%W2.length];const c={x:d*e.taskMargin+d*e.width+Bi,y:50,text:r.section,fill:n,num:s,colour:o};lo.drawSection(i,c,e),a=r.section,t++}const u=r.people.reduce((t,e)=>($n[e]&&(t[e]=$n[e]),t),{});r.x=d*e.taskMargin+d*e.width+Bi,r.y=c,r.width=e.diagramMarginX,r.height=e.diagramMarginY,r.colour=o,r.fill=n,r.num=s,r.actors=u,lo.drawTask(i,r,e),Vr.insert(r.x,r.y,r.x+r.width+e.taskMargin,300+5*30)}},H2={setConf:mz,draw:_z};let G2={};const vz=function(e){G2={...G2,...e}},kz=(n,e,t)=>{try{B.debug(`Renering svg for syntax error
`);const s=_t("#"+e),n=s.append("g");n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+t),s.attr("height",100),s.attr("width",500),s.attr("viewBox","768 0 912 512")}catch(e){B.error("Error while rendering info diagram"),B.error(eE(e))}},pc={setConf:vz,draw:kz},z4="flowchart-elk",wz=(e,t)=>{var n;return!!(e.match(/^\s*flowchart-elk/)||e.match(/^\s*flowchart|graph/)&&((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="elk")},Tz=async()=>{const{diagram:e}=await import("./flowchart-elk-definition-09af5231.js");return{id:z4,diagram:e}},Ez={id:z4,detector:wz,loader:Tz},Cz=Ez,U4="timeline",Sz=e=>e.match(/^\s*timeline/)!==null,Az=async()=>{const{diagram:e}=await import("./timeline-definition-d4078a23.js");return{id:U4,diagram:e}},Lz={id:U4,detector:Sz,loader:Az},Bz=Lz,W4="mindmap",Dz=e=>e.match(/^\s*mindmap/)!==null,Iz=async()=>{const{diagram:e}=await import("./mindmap-definition-9cae3198.js");return{id:W4,diagram:e}},Mz={id:W4,detector:Dz,loader:Iz},Nz=Mz;let q2=!1;const Eo=()=>{q2||(q2=!0,Ng(Cz,Bz,Nz),ze("error",{db:{clear:()=>{}},styles:Dh,renderer:pc,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},e=>e.toLowerCase().trim()==="error"),ze("---",{db:{clear:()=>{}},styles:Dh,renderer:pc,parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with unindented `---` blocks")}},init:()=>null},e=>e.toLowerCase().trimStart().startsWith("---")),ze("c4",{parser:TC,db:by,renderer:kd,styles:oy,init:e=>{kd.setConf(e.c4)}},EC),ze("class",{parser:wd,db:ps,renderer:rN,styles:Sa,init:e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,ps.clear()}},m9),ze("classDiagram",{parser:wd,db:ps,renderer:mR,styles:Sa,init:e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,ps.clear()}},b9),ze("er",{parser:bR,db:AR,renderer:QR,styles:ty},_R),ze("gantt",{parser:KF,db:H0,renderer:OO,styles:ey},ZF),ze("info",{parser:PO,db:WO,renderer:GO,styles:ry},qO),ze("pie",{parser:$O,db:rP,renderer:iP,styles:ny},jO),ze("requirement",{parser:sP,db:EP,renderer:NP,styles:iy},aP),ze("sequence",{parser:RP,db:B2,renderer:I2,styles:sy,init:e=>{if(e.sequence||(e.sequence={}),e.sequence.arrowMarkerAbsolute=e.arrowMarkerAbsolute,"sequenceDiagram"in e)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");B2.setWrap(e.wrap),I2.setConf(e.sequence)}},FP),ze("state",{parser:M2,db:Yn,renderer:AY,styles:Hl,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,Yn.clear()}},FV),ze("stateDiagram",{parser:M2,db:Yn,renderer:QY,styles:Hl,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,Yn.clear()}},OV),ze("journey",{parser:JY,db:z2,renderer:H2,styles:ay,init:e=>{H2.setConf(e.journey),z2.clear()}},tz),ze("flowchart",{parser:T2,db:gn,renderer:Ku,styles:Wl,init:e=>{e.flowchart||(e.flowchart={}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,qF.setConf(e.flowchart),gn.clear(),gn.setGen("gen-1")}},JR),ze("flowchart-v2",{parser:T2,db:gn,renderer:Ku,styles:Wl,init:e=>{e.flowchart||(e.flowchart={}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,Kg({flowchart:{arrowMarkerAbsolute:e.arrowMarkerAbsolute}}),Ku.setConf(e.flowchart),gn.clear(),gn.setGen("gen-2")}},tF),ze("gitGraph",{parser:$E,db:dC,renderer:vC,styles:wC},jE))};class E1{constructor(t,s){var o,i;this.txt=t,this.type="graph",this.detectTypeFailed=!1;const n=q();this.txt=t;try{this.type=Q1(t,n)}catch(e){this.handleError(e,s),this.type="error",this.detectTypeFailed=!0}const e=uy(this.type);B.debug("Type "+this.type),this.db=e.db,(i=(o=this.db).clear)==null||i.call(o),this.renderer=e.renderer,this.parser=e.parser;const a=this.parser.parse.bind(this.parser);this.parser.parse=e=>a(Mw(e,this.db)),this.parser.parser.yy=this.db,e.init&&(e.init(n),B.info("Initialized diagram "+this.type,n)),this.txt+=`
`,this.parse(this.txt,s)}parse(e,s){var t,n;if(this.detectTypeFailed)return!1;try{return e=e+`
`,(n=(t=this.db).clear)==null||n.call(t),this.parser.parse(e),!0}catch(e){this.handleError(e,s)}return!1}handleError(e,t){if(t===void 0)throw e;if(t0(e)){t(e.str,e.hash);return}t(e)}getParser(){return this.parser}getType(){return this.type}}const rf=(t,n)=>{const e=Q1(t,q());try{uy(e)}catch{const s=Fw(e);if(!s)throw new Error(`Diagram ${e} not found.`);return s().then(({diagram:s})=>(ze(e,s,void 0),new E1(t,n)))}return new E1(t,n)},nf=E1,Rz="graphics-document document";function Fz(e,t){e.attr("role",Rz),vs(t)||e.attr("aria-roledescription",t)}function Oz(e,t,n,s){if(e.insert!==void 0)if(t||n){{if(n){const t="chart-desc-"+s;e.attr("aria-describedby",t),e.insert("desc",":first-child").attr("id",t).text(n)}if(t){const n="chart-title-"+s;e.attr("aria-labelledby",n),e.insert("title",":first-child").attr("id",n).text(t)}}}else return}const sf=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],H4="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",G4="sandbox",q4="loose",Pz="http://www.w3.org/2000/svg",$4="http://www.w3.org/1999/xlink",j4="http://www.w3.org/1999/xhtml",Vz="100%",Yz="100%",zz="border:0;margin:0;",Uz="margin:0",Wz="allow-top-navigation-by-user-activation allow-popups",Hz='The "iframe" tag is not supported by your browser.',X4=["foreignobject"],K4=["dominant-baseline"];function Gz(e,t){return Eo(),new nf(e,t).parse(e,t)}async function qz(e,t){return Eo(),(await rf(e,t)).parse(e,t)}const Z4=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(e){return e.substring(0,e.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(e){return e.substring(0,e.length-1)}),e=e.replace(/#\w+;/g,function(t){const e=t.substring(1,t.length-1);return/^\+?\d+$/.test(e)?"ﬂ°°"+e+"¶ß":"ﬂ°"+e+"¶ß"}),e},af=function(t){let e=t;return e=e.replace(/ﬂ°°/g,"&#"),e=e.replace(/ﬂ°/g,"&"),e=e.replace(/¶ß/g,";"),e},$2=(e,t,n=[])=>`
.${e} ${t} { ${n.join(" !important; ")} !important; }`,$z=(e,o,n={})=>{var s;let t="";if(e.themeCSS!==void 0&&(t+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(t+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(t+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),!vs(n)&&sf.includes(o)){const o=e.htmlLabels||((s=e.flowchart)==null?void 0:s.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const s in n){const e=n[s];vs(e.styles)||o.forEach(n=>{t+=$2(e.id,n,e.styles)}),vs(e.textStyles)||(t+=$2(e.id,"tspan",e.textStyles))}}return t},Q4=(e,t,n,s)=>{const o=$z(e,t,n),i=PE(t,o,e.themeVariables);return Bh(gE(`${s}{${i}}`),mE)},J4=(t="",n,s)=>{let e=t;return!s&&!n&&(e=e.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),e=af(e),e=e.replace(/<br>/g,"<br/>"),e},t5=(t="",e)=>{const n=e?e.viewBox.baseVal.height+"px":Yz,s=btoa('<body style="'+Uz+'">'+t+"</body>");return`<iframe style="width:${Vz};height:${n};${zz}" src="data:text/html;base64,${s}" sandbox="${Wz}">
  ${Hz}
</iframe>`},gc=(t,i,a,n,s)=>{const e=t.append("div");e.attr("id",a),n&&e.attr("style",n);const o=e.append("svg").attr("id",i).attr("width","100%").attr("xmlns",Pz);return s&&o.attr("xmlns:xlink",s),o.append("g"),t};function yc(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const e5=(e,o,i,a)=>{var t,n,s;(t=e.getElementById(o))==null||t.remove(),(n=e.getElementById(i))==null||n.remove(),(s=e.getElementById(a))==null||s.remove()},jz=function(i,n,a,r){var g,y,v,_;Eo(),Ha();const m=jt.detectInit(n);m&&(Yi(m),n0(m));const o=q();B.debug(o),n.length>((o==null?void 0:o.maxTextSize)??5e4)&&(n=H4),n=n.replace(/\r\n?/g,`
`);const T="#"+i,u="i"+i,F="#"+u,h="d"+i,c="#"+h;let e=_t("body");const l=o.securityLevel===G4,k=o.securityLevel===q4,O=o.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),l){const t=yc(_t(r),u);e=_t(t.nodes()[0].contentDocument.body),e.node().style.margin=0}else e=_t(r);gc(e,i,h,`font-family: ${O}`,$4)}else{if(e5(document,i,h,u),l){const t=yc(_t("body"),u);e=_t(t.nodes()[0].contentDocument.body),e.node().style.margin=0}else e=_t("body");gc(e,i,h)}n=Z4(n);let s,p;try{if(s=rf(n),"then"in s)throw new Error("Diagram is a promise. Use renderAsync.")}catch(e){s=new nf("error"),p=e}const w=e.select(c).node(),d=s.type,j=w.firstChild,x=j.firstChild,C=sf.includes(d)?s.renderer.getClasses(n,s):{},E=Q4(o,d,C,T),b=document.createElement("style");b.innerHTML=E,j.insertBefore(b,x);try{s.renderer.draw(n,i,Ul,s)}catch(e){throw pc.draw(n,i,Ul),e}const A=e.select(`${c} svg`),S=(y=(g=s.db).getAccTitle)==null?void 0:y.call(g),M=(_=(v=s.db).getAccDescription)==null?void 0:_.call(v);r5(d,A,S,M),e.select(`[id="${i}"]`).selectAll("foreignobject > *").attr("xmlns",j4);let t=e.select(c).node().innerHTML;if(B.debug("config.arrowMarkerAbsolute",o.arrowMarkerAbsolute),t=J4(t,l,Ke(o.arrowMarkerAbsolute)),l){const n=e.select(c+" svg").node();t=t5(t,n)}else k||(t=Va.sanitize(t,{ADD_TAGS:X4,ADD_ATTR:K4}));if(a!==void 0)switch(d){case"flowchart":case"flowchart-v2":a(t,gn.bindFunctions);break;case"gantt":a(t,H0.bindFunctions);break;case"class":case"classDiagram":a(t,ps.bindFunctions);break;default:a(t)}else B.debug("CB = undefined!");l4();const f=_t(l?F:c).node();if(f&&"remove"in f&&f.remove(),p)throw p;return t},Xz=async function(i,n,a,r){var g,y,v,_;Eo(),Ha();const m=jt.detectInit(n);m&&(Yi(m),n0(m));const s=q();B.debug(s),n.length>((s==null?void 0:s.maxTextSize)??5e4)&&(n=H4),n=n.replace(/\r\n?/g,`
`);const T="#"+i,u="i"+i,F="#"+u,h="d"+i,c="#"+h;let e=_t("body");const l=s.securityLevel===G4,k=s.securityLevel===q4,O=s.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),l){const t=yc(_t(r),u);e=_t(t.nodes()[0].contentDocument.body),e.node().style.margin=0}else e=_t(r);gc(e,i,h,`font-family: ${O}`,$4)}else{if(e5(document,i,h,u),l){const t=yc(_t("body"),u);e=_t(t.nodes()[0].contentDocument.body),e.node().style.margin=0}else e=_t("body");gc(e,i,h)}n=Z4(n);let o,p;try{o=await rf(n)}catch(e){o=new nf("error"),p=e}const w=e.select(c).node(),d=o.type,j=w.firstChild,x=j.firstChild,C=sf.includes(d)?o.renderer.getClasses(n,o):{},E=Q4(s,d,C,T),b=document.createElement("style");b.innerHTML=E,j.insertBefore(b,x);try{await o.renderer.draw(n,i,Ul,o)}catch(e){throw pc.draw(n,i,Ul),e}const A=e.select(`${c} svg`),S=(y=(g=o.db).getAccTitle)==null?void 0:y.call(g),M=(_=(v=o.db).getAccDescription)==null?void 0:_.call(v);r5(d,A,S,M),e.select(`[id="${i}"]`).selectAll("foreignobject > *").attr("xmlns",j4);let t=e.select(c).node().innerHTML;if(B.debug("config.arrowMarkerAbsolute",s.arrowMarkerAbsolute),t=J4(t,l,Ke(s.arrowMarkerAbsolute)),l){const n=e.select(c+" svg").node();t=t5(t,n)}else k||(t=Va.sanitize(t,{ADD_TAGS:X4,ADD_ATTR:K4}));if(a!==void 0)switch(d){case"flowchart":case"flowchart-v2":a(t,gn.bindFunctions);break;case"gantt":a(t,H0.bindFunctions);break;case"class":case"classDiagram":a(t,ps.bindFunctions);break;default:a(t)}else B.debug("CB = undefined!");l4();const f=_t(l?F:c).node();if(f&&"remove"in f&&f.remove(),p)throw p;return t};function Kz(e={}){var t;e!=null&&e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={fontFamily:e.fontFamily}),_E(e),e!=null&&e.theme&&e.theme in jn?e.themeVariables=jn[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=jn.default.getThemeVariables(e.themeVariables));const n=typeof e=="object"?bE(e):Xg();C1(n.logLevel),Eo()}function r5(t,e,n,s){Fz(e,t),Oz(e,n,s,e.attr("id"))}const xe=Object.freeze({render:jz,renderAsync:Xz,parse:Gz,parseAsync:qz,parseDirective:ly,initialize:Kz,getConfig:q,setConfig:Kg,getSiteConfig:Xg,updateSiteConfig:xE,reset:()=>{Ha()},globalReset:()=>{Ha(Fs)},defaultConfig:Fs});C1(q().logLevel),Ha(q());const Zz=async function(e,t,n){try{await i5(e,t,n)}catch(e){B.warn("Syntax Error rendering"),t0(e)&&B.warn(e.str),an.parseError&&an.parseError(e)}},n5=(e,n,t)=>{B.warn(e),t0(e)?(t&&t(e.str,e.hash),n.push({...e,message:e.str,error:e})):(t&&t(e),e instanceof Error&&n.push({str:e.message,message:e.message,hash:e.name,error:e}))},Qz=function(e,t,o){const a=xe.getConfig();e&&(an.sequenceConfig=e),B.debug(`${o?"":"No "}Callback function found`);let n;if(t===void 0)n=document.querySelectorAll(".mermaid");else if(typeof t=="string")n=document.querySelectorAll(t);else if(t instanceof HTMLElement)n=[t];else if(t instanceof NodeList)n=t;else throw new Error("Invalid argument nodes for mermaid.init");B.debug(`Found ${n.length} diagrams`),(e==null?void 0:e.startOnLoad)!==void 0&&(B.debug("Start On Load: "+(e==null?void 0:e.startOnLoad)),xe.updateSiteConfig({startOnLoad:e==null?void 0:e.startOnLoad}));const r=new jt.initIdGenerator(a.deterministicIds,a.deterministicIDSeed);let s;const i=[];for(const e of Array.from(n)){if(B.info("Rendering diagram: "+e.id),e.getAttribute("data-processed"))continue;e.setAttribute("data-processed","true");const t=`mermaid-${r.next()}`;s=e.innerHTML,s=j2(jt.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");const a=jt.detectInit(s);a&&B.debug("Detected early reinit: ",a);try{xe.render(t,s,(s,n)=>{e.innerHTML=s,o!==void 0&&o(t),n&&n(e)},e)}catch(e){n5(e,i,an.parseError)}}if(i.length>0)throw i[0]},Jz=async(...t)=>{B.debug(`Loading ${t.length} external diagrams`);const e=(await Promise.allSettled(t.map(async({id:e,detector:t,loader:n})=>{const{diagram:s}=await n();ze(e,s,t)}))).filter(e=>e.status==="rejected");if(e.length>0){B.error(`Failed to load ${e.length} external diagrams`);for(const t of e)B.error(t);throw new Error(`Failed to load ${e.length} external diagrams`)}},i5=async function(e,t,o){const a=xe.getConfig();e&&(an.sequenceConfig=e),B.debug(`${o?"":"No "}Callback function found`);let n;if(t===void 0)n=document.querySelectorAll(".mermaid");else if(typeof t=="string")n=document.querySelectorAll(t);else if(t instanceof HTMLElement)n=[t];else if(t instanceof NodeList)n=t;else throw new Error("Invalid argument nodes for mermaid.init");B.debug(`Found ${n.length} diagrams`),(e==null?void 0:e.startOnLoad)!==void 0&&(B.debug("Start On Load: "+(e==null?void 0:e.startOnLoad)),xe.updateSiteConfig({startOnLoad:e==null?void 0:e.startOnLoad}));const r=new jt.initIdGenerator(a.deterministicIds,a.deterministicIDSeed);let s;const i=[];for(const e of Array.from(n)){if(B.info("Rendering diagram: "+e.id),e.getAttribute("data-processed"))continue;e.setAttribute("data-processed","true");const t=`mermaid-${r.next()}`;s=e.innerHTML,s=j2(jt.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");const a=jt.detectInit(s);a&&B.debug("Detected early reinit: ",a);try{await xe.renderAsync(t,s,(s,n)=>{e.innerHTML=s,o!==void 0&&o(t),n&&n(e)},e)}catch(e){n5(e,i,an.parseError)}}if(i.length>0)throw i[0]},tU=function(e){xe.initialize(e)},eU=async(e,{lazyLoad:t=!0}={})=>{t?Ng(...e):await Jz(...e)},s5=function(){if(an.startOnLoad){const{startOnLoad:e}=xe.getConfig();e&&an.init().catch(e=>B.error("Mermaid failed to initialize",e))}};typeof document<"u"&&window.addEventListener("load",s5,!1);const rU=function(e){an.parseError=e},nU=e=>xe.parse(e,an.parseError),mc=[];let eh=!1;const a5=async()=>{if(!eh){for(eh=!0;mc.length>0;){const e=mc.shift();if(e)try{await e()}catch(e){B.error("Error executing queue",e)}}eh=!1}},iU=e=>new Promise((n,t)=>{const s=()=>new Promise((s,o)=>{xe.parseAsync(e,an.parseError).then(e=>{s(e),n(e)},e=>{B.error("Error parsing",e),o(e),t(e)})});mc.push(s),a5().catch(t)}),sU=(e,t,n,s)=>new Promise((i,o)=>{const a=()=>new Promise((a,r)=>{xe.renderAsync(e,t,n,s).then(e=>{a(e),i(e)},e=>{B.error("Error parsing",e),r(e),o(e)})});mc.push(a),a5().catch(o)}),an={startOnLoad:!0,diagrams:{},mermaidAPI:xe,parse:nU,parseAsync:iU,render:xe.render,renderAsync:sU,init:Zz,initThrowsErrors:Qz,initThrowsErrorsAsync:i5,registerExternalDiagrams:eU,initialize:tU,parseError:void 0,contentLoaded:s5,setParseErrorHandler:rU};export{Zn as C,ee as _,q as a,Oc as b,bc as c,yi as d,Ke as e,N0 as f,aU as g,Xt as h,yN as i,KN as j,Qr as k,B as l,Ar as m,oR as n,js as o,fU as p,T2 as q,YE as r,_t as s,ly as t,Br as u,xh as v,zt as w,Zt as x,Ur as y,an as default,}